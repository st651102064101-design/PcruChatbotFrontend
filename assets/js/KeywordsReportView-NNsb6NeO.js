import{r as e,I as a,H as s,l,g as t,e as r,c as i,o,d as n,h as d,n as c,t as u,p as v,i as p,F as b,b as y,y as h,a as g,u as f,s as w,G as m,w as k,z as x,q as C,f as D}from"./vue-vendor-CaqZERVf.js";import{_ as I,i as K,A,b as Q,S as T,c as L,a as M}from"./index-CjxO0-0y.js";import{P as O,B}from"./index-DlWMEZ1A.js";import{c as F,W as S}from"./dashboard-styles-CiicuUba.js";import{C as _,r as j}from"./chart-CicJT4lR.js";import"./axios-vendor-Dos3PyFQ.js";const N={class:"dashboard-wrapper"},E={class:"container-fluid pb-5 content-layer"},R={class:"d-flex align-items-end justify-content-between mb-5 header-animate"},P={class:"status-text"},$={class:"glass-panel mb-5 p-4 announcement-panel header-animate"},V={class:"d-flex align-items-start gap-3"},q={class:"flex-grow-1"},H={class:"announcement-text"},U={key:0},W={key:0,class:"text-secondary"},Y={key:1},Z={key:0,class:"loader-container fade-in"},z={class:"spinner-apple"},G={key:1,class:"error-card glass-panel mx-auto fade-in"},J={key:2,class:"content-animate"},X={class:"stats-grid mb-5"},ee={class:"stat-card glass-panel hover-lift"},ae={class:"stat-info"},se={class:"stat-number"},le={class:"stat-card glass-panel hover-lift"},te={class:"stat-info"},re=["title"],ie={class:"row mb-5 g-4"},oe={class:"col-12 col-lg-6"},ne={class:"chart-container glass-panel h-100"},de={class:"chart-wrapper"},ce={class:"col-12 col-lg-6"},ue={class:"chart-container glass-panel h-100"},ve={class:"chart-wrapper"},pe={class:"glass-panel main-table-panel"},be={class:"panel-toolbar p-4 d-flex justify-content-between align-items-center"},ye={class:"search-capsule"},he={class:"custom-list-container"},ge={class:"list-body"},fe=["onClick"],we={class:"col-id"},me={class:"id-badge"},ke={class:"col-kw"},xe={class:"keyword-text"},Ce={class:"col-context"},De={class:"badge-soft"},Ie={class:"col-action"},Ke={key:0,class:"ai-expand-panel"},Ae={key:0,class:"text-center py-5"},Qe={key:1,class:"matches-container"},Te={key:0},Le={class:"ai-card user-card slide-in-left"},Me={class:"card-body-text"},Oe={class:"ai-card system-card slide-in-right"},Be={key:0,class:"text-end mt-2"},Fe=["onClick"],Se={class:"ai-tags"},_e={class:"ai-pill"},je={key:0,class:"ai-pill"},Ne={key:0,class:"text-center mt-3"},Ee=["onClick"],Re={key:1,class:"text-center py-5 text-secondary"},Pe={key:0,class:"empty-placeholder"},$e={class:"panel-footer p-3"},Ve={class:"pagination-ios"},qe=["disabled"],He={class:"page-info"},Ue=["disabled"],We="1. ภาคปกติ ระดับปริญญาตรี ประเภทโควตารับตรง (คณะวิทยาการจัดการ, คณะมนุษยศาสตร์ฯ, คณะวิทยาศาสตร์ฯ, คณะเทคโนโลยีการเกษตรฯ) สมัครออนไลน์: 21 ก.ค. 68 – 25 พ.ย. 68 สมัครที่มหาวิทยาลัย: 21 ก.ค. 68 – 28 พ.ย. 68\n\n2. ภาคปกติ ระดับปริญญาตรี ประเภทรับตรงทั่วไป (คณะวิทยาการจัดการ, คณะมนุษยศาสตร์ฯ, คณะวิทยาศาสตร์ฯ, คณะเทคโนโลยีการเกษตรฯ)) สมัครออนไลน์: 29 พ.ย. 68 – 13 มี.ค. 69 สมัครที่มหาวิทยาลัย: 29 พ.ย. 68 – 20 มี.ค. 69\n\n3. ภาคปกติ ระดับปริญญาตรี ประเภท Portfolio (คณะครุศาสตร์ทุกสาขา และคณะเกษตร สาขาวิชาการงานอาชีพและเทคโนโลยี และสาขาวิชาวิศวกรรมอิเล็กทรอนิกส์และระบบอัตโนมัติ) สมัครออนไลน์: 4 – 17 เม.ย. 69 สมัครที่มหาวิทยาลัย: 4 – 20 เม.ย. 69\n\n4. ภาคปกติ ระดับปริญญาตรี ประเภทรับตรงแบบมีการสอบ (คณะครุศาสตร์ทุกสาขา และคณะเกษตร สาขาวิชาการงานอาชีพและเทคโนโลยี และสาขาวิชาวิศวกรรมอิเล็กทรอนิกส์และระบบอัตโนมัติ) สมัครออนไลน์: 4 เม.ย. – 10 พ.ค. 69 สมัครที่มหาวิทยาลัย: 4 เม.ย. – 22 พ.ค. 69\n\n5. ภาคปกติ ระดับปริญญาตรี ประเภทโควตาแบบมีการสอบและรับตรงแบบมีการสอบ (คณะพยาบาล) สมัครออนไลน์: 22 ธ.ค. 68 – 23 ม.ค. 69 สมัครที่มหาวิทยาลัย: 22 ธ.ค. 68 – 30 ม.ค. 69\n\n6. ภาค กศ.ปช. ระดับปริญญาตรี รอบที่ 1: 21 ก.ค. – 25 พ.ย. 68 (ออนไลน์) หรือถึง 28 พ.ย. 68 (ที่มหาวิทยาลัย) รอบที่ 2: 29 พ.ย. 68 – 13 มี.ค. 69 (ออนไลน์) หรือถึง 20 มี.ค. 69 (ที่มหาวิทยาลัย)\n\n7. ภาคปกติ ระดับปริญญาตรี (รอบเพิ่มเติม) (คณะวิทยาการจัดการ, คณะมนุษยศาสตร์ฯ, คณะวิทยาศาสตร์ฯ, คณะเทคโนโลยีการเกษตรฯ) ช่วงเวลา: 21 มี.ค. – 3 ก.ค. 69 (เปิดรับเฉพาะสาขาที่ยังไม่เต็ม)\n\n8. ภาค กศ.ปช. ระดับปริญญาตรี (รอบเพิ่มเติม) (คณะวิทยาการจัดการ, คณะมนุษยศาสตร์ฯ, คณะวิทยาศาสตร์ฯ, คณะเทคโนโลยีการเกษตรฯ)) ช่วงเวลา: 21 มี.ค. – 21 มิ.ย. 69 (เปิดรับเฉพาะสาขาที่ยังไม่เต็ม)",Ye=I({__name:"KeywordsReport",props:{keywords:{type:Array,default:()=>[]},keywordsLoading:{type:Boolean,default:!1},keywordsError:{type:[String,null],default:null},keywordsPieChartData:Object,keywordsBarChartData:Object,chartOptions:Object,barChartOptions:Object,searchQueryKeywords:{type:String,default:""}},emits:["update:searchQueryKeywords","refresh"],setup(D,{emit:I}){_.register(...j);const Q=D,T=I,L=e(!1),M=e({sortBy:"id",sortOrder:"asc",status:""}),Ye=[{value:"id",label:"ID"},{value:"keyword",label:"Keyword"},{value:"matches",label:"จำนวน Matches"}],Ze=[{value:"has_matches",label:"มี Matches",icon:"bi bi-check-circle-fill",color:"status-green"},{value:"no_matches",label:"ไม่มี Matches",icon:"bi bi-x-circle",color:"status-gray"}],ze=()=>{xa.value=1},Ge=e(null),{appContext:Je}=a(),Xe=Je.config.globalProperties.$axios;let ea=null;s(()=>{ea&&ea.disconnect(),document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),K.value=!1});const aa=e(!1),sa=l(()=>We.length>300),la=l(()=>We.slice(0,300)),ta=()=>{aa.value=!aa.value},ra=e=>e.Matches&&Array.isArray(e.Matches)&&e.Matches.length>0?e.Matches.map(e=>({...e,QuestionText:e.QuestionText||e.Answer})):e.Questions&&Array.isArray(e.Questions)&&e.Questions.length>0?e.Questions.map(e=>({...e,QuestionText:e.QuestionText||e.Answer})):e.QuestionTitle||e.QuestionText||e.Answer?[{QuestionsAnswersID:e.QuestionsAnswersID,QuestionTitle:e.QuestionTitle||e.Question,QuestionText:e.QuestionText||e.Answer,CategoriesID:e.CategoriesID}]:[],ia=e({}),oa=e({}),na=e=>!!oa.value[e.KeywordID],da=e=>{const a=ya(e)||[];return na(e)?a:a.slice(0,5)},ca=e({}),ua=(e,a)=>`${e.KeywordID}::${a}`,va=(e,a)=>!!ca.value[ua(e,a)],pa=e=>ia.value[e.KeywordID]||null,ba=async e=>{if(!e||!e.KeywordText)return;const a=e.KeywordID;if(!ia.value[a]||!ia.value[a].loading){ia.value={...ia.value,[a]:{loading:!0,error:null,data:null}};try{const s=(await Xe.get("/keywords/insights",{params:{keyword:e.KeywordText}})).data||null;ia.value={...ia.value,[a]:{loading:!1,error:null,data:s}}}catch(s){ia.value={...ia.value,[a]:{loading:!1,error:s.message||"Failed to fetch insights",data:null}}}}},ya=e=>{const a=ia.value[e.KeywordID];return a&&a.data&&Array.isArray(a.data.relatedQAs)&&a.data.relatedQAs.length>0?a.data.relatedQAs.map(e=>({QuestionsAnswersID:e.QuestionsAnswersID,QuestionTitle:e.QuestionTitle,QuestionText:e.QuestionText||e.Answer||null,CategoriesID:e.CategoriesID||null})):ra(e)},ha=e=>{const a=ia.value[e.KeywordID];if(a&&a.loading)return"Loading...";if(e&&null!=e.MatchesCount)return Number(e.MatchesCount)>0?`${e.MatchesCount} Matches`:"No Data";if(a&&a.data&&Array.isArray(a.data.relatedQAs)){const e=a.data.relatedQAs.length;return e>0?`${e} Matches`:"No Data"}const s=ra(e);return s.length>0?`${s.length} Matches`:"No Data"};t(()=>{ea=F(S.KEYWORDS,{axios:Xe,onMessage:e=>{"KEYWORD_UPDATE"===e.type&&T("refresh")},onOpen:()=>L.value=!0,onClose:()=>L.value=!1});const e=setTimeout(()=>{if(Ka.value.length>0){const e=Ka.value[0];Ge.value=e.KeywordID,ba(e)}},300);s(()=>clearTimeout(e))}),s(()=>{ea&&ea.disconnect()});const ga=e(Q.searchQueryKeywords||"");r(()=>Q.searchQueryKeywords,e=>{e!==ga.value&&(ga.value=e)}),r(ga,e=>T("update:searchQueryKeywords",e));const fa=l(()=>Array.isArray(Q.keywords)?Q.keywords:[]),wa=l(()=>{if(Q.keywordsBarChartData?.labels?.length>0){const e=Q.keywordsBarChartData.datasets?.[0]?.data||[];if(0===e.length)return"None";const a=e.indexOf(Math.max(...e));return Q.keywordsBarChartData.labels[a]||"None"}return"None"}),ma=e=>{if(e&&null!=e.MatchesCount)return Number(e.MatchesCount)||0;return ra(e).length},ka=l(()=>{let e=[...fa.value];const a=(ga.value||"").toString().trim().toLowerCase();a&&(e=e.filter(e=>null!=e.KeywordID&&String(e.KeywordID).includes(a)||e.KeywordText&&String(e.KeywordText).toLowerCase().includes(a))),"has_matches"===M.value.status?e=e.filter(e=>ma(e)>0):"no_matches"===M.value.status&&(e=e.filter(e=>0===ma(e)));const s=M.value.sortBy,l=M.value.sortOrder;return e.sort((e,a)=>{let t,r;switch(s){case"id":t=Number(e.KeywordID)||0,r=Number(a.KeywordID)||0;break;case"keyword":t=(e.KeywordText||"").toLowerCase(),r=(a.KeywordText||"").toLowerCase();break;case"matches":t=ma(e),r=ma(a);break;default:t=e.KeywordID,r=a.KeywordID}return t<r?"asc"===l?-1:1:t>r?"asc"===l?1:-1:0}),e}),xa=e(1),Ca=e(5);r(ga,()=>{xa.value=1});const Da=l(()=>ka.value.length),Ia=l(()=>Math.max(1,Math.ceil(Da.value/Ca.value))),Ka=l(()=>{const e=(xa.value-1)*Ca.value;return ka.value.slice(e,e+Ca.value)});function Aa(){xa.value>1&&xa.value--}function Qa(){xa.value<Ia.value&&xa.value++}return(e,a)=>(o(),i("div",N,[a[32]||(a[32]=n("div",{class:"ambient-background"},null,-1)),n("div",E,[n("div",R,[a[4]||(a[4]=d('<div class="d-flex align-items-center gap-4" data-v-d5f77fe7><div class="hero-icon-container" data-v-d5f77fe7><svg viewBox="0 0 24 24" class="hero-svg" fill="none" stroke="currentColor" stroke-width="2" data-v-d5f77fe7><path class="path-draw" d="M21 21l-4.35-4.35" stroke-linecap="round" data-v-d5f77fe7></path><circle class="circle-pulse" cx="11" cy="11" r="8" data-v-d5f77fe7></circle><path class="sparkle-1" d="M21 5l-2 2" stroke-linecap="round" data-v-d5f77fe7></path><path class="sparkle-2" d="M5 21l2-2" stroke-linecap="round" data-v-d5f77fe7></path></svg><div class="glow-effect" data-v-d5f77fe7></div></div><div data-v-d5f77fe7><h1 class="display-title" data-v-d5f77fe7>Keywords</h1><p class="subtitle" data-v-d5f77fe7>Real-time search intent &amp; Q&amp;A analysis</p></div></div>',1)),n("div",{class:c(["status-capsule glass-panel",{"is-live":L.value}])},[a[3]||(a[3]=n("div",{class:"pulse-ring"},null,-1)),n("span",P,u(L.value?"Live":"Connecting..."),1)],2)]),n("div",$,[n("div",V,[a[6]||(a[6]=n("div",{class:"announcement-icon"},[n("i",{class:"bi bi-megaphone-fill"})],-1)),n("div",q,[a[5]||(a[5]=n("h5",{class:"mb-2 fw-bold",style:{color:"var(--text-primary)"}},"ประกาศรับสมัครนักศึกษา",-1)),n("div",H,[aa.value?(o(),i("span",Y,u(We))):(o(),i("span",U,[p(u(la.value)+" ",1),sa.value?(o(),i("span",W,"...")):v("",!0)]))]),sa.value?(o(),i("button",{key:0,onClick:ta,class:"btn-read-more mt-2"},[p(u(aa.value?"ซ่อนบางส่วน":"อ่านต่อ")+" ",1),n("i",{class:c(["bi",aa.value?"bi-chevron-up":"bi-chevron-down"])},null,2)])):v("",!0)])])]),D.keywordsLoading?(o(),i("div",Z,[n("div",z,[(o(),i(b,null,y(12,e=>n("div",{class:"bar",key:e,style:h({animationDelay:`-${1.2-.1*e}s`,transform:`rotate(${30*e}deg) translate(0, -142%)`})},null,4)),64))]),a[7]||(a[7]=n("p",{class:"loading-text"},"Syncing Data...",-1))])):D.keywordsError?(o(),i("div",G,[a[8]||(a[8]=n("div",{class:"error-icon"},[n("i",{class:"bi bi-exclamation-triangle-fill"})],-1)),a[9]||(a[9]=n("h3",null,"Unable to Load",-1)),n("p",null,u(D.keywordsError),1)])):(o(),i("div",J,[n("div",X,[n("div",ee,[a[11]||(a[11]=n("div",{class:"stat-icon blue-glow"},[n("i",{class:"bi bi-grid-fill"})],-1)),n("div",ae,[a[10]||(a[10]=n("span",{class:"stat-label"},"Total Index",-1)),n("span",se,u(Da.value),1)]),a[12]||(a[12]=n("div",{class:"stat-chart-mini"},[n("svg",{viewBox:"0 0 100 20",class:"wave-svg"},[n("path",{d:"M0 10 Q 25 20, 50 10 T 100 10",fill:"none",stroke:"rgba(0,113,227,0.3)","stroke-width":"2"})])],-1))]),n("div",le,[a[14]||(a[14]=n("div",{class:"stat-icon orange-glow"},[n("i",{class:"bi bi-lightning-charge-fill"})],-1)),n("div",te,[a[13]||(a[13]=n("span",{class:"stat-label"},"Trending Now",-1)),n("span",{class:"stat-number text-truncate",title:wa.value},u(wa.value),9,re)])]),a[15]||(a[15]=d('<div class="stat-card glass-panel hover-lift" data-v-d5f77fe7><div class="stat-icon purple-glow" data-v-d5f77fe7><i class="bi bi-chat-quote-fill" data-v-d5f77fe7></i></div><div class="stat-info" data-v-d5f77fe7><span class="stat-label" data-v-d5f77fe7>Q&amp;A Engagement</span><span class="stat-number" data-v-d5f77fe7>98.2%</span></div></div>',1))]),n("div",ie,[n("div",oe,[n("div",ne,[a[16]||(a[16]=n("div",{class:"panel-header"},[n("h5",null,"Distribution")],-1)),n("div",de,[g(f(O),{"chart-data":D.keywordsPieChartData,"chart-options":D.chartOptions,style:{height:"240px"}},null,8,["chart-data","chart-options"])])])]),n("div",ce,[n("div",ue,[a[17]||(a[17]=n("div",{class:"panel-header"},[n("h5",null,"Frequency Volume")],-1)),n("div",ve,[g(f(B),{"chart-data":D.keywordsBarChartData,"chart-options":D.barChartOptions,style:{height:"240px"}},null,8,["chart-data","chart-options"])])])])]),g(A,{modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),"sort-options":Ye,statuses:Ze,"status-label":"สถานะ","show-date-range":!1,"show-date-presets":!1,"show-number-range":!1,class:"mb-4",onChange:ze},null,8,["modelValue"]),n("div",pe,[n("div",be,[a[20]||(a[20]=n("div",{class:"toolbar-left"},[n("h4",{class:"m-0"},"Keyword Insights")],-1)),n("div",ye,[a[19]||(a[19]=n("i",{class:"bi bi-search"},null,-1)),w(n("input",{type:"text",placeholder:"Search keywords...","onUpdate:modelValue":a[1]||(a[1]=e=>ga.value=e)},null,512),[[m,ga.value]]),ga.value?(o(),i("button",{key:0,onClick:a[2]||(a[2]=e=>ga.value=""),class:"clear-btn"},[...a[18]||(a[18]=[n("i",{class:"bi bi-x-circle-fill"},null,-1)])])):v("",!0)])]),n("div",he,[a[29]||(a[29]=d('<div class="list-header" data-v-d5f77fe7><div class="col-id" data-v-d5f77fe7>ID</div><div class="col-kw" data-v-d5f77fe7>KEYWORD</div><div class="col-context" data-v-d5f77fe7>CONTEXT</div><div class="col-action" data-v-d5f77fe7></div></div>',1)),n("div",ge,[(o(!0),i(b,null,y(Ka.value,e=>(o(),i("div",{key:e.KeywordID,class:"list-row-wrapper"},[n("div",{class:c(["list-row",{"is-expanded":Ge.value===e.KeywordID}]),onClick:a=>(e=>{const a=Ge.value===e.KeywordID?null:e.KeywordID;Ge.value=a,a&&!ia.value[e.KeywordID]&&ba(e)})(e)},[n("div",we,[n("span",me,"#"+u(e.KeywordID),1)]),n("div",ke,[n("span",xe,u(e.KeywordText),1)]),n("div",Ce,[n("span",De,u(ha(e)),1)]),n("div",Ie,[n("div",{class:c(["chevron-circle",{rotated:Ge.value===e.KeywordID}])},[...a[21]||(a[21]=[n("i",{class:"bi bi-chevron-down"},null,-1)])],2)])],10,fe),g(C,{name:"expand-fade"},{default:k(()=>[Ge.value===e.KeywordID?(o(),i("div",Ke,[a[27]||(a[27]=n("div",{class:"ai-ambient-layer-white"},null,-1)),pa(e)?.loading?(o(),i("div",Ae,[...a[22]||(a[22]=[n("div",{class:"spinner-border text-primary mb-2",role:"status"},null,-1),n("div",{class:"text-muted small"},"กำลังโหลดข้อมูลคำถาม-คำตอบ...",-1)])])):(o(),i("div",Qe,[ya(e).length>0?(o(),i("div",Te,[(o(!0),i(b,null,y(da(e),(s,l)=>(o(),i("div",{key:s.QuestionsAnswersID||l,class:"ai-content-wrapper mb-4 border-bottom pb-4"},[n("div",Le,[a[23]||(a[23]=n("div",{class:"card-header-row"},[n("div",{class:"icon-bubble user-bubble-clean"},[n("i",{class:"bi bi-person-fill"})]),n("span",{class:"card-label"},"คำถาม (QuestionTitle)")],-1)),n("div",Me,u(s.QuestionTitle||"-"),1)]),a[25]||(a[25]=n("div",{class:"ai-flow-connector"},[n("svg",{class:"flow-svg",viewBox:"0 0 200 60",preserveAspectRatio:"none"},[n("path",{class:"path-track",d:"M0,30 C60,30 80,30 100,30 C120,30 140,30 200,30"}),n("circle",{class:"energy-dot",r:"4",fill:"#1d1d1f"},[n("animateMotion",{dur:"2s",repeatCount:"indefinite",path:"M0,30 C60,30 80,30 100,30 C120,30 140,30 200,30",keyPoints:"0;1",keyTimes:"0;1",calcMode:"spline",keySplines:"0.4 0 0.2 1"})])]),n("svg",{class:"flow-svg-vertical",viewBox:"0 0 24 140",preserveAspectRatio:"none"},[n("path",{class:"path-track-vertical",d:"M12,0 L12,140"}),n("circle",{class:"energy-dot",r:"4",fill:"#1d1d1f"},[n("animateMotion",{dur:"2s",repeatCount:"indefinite",path:"M12,0 L12,140"})])]),n("div",{class:"core-wrapper"},[n("div",{class:"ai-core-pulse-clean"}),n("div",{class:"ai-core-ring-clean"})])],-1)),n("div",Oe,[a[24]||(a[24]=n("div",{class:"card-header-row"},[n("div",{class:"icon-bubble ai-bubble-clean"},[n("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"#1d1d1f"},[n("path",{d:"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z"})])]),n("span",{class:"card-label"},"คำตอบ (QuestionText)")],-1)),n("div",{class:c(["card-body-text",{clamped:!va(e,l)}])},u(s.QuestionText||"-"),3),(s.QuestionText||"").length>300?(o(),i("div",Be,[n("button",{class:"matches-read-more",onClick:x(a=>((e,a)=>{const s=ua(e,a);ca.value={...ca.value,[s]:!ca.value[s]}})(e,l),["stop"])},[p(u(va(e,l)?"ซ่อน":"อ่านต่อ")+" ",1),n("i",{class:c(va(e,l)?"bi bi-chevron-up":"bi bi-chevron-down"),style:{"margin-left":"8px"}},null,2)],8,Fe)])):v("",!0),n("div",Se,[n("span",_e,"QA ID: "+u(s.QuestionsAnswersID),1),s.CategoriesID?(o(),i("span",je,"Cat ID: "+u(s.CategoriesID),1)):v("",!0)])])]))),128)),ya(e).length>5?(o(),i("div",Ne,[n("button",{class:"btn-read-more matches-read-more",onClick:x(a=>(e=>{const a=e.KeywordID;oa.value={...oa.value,[a]:!oa.value[a]}})(e),["stop"])},[p(u(na(e)?"ซ่อน":"อ่านต่อ")+" ",1),n("i",{class:c(na(e)?"bi bi-chevron-up":"bi bi-chevron-down"),style:{"margin-left":"8px"}},null,2)],8,Ee)])):v("",!0)])):(o(),i("div",Re,[...a[26]||(a[26]=[n("i",{class:"bi bi-inbox-fill fs-3 mb-2 d-block"},null,-1),n("span",null,"ไม่พบข้อมูลคำถาม-คำตอบที่เชื่อมโยงกับ Keyword นี้ในฐานข้อมูล",-1)])]))]))])):v("",!0)]),_:2},1024)]))),128)),0===ka.value.length?(o(),i("div",Pe,[...a[28]||(a[28]=[n("div",{class:"floating-magnifier"},[n("i",{class:"bi bi-search"})],-1),n("p",null,"No keywords found",-1)])])):v("",!0)])]),n("div",$e,[n("div",Ve,[n("button",{class:"page-btn",disabled:1===xa.value,onClick:Aa},[...a[30]||(a[30]=[n("i",{class:"bi bi-chevron-left"},null,-1)])],8,qe),n("span",He,u(xa.value)+" of "+u(Ia.value),1),n("button",{class:"page-btn",disabled:xa.value===Ia.value,onClick:Qa},[...a[31]||(a[31]=[n("i",{class:"bi bi-chevron-right"},null,-1)])],8,Ue)])])])]))])]))}},[["__scopeId","data-v-d5f77fe7"]]),Ze={class:"report-page-container"},ze={class:"main-content flex-grow-1"},Ge={class:"apple-dashboard"},Je={class:"dashboard-hero"},Xe={class:"hero-content"},ea=["aria-label"],aa={class:"reports-grid"},sa=I({__name:"KeywordsReportView",setup(r){_.register(...j);const d=D(),{appContext:c}=a(),{$axios:u}=c.config.globalProperties,p=e({}),b=e(""),y=e([]),h=e(!0),w=e(null),m=["#007AFF","#5856D6","#FF9500","#34C759","#FF3B30","#AF52DE","#00C7BE","#FF2D55","#5AC8FA","#FFCC00","#FF6482","#30D158"],k=e({responsive:!0,maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"right"},tooltip:{cornerRadius:12}}}),C=e({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0},x:{grid:{display:!1}}},borderRadius:8}),I=l(()=>{const e=Array.isArray(y.value)?y.value:[];return{labels:e.slice(0,10).map(e=>e.KeywordText),datasets:[{data:e.slice(0,10).map(e=>e.HitCount||1),backgroundColor:m}]}}),A=l(()=>{const e=Array.isArray(y.value)?y.value:[];return{labels:e.slice(0,10).map(e=>e.KeywordText),datasets:[{label:"Hit Count",data:e.slice(0,10).map(e=>e.HitCount||1),backgroundColor:m}]}});let O=null,B=null;const F=()=>{const e=document.querySelector(".sidebar");!K.value?(B=M.value,M.value=!1,e&&e.classList.remove("collapsed"),document.body.classList.add("sidebar-open"),document.body.classList.add("sidebar-mobile-expanded"),K.value=!0):(M.value=!!B,e&&B&&e.classList.add("collapsed"),document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),K.value=!1,B=null)};return t(()=>{O=Q();const e=localStorage.getItem("userToken"),a=localStorage.getItem("userType"),s=localStorage.getItem("userInfo");if(e){if(a&&(b.value=a),s)try{p.value=JSON.parse(s)}catch(l){}(async()=>{h.value=!0;try{const e=await u.get("/keywords");y.value=e.data?.data||e.data||[]}catch(e){w.value=e.response?.data?.message||"Failed to load keywords."}finally{h.value=!1}})()}else d.replace({name:"login"})}),s(()=>{"function"==typeof O&&O(),K.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded")}),(e,a)=>(o(),i("div",Ze,[g(T,{userType:b.value,userInfoObject:p.value},null,8,["userType","userInfoObject"]),f(K)?(o(),i("div",{key:0,class:"mobile-sidebar-backdrop",onClick:F,"aria-hidden":"true"})):v("",!0),n("main",ze,[n("div",Ge,[n("div",Je,[n("div",Xe,[n("button",{class:"mobile-sidebar-toggle mobile-inline-toggle",onClick:x(F,["stop"]),"aria-label":f(K)?"Close sidebar":"Open sidebar"},[g(L,{isOpen:f(K)},null,8,["isOpen"])],8,ea),a[0]||(a[0]=n("h1",{class:"hero-title"}," Keywords Report",-1)),a[1]||(a[1]=n("p",{class:"hero-subtitle"},"รายงานคีย์เวิร์ด",-1))])]),n("div",aa,[g(Ye,{keywords:y.value,keywordsLoading:h.value,keywordsError:w.value,keywordsPieChartData:I.value,keywordsBarChartData:A.value,chartOptions:k.value,barChartOptions:C.value},null,8,["keywords","keywordsLoading","keywordsError","keywordsPieChartData","keywordsBarChartData","chartOptions","barChartOptions"])])])])]))}},[["__scopeId","data-v-53827dd8"]]);export{sa as default};
