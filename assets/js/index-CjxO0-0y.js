const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/DashboardView-Cdok-7ze.js","assets/js/vue-vendor-CaqZERVf.js","assets/js/index-DlWMEZ1A.js","assets/js/chart-CicJT4lR.js","assets/js/axios-vendor-Dos3PyFQ.js","assets/css/DashboardView-DlTpCvGI.css","assets/js/CategoriesReportView-yMvy1ZNP.js","assets/js/dashboard-styles-CiicuUba.js","assets/css/dashboard-styles-DMOCTBhF.css","assets/css/CategoriesReportView-DfpEGIy2.css","assets/js/QuestionsAnswersReportView-Bk9LvSqY.js","assets/js/auto-oB3XP6c3.js","assets/css/QuestionsAnswersReportView-BsqL6n2d.css","assets/css/ReportSearch-OFe4hXR_.css","assets/js/QuestionsNeedReviewReportView-Q2SHmvmh.js","assets/css/QuestionsNeedReviewReportView-cQhEF_hh.css","assets/js/KeywordsReportView-NNsb6NeO.js","assets/css/KeywordsReportView-Bk6pT75W.css","assets/js/ChatLogHasAnswersReportView-Cuq3cmLB.js","assets/css/ChatLogHasAnswersReportView-BNQP7MCq.css","assets/js/FeedbacksReportView-B2u2Ma_K.js","assets/css/FeedbacksReportView-DhxJ7JcT.css","assets/js/ChatLogNoAnswersReportView-Hq1Cglnl.js","assets/css/ChatLogNoAnswersReportView-CKGnbVAc.css","assets/js/HandledFeedbacksReportView-Dmv9Ah76.js","assets/css/HandledFeedbacksReportView-C-TBZyBi.css","assets/js/ManageThaiPatterns-Cki_h8yi.js","assets/css/ManageThaiPatterns-EKTLBbQ7.css","assets/js/ManageStopwords-vMHJ5Lyi.js","assets/css/ManageStopwords-CANu9jLN.css","assets/js/ManageNegativeKeywords-DLUYbFUn.js","assets/css/ManageNegativeKeywords-BTXazb3q.css","assets/js/ManageSynonyms-jVHmYjP0.js","assets/css/ManageSynonyms-CnSfO3Wa.css","assets/js/ManageRanking-DajDZmnJ.js","assets/js/FinalRankingCard-D0dD9hBO.js","assets/css/FinalRankingCard-DrTduJdI.css","assets/css/ManageRanking-B5V4m-E8.css","assets/js/ManageRankingSimulator-D_ZLVGXG.js","assets/css/ManageRankingSimulator-COiOrG5o.css","assets/js/AboutSystemView-D0m9lqsV.js","assets/css/AboutSystemView-BycuqrFz.css","assets/js/index-DmQOmHqo.js","assets/css/index-B_Lc_Wgp.css","assets/js/ManageBotPronoun-DwNuuhCy.js","assets/css/ManageBotPronoun-8I7Dkh3U.css","assets/js/ManageGoogleAccountView-DxgzctiY.js","assets/css/ManageGoogleAccountView-8V5ONgaw.css","assets/js/ManageAdminUserView-BvlenYII.js","assets/css/ManageAdminUserView-Cg_4XGss.css","assets/js/ManageOrganizationsView-D18bTdhJ.js","assets/css/ManageOrganizationsView-6Azn-yRQ.css","assets/js/ManageOfficersView-CdF6uNAN.js","assets/css/ManageOfficersView-DXnGcoes.css","assets/js/ManageCategoriesView-nKPQ67Q_.js","assets/css/ManageCategoriesView-BmNc4EzT.css","assets/js/LoginView-C_uMPkkD.js","assets/css/LoginView-CluqgEm6.css","assets/js/ForgotpasswordView-B1dmfxdR.js","assets/css/ForgotpasswordView-CX-4IAk-.css","assets/js/CheckemailView-xhC-q8kF.js","assets/css/CheckemailView-B_dCoja7.css","assets/js/SetnewpasswordView-b0W2jaB7.js","assets/css/SetnewpasswordView-OIPTqC8v.css","assets/js/GoogleCallbackView-CGvCERTR.js","assets/css/GoogleCallbackView-D-YP8MQG.css"])))=>i.map(i=>d[i]);
import{r as e,c as t,o as s,a as i,w as o,F as n,b as a,u as r,n as l,d as c,t as d,T as u,e as h,f as p,g,h as m,i as f,j as w,k as v,l as b,m as y,p as k,q as x,s as T,v as C,x as _,R as S,y as M,z as A,A as I,B as E,C as L,D,E as $,G as P,H as B,I as O,J as H,K as N,L as F,M as R,N as z,O as j}from"./vue-vendor-CaqZERVf.js";import{a as V}from"./axios-vendor-Dos3PyFQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const q=e([]);let G=0;function W(){const e=(e,s="info",i=3e3)=>{const o=++G,n={id:o,message:e,type:s,visible:!0,isClosing:!1};return q.value.push(n),i>0&&setTimeout(()=>{t(o)},i),o},t=e=>{const t=q.value.find(t=>t.id===e);t&&(t.isClosing=!0,setTimeout(()=>{q.value=q.value.filter(t=>t.id!==e)},300))};return{toasts:q,show:e,success:(t,s=2500)=>e(t,"success",s),error:(t,s=3500)=>e(t,"error",s),warning:(t,s=3e3)=>e(t,"warning",s),info:(t,s=3e3)=>e(t,"info",s),dismiss:t,dismissAll:()=>{q.value.forEach(e=>e.isClosing=!0),setTimeout(()=>{q.value=[]},300)}}}const Q=(e,t)=>{const s=e.__vccOpts||e;for(const[i,o]of t)s[i]=o;return s},U={class:"apple-toast-container"},K={class:"toast-icon"},Y={class:"toast-message"},X=["onClick"],Z=Q({__name:"AppleToast",setup(e){const h=q,p=e=>{switch(e){case"success":return"bi bi-check-circle-fill";case"error":return"bi bi-x-circle-fill";case"warning":return"bi bi-exclamation-circle-fill";default:return"bi bi-info-circle-fill"}};return(e,g)=>(s(),t("div",U,[i(u,{name:"toast-slide",tag:"div"},{default:o(()=>[(s(!0),t(n,null,a(r(h),e=>(s(),t("div",{key:e.id,class:l(["apple-toast",`apple-toast-${e.type}`,{"is-closing":e.isClosing}])},[c("div",K,[c("i",{class:l(p(e.type))},null,2)]),c("div",Y,d(e.message),1),c("button",{class:"toast-close",onClick:t=>(e=>{const t=h.value.find(t=>t.id===e);t&&(t.isClosing=!0,setTimeout(()=>{h.value=h.value.filter(t=>t.id!==e)},300))})(e.id)},[...g[0]||(g[0]=[c("i",{class:"bi bi-x"},null,-1)])],8,X)],2))),128))]),_:1})]))}},[["__scopeId","data-v-63f68c5c"]]),J=null!==localStorage.getItem("sidebarCollapsed")&&JSON.parse(localStorage.getItem("sidebarCollapsed")),ee=e(J),te=null!==localStorage.getItem("sidebarReportsOpen")&&JSON.parse(localStorage.getItem("sidebarReportsOpen")),se=null!==localStorage.getItem("sidebarManageOpen")&&JSON.parse(localStorage.getItem("sidebarManageOpen")),ie=null!==localStorage.getItem("sidebarRankingOpen")&&JSON.parse(localStorage.getItem("sidebarRankingOpen")),oe=e(te),ne=e(se),ae=e(ie);h(ee,e=>{try{localStorage.setItem("sidebarCollapsed",JSON.stringify(e))}catch(t){}}),h(oe,e=>{try{localStorage.setItem("sidebarReportsOpen",JSON.stringify(e))}catch(t){}}),h(ne,e=>{try{localStorage.setItem("sidebarManageOpen",JSON.stringify(e))}catch(t){}}),h(ae,e=>{try{localStorage.setItem("sidebarRankingOpen",JSON.stringify(e))}catch(t){}});const re=e(!1);function le(){const e=()=>{null===localStorage.getItem("sidebarCollapsed")&&(ee.value=window.innerWidth<768),window.innerWidth>=768&&re.value&&(re.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}const ce={class:"privacy-page"},de={class:"card"},ue=["href"],he=Q({__name:"PrivacyPolicy",props:{inModal:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:i}){const o=e;p();const n="st651102064101@pcru.ac.th";return g(()=>{o.inModal||(document.title="นโยบายความเป็นส่วนตัว — PCRU Chatbot",window.scrollTo({top:0}))}),(e,i)=>(s(),t("div",ce,[c("main",de,[i[1]||(i[1]=m('<h1 data-v-057a3ca7>นโยบายความเป็นส่วนตัว</h1><p class="lead" data-v-057a3ca7><strong data-v-057a3ca7>สรุป:</strong> ระบบนี้เก็บและใช้ &quot;ประวัติการสนทนา&quot; เพื่อให้บริการแชตต่อเนื่อง ปรับปรุงคุณภาพ และตรวจสอบข้อผิดพลาด โดยข้อมูลจะไม่ถูกใช้เพื่อโฆษณาหรือส่งต่อให้บุคคลที่สาม เว้นแต่จะมีกฎหมายหรือคำสั่งศาลบังคับใช้</p><h2 data-v-057a3ca7>ข้อมูลที่เก็บ</h2><ul data-v-057a3ca7><li data-v-057a3ca7><strong data-v-057a3ca7>ประวัติการสนทนา:</strong> ข้อความที่ผู้ใช้ส่งและการตอบกลับของระบบ</li><li data-v-057a3ca7><strong data-v-057a3ca7>ข้อมูลเทคนิค:</strong> ข้อมูลเช่น เวลา และรหัสผู้ใช้ (ถ้ามี) เพื่อการวิเคราะห์และแก้ปัญหา</li></ul><h2 data-v-057a3ca7>วัตถุประสงค์การใช้ข้อมูล</h2><ol data-v-057a3ca7><li data-v-057a3ca7>ให้บริการการสนทนาอย่างต่อเนื่องและมีบริบท</li><li data-v-057a3ca7>ปรับปรุงความถูกต้องและคุณภาพของคำตอบ</li><li data-v-057a3ca7>วิเคราะห์และแก้ไขปัญหาทางเทคนิค</li></ol><h2 data-v-057a3ca7>การเก็บรักษา</h2><p data-v-057a3ca7>ข้อมูลจะเก็บไว้อย่างปลอดภัยเป็นระยะเวลาที่จำเป็นต่อการให้บริการและการปรับปรุงระบบ หากต้องการให้ลบข้อมูล ติดต่อผู้ดูแลระบบตามข้อมูลติดต่อด้านล่าง</p><h2 data-v-057a3ca7>การเปิดเผยข้อมูลแก่บุคคลที่สาม</h2><p data-v-057a3ca7>เราไม่เปิดเผยข้อมูลส่วนบุคคลเพื่อการโฆษณาโดยบุคคลที่สาม แต่เราอาจเปิดเผยข้อมูลตามที่กฎหมายกำหนดหรือเพื่อตอบคำร้องขอของหน่วยงานที่มีอำนาจ</p><h2 data-v-057a3ca7>สิทธิของผู้ใช้</h2><p data-v-057a3ca7>ผู้ใช้มีสิทธิในการขอเข้าถึง แก้ไข หรือลบข้อมูลส่วนบุคคล ตามกฎหมายที่เกี่ยวข้อง โปรดติดต่อผู้ดูแลระบบเพื่อดำเนินการ</p><h2 data-v-057a3ca7>ข้อมูลติดต่อ</h2>',13)),c("p",null,[i[0]||(i[0]=f("ติดต่อผู้ดูแลระบบ: ",-1)),c("a",{href:`mailto:${r(n)}`},d(r(n)),9,ue)])])]))}},[["__scopeId","data-v-057a3ca7"]]),pe={key:0,class:"cookie-overlay",role:"dialog","aria-modal":"true","aria-label":"Cookie consent"},ge={class:"cookie-card",role:"document"},me={class:"cookie-backdrop"},fe={class:"privacy-inline",role:"dialog","aria-modal":"true","aria-label":"Privacy policy (chat)"},we={class:"privacy-panel"},ve={class:"privacy-panel-body"},be={key:0,class:"privacy-modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Privacy policy"},ye={class:"privacy-modal"},ke={class:"privacy-modal-body"},xe="pcru_cookie_consent",Te=Q({__name:"CookieConsent",setup(a){const r=e(!1),l=w({storeChatHistory:!0});function d(e=!0,t=!0){const s={storeChatHistory:!!t,acceptedAt:Date.now()};e&&function(e){try{return localStorage.setItem(xe,JSON.stringify(e)),!0}catch(t){try{return document.cookie=`${xe}=${encodeURIComponent(JSON.stringify(e))}; path=/; max-age=31536000`,!0}catch(s){return!1}}}(s)}function u(){d(!0,!0),r.value=!1,setTimeout(()=>{const e=document.getElementById("app");e&&e.focus()},50)}e(!1);const p=v(),m=b(()=>"chatbot"===p.name);g(()=>{(function(){try{const e=localStorage.getItem(xe);if(e){const t=JSON.parse(e);return"boolean"==typeof t.storeChatHistory&&(l.storeChatHistory=t.storeChatHistory),!0}}catch(e){}try{const e=document.cookie.match("(?:^|;)\\s*"+xe+"=([^;]+)");if(e){const t=JSON.parse(decodeURIComponent(e[1]));return"boolean"==typeof t.storeChatHistory&&(l.storeChatHistory=t.storeChatHistory),!0}}catch(e){}return!1})()||setTimeout(()=>{r.value=!0},320)});const S=e(!1);function M(){S.value=!0}function A(){S.value=!1}return h(S,e=>{"undefined"!=typeof document&&(document.body.style.overflow=e&&!m.value?"hidden":"")}),(e,a)=>(s(),t(n,null,[i(x,{name:"fade"},{default:o(()=>[r.value&&!m.value?(s(),t("div",pe,[i(x,{name:"pop"},{default:o(()=>[T(c("div",ge,[c("div",{class:"cookie-header"},[a[0]||(a[0]=c("h3",null,"เราใช้คุกกี้",-1)),c("button",{class:"cookie-close",onClick:u,"aria-label":"ข้ามไปที่เนื้อหา"},"✕")]),c("div",{class:"cookie-body"},[a[1]||(a[1]=c("p",{class:"cookie-text"},[c("strong",null,"สรุป:"),f(' เว็บไซต์นี้เก็บ "ประวัติการสนทนา" เพื่อให้บริการแชตทำงานต่อเนื่อง ใช้เพื่อปรับปรุงระบบและตรวจสอบคุณภาพ ไม่มีการใช้ข้อมูลเพื่อโฆษณาหรือส่งต่อให้บุคคลที่สาม')],-1)),c("div",{class:"cookie-actions"},[c("button",{class:"btn policy",onClick:M},"ดูนโยบายความเป็นส่วนตัว"),c("button",{class:"btn acknowledge",onClick:u},"ข้ามไปที่เนื้อหา")])])],512),[[C,r.value]])]),_:1})])):k("",!0)]),_:1}),r.value&&m.value?(s(),y(_,{key:0,to:".chat-panel"},[c("div",me,[i(x,{name:"pop"},{default:o(()=>[c("div",{class:"cookie-inline",role:"region","aria-label":"Cookie consent (chat)"},[c("div",{class:"cookie-card cookie-card-inline",role:"document"},[c("div",{class:"cookie-header"},[a[2]||(a[2]=c("h3",null,"เราใช้คุกกี้",-1)),c("button",{class:"cookie-close",onClick:u,"aria-label":"ข้ามไปที่เนื้อหา"},"✕")]),c("div",{class:"cookie-body"},[a[3]||(a[3]=c("p",{class:"cookie-text"},[c("strong",null,"สรุป:"),f(' เว็บไซต์นี้เก็บ "ประวัติการสนทนา" เพื่อให้บริการแชตทำงานต่อเนื่อง ใช้เพื่อปรับปรุงระบบและตรวจสอบคุณภาพ')],-1)),c("div",{class:"cookie-actions"},[c("button",{class:"btn policy",onClick:M},"ดูนโยบาย"),c("button",{class:"btn acknowledge",onClick:u},"ข้าม")])])])])]),_:1})])])):k("",!0),S.value&&m.value?(s(),y(_,{key:1,to:".chat-panel"},[i(x,{name:"slide-fade"},{default:o(()=>[c("div",fe,[c("div",we,[c("div",{class:"privacy-panel-header"},[a[4]||(a[4]=c("h4",null,"นโยบายความเป็นส่วนตัว",-1)),c("button",{class:"privacy-panel-close",onClick:A,"aria-label":"ปิด"},"✕")]),c("div",ve,[i(he,{inModal:!0,onClose:A})])])])]),_:1})])):k("",!0),i(x,{name:"fade"},{default:o(()=>[S.value?(s(),t("div",be,[c("div",ye,[c("button",{class:"privacy-full-close",onClick:A,"aria-label":"ปิด",title:"ปิด"},[...a[5]||(a[5]=[c("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},[c("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),a[6]||(a[6]=c("div",{class:"privacy-modal-header"},[c("h4",null,"นโยบายความเป็นส่วนตัว")],-1)),c("div",ke,[i(he,{inModal:!0,onClose:A})])])])):k("",!0)]),_:1})],64))}},[["__scopeId","data-v-38945ccd"]]),Ce=Q({__name:"App",setup:e=>(g(()=>{re.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded")}),(e,o)=>(s(),t(n,null,[i(r(S)),i(Z),i(Te)],64)))},[["__scopeId","data-v-466f5c14"]]),_e={},Se=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/~s651102064101/frontend/"+e}(e))in _e)return;_e[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,s)=>{i.addEventListener("load",t),i.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})},Me="/~s651102064101/frontend/assets/jpg/bot2-CXopXJt4.jpg",Ae=(e=null)=>({"Super Admin":"/~s651102064101/frontend/assets/jpg/bot1-DHuxinh0.jpg",Admin:Me,Officer:"/~s651102064101/frontend/assets/jpg/bot3-CaFmAJOZ.jpg",User:Me}[e]||Me),Ie={news:["ข่าว","news","ประกาศ","announcement"],money:["ทุน","scholarship","เงิน","money","ค่าใช้จ่าย"],user:["บริการ","นักศึกษา","service","student","สมาชิก"],building:["หอพัก","ที่พัก","บ้าน","ห้อง","room","dorm","house","residence","พัก"],book:["การศึกษา","หลักสูตร","วิชา","education","course","curriculum","สอน"],phone:["ติดต่อ","สอบถาม","contact","call","โทร"],clipboard:["รับสมัคร","สมัคร","application","register","ลงทะเบียน"],calendar:["อบรม","กิจกรรม","event","training","activity","ปฏิทิน","กำหนดการ"]},Ee={news:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect class="news-paper" x="4" y="5" width="16" height="16" rx="2" stroke="white" stroke-width="2" stroke-dasharray="60" stroke-dashoffset="60">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n    </rect>\n    <line class="news-line-1" x1="7" y1="9" x2="17" y2="9" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-dasharray="10" stroke-dashoffset="10">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.2s" fill="freeze"/>\n    </line>\n    <line class="news-line-2" x1="7" y1="13" x2="13" y2="13" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-dasharray="6" stroke-dashoffset="6">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n    </line>\n    <line class="news-line-3" x1="7" y1="16" x2="17" y2="16" stroke="white" stroke-width="1" stroke-linecap="round" stroke-dasharray="10" stroke-dashoffset="10">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.4s" fill="freeze"/>\n    </line>\n  </svg>',money:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <circle class="coin-outer" cx="12" cy="12" r="8" stroke="white" stroke-width="2" stroke-dasharray="50" stroke-dashoffset="50">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n    </circle>\n    <circle class="coin-inner" cx="12" cy="12" r="5" stroke="white" stroke-width="1.5" stroke-dasharray="32" stroke-dashoffset="32">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.4s" begin="0.2s" fill="freeze"/>\n    </circle>\n    <text x="12" y="15" text-anchor="middle" fill="white" font-size="10" font-weight="bold" opacity="0">\n      <animate attributeName="opacity" to="1" dur="0.3s" begin="0.4s" fill="freeze"/>฿\n    </text>\n  </svg>',user:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <circle class="user-head" cx="12" cy="8" r="3" stroke="white" stroke-width="2" stroke-dasharray="19" stroke-dashoffset="19">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" fill="freeze"/>\n    </circle>\n    <path class="user-body" d="M5 20c0-3.87 3.13-7 7-7s7 3.13 7 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-dasharray="22" stroke-dashoffset="22">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" begin="0.2s" fill="freeze"/>\n    </path>\n  </svg>',building:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path class="building" d="M3 21h18M4 21V7l8-4 8 4v14" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="70" stroke-dashoffset="70">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.6s" fill="freeze"/>\n    </path>\n    <rect class="window-1" x="8" y="11" width="2" height="2" fill="white" opacity="0">\n      <animate attributeName="opacity" to="1" dur="0.2s" begin="0.4s" fill="freeze"/>\n    </rect>\n    <rect class="window-2" x="14" y="11" width="2" height="2" fill="white" opacity="0">\n      <animate attributeName="opacity" to="1" dur="0.2s" begin="0.5s" fill="freeze"/>\n    </rect>\n    <rect class="window-3" x="8" y="15" width="2" height="2" fill="white" opacity="0">\n      <animate attributeName="opacity" to="1" dur="0.2s" begin="0.6s" fill="freeze"/>\n    </rect>\n    <rect class="window-4" x="14" y="15" width="2" height="2" fill="white" opacity="0">\n      <animate attributeName="opacity" to="1" dur="0.2s" begin="0.7s" fill="freeze"/>\n    </rect>\n  </svg>',book:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path class="book" d="M4 19.5A2.5 2.5 0 016.5 17H20" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="20" stroke-dashoffset="20">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.4s" fill="freeze"/>\n    </path>\n    <path class="book-cover" d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="80" stroke-dashoffset="80">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.6s" begin="0.2s" fill="freeze"/>\n    </path>\n  </svg>',phone:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path class="phone" d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="100" stroke-dashoffset="100">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.7s" fill="freeze"/>\n    </path>\n  </svg>',clipboard:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect class="clipboard" x="5" y="3" width="14" height="18" rx="2" stroke="white" stroke-width="2" stroke-dasharray="68" stroke-dashoffset="68">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.6s" fill="freeze"/>\n    </rect>\n    <path class="clip-top" d="M9 3h6v2H9z" stroke="white" stroke-width="2" stroke-dasharray="14" stroke-dashoffset="14">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n    </path>\n    <path class="checkmark" d="M9 12l2 2 4-4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="10" stroke-dashoffset="10">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.5s" fill="freeze"/>\n    </path>\n  </svg>',calendar:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <rect class="calendar" x="3" y="6" width="18" height="15" rx="2" stroke="white" stroke-width="2" stroke-dasharray="66" stroke-dashoffset="66">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n    </rect>\n    <line class="cal-top" x1="3" y1="10" x2="21" y2="10" stroke="white" stroke-width="2" stroke-dasharray="18" stroke-dashoffset="18">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n    </line>\n    <line class="cal-hook-1" x1="8" y1="3" x2="8" y2="7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-dasharray="4" stroke-dashoffset="4">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.2s" begin="0.5s" fill="freeze"/>\n    </line>\n    <line class="cal-hook-2" x1="16" y1="3" x2="16" y2="7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-dasharray="4" stroke-dashoffset="4">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.2s" begin="0.6s" fill="freeze"/>\n    </line>\n  </svg>',default:'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <circle class="info-circle" cx="12" cy="12" r="9" stroke="white" stroke-width="2" stroke-dasharray="57" stroke-dashoffset="57">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n    </circle>\n    <path class="info-i" d="M12 16v-4m0-4h.01" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8" stroke-dashoffset="8">\n      <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n    </path>\n  </svg>'};function Le(e){const t=function(e){const t=e?.toLowerCase()||"";for(const[s,i]of Object.entries(Ie))if(i.some(e=>t.includes(e)))return s;return"default"}(e);return Ee[t]||Ee.default}const De=e([]);let $e=0;const Pe="/~s651102064101/frontend/assets/mp4/bot2-DKNjE_P1.mp4";function Be(t){const s=e(!1),i=e("");function o(e){const t={text:"",pdf:null,contacts:null,results:null,multipleResults:!1,questionId:null,found:!1,lowConfidence:!1,needsClarification:!1,confidenceLevel:null,verificationWarnings:[],suggestions:null};if(!e)return t.text="ขออภัยค่ะ ระบบมีปัญหา ลองอีกครั้งได้ไหมคะ?",t;if("string"==typeof e)return t.text=e,t;e.lowConfidence&&(t.lowConfidence=!0),e.needsClarification&&(t.needsClarification=!0),e.confidenceLevel&&(t.confidenceLevel=e.confidenceLevel),Array.isArray(e.verificationWarnings)&&(t.verificationWarnings=e.verificationWarnings),Array.isArray(e.suggestions)&&(t.suggestions=e.suggestions);const s=Array.isArray(e.results)?e.results:Array.isArray(e.alternatives)?e.alternatives:null;if(s&&s.length>0)if(t.questionId=s[0].id||null,s.length>1)t.results=s,t.multipleResults=!0,t.text="";else{const e=s[0];t.pdf=n(e);const i=s.map(e=>"string"==typeof e?e:e.answer||e.message||e.text||e.title||"").filter(e=>e&&e.trim());i.length>0&&(t.text=i.join("\n\n"))}return t.text||(t.text=e.message||e.text||e.answer||e.response||e.result||"",!t.text&&e.data&&"string"==typeof e.data&&(t.text=e.data),!t.text&&Array.isArray(e.messages)&&e.messages.length>0&&(t.text=e.messages.join("\n"))),t.pdf||(t.pdf=n(e),!t.pdf&&Array.isArray(e.categories)&&(t.pdf=e.categories.map(e=>n(e)).find(Boolean)),!t.pdf&&Array.isArray(e.attachments)&&(t.pdf=e.attachments.map(e=>e&&(e.pdf||e.url||e.link||e.href||e.file||e.path)).find(Boolean))),Array.isArray(e.contacts)&&e.contacts.length&&(t.contacts=e.contacts.map(e=>({organization:e.organization||e.org||e.department||"",category:e.category||e.CategoriesName||null,contact:e.contact||e.Contact||null}))),void 0!==e.found&&(t.found=!!e.found),e.questionId&&(t.questionId=e.questionId),t.text&&""!==t.text.trim()||(t.text="ดูเหมือนว่าคำถามนี้ยังเกินความสามารถของหนูค่ะ ลองติดต่อศูนย์บริการหรือลองระบุรายละเอียดเพิ่มเติมได้ไหมคะ?"),t}function n(e){return e&&(e.pdf||e.pdfUrl||e.attachment||e.attachmentUrl||e.categoriesPDF||e.categoriesPdf||e.fileUrl||e.file||e.url)||null}return{loading:s,loadError:i,sendFeedback:async function(e){try{if(t&&"function"==typeof t.post){return(await t.post("/chat/feedback",e)).data}const s="https://ict.pcru.ac.th/~s651102064101/backend",i=await fetch(`${s}/chat/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("userToken")?`Bearer ${localStorage.getItem("userToken")}`:""},body:JSON.stringify(e)});return await i.json()}catch(s){return null}},sendHasAnswerLog:async function(e,s){if(!e||!t||"function"!=typeof t.post)return null;const i={Timestamp:(new Date).toISOString(),UserQuery:e,Status:1,QuestionsAnswersID:s||null};try{const e=await t.post("/chat/logs/has-answer",i);return e.data?.chatLogId||e.data?.ChatLogID||e.data?.id||null}catch(o){return null}},sendNoAnswerLog:async function(e){if(!e||!t||"function"!=typeof t.post)return null;const s={Timestamp:(new Date).toISOString(),UserQuery:e,Status:0};try{const e=await t.post("/chat/logs/no-answer",s);return e.data?.chatLogId||e.data?.ChatLogID||e.data?.id||null}catch(i){return null}},fetchCategories:async function(e={onlySelfParent:!1}){if(!t)return i.value="axios plugin not available",[];s.value=!0,i.value="";try{let s=(await t.get("/categories")).data;if(s&&!Array.isArray(s)){if(!Array.isArray(s.categories))throw new Error("Categories API returned unexpected structure. Expected array or object with categories array.");s=s.categories}if(!Array.isArray(s))throw new Error("Unexpected categories response shape - payload is not an array");return s.length&&s[0].hasOwnProperty("CategoriesID")?function(e,t={onlySelfParent:!1}){const s={},i={};e.forEach(e=>{const o=String(e.CategoriesID),n=null==e.ParentCategoriesID?null:String(e.ParentCategoriesID),a=t.onlySelfParent?n===o:!n||n===o;s[o]={id:o,title:e.CategoriesName||"Untitled",parent:a?null:n,pdf:e.CategoriesPDF||null},n&&n!==o&&(i[n]||(i[n]=[]),i[n].push(o))});const o=[];return Object.keys(s).forEach(e=>{const t=s[e];if(!t.parent){const n=(i[e]||[]).map(e=>s[e].title);o.push({title:t.title,items:n})}}),o}(s,e):s.map(e=>{const t=e.title||e.name||e.category||"Untitled",s=e.subcategories||e.children||e.items||e.options||[];return{title:t,items:Array.isArray(s)?s.map(e=>"string"==typeof e?e:e.title||e.name||e.label||"Untitled"):[]}})}catch(o){return i.value=o?.message||"Failed to load categories",[]}finally{s.value=!1}},sendChatMessage:async function(e){if(!t||"function"!=typeof t.post)return{error:"No backend available"};try{return o((await t.post("/chat/respond",e)).data)}catch(s){return{error:s.message||"API Error"}}},parseBackendResponse:o,fetchActiveBotImage:async function(){if(!t)return null;try{const e=await t.get("/ai-image/active");if(e?.data?.url)return e.data.url+"?t="+Date.now()}catch(e){}return null},fetchBotPronoun:async function(){if(!t)return null;try{const e=await t.get("/ai-image/bot-pronoun");if(e?.data?.pronoun)return e.data.pronoun}catch(e){}return null}}}let Oe=null;const He=V.create({baseURL:"https://ict.pcru.ac.th/~s651102064101/backend",timeout:parseInt("10000"),headers:{"Content-Type":"application/json"}});He.interceptors.request.use(e=>{const t=localStorage.getItem("userToken");if(t)e.headers.Authorization=`Bearer ${t}`;else try{e&&"string"==typeof e.url&&e.url.includes("/getcategories")&&(e.url=e.url.replace("/getcategories","/categories"))}catch(i){}let s=localStorage.getItem("chatbot_session_id");s||(s="session_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("chatbot_session_id",s)),e.headers["X-Session-ID"]=s;try{if(e&&"delete"===e.method&&"string"==typeof e.url&&e.url.includes("/feedbacks/cleanup-handled")){const e="/reports/feedbacks-handled";if(("undefined"!=typeof window&&window.location&&window.location.pathname?window.location.pathname:"")!==e)return Promise.reject(new Error("Cleanup operation is restricted to the Handled Feedbacks page"))}}catch(o){}return e},e=>Promise.reject(e)),He.interceptors.response.use(e=>e,e=>{if(e.response&&403===e.response.status&&"Forbidden: Invalid or expired token."===e.response.data?.message)return localStorage.removeItem("userToken"),localStorage.removeItem("userType"),localStorage.removeItem("userInfo"),Oe?Oe.fire({toast:!0,icon:"error",title:"Session หมดอายุ",text:"โปรดเข้าสู่ระบบใหม่อีกครั้ง",position:"bottom-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}):alert("Session หมดอายุ: โปรดเข้าสู่ระบบใหม่อีกครั้ง"),yw.push({name:"login"}),new Promise(()=>{});if(e.response&&401===e.response.status){const t=e.response.data?.code,s=e.response.data?.message||"",i="IDLE_TIMEOUT"===t||s.toLowerCase().includes("inactivity")||s.toLowerCase().includes("idle"),o="SESSION_TIMEOUT"===t||s.toLowerCase().includes("session expired");if(i||o)return localStorage.removeItem("userToken"),localStorage.removeItem("userType"),localStorage.removeItem("userInfo"),Oe?Oe.fire({toast:!0,icon:"error",title:"Session หมดอายุ",text:"เซสชันหมดอายุหรือไม่มีกิจกรรมล่าสุด โปรดเข้าสู่ระบบใหม่",position:"bottom-end",showConfirmButton:!1,timer:2500,timerProgressBar:!0}):alert("Session หมดอายุ: โปรดเข้าสู่ระบบใหม่อีกครั้ง"),yw.push({name:"login"}),new Promise(()=>{})}return Promise.reject(e)});const Ne={install:e=>{e.config.globalProperties.$axios=He,e.config.globalProperties.$swal&&(Oe=e.config.globalProperties.$swal)}},Fe={name:"ChatbotHelpView",props:{visible:{type:Boolean,default:!1}},emits:["close"],data:()=>({openFaq:0,faqs:[{q:"Bot ตอบอะไรได้บ้าง?",a:"ตอบข้อมูลทุนการศึกษา, หอพัก, การลงทะเบียน, เอกสาร PDF และข่าวสารทั่วไปของ PCRU"},{q:"ต้องพิมพ์ทางการไหม?",a:'ไม่ต้องค่ะ พิมพ์ภาษาพูดได้เลย เช่น "อยากรู้เรื่องทุนกู้ยืม"'},{q:"คำพ้องคืออะไร?",a:'คือคำที่เขียนต่างกันแต่ความหมายเหมือนกัน เช่น พิมพ์ "สามหกห้า" บอทจะหา "365" ให้ หรือ "อีบุ๊ค" หา "E-Book" ให้'},{q:"ข้อมูลอัปเดตไหม?",a:"ข้อมูลดึงจากฐานข้อมูลมหาวิทยาลัย บางส่วนอาจต้องรอการประกาศอย่างเป็นทางการ"}],categories:[],categoriesLoading:!1,showAllCategories:!1,synonyms:[],synonymIndex:0,synonymInterval:null,negativeKeywords:[],negativeIndex:0,negativeInterval:null,navigationQuestions:[],navigationIndex:0,navigationInterval:null,popularQuestions:[],popularIndex:0,popularInterval:null}),computed:{sortedCategories(){const e=Array.isArray(this.categories)?[...this.categories]:[];return e.sort((e,t)=>{const s=Array.isArray(e.items)?e.items.length:0,i=Array.isArray(t.items)?t.items.length:0;return i!==s?i-s:(e.title||"").localeCompare(t.title||"","th")}),e},featureCategories(){return this.showAllCategories?this.sortedCategories:this.sortedCategories.slice(0,4)},hiddenCategoriesCount(){return Math.max(0,this.sortedCategories.length-4)},currentSynonym(){return this.synonyms.length?this.synonyms[this.synonymIndex]:null},currentNegativeKeyword(){return this.negativeKeywords.length?this.negativeKeywords[this.negativeIndex]:null},currentNavigationQuestion(){return this.navigationQuestions.length?this.navigationQuestions[this.navigationIndex]:null},currentPopularQuestion(){return this.popularQuestions.length?this.popularQuestions[this.popularIndex]:{title:"ขอรายละเอียดทุนเรียนดีปีล่าสุด"}}},methods:{closeHelp(){this.$emit("close")},toggleFaq(e){this.openFaq=this.openFaq===e?null:e},async loadCategories(){try{this.categoriesLoading=!0;const e=await this.$axios.get("/categories",{params:{onlyWithAnswers:1}}),t=e.data?.data??e.data,s=Array.isArray(t)?t:t?.categories||[];if(s.length&&s[0].hasOwnProperty("CategoriesID")){const e=s.filter(e=>String(e.ParentCategoriesID)===String(e.CategoriesID)).map(e=>{const t=String(e.CategoriesID),i=s.filter(e=>String(e.ParentCategoriesID)===t&&String(e.CategoriesID)!==t).map(e=>e.CategoriesName||e.CategoriesID);return{title:e.CategoriesName||e.CategoriesID,items:i}});this.categories=e}else{const{fetchCategories:e}=Be(this.$axios),t=await e();this.categories=Array.isArray(t)?t:[]}}catch(e){this.categories=[]}finally{this.categoriesLoading=!1}},iconClass(e){const t=String(e.title||e.CategoriesName||"").toLowerCase();return t.includes("ทุน")?"bi bi-mortarboard-fill":t.includes("หอ")?"bi bi-house-door-fill":t.includes("กิจ")?"bi bi-calendar-event-fill":t.includes("เอกสาร")?"bi bi-file-earmark-text-fill":"bi bi-grid-fill"},iconColor(e){const t=String(e.title||e.CategoriesName||"").toLowerCase();return t.includes("ทุน")?"purple":t.includes("หอ")?"orange":t.includes("กิจ")?"green":"blue"},async loadSynonyms(){try{const e=await this.$axios.get("/synonyms/public"),t=e.data?.data||e.data||[];this.synonyms=t.map(e=>({original:e.InputWord||e.OriginalWord||e.original||"",target:e.TargetKeyword||e.SynonymWord||e.synonym||""})).filter(e=>e.original&&e.target),this.synonyms.length>0&&this.startSynonymCarousel()}catch(e){this.synonyms=[]}},startSynonymCarousel(){this.synonymInterval&&clearInterval(this.synonymInterval),this.synonymInterval=setInterval(()=>{this.synonymIndex=(this.synonymIndex+1)%this.synonyms.length},5e3)},async loadNegativeKeywords(){try{const e=await this.$axios.get("/negativekeywords/public"),t=e.data?.data||e.data||[];this.negativeKeywords=t.map(e=>e.Word||e.KeywordText||e.keyword||"").filter(e=>e),this.negativeKeywords.length>0&&this.startNegativeCarousel()}catch(e){this.negativeKeywords=[]}},startNegativeCarousel(){this.negativeInterval&&clearInterval(this.negativeInterval),this.negativeInterval=setInterval(()=>{this.negativeIndex=(this.negativeIndex+1)%this.negativeKeywords.length},5e3)},async loadNavigationQuestions(){try{const e=await this.$axios.get("/questionsanswers/navigation",{params:{limit:10}}),t=e.data?.data||e.data||[];this.navigationQuestions=t.filter(e=>e.title),this.navigationQuestions.length>0&&this.startNavigationCarousel()}catch(e){this.navigationQuestions=[]}},startNavigationCarousel(){this.navigationInterval&&clearInterval(this.navigationInterval),this.navigationInterval=setInterval(()=>{this.navigationIndex=(this.navigationIndex+1)%this.navigationQuestions.length},5e3)},async loadPopularQuestions(){try{const e=await this.$axios.get("/questionsanswers/popular",{params:{limit:10}}),t=e.data?.data||e.data||[];this.popularQuestions=t.filter(e=>e.title),this.popularQuestions.length>0&&this.startPopularCarousel()}catch(e){this.popularQuestions=[{title:"ขอรายละเอียดทุนเรียนดีปีล่าสุด"}]}},startPopularCarousel(){this.popularInterval&&clearInterval(this.popularInterval),this.popularInterval=setInterval(()=>{this.popularIndex=(this.popularIndex+1)%this.popularQuestions.length},5e3)}},mounted(){this.loadCategories(),this.loadSynonyms(),this.loadNegativeKeywords(),this.loadNavigationQuestions(),this.loadPopularQuestions()},beforeDestroy(){this.synonymInterval&&(clearInterval(this.synonymInterval),this.synonymInterval=null),this.negativeInterval&&(clearInterval(this.negativeInterval),this.negativeInterval=null),this.navigationInterval&&(clearInterval(this.navigationInterval),this.navigationInterval=null),this.popularInterval&&(clearInterval(this.popularInterval),this.popularInterval=null)}},Re={key:0,class:"apple-help-overlay"},ze={key:0,class:"apple-panel"},je={class:"panel-header"},Ve={class:"header-content"},qe={class:"panel-content custom-scrollbar"},Ge={class:"apple-section fade-in-stagger",style:{"--delay":"0.1s"}},We={class:"feature-grid"},Qe={key:0,class:"feature-card no-data"},Ue={key:0,class:"show-more-wrapper"},Ke={class:"apple-section fade-in-stagger",style:{"--delay":"0.2s"}},Ye={class:"example-container"},Xe={key:0,class:"example-row magic synonym-carousel"},Ze={key:1,class:"helper-text"},Je={class:"apple-section fade-in-stagger",style:{"--delay":"0.3s"}},et={class:"example-container"},tt={class:"example-row good popular-carousel"},st={key:0,class:"example-row good navigation-carousel"},it={key:1,class:"example-row good"},ot={class:"apple-section fade-in-stagger",style:{"--delay":"0.4s"}},nt={class:"example-container"},at={key:0,class:"example-row neutral negative-carousel"},rt={key:1,class:"helper-text"},lt={class:"apple-section fade-in-stagger",style:{"--delay":"0.5s"}},ct={class:"faq-list"},dt=["onClick"],ut={class:"faq-content"};const ht=Q(Fe,[["render",function(e,r,u,h,p,g){return s(),y(_,{to:"body"},[u.visible?(s(),t("div",Re,[i(x,{name:"apple-fade",appear:""},{default:o(()=>[u.visible?(s(),t("div",{key:0,class:"backdrop",onClick:r[0]||(r[0]=(...e)=>g.closeHelp&&g.closeHelp(...e))})):k("",!0)]),_:1}),i(x,{name:"apple-slide",appear:""},{default:o(()=>[u.visible?(s(),t("div",ze,[c("header",je,[c("div",Ve,[r[4]||(r[4]=c("h1",{class:"title"},"ศูนย์ช่วยเหลือ",-1)),c("button",{class:"close-btn",onClick:r[1]||(r[1]=(...e)=>g.closeHelp&&g.closeHelp(...e))},[...r[3]||(r[3]=[c("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},[c("path",{d:"M1 1L13 13M13 1L1 13",stroke:"#86868b","stroke-width":"2","stroke-linecap":"round"})],-1)])])])]),c("div",qe,[c("section",Ge,[r[8]||(r[8]=c("div",{class:"section-hero"},[c("div",{class:"hero-icon-wrapper blue-gradient float-animation"},[c("svg",{class:"animated-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2",class:"draw-path",style:{"--duration":"1.2s"}}),c("circle",{cx:"12",cy:"5",r:"2",class:"draw-path",style:{"--duration":"0.6s","--delay":"0.5s"}}),c("path",{d:"M12 7v4",class:"draw-path",style:{"--duration":"0.4s","--delay":"0.8s"}}),c("line",{x1:"8",y1:"16",x2:"8",y2:"16",class:"pop-in",style:{"--delay":"1.2s"}}),c("line",{x1:"16",y1:"16",x2:"16",y2:"16",class:"pop-in",style:{"--delay":"1.3s"}})])]),c("div",{class:"hero-text"},[c("h2",{class:"section-heading"},"ผู้ช่วยอัจฉริยะ PCRU"),c("p",{class:"section-desc"},"พร้อมตอบคำถามเรื่องการสมัครเรียน, ทุน, กยศ., บริการด้าน IT, และหอพัก และสามารถช่วยค้นหาสถานที่ที่เกี่ยวข้องกับเรื่องที่สอบถามได้")])],-1)),c("div",We,[p.categoriesLoading?(s(),t(n,{key:0},a(4,e=>c("div",{class:"feature-card placeholder",key:"ph-"+e},[...r[5]||(r[5]=[c("div",{class:"icon-circle skeleton-pulse"},null,-1),c("span",{class:"skeleton-text skeleton-pulse"},null,-1)])])),64)):(s(),t(n,{key:1},[(s(!0),t(n,null,a(g.featureCategories,(e,i)=>(s(),t("div",{class:"feature-card",key:e.title||e.CategoriesID||i},[c("div",{class:l(["icon-circle",g.iconColor(e)])},[c("i",{class:l(g.iconClass(e))},null,2)],2),c("span",null,d(e.title||e.CategoriesName||e.CategoriesID||"—"),1)]))),128)),g.featureCategories.length||p.categoriesLoading?k("",!0):(s(),t("div",Qe,[...r[6]||(r[6]=[c("div",{class:"icon-circle gray"},[c("i",{class:"bi bi-inbox-fill"})],-1),c("span",null,"ไม่มีหมวดหมู่",-1)])]))],64))]),g.hiddenCategoriesCount>0&&!p.showAllCategories?(s(),t("div",Ue,[c("button",{class:"show-more-btn",onClick:r[2]||(r[2]=e=>p.showAllCategories=!0)},[c("span",null,[r[7]||(r[7]=c("i",{class:"bi bi-chevron-down"},null,-1)),f(" ดูเพิ่มเติม (อีก "+d(g.hiddenCategoriesCount)+" หมวดหมู่) ",1)])])])):k("",!0)]),c("section",Ke,[r[12]||(r[12]=c("div",{class:"section-header"},[c("div",{class:"mini-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M7 4v16M17 4v16M3 8h4M3 16h4M17 8h4M17 16h4",class:"draw-path",style:{"--duration":"1.5s"}})])]),c("h3",null,"พิมพ์คำพ้องก็เข้าใจนะ!")],-1)),c("div",Ye,[g.currentSynonym?(s(),t("div",Xe,[r[11]||(r[11]=c("div",{class:"indicator"},[c("i",{class:"bi bi-stars"})],-1)),i(x,{name:"slide-fade",mode:"out-in"},{default:o(()=>[(s(),t("div",{class:"text",key:p.synonymIndex},[r[9]||(r[9]=c("strong",null,"คำพ้องเสียง:",-1)),f(' พิมพ์ "'+d(g.currentSynonym.original)+'" ',1),r[10]||(r[10]=c("i",{class:"bi bi-arrow-right-short"},null,-1)),f(' เข้าใจเป็น "'+d(g.currentSynonym.target)+'" ',1)]))]),_:1})])):k("",!0),g.currentSynonym?(s(),t("p",Ze," ระบบช่วยแปลงคำพูดภาษาไทยให้เป็นคำค้นที่ถูกต้องโดยอัตโนมัติ ไม่ต้องกังวลเรื่องสะกดผิด ")):k("",!0)])]),c("section",Je,[r[20]||(r[20]=c("div",{class:"section-header"},[c("div",{class:"mini-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})])]),c("h3",null,"เคล็ดลับการถาม")],-1)),c("div",et,[c("div",tt,[r[14]||(r[14]=c("div",{class:"indicator"},[c("i",{class:"bi bi-check-circle-fill"})],-1)),i(x,{name:"slide-fade",mode:"out-in"},{default:o(()=>[(s(),t("div",{class:"text",key:p.popularIndex},[r[13]||(r[13]=c("strong",null,"แนะนำ:",-1)),f(' "'+d(g.currentPopularQuestion.title)+'" ',1)]))]),_:1})]),g.currentNavigationQuestion?(s(),t("div",st,[r[16]||(r[16]=c("div",{class:"indicator"},[c("i",{class:"bi bi-check-circle-fill"})],-1)),i(x,{name:"slide-fade",mode:"out-in"},{default:o(()=>[(s(),t("div",{class:"text",key:p.navigationIndex},[r[15]||(r[15]=c("strong",null,"แนะนำ (นำทาง/สถานที่):",-1)),f(' "'+d(g.currentNavigationQuestion.title)+'" ',1)]))]),_:1})])):(s(),t("div",it,[...r[17]||(r[17]=[c("div",{class:"indicator"},[c("i",{class:"bi bi-check-circle-fill"})],-1),c("div",{class:"text"},[c("strong",null,"แนะนำ (นำทาง/สถานที่):"),f(' "ไปอาคารเรียนรวมจากหอพักต้องเดินทางยังไง"')],-1)])])),r[18]||(r[18]=c("div",{class:"example-row bad"},[c("div",{class:"indicator"},[c("i",{class:"bi bi-x-circle-fill"})]),c("div",{class:"text"},[c("strong",null,"ไม่แนะนำ:"),f(' "ทุน" (กว้างไป)')])],-1)),r[19]||(r[19]=c("div",{class:"example-row bad"},[c("div",{class:"indicator"},[c("i",{class:"bi bi-x-circle-fill"})]),c("div",{class:"text"},[c("strong",null,"ไม่แนะนำ (นำทาง/สถานที่):"),f(' "ไปไหน" (ไม่ระบุจุดหมาย/จุดเริ่มต้น)')])],-1))])]),c("section",ot,[r[23]||(r[23]=c("div",{class:"section-header"},[c("div",{class:"mini-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("circle",{cx:"12",cy:"12",r:"10"}),c("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),c("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})])]),c("h3",null,"ข้อจำกัดและการปฏิเสธ")],-1)),c("div",nt,[g.currentNegativeKeyword?(s(),t("div",at,[r[22]||(r[22]=c("div",{class:"indicator"},[c("i",{class:"bi bi-hand-thumbs-down-fill"})],-1)),i(x,{name:"slide-fade",mode:"out-in"},{default:o(()=>[(s(),t("div",{class:"text",key:p.negativeIndex},[r[21]||(r[21]=c("strong",null,"ปฏิเสธการค้นหา:",-1)),f(' พิมพ์ "'+d(g.currentNegativeKeyword)+'" บอทจะหยุดค้นหาเรื่องนั้นให้ทันที ',1)]))]),_:1})])):k("",!0),g.currentNegativeKeyword?(s(),t("p",rt,' หากบอทตอบไม่ตรง สามารถกดปุ่ม "ส่งต่อ" เพื่อส่งคำถามให้เจ้าหน้าที่ได้ ')):k("",!0)])]),r[26]||(r[26]=c("section",{class:"apple-section fade-in-stagger",style:{"--delay":"0.45s"}},[c("div",{class:"section-header"},[c("div",{class:"mini-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),c("polyline",{points:"9 22 9 12 15 12 15 22"}),c("path",{d:"M3 6h18v3H3z"})])]),c("h3",null,"วิธีการพิมพ์แบบปฏิเสธ + ค้นหา")]),c("div",{class:"example-container"},[c("div",{class:"example-row good"},[c("div",{class:"indicator"},[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[c("path",{d:"M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"})])]),c("div",{class:"text"},[c("strong",null,"ปฏิเสธก่อน:"),f(' พิมพ์ "ไม่เอา '),c("span",{style:{color:"#e74c3c"}},"ทุน"),f(" และ "),c("span",{style:{color:"#e74c3c"}},"หอพัก"),f(" แต่หนูจะเอา "),c("span",{style:{color:"#27ae60"}},"เกณฑ์"),f(" และ "),c("span",{style:{color:"#27ae60"}},"กยศ"),f('" ')])]),c("div",{class:"example-row good"},[c("div",{class:"indicator"},[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[c("path",{d:"M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"})])]),c("div",{class:"text"},[c("strong",null,"หลายคำปฏิเสธ:"),f(' "ไม่ต้องการ '),c("span",{style:{color:"#e74c3c"}},"ทุนเรียนดี"),f(" ไม่เอา "),c("span",{style:{color:"#e74c3c"}},"หอพัก"),f(" แต่อยากรู้ "),c("span",{style:{color:"#27ae60"}},"IT"),f(" กับ "),c("span",{style:{color:"#27ae60"}},"คอมพิวเตอร์"),f('" ')])]),c("p",{class:"helper-text",style:{"margin-top":"12px"}},[f(" 🔴 "),c("strong",null,"สีแดง = คำที่ปฏิเสธ"),f(" (ไม่แสดง)"),c("br"),f(" 🟢 "),c("strong",null,"สีเขียว = คำที่ต้องการค้นหา"),f(" (แสดงผล) ")])])],-1)),c("section",lt,[r[25]||(r[25]=c("div",{class:"section-header"},[c("div",{class:"mini-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[c("circle",{cx:"12",cy:"12",r:"10"}),c("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),c("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})])]),c("h3",null,"คำถามที่พบบ่อย")],-1)),c("div",ct,[(s(!0),t(n,null,a(p.faqs,(e,i)=>(s(),t("div",{key:i,class:l(["faq-item",{"is-active":p.openFaq===i}])},[c("button",{class:"faq-toggle",onClick:e=>g.toggleFaq(i)},[c("span",null,d(e.q),1),r[24]||(r[24]=c("span",{class:"chevron"},[c("svg",{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none"},[c("path",{d:"M1 1L6 6L11 1",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],8,dt),c("div",{class:"faq-body",style:M({maxHeight:p.openFaq===i?"200px":"0"})},[c("div",ut,d(e.a),1)],4)],2))),128))])])])])):k("",!0)]),_:1})])):k("",!0)])}],["__scopeId","data-v-e41851d6"]]),pt={class:"bot-tooltip-avatar-wrapper"},gt={class:"bot-tooltip-avatar"},mt=["src"],ft={key:0,class:"bot-sleeping-zzz mini"},wt={key:0,class:"bot-typing-indicator"},vt={key:0,class:"bot-tooltip-message"},bt=Q({__name:"BotTooltip",props:{showFooter:{type:Boolean,default:!0}},setup(e){const h=De;return(p,g)=>r(h).length>0?(s(),t("div",{key:0,class:l(["bot-tooltip-container",{"footer-hidden":!e.showFooter}])},[i(u,{name:"bot-tooltip",tag:"div"},{default:o(()=>[(s(!0),t(n,null,a(r(h),e=>(s(),t("div",{key:e.id,class:l(["bot-tooltip-wrapper",`position-${e.position}`,{"is-closing":e.isClosing}])},[c("div",pt,[c("div",gt,[c("video",{src:r(Pe),class:"bot-avatar-video",autoplay:"",loop:"",muted:"",playsinline:""},null,8,mt)]),"warning"===e.type||"error"===e.type?(s(),t("div",ft,[...g[0]||(g[0]=[c("span",{class:"zzz-bubble zzz-1"},"z",-1),c("span",{class:"zzz-bubble zzz-2"},"z",-1),c("span",{class:"zzz-bubble zzz-3"},"z",-1)])])):k("",!0)]),c("div",{class:l(["bot-tooltip-bubble",`type-${e.type}`])},[e.isTyping?(s(),t("div",wt,[...g[1]||(g[1]=[c("span",{class:"dot"},null,-1),c("span",{class:"dot"},null,-1),c("span",{class:"dot"},null,-1)])])):k("",!0),i(x,{name:"message-fade"},{default:o(()=>[e.showMessage?(s(),t("div",vt,d(e.message),1)):k("",!0)]),_:2},1024),g[2]||(g[2]=c("div",{class:"bubble-tail"},null,-1))],2)],2))),128))]),_:1})],2)):k("",!0)}},[["__scopeId","data-v-6d1f4b31"]]),yt={class:"confirm-modal-title"},kt=["innerHTML"],xt={class:"confirm-modal-actions"},Tt=["disabled"],Ct=["disabled"],_t={key:0,class:"loading-spinner"},St={class:"confirm-modal-title"},Mt=["innerHTML"],At={class:"confirm-modal-actions"},It=["disabled"],Et=["disabled"],Lt={key:0,class:"loading-spinner"},Dt=Q({__name:"ConfirmModal",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:"ยืนยัน"},message:{type:String,default:"คุณต้องการดำเนินการนี้ใช่หรือไม่?"},variant:{type:String,default:"danger",validator:e=>["danger","warning","success","info","primary"].includes(e)},icon:{type:String,default:""},confirmText:{type:String,default:"ยืนยัน"},cancelText:{type:String,default:"ยกเลิก"},loadingText:{type:String,default:"กำลังดำเนินการ..."},loading:{type:Boolean,default:!1},showCancel:{type:Boolean,default:!0},closeOnOverlay:{type:Boolean,default:!0},teleportTo:{type:[String,Boolean],default:"body"}},emits:["confirm","cancel","update:isOpen"],setup(e,{emit:a}){const r=e,u=a,h=b(()=>{if(r.icon)return r.icon;const e={danger:"bi bi-exclamation-triangle",warning:"bi bi-exclamation-circle",success:"bi bi-check-circle",info:"bi bi-info-circle",primary:"bi bi-question-circle"};return e[r.variant]||e.primary}),p=()=>{u("confirm")},g=()=>{r.closeOnOverlay&&!r.loading&&(u("cancel"),u("update:isOpen",!1))};return(a,r)=>e.teleportTo?(s(),y(_,{key:0,to:e.teleportTo},[i(x,{name:"confirm-modal"},{default:o(()=>[e.isOpen?(s(),t("div",{key:0,class:l(["confirm-modal-overlay",{inline:"body"!==e.teleportTo}]),onClick:A(g,["self"])},[c("div",{class:l(["confirm-modal-content",[e.variant,{"pop-in":e.isOpen}]])},[c("div",{class:l(["confirm-modal-icon",e.variant])},[c("i",{class:l(h.value)},null,2)],2),c("h3",yt,d(e.title),1),c("p",{class:"confirm-modal-text",innerHTML:e.message},null,8,kt),c("div",xt,[e.showCancel?(s(),t("button",{key:0,class:"btn-modal-secondary",onClick:g,disabled:e.loading},d(e.cancelText),9,Tt)):k("",!0),c("button",{class:l(["btn-modal-primary",e.variant]),onClick:p,disabled:e.loading},[e.loading?(s(),t("span",_t)):k("",!0),f(" "+d(e.loading?e.loadingText:e.confirmText),1)],10,Ct)])],2)],2)):k("",!0)]),_:1})],8,["to"])):(s(),t(n,{key:1},[e.isOpen?(s(),t("div",{key:0,class:"confirm-modal-overlay inline",onClick:A(g,["self"])},[c("div",{class:l(["confirm-modal-content",[e.variant,{"pop-in":e.isOpen}]])},[c("div",{class:l(["confirm-modal-icon",e.variant])},[c("i",{class:l(h.value)},null,2)],2),c("h3",St,d(e.title),1),c("p",{class:"confirm-modal-text",innerHTML:e.message},null,8,Mt),c("div",At,[e.showCancel?(s(),t("button",{key:0,class:"btn-modal-secondary",onClick:g,disabled:e.loading},d(e.cancelText),9,It)):k("",!0),c("button",{class:l(["btn-modal-primary",e.variant]),onClick:p,disabled:e.loading},[e.loading?(s(),t("span",Lt)):k("",!0),f(" "+d(e.loading?e.loadingText:e.confirmText),1)],10,Et)])],2)])):k("",!0)],64))}},[["__scopeId","data-v-c5d09e8f"]]);function $t(){const t=e({isOpen:!1,title:"ยืนยัน",message:"คุณต้องการดำเนินการนี้ใช่หรือไม่?",variant:"danger",icon:"",confirmText:"ยืนยัน",cancelText:"ยกเลิก",loadingText:"กำลังดำเนินการ...",loading:!1,showCancel:!0,teleportTo:"body",resolve:null}),s=(e={})=>new Promise(s=>{t.value={...t.value,isOpen:!0,title:e.title||"ยืนยัน",message:e.message||"คุณต้องการดำเนินการนี้ใช่หรือไม่?",variant:e.variant||"danger",icon:e.icon||"",confirmText:e.confirmText||"ยืนยัน",cancelText:e.cancelText||"ยกเลิก",loadingText:e.loadingText||"กำลังดำเนินการ...",showCancel:!1!==e.showCancel,loading:!1,teleportTo:void 0!==e.teleportTo?e.teleportTo:"body",resolve:s}}),i=()=>{t.value.resolve&&(t.value.resolve(!0),t.value.loading||(t.value.isOpen=!1))},o=()=>{t.value.resolve&&t.value.resolve(!1),t.value.isOpen=!1},n=I({name:"ConfirmModalWrapper",setup:()=>()=>E(Dt,{isOpen:t.value.isOpen,title:t.value.title,message:t.value.message,variant:t.value.variant,icon:t.value.icon,confirmText:t.value.confirmText,cancelText:t.value.cancelText,loadingText:t.value.loadingText,loading:t.value.loading,showCancel:t.value.showCancel,teleportTo:t.value.teleportTo,onConfirm:i,onCancel:o,"onUpdate:isOpen":e=>{t.value.isOpen=e}})});return{confirm:s,confirmDelete:(e,t={})=>s({title:"ยืนยันการลบ",message:`คุณต้องการลบ "<strong>${e}</strong>" ใช่หรือไม่?`,variant:"danger",confirmText:"ลบ",cancelText:"ยกเลิก",loadingText:"กำลังลบ...",...t}),confirmAction:async(e={})=>{const{onConfirm:s,onCancel:i,...o}=e;return new Promise(e=>{t.value={...t.value,isOpen:!0,title:o.title||"ยืนยัน",message:o.message||"คุณต้องการดำเนินการนี้ใช่หรือไม่?",variant:o.variant||"danger",icon:o.icon||"",confirmText:o.confirmText||"ยืนยัน",cancelText:o.cancelText||"ยกเลิก",loadingText:o.loadingText||"กำลังดำเนินการ...",showCancel:!1!==o.showCancel,loading:!1,teleportTo:void 0!==o.teleportTo?o.teleportTo:"body",resolve:async o=>{if(o&&s){t.value.loading=!0;try{await s(),t.value.isOpen=!1,e(!0)}catch(n){throw t.value.loading=!1,n}}else i&&await i(),t.value.isOpen=!1,e(!1)}}})},alert:(e={})=>s({title:e.title||"แจ้งเตือน",message:e.message||"",variant:e.variant||"info",confirmText:e.confirmText||"ตกลง",showCancel:!1,...e}),confirmState:t,ConfirmModalComponent:n,handleConfirm:i,handleCancel:o}}const Pt=[{name:"สำนักส่งเสริมวิชาการและงานทะเบียน",officer:"นางสาววิพาดา",phones:["056-717-119","056-717-100 ต่อ 1121","056-717-100 ต่อ 1122","056-717-100 ต่อ 1129"],unit:"1121, 1122, 1129"},{name:"งาน กยศ. กองพัฒนานักศึกษา",facebook:"https://www.facebook.com/Studentloan.PCRU/?locale=th_TH",facebookName:"งาน กยศ. กองพัฒนานักศึกษา มหาวิทยาลัยราชภัฏเพชรบูรณ์"},{name:"หน่วยหอพักนักศึกษา",phone:"056-717100",unit:"5115",facebookName:"หน่วยหอพักนักศึกษา มหาวิทยาลัยราชภัฏเพชรบูรณ์"},{name:"ระบบจัดการหอพัก (สมัคร/จองห้องพัก)",url:"https://miscenter.pcru.ac.th/dormitory/"},{name:"เช็คสิทธิ์/ลงทะเบียนใช้งานหอพักครั้งแรก",url:"https://miscenter.pcru.ac.th/dormitory/regis"}],Bt=[{id:1,name:"กองพัฒนานักศึกษา",phone:"056-717144"},{id:2,name:"สำนักวิทยบริการ บริการ IT",phone:"056-717100",extension:"3999"},{id:3,name:"สำนักส่งเสริมวิชาการและงานทะเบียน",phone:"0-5671-7119",extension:"1121"}],Ot="/~s651102064101/frontend/assets/png/logo-BmfHBiUJ.png",Ht={BASE_URL:"/~s651102064101/frontend/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AI_GREET_MOUSE_TRACKING:"true",VITE_API_BASE_URL:"https://ict.pcru.ac.th/~s651102064101/backend",VITE_APP_VERSION:"v1.0",VITE_AUTO_OPEN_CHATBOT:"true",VITE_BOT_SLEEP_TIMEOUT:"15000",VITE_BOT_TYPING_DELAY_MS:"0",VITE_BOT_TYPING_INDICATOR_MS:"0",VITE_BOT_TYPING_SPEED:"0",VITE_DEV_HOST:"0.0.0.0",VITE_DEV_PORT:"36144",VITE_GOOGLE_OAUTH_CLIENT_ID:"361402205480-6bghd1l8kjee4383hf1fhf7dert8cc05.apps.googleusercontent.com",VITE_PARTICLE_COUNT:"15",VITE_PARTICLE_MAX_DURATION:"40",VITE_PARTICLE_MAX_SIZE:"8",VITE_PARTICLE_MIN_DURATION:"15",VITE_PARTICLE_MIN_SIZE:"1",VITE_PARTICLE_OPACITY:"0.7",VITE_PRIVACY_EMAIL:"st651102064101@pcru.ac.th",VITE_PUBLIC_URL:"https://ict.pcru.ac.th/~s651102064101/frontend/",VITE_SNOW_COUNT:"10",VITE_SNOW_MAX_DURATION:"25",VITE_SNOW_MAX_SIZE:"5.8",VITE_SNOW_MIN_DURATION:"10",VITE_SNOW_MIN_SIZE:"1.0",VITE_SNOW_OPACITY:"1",VITE_SNOW_Z_INDEX:"0"},Nt=$t(),Ft={name:"ChatbotView",components:{ChatbotHelpView:ht,BotTooltip:bt,ConfirmModalComponent:Nt.ConfirmModalComponent},data:()=>({messageIdCounter:0,visible:!0,openIndexes:[],showAllCategories:!1,drawerWidth:"400px",loading:!1,loadError:"",isOffline:!1,query:"",placeholderText:"ขอความช่วยเหลือจาก ปลายฟ้า",placeholderExamples:[],placeholderIndex:0,maxInputRows:7,placeholderInterval:null,feedbackTutorialTriggered:!1,messages:[],geminiTypingText:"",geminiTypingIndex:0,isGeminiTyping:!1,welcomeTyping:!1,welcomeTypingTimer:null,botTypingTimers:[],tempTyping:!1,welcomeTypingShown:!1,isWinterSeason:!1,showScrollTop:!1,lastScrollTop:0,scrollThreshold:30,scrollTicking:!1,showFooter:!0,showFooterTimer:null,isScrollingUp:!1,showScrollTutorial:!1,scrollTutorialShown:!1,scrollButtonRect:null,isDragging:!1,dragStartX:0,dragStartPage:0,anchorBottom:!0,botAvatar:null,botVideo:Pe,botSleepVideo:"/~s651102064101/frontend/assets/mp4/bot2sleep-CfiAIOUl.mp4",botWakeVideo:"/~s651102064101/frontend/assets/mp4/bot2wake-BIR0QRXO.mp4",botReverseVideo:"/~s651102064101/frontend/assets/mp4/bot2reverse-BToDjv_I.mp4",botFallbackImg:Me,botSleepFallbackImg:"/~s651102064101/frontend/assets/jpg/bot2sleep-DChyf8bz.jpg",isPlayingReverse:!1,userType:"",botName:"ปลายฟ้า",botPronoun:"หนู",pcruTilt:{x:0,y:0},permissionRequested:!1,isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,userLocation:null,showAiIntro:!1,aiTilt:{x:0,y:0,s:1},aiTiltRafId:null,aiGreetTilt:{x:0,y:0},aiGreetTiltRafId:null,timeGreetingText:"",showHelpModal:!1,aiQuickActions:[],feedbackReasonOptions:[{value:"wrong_answer",label:"คำตอบไม่ถูกต้อง"},{value:"incomplete",label:"ข้อมูลไม่ครบถ้วน"},{value:"outdated",label:"ข้อมูลล้าสมัย"},{value:"not_relevant",label:"ไม่เกี่ยวข้องกับคำถาม"},{value:"confusing",label:"เข้าใจยาก/สับสน"},{value:"other",label:"อื่นๆ"}],openFeedbackDropdownIndex:null,showFeedbackCommentBox:!1,feedbackCommentText:"",pendingFeedbackMsg:null,botTooltip:null,feedbackToggleCount:0,feedbackToggleResetTimer:null,feedbackButtonsDisabled:!1,feedbackCooldownTime:5,feedbackCooldownTimer:null,isTyping:!1,typingTimeout:null,lastTypedChar:"",showUserTypingTooltip:!1,userTypingTooltipText:"",userTypingTooltipStyle:{},typingTooltipTimer:null,currentTypingMessageIndex:0,isComposing:!1,suggestionText:"",autocompleteKeywords:[],autocompleteSuggestTimer:null,autocompleteSuggestSeq:0,showThemeTransition:!1,themeTransitionSize:0,themeTransitionTimer:null,showThaiNotice:!0,thaiNoticeTimer:null,showVideo:!0,isBotSleeping:!1,isBotWakingUp:!1,showWakeSparkle:!1,idleTimer:null,idleCheckInterval:null,idleLastActivity:Date.now(),idleTimeout:parseInt("15000"),masterEnabled:!0,snowEnabled:!1,particleEnabled:!0,shadowEnabled:!0,animationEnabled:!0,snowCount:parseInt("10"),snowMinSize:parseFloat("1.0"),snowMaxSize:parseFloat("5.8"),snowMinDuration:parseInt("10"),snowMaxDuration:parseInt("25"),snowOpacity:parseFloat("1"),snowflakeStyles:[],draggedSnowflakeIndex:null,snowflakeDragOffsets:{},categories:[],suggestionVisibleCounts:{},contactVisibleCounts:{},isKeyboardOpen:!1,initialViewportHeight:window.innerHeight,viewportHeight:"100%",panelFocused:!1,isPwaStandalone:!1,theme:"auto",isExpanded:!1,expandTimer:null,systemThemeMediaQuery:null,sendBtnFixedStyle:null,hasSimulatedKeyboardCycle:!1,miniHelpDismissed:!1,hasAskedBot:!1,inputFocusTimestamps:[],inputFocusCooldownUntil:0,MESSAGES_PER_PAGE:20,MAX_STORED_MESSAGES:500,allStoredMessages:[],currentPage:1,hasMoreMessages:!1,showLoadMoreHint:!1,loadMoreHintTimer:null,isLoadingMore:!1,MAX_GEMINI_CONVERSATIONS:10,geminiConversations:[],currentGeminiConversationId:null,showGeminiHistory:!1,showGeminiDeleteButtons:!1,isTemporaryGemini:!1,MAX_CHATBOT_CONVERSATIONS:10,chatbotConversations:[],currentChatbotConversationId:null,showChatbotHistory:!1,showChatbotDeleteButtons:!1,isTemporaryChatbot:!1,inputTooltipCooldownUntil:0,inputTooltipMinIntervalMs:3e3,inputTooltipShowProbability:.5,lastBotNudgeAt:0,botNudgeMinIntervalMs:45e3,welcomeTitle:"",welcomeSub:"",welcomeInstruction:"",stopwords:[],protectedKeywords:new Set,allProtectedWords:new Set,segmenter:null,graphicsQuality:"medium",showGraphicsMenu:!1,videoObserver:null,showMoreMenu:!1,isMoreMenuClosing:!1,moreMenuItemsVisible:[!1,!1,!1],moreMenuItemsHiding:[!1,!1,!1],graphicsOptions:[{value:"low",label:"ต่ำ",icon:""},{value:"medium",label:"กลาง",icon:""},{value:"high",label:"สูง",icon:""}],longPressTimer:null,longPressCountdown:0,showLongPressOverlay:!1,longPressDuration:3e3,longPressStartTimer:null,isLongPressing:!1,fabPointerActive:!1,useGeminiMode:!1,geminiSessionId:null,isVoiceMode:!1,recognition:null,isListening:!1,showLineMenu:!1,lineMenuCollapsed:!1,lineMenuCategories:[],selectedParentCategory:null,lineMenuExpanded:!1,carouselCurrentPage:0,carouselPages:["categories","locations","contacts"],carouselContacts:[],carouselContactsLoading:!1,selectedContact:null,carouselDragStartX:0,carouselDragCurrentX:0,carouselDragStartY:0,carouselIsDragging:!1,carouselDragOffset:0,carouselSwipeIsHorizontal:null,showPageLabelToast:!1,pageLabelToastText:"",pageLabelToastTimer:null,showCarouselDots:!1,carouselDotsTimer:null,locationQuickLinks:[{id:1,label:"สำนักวิทยบริการฯ",query:"พิกัด สำนักวิทยบริการ และเทคโนโลยีสารสนเทศ"},{id:2,label:"ห้องสมุด",query:"พิกัด ห้องสมุด"},{id:3,label:"อาคารเรียนรวม",query:"พิกัด อาคารเรียนรวม"},{id:4,label:"กองพัฒนานักศึกษา",query:"พิกัด กองพัฒนานักศึกษา"},{id:5,label:"สำนักส่งเสริมวิชาการ",query:"พิกัด สำนักส่งเสริมวิชาการและงานทะเบียน"},{id:6,label:"หอพักนักศึกษา",query:"พิกัด หอพักนักศึกษา"}],showWelcomeCategories:!1,isDragging:!1,dragStartY:0,dragCurrentY:0,menuBaseHeight:350,panelHeight:0,fullscreenDragHeight:0,showMenuTutorial:!1,menuTutorialStep:0,menuTutorialTargetRect:null,menuTutorialSteps:[{icon:"📱",title:"เมนูลัด",description:"กดปุ่มนี้เพื่อเปิดเมนูหมวดหมู่ ช่วยให้ค้นหาข้อมูลได้ง่ายขึ้น",target:"menu-toggle",showArrow:!0},{icon:"📂",title:"เลือกหมวดหมู่",description:"กดที่หมวดหมู่ที่ต้องการ ถ้ามีหมวดย่อยจะแสดงให้เลือกต่อ",target:"menu-grid",showArrow:!0},{icon:"↕️",title:"ลากขยาย/ย่อ",description:"ลากแถบด้านบนขึ้นเพื่อขยายเต็มจอ หรือลากลงเพื่อย่อ",target:"menu-handle",showArrow:!0},{icon:"⬅️",title:"ย้อนกลับ",description:"กดปุ่มย้อนกลับเพื่อกลับไปหมวดหมู่หลัก",target:"menu-back",showArrow:!0},{icon:"⌨️",title:"สลับโหมด",description:"กดปุ่มคีย์บอร์ดเพื่อกลับไปพิมพ์คำถามแทน",target:"keyboard-toggle",showArrow:!0},{icon:"✨",title:"พร้อมใช้งาน!",description:"ลองใช้เมนูเพื่อค้นหาข้อมูลที่ต้องการได้เลย",target:null,showArrow:!1}],showIntroAnimation:!1,introPhase:0,isFirstTimeUser:!1,hasShownIntroEver:!1,isTabHidden:!1,isScrolling:!1,scrollTimeout:null,showGeminiTutorial:!1,geminiTutorialStep:0,geminiTutorialTargetRect:null,geminiTutorialSteps:[{icon:"🤖",title:"โหมดใหม่! AI Chatbot",description:"ตอนนี้คุณสามารถสลับระหว่างโหมดค้นหาและโหมด AI ได้แล้ว",target:null,showArrow:!1},{icon:"🔍",title:"โหมดค้นหา",description:"ค้นหาจากคลังข้อมูลที่มีอยู่ ได้คำตอบรวดเร็วและแม่นยำ",target:"gemini-toggle",showArrow:!0},{icon:"✨",title:"โหมด AI",description:"คุยกับ Gemini AI ได้แบบต่อเนื่อง ตอบคำถามได้หลากหลายขึ้น",target:"gemini-toggle",showArrow:!0},{icon:"🚀",title:"พร้อมใช้งาน!",description:"ลองสลับโหมดดูตามความต้องการของคุณได้เลย",target:null,showArrow:!1}],showFeedbackTutorial:!1,tutorialStep:0,tutorialTargetRect:null,tutorialSteps:[{icon:"👋",title:"ยินดีต้อนรับ!",description:"เมื่อบอทตอบคำถามเสร็จ จะมีปุ่มให้คุณบอกความรู้สึกได้",target:null,showArrow:!1},{icon:"👍",title:"กดถูกใจ",description:"หากคำตอบตรงใจ กดปุ่มนี้เพื่อบอกว่าเราตอบได้ดี",target:"like",showArrow:!0},{icon:"👎",title:"กดไม่ถูกใจ",description:"หากต้องการให้ปรับปรุง กดปุ่มนี้แล้วบอกเหตุผลได้เลย",target:"dislike",showArrow:!0},{icon:"✨",title:"พร้อมใช้งาน!",description:"ขอบคุณที่ช่วยให้เราพัฒนาได้ดียิ่งขึ้น",target:null,showArrow:!1}],fpsMonitorEnabled:!0,currentFps:60,fpsHistory:[],fpsCheckInterval:null,fpsAnimationFrame:null,lastFrameTime:0,frameCount:0,lowFpsCount:0,autoGraphicsAdjusted:!1,showPerfWarning:!1,perfWarningMessage:"",perfWarningReason:"",perfWarningTimer:null,showAppleAlert:!1,appleAlertShown:!1,clearBtnHidden:!1,isStartingRecognition:!1,messageTextRefs:{}}),computed:{truncatedSuggestionSuffix(){if(!this.suggestionText||!this.query)return"";const e=this.suggestionText.slice((this.query||"").length);if(!e)return"";return e.length>12?e.slice(0,12):e},dynamicPlaceholder(){return this.isVoiceMode?"กำลังฟัง":this.useGeminiMode?"ถามข้อมูลเกี่ยวกับ PCRU กับ Gemini 2.0":this.placeholderText||"ขอความช่วยเหลือจาก ปลายฟ้า"},typingStyle(){return this.isTyping?{color:"#1d1d1f",textShadow:"none",transition:"text-shadow 0.15s ease-out, color 0.15s ease-out"}:{}},carouselTrackStyle(){const e=Array.isArray(this.carouselPages)&&this.carouselPages.length?this.carouselPages.length:1;let t=-100*this.carouselCurrentPage;if(this.carouselIsDragging){const s=this.$refs.menuCarouselFullscreen||this.$refs.menuCarousel,i=s?.offsetWidth||300;t+=this.carouselDragOffset/i*100;const o=-100*(e-1)-20,n=20;t=Math.max(o,Math.min(n,t))}return{transform:`translateX(${t}%)`,transition:this.carouselIsDragging?"none":"transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"}},menuDragStyle(){if(!this.isDragging)return{};const e=this.dragStartY-this.dragCurrentY,t=this.menuBaseHeight,s=this.panelHeight||700;let i=t+e;return i=Math.max(60,Math.min(i,s)),{height:`${i}px`,maxHeight:"none",transition:"none"}},fullscreenDragStyle(){if(!this.isDragging||!this.lineMenuExpanded)return{};const e=this.dragStartY-this.dragCurrentY,t=this.panelHeight||700;let s=t+e;return s=Math.max(60,Math.min(s,t)),{height:`${s}px`,top:"auto",bottom:"0",transition:"none"}},currentGeminiTutorialData(){return this.geminiTutorialSteps[this.geminiTutorialStep]||this.geminiTutorialSteps[0]},geminiTutorialSpotlightStyle(){if(!this.geminiTutorialTargetRect)return{display:"none"};return{top:this.geminiTutorialTargetRect.top-8+"px",left:this.geminiTutorialTargetRect.left-8+"px",width:`${this.geminiTutorialTargetRect.width+16}px`,height:`${this.geminiTutorialTargetRect.height+16}px`}},geminiTutorialCardStyle(){if(!this.geminiTutorialTargetRect)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const e=window.innerHeight,t=this.geminiTutorialTargetRect.top;return t>e/2?{bottom:e-t+20+"px",left:"50%",transform:"translateX(-50%)"}:{top:`${this.geminiTutorialTargetRect.bottom+20}px`,left:"50%",transform:"translateX(-50%)"}},currentTutorialData(){return this.tutorialSteps[this.tutorialStep]||this.tutorialSteps[0]},tutorialSpotlightStyle(){if(!this.tutorialTargetRect)return{display:"none"};return{top:this.tutorialTargetRect.top-8+"px",left:this.tutorialTargetRect.left-8+"px",width:`${this.tutorialTargetRect.width+16}px`,height:`${this.tutorialTargetRect.height+16}px`}},tutorialCardStyle(){if(!this.tutorialTargetRect)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const e=window.innerHeight,t=this.tutorialTargetRect.top;return t>e/2?{bottom:e-t+20+"px",left:"50%",transform:"translateX(-50%)"}:{top:`${this.tutorialTargetRect.bottom+20}px`,left:"50%",transform:"translateX(-50%)"}},tutorialArrowStyle(){return this.tutorialTargetRect?{top:this.tutorialTargetRect.top-65+"px",left:this.tutorialTargetRect.left+this.tutorialTargetRect.width/2-20+"px"}:{display:"none"}},scrollTutorialSpotlightStyle(){if(!this.scrollButtonRect)return{display:"none"};return{top:this.scrollButtonRect.top-10+"px",left:this.scrollButtonRect.left-10+"px",width:`${this.scrollButtonRect.width+20}px`,height:`${this.scrollButtonRect.height+20}px`}},scrollTutorialCardStyle:()=>({position:"fixed",top:"50%",left:"50%",bottom:"auto",right:"auto",transform:"translate(-50%, -50%)",maxWidth:"calc(100vw - 40px)"}),scrollTutorialArrowStyle(){return this.scrollButtonRect?{top:this.scrollButtonRect.top-55+"px",left:this.scrollButtonRect.left+this.scrollButtonRect.width/2-15+"px"}:{display:"none"}},currentMenuTutorialData(){return this.menuTutorialSteps[this.menuTutorialStep]||this.menuTutorialSteps[0]},menuTutorialSpotlightStyle(){if(!this.menuTutorialTargetRect)return{display:"none"};return{top:this.menuTutorialTargetRect.top-10+"px",left:this.menuTutorialTargetRect.left-10+"px",width:`${this.menuTutorialTargetRect.width+20}px`,height:`${this.menuTutorialTargetRect.height+20}px`}},menuTutorialCardStyle(){return[1,2,3].includes(this.menuTutorialStep)?{bottom:"20px",left:"50%",top:"auto",transform:"translateX(-50%)",maxWidth:"calc(100vw - 40px)"}:{top:"50%",left:"50%",bottom:"auto",transform:"translate(-50%, -50%)",maxWidth:"calc(100vw - 40px)"}},menuTutorialArrowStyle(){return this.menuTutorialTargetRect?{top:this.menuTutorialTargetRect.top-65+"px",left:this.menuTutorialTargetRect.left+this.menuTutorialTargetRect.width/2-20+"px",transform:"rotate(0deg)"}:{display:"none"}},pwaFooterStyle(){return this.isPwaStandalone?{paddingBottom:"12px"}:{}},snowZIndex:()=>parseInt("0"),displayedCategories(){if(!this.categories||!Array.isArray(this.categories))return[];const e=this.categories.filter(e=>!e.parent).map(e=>{const t=this.categories.filter(t=>t.parent===e.id);return{...e,items:t.map(e=>e.title)}});return this.showAllCategories?e:e.slice(0,2)},userDisplayName(){try{const e=localStorage.getItem("userInfo")||"{}",t=JSON.parse(e);return t.Name||t.name||t.Username||t.username||t.displayName||"ผู้ใช้งาน"}catch(e){return"ผู้ใช้งาน"}},showTopCategories(){if(this.tempTyping)return!1;if(!Array.isArray(this.messages))return!0;return!this.messages.some(e=>e&&!0===e._temp)&&!this.hasMoreMessages},dynamicUnlikeMessages(){return["อืมม... จะถามอะไรดีนะ 🤔",`${this.botPronoun}รอฟังอยู่นะคะ 👂✨`,"กำลังจะถามอะไรหรอคะ 😊","เอ่อ... พิมพ์ช้าๆ ก็ได้นะคะ 🐌💕",`${this.botPronoun}พร้อมตอบแล้วค่ะ 💪✨`,"ถามอะไรมาเลยค่ะ 🙋‍♀️","อ่า... น่าจะเป็นคำถามดีๆ นะ 👀",`${this.botPronoun}ตั้งใจฟังอยู่เลยค่ะ 🎧`,"เอ๊ะ... กำลังคิดคำถามอยู่หรอคะ 💭",`มีอะไรให้${this.botPronoun}ช่วยดีคะ 🌸`,"ถามได้เลยนะคะ ไม่ต้องกลัว 😌","อืม... คำถามยากๆ หรือเปล่านะ 🧐"]},dynamicLikeMessages(){return["ขอบคุณนะคะ 💖✨","ยินดีมากเลยค่ะ 🥰","ดีใจที่ช่วยได้นะคะ 💜",`ขอบคุณที่ให้โอกาส${this.botPronoun}ค่ะ 🌸`,`${this.botPronoun}ดีใจมากเลย 😊💕`,"ขอบพระคุณค่ะ 🙏💫","ยินดีที่ได้ช่วยเหลือค่ะ 🌟"]},dynamicWarningMessages(){return["เอ่อ... กดบ่อยไปแล้วนะคะ 😅",`แกล้ง${this.botPronoun}หรอคะ 🙈💦`,"เลือกอันเดียวได้แล้วนะ 😂",`${this.botPronoun}งง... ชอบหรือไม่ชอบกันแน่คะ 🤔`,"ทำไมเปลี่ยนใจบ่อยจัง 😵","ขอแค่ครั้งเดียวได้มั้ยคะ 🥺",`${this.botPronoun}เหนื่อยแล้วค่ะ 😩💫`]},dynamicApologyMessages(){return["ขอโทษที่ตอบผิดค่ะ 😔💕","ขอโทษนะคะที่ไม่ตรงใจ 🙏",`${this.botPronoun}ขอโทษมากๆ จะพยายามดีขึ้นค่ะ 😊`,"อ๊ะ... โทษที่ตอบไม่ดีค่ะ 😭","ขอโทษจริงๆ ค่ะ 💜","ขอโทษค่ะ 😢","โทษที่ทำให้ผิดหวังค่ะ 🥺"]},aiTiltTransform(){const e=this.aiTilt.x||0;return{transform:`perspective(800px) rotateX(${this.aiTilt.y||0}deg) rotateY(${e}deg) scale(${this.aiTilt.s||1})`}},aiGreetTiltStyle(){return{transform:`perspective(600px) rotateY(${this.aiGreetTilt.x||0}deg) rotateX(${this.aiGreetTilt.y||0}deg) scale(1.02)`,transition:"transform 0.15s cubic-bezier(.2,.8,.3,1)"}},typingStyle(){return this.isTyping?{textShadow:"0 0 20px rgba(139, 76, 184, 0.6), 0 0 40px rgba(107, 44, 145, 0.4)",color:"#8B4CB8",transition:"text-shadow 0.15s ease-out, color 0.15s ease-out"}:{}},fabStyle:()=>({right:"18px",bottom:"18px",width:"56px",height:"56px",borderRadius:"28px",zIndex:1060}),lastBotMessageIndex(){if(!this.messages||0===this.messages.length)return-1;for(let e=this.messages.length-1;e>=0;e--)if("bot"===this.messages[e].type)return e;return-1},hasBotMessages(){return this.lastBotMessageIndex>=0},showClearBtn(){return!this.clearBtnHidden&&(Array.isArray(this.messages)&&this.messages.length>0||!!this.hasAskedBot)},themeDisplayOnly(){return"light"===this.theme?"สว่าง":"dark"===this.theme?"มืด":"อัตโนมัติ"},graphicsQualityLabel(){return"low"===this.graphicsQuality?"ต่ำ":"medium"===this.graphicsQuality?"กลาง":"สูง"},currentGraphicsOption(){return this.graphicsOptions.find(e=>e.value===this.graphicsQuality)||this.graphicsOptions[2]},gaugeNeedleRotation(){return"low"===this.graphicsQuality?-120:"medium"===this.graphicsQuality?0:120},gaugeNeedleColor(){return"low"===this.graphicsQuality?"#34C759":"medium"===this.graphicsQuality?"#FBBC05":"#FF3B30"},fpsColor(){return this.currentFps>=60?"#00ff00":this.currentFps>=45?"#ffff00":this.currentFps>=30?"#ff8800":"#ff0000"},pcruWatermarkStyle(){return"low"===this.graphicsQuality?{}:{transform:`rotateX(${this.pcruTilt.y}deg) rotateY(${this.pcruTilt.x}deg)`}}},updated(){this.$nextTick(()=>{this.observeBotVideos(),this.measureMessageCollapsibles(),this.checkOverflows()})},async mounted(){this.loadExpandedStateMap(),this.botTooltip=function(){const e=(e,s={})=>{const{type:i="info",duration:o=4e3,typing:n=!0,typingDuration:a=800,position:r="bottom-left"}=s,l=++$e,c={id:l,message:e,type:i,position:r,visible:!0,isClosing:!1,isTyping:n,showMessage:!n};return De.value.push(c),n&&setTimeout(()=>{const e=De.value.find(e=>e.id===l);e&&(e.isTyping=!1,e.showMessage=!0)},a),o>0&&setTimeout(()=>{t(l)},n?a+o:o),l},t=e=>{const t=De.value.find(t=>t.id===e);t&&(t.isClosing=!0,setTimeout(()=>{De.value=De.value.filter(t=>t.id!==e)},400))};return{tooltips:De,show:e,cute:(t,s=4e3)=>e(t,{type:"cute",duration:s}),thanks:(t,s=3500)=>e(t,{type:"success",duration:s}),warn:(t,s=4e3)=>e(t,{type:"warning",duration:s}),info:(t,s=4e3)=>e(t,{type:"info",duration:s}),error:(t,s=5e3)=>e(t,{type:"error",duration:s}),dismiss:t,dismissAll:()=>{De.value.forEach(e=>e.isClosing=!0),setTimeout(()=>{De.value=[]},400)}}}(),this.appleToast=W(),this.fetchCarouselContacts(),this.applyExpandedStateToMessages(),this.$nextTick(()=>{this.scrollToBottomInstant(),this.adjustInputHeight();try{if(!this._inputSizer){const e=document.createElement("textarea");e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.left="-9999px",e.style.top="0",e.style.height="0",e.style.overflow="hidden",e.style.visibility="hidden",e.style.whiteSpace="pre-wrap",e.style.wordWrap="break-word",document.body.appendChild(e),this._inputSizer=e}window.addEventListener("resize",this.adjustInputHeight)}catch(e){}}),this.detectStandaloneMode(),"Segmenter"in Intl&&(this.segmenter=new Intl.Segmenter("th",{granularity:"word"})),this.fetchStopwordsAndKeywords(),this.loadGraphicsQuality(),this.initVideoObserver(),this.checkWinterSeason(),this.generateSnowflakeStyles(),this.initGyroscope(),this._handleVisibilityChange=()=>{this.isTabHidden=document.hidden;const e=this.$el?.querySelector?.(".chat-root")||this.$el;e&&(document.hidden?e.classList.add("tab-hidden"):e.classList.remove("tab-hidden"))},document.addEventListener("visibilitychange",this._handleVisibilityChange),window.pcruNavigateTo=(e,t)=>{const s=`https://www.google.com/maps/dir/?api=1&destination=${e},${t}&travelmode=driving`;window.open(s,"_blank")},window.openMapFullscreen=e=>{const t=document.createElement("div");t.className="map-fullscreen-modal",t.innerHTML=`\n        <div class="map-fullscreen-overlay" onclick="this.parentElement.remove()"></div>\n        <div class="map-fullscreen-content">\n          <button class="map-fullscreen-close" onclick="this.closest('.map-fullscreen-modal').remove()" title="ปิด">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n              <line x1="18" y1="6" x2="6" y2="18"></line>\n              <line x1="6" y1="6" x2="18" y2="18"></line>\n            </svg>\n          </button>\n          <iframe src="${e}" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>\n        </div>\n      `,document.body.appendChild(t),document.body.style.overflow="hidden",t.addEventListener("DOMNodeRemoved",()=>{document.body.style.overflow=""})},this.checkAndShowFirstVisitIntro(),this.$nextTick(()=>{const e=this.$el;e&&(e.querySelectorAll("[data-bs-ride]").forEach(e=>e.removeAttribute("data-bs-ride")),e.setAttribute("data-bs-no-init","true"))}),this.timeGreetingText=this.computeTimeGreeting(),this.userTypingTooltipText=this.dynamicUnlikeMessages[0],this.showThaiNotice&&(this.thaiNoticeTimer&&clearTimeout(this.thaiNoticeTimer),this.thaiNoticeTimer=setTimeout(()=>{this.showThaiNotice=!1,this.thaiNoticeTimer=null},1e4));let e="";try{const t=localStorage.getItem("userInfo");if(t){const s=JSON.parse(t);e=s.Name||s.name||s.Username||s.username||s.displayName||""}}catch(o){}this.welcomeTitle||(this.welcomeTitle=e?`สวัสดี คุณ ${e}`:`สวัสดี <span class="wave-hand" aria-hidden="true">👋</span> ${this.botPronoun}ชื่อ ${this.botName} <br> ผู้ช่วย AI ของ PCRU ค่ะ`),this.welcomeSub||(this.welcomeSub="ฉันคือระบบช่วยเหลือของเรา — พร้อมช่วยคุณค้นหาคำตอบและแนะนำบริการ 💬"),this.welcomeInstruction||(this.welcomeInstruction="เลือกการทำงานด้านล่าง หรือพิมพ์คำถามของคุณได้เลย");try{"true"===localStorage.getItem("chatbot_use_gemini")&&(this.useGeminiMode=!0,this.geminiSessionId||(this.geminiSessionId="web-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)))}catch(o){}this.hasShownIntroEver=!0;try{const e=localStorage.getItem("chatbot_has_asked");this.hasAskedBot=!!e}catch(o){this.hasAskedBot=!1}try{this.initTheme()}catch(o){}this.$nextTick(()=>{const e=this.$refs.particleCanvas;if(e){const t=()=>{const t=e.parentElement;t&&(e.width=t.offsetWidth,e.height=t.offsetHeight)};t(),window.addEventListener("resize",t)}});const t=localStorage.getItem("userType");t?(this.userType=t,this.botAvatar=Ae(t)):this.botAvatar=Ae();try{const e=localStorage.getItem("aiImageUrl");e&&(this.botAvatar=e)}catch(o){}try{const e=await this.$axios.get("/ai-image/active");e?.data?.url&&(this.botAvatar=`${e.data.url}?t=${Date.now()}`)}catch(o){}try{const e=localStorage.getItem("botName");e&&(this.botName=e)}catch(o){}try{const e=await this.$axios.get("/ai-image/bot-pronoun");e?.data?.pronoun&&(this.botPronoun=e.data.pronoun)}catch(o){}try{const e=localStorage.getItem("chatbot_mini_help_dismissed");this.miniHelpDismissed=!!e}catch(o){this.miniHelpDismissed=!1}try{const e=localStorage.getItem("chatbot_master_enabled"),t=localStorage.getItem("chatbot_snow_enabled"),s=localStorage.getItem("chatbot_particle_enabled"),i=localStorage.getItem("chatbot_shadow_enabled"),o=localStorage.getItem("chatbot_animation_enabled");null!==e&&(this.masterEnabled="true"===e),null!==t&&(this.snowEnabled="true"===t),null!==s&&(this.particleEnabled="true"===s),null!==i&&(this.shadowEnabled="true"===i),null!==o&&(this.animationEnabled="true"===o),"false"===e&&(this.snowEnabled=!1,this.particleEnabled=!1,this.shadowEnabled=!1,this.animationEnabled=!1,document.body.classList.add("no-effects")),"false"!==i&&"false"!==e||document.body.classList.add("no-shadows")}catch(o){}if(this.loadChatHistory(),this.loadGeminiConversations(),this.loadChatbotConversations(),!this.useGeminiMode)if(this.chatbotConversations.length>0){let e=null;this.currentChatbotConversationId&&(e=this.chatbotConversations.find(e=>e.id===this.currentChatbotConversationId)),e||(e=this.chatbotConversations[0],this.currentChatbotConversationId=e.id);const t=e.messages||[],s=Math.max(0,t.length-this.MESSAGES_PER_PAGE);this.messages=t.slice(s)}else this.createNewChatbotConversation();this.loadCategoryState();try{const e=localStorage.getItem("chatbot_welcome_categories_visible");null!==e&&(this.showWelcomeCategories="true"===e)}catch(o){}document.addEventListener("click",this.handleOutsideClick),this.onChatbotSettingsChanged=e=>{const t=e?.detail||{};"boolean"==typeof t.masterEnabled&&(this.masterEnabled=t.masterEnabled,t.masterEnabled?document.body.classList.remove("no-effects"):(this.snowEnabled=!1,this.particleEnabled=!1,this.shadowEnabled=!1,this.animationEnabled=!1,document.body.classList.add("no-effects"))),"boolean"==typeof t.snowEnabled&&(this.snowEnabled=t.snowEnabled,this.snowEnabled?this.generateSnowflakeStyles():(this.snowflakeStyles=[],this.draggedSnowflakeIndex=null,this.snowflakeDragOffsets={})),"boolean"==typeof t.shadowEnabled&&(t.shadowEnabled&&this.masterEnabled?document.body.classList.remove("no-shadows"):document.body.classList.add("no-shadows"))},window.addEventListener("chatbot-settings-changed",this.onChatbotSettingsChanged),window.addEventListener("resize",this.handleKeyboardDetection),this.$nextTick(()=>{const e=this.$refs.inputBox;e&&(e.addEventListener("focus",this.onInputFocus),e.addEventListener("blur",this.onInputBlur)),this.simulateKeyboardCycle()});const s=()=>{window.visualViewport?(this.viewportHeight=`${window.visualViewport.height}px`,this.$refs.panelBody&&setTimeout(()=>{try{this.$refs.panelBody.scrollTop=this.$refs.panelBody.scrollHeight}catch(o){}},100)):this.viewportHeight=`${window.innerHeight}px`};s(),window.visualViewport?(window.visualViewport.addEventListener("resize",s),window.visualViewport.addEventListener("scroll",s)):window.addEventListener("resize",s),this._viewportHandler=s,this.loading=!0,this.loadError="",this.isOffline=!1;try{if(!this.$axios)throw new Error("axios plugin not available as $axios");let e=(await this.$axios.get("/categories",{params:{onlyWithAnswers:1}})).data;if(e&&!Array.isArray(e)){if(!Array.isArray(e.categories))throw new Error("Categories API returned unexpected structure. Expected array or object with categories array.");e=e.categories}if(!Array.isArray(e))throw new Error("Unexpected categories response shape - payload is not an array");if(e.length&&e[0].hasOwnProperty("CategoriesID")){const t={},s={};e.forEach(e=>{const i=String(e.CategoriesID),o=null==e.ParentCategoriesID?null:String(e.ParentCategoriesID),n=!o||o===i;t[i]={id:i,title:e.CategoriesName||"Untitled",parent:n?null:o,pdf:e.CategoriesPDF||null},o&&o!==i&&(s[o]||(s[o]=[]),s[o].push(i))});const i=Object.values(t);i.length>0&&(this.categories=i,this.$nextTick(()=>{}))}else{const t=e.map((e,t)=>{const s=e.id||e.CategoriesID||String(t+1),i=e.title||e.name||e.category||"Untitled",o=e.parent||e.ParentCategoriesID||null,n=e.pdf||e.CategoriesPDF||null;return{id:String(s),title:i,parent:o?String(o):null,pdf:n}});t.length>0&&(this.categories=t,this.lineMenuCategories=t.filter(e=>!e.parent).slice(0,8))}this.restoreCategoriesDisabledState()}catch(n){this.loadError=n?.message||"Failed to load categories",this.isOffline=!0}finally{this.loading=!1}this.$nextTick(()=>this.updateAnchoring()),window.addEventListener("resize",this.updateAnchoring),this.startIdleTracking();const i=()=>{const e=this.$refs.panelBody,t=document.querySelector(".chat-panel");e&&(e.scrollTop=e.scrollHeight),t&&(t.scrollTop=t.scrollHeight)};i(),setTimeout(i,100),setTimeout(i,300),setTimeout(i,600),setTimeout(i,700),this.$nextTick(()=>{this.scrollToBottomInstant(),this.checkOverflows()})},beforeDestroy(){this.welcomeTypingTimer&&(clearTimeout(this.welcomeTypingTimer),this.welcomeTypingTimer=null),this.loadMoreHintTimer&&(clearTimeout(this.loadMoreHintTimer),this.loadMoreHintTimer=null),window.removeEventListener("resize",this.updateAnchoring);try{window.removeEventListener("resize",this.adjustInputHeight),this._inputSizer&&this._inputSizer.parentNode&&this._inputSizer.parentNode.removeChild(this._inputSizer),this._inputSizer=null}catch(e){}window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.handleDeviceOrientation,!0),this.stopIdleTracking(),this.placeholderInterval&&(clearInterval(this.placeholderInterval),this.placeholderInterval=null),Array.isArray(this.botTypingTimers)&&this.botTypingTimers.length&&(this.botTypingTimers.forEach(e=>clearTimeout(e)),this.botTypingTimers=[]),this.unlikeTooltipTimer&&(clearTimeout(this.unlikeTooltipTimer),this.unlikeTooltipTimer=null),this.likeTooltipTimer&&(clearTimeout(this.likeTooltipTimer),this.likeTooltipTimer=null),this.feedbackToggleResetTimer&&(clearTimeout(this.feedbackToggleResetTimer),this.feedbackToggleResetTimer=null),this.feedbackCooldownTimer&&(clearTimeout(this.feedbackCooldownTimer),this.feedbackCooldownTimer=null),this.feedbackCooldownInterval&&(clearInterval(this.feedbackCooldownInterval),this.feedbackCooldownInterval=null);try{this.aiTiltRafId&&(cancelAnimationFrame(this.aiTiltRafId),this.aiTiltRafId=null)}catch(e){}window.matchMedia&&(this.systemThemeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.systemThemeMediaQuery.addEventListener("change",this.handleSystemThemeChange))},beforeUnmount(){this.welcomeTypingTimer&&(clearTimeout(this.welcomeTypingTimer),this.welcomeTypingTimer=null),window.removeEventListener("resize",this.updateAnchoring),window.removeEventListener("resize",this.handleKeyboardDetection);try{window.removeEventListener("resize",this.adjustInputHeight),this._inputSizer&&this._inputSizer.parentNode&&this._inputSizer.parentNode.removeChild(this._inputSizer),this._inputSizer=null}catch(t){}document.removeEventListener("click",this.handleOutsideClick,!0),this._handleVisibilityChange&&(document.removeEventListener("visibilitychange",this._handleVisibilityChange),this._handleVisibilityChange=null);const e=this.$refs.inputBox;e&&(e.removeEventListener("focus",this.onInputFocus),e.removeEventListener("blur",this.onInputBlur)),window.removeEventListener("chatbot-settings-changed",this.onChatbotSettingsChanged),this.videoObserver&&(this.videoObserver.disconnect(),this.videoObserver=null),Array.isArray(this.botTypingTimers)&&this.botTypingTimers.length&&(this.botTypingTimers.forEach(e=>clearTimeout(e)),this.botTypingTimers=[]),this.unlikeTooltipTimer&&(clearTimeout(this.unlikeTooltipTimer),this.unlikeTooltipTimer=null),this.likeTooltipTimer&&(clearTimeout(this.likeTooltipTimer),this.likeTooltipTimer=null),this.feedbackToggleResetTimer&&(clearTimeout(this.feedbackToggleResetTimer),this.feedbackToggleResetTimer=null),this.feedbackCooldownTimer&&(clearTimeout(this.feedbackCooldownTimer),this.feedbackCooldownTimer=null),this.feedbackCooldownInterval&&(clearInterval(this.feedbackCooldownInterval),this.feedbackCooldownInterval=null),this.expandTimer&&(clearTimeout(this.expandTimer),this.expandTimer=null),this.autocompleteSuggestTimer&&(clearTimeout(this.autocompleteSuggestTimer),this.autocompleteSuggestTimer=null),this._viewportHandler&&(window.visualViewport?(window.visualViewport.removeEventListener("resize",this._viewportHandler),window.visualViewport.removeEventListener("scroll",this._viewportHandler)):window.removeEventListener("resize",this._viewportHandler),this._viewportHandler=null),this.systemThemeMediaQuery&&(this.systemThemeMediaQuery.removeEventListener("change",this.handleSystemThemeChange),this.systemThemeMediaQuery=null),this.stopFpsMonitoring(),this.perfWarningTimer&&(clearTimeout(this.perfWarningTimer),this.perfWarningTimer=null),this.reverseInterval&&(cancelAnimationFrame(this.reverseInterval),this.reverseInterval=null),this.stopVoiceRecognition()},watch:{showWelcomeCategories(e){try{localStorage.setItem("chatbot_welcome_categories_visible",String(e))}catch(t){}},visible(e){e?(this.startFpsMonitoring(),this.showScrollTop=!1,this.lastScrollTop=0,this.messages.length>0||this.welcomeTypingShown?(this.welcomeTitle=`สวัสดี <span class="wave-hand" aria-hidden="true">👋</span> ${this.botPronoun}ชื่อ ${this.botName} <br> ผู้ช่วย AI ของ PCRU ค่ะ`,this.welcomeSub="ยินดีที่ได้ช่วยคุณ! มาหาคำตอบที่คุณต้องการกันเลยค่ะ ✨",this.welcomeInstruction="เลือกหมวดหมู่ด้านล่าง <br> หรือพิมพ์คำถามได้เลยค่ะ 😊",this.welcomeTyping=!1,this.welcomeTypingTimer&&(clearTimeout(this.welcomeTypingTimer),this.welcomeTypingTimer=null)):(this.welcomeTyping=!1,this.welcomeTypingShown=!0,this.typeWelcomeMessage(),this.showThaiNotice=!0,this.thaiNoticeTimer&&clearTimeout(this.thaiNoticeTimer),this.thaiNoticeTimer=setTimeout(()=>{this.showThaiNotice=!1,this.thaiNoticeTimer=null},5e3)),this.$nextTick(()=>{this.updateAnchoring(),this.messages&&0!==this.messages.length?(this.scrollToBottom(),setTimeout(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=this.$refs.panelBody.scrollHeight)},400)):(this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0),setTimeout(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0)},400))})):(this.stopFpsMonitoring(),this.welcomeTypingTimer&&(clearTimeout(this.welcomeTypingTimer),this.welcomeTypingTimer=null),Array.isArray(this.botTypingTimers)&&this.botTypingTimers.length&&(this.botTypingTimers.forEach(e=>clearTimeout(e)),this.botTypingTimers=[]),this.welcomeTyping=!1,this.tempTyping=!1,this.messages=this.messages.filter(e=>!e._temp))},messages:{handler(e,t){if(!this.isLoadingMore){if(t&&e.length===t.length){const s=e[e.length-1],i=t[t.length-1];if(s&&i&&s.id===i.id&&s.text===i.text)return}if(e.length>0){const t=e[e.length-1];if(t&&void 0===t._expanded){const e=this.getMessageStorageKey(t);t._expanded=!(!this.expandedStateMap||!this.expandedStateMap[e])}t&&void 0===t._collapsible&&(t._collapsible=t.text&&String(t.text).replace(/\s+/g," ").length>300),this._measureDebounce&&clearTimeout(this._measureDebounce),this._measureDebounce=setTimeout(()=>{this.measureMessageCollapsibles()},100),"user"===t.type?(this.geminiTypingText="",this.isGeminiTyping=!1):t&&"bot"===t.type&&this.useGeminiMode&&!t.typing&&!t._typed&&(this.startGeminiTyping(t.text),t._typed=!0)}}},deep:!1}},methods:{startGeminiTyping(e){this.geminiTypingText="",this.geminiTypingIndex=0,this.isGeminiTyping=!0,this.typeNextChar(e)},isCollapsible(e){if(void 0!==e._collapsible)return e._collapsible;const t=e&&e.text?String(e.text).replace(/\s+/g," "):"";return e._collapsible=t.length>300,void 0===e._expanded&&(e._expanded=!1),e._collapsible},toggleExpand(e){e._expanded=!e._expanded;const t=this.getMessageStorageKey(e);this.expandedStateMap[t]=!!e._expanded,this.saveExpandedStateMap()},checkOverflows(){this.messages.forEach(e=>{const t=this.messageTextRefs[e.id];t&&!e._expanded?e._isOverflowing=t.scrollHeight>t.clientHeight:e._isOverflowing=!1})},copyMessage(e){const t=e&&e.text?String(e.text):"",s=document.createElement("div");s.innerHTML=t;const i=s.textContent||s.innerText||t,o=e=>{try{const t=document.createElement("textarea");return t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),!0}catch(t){return!1}};navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(i).then(()=>{this.appleToast&&this.appleToast.success("คัดลอกแล้ว")}).catch(()=>{o(i)?this.appleToast&&this.appleToast.success("คัดลอกแล้ว"):this.appleToast&&this.appleToast.error("ไม่สามารถคัดลอกได้")}):o(i)?this.appleToast&&this.appleToast.success("คัดลอกแล้ว"):this.appleToast&&this.appleToast.error("ไม่สามารถคัดลอกได้"),this.$nextTick(()=>this.measureMessageCollapsibles())},triggerCloseAnim(e){try{const t=e&&e.currentTarget;if(!t)return;t.classList.add("is-active"),window.setTimeout(()=>t.classList.remove("is-active"),600)}catch(t){}},loadExpandedStateMap(){try{const e=localStorage.getItem("chatbot_expanded_states");this.expandedStateMap=e?JSON.parse(e):{}}catch(e){this.expandedStateMap={}}},saveExpandedStateMap(){try{localStorage.setItem("chatbot_expanded_states",JSON.stringify(this.expandedStateMap||{}))}catch(e){}},applyExpandedStateToMessages(){Array.isArray(this.messages)&&(this.messages.forEach(e=>{const t=this.getMessageStorageKey(e);this.expandedStateMap&&Object.prototype.hasOwnProperty.call(this.expandedStateMap,t)?e._expanded=!!this.expandedStateMap[t]:void 0===e._expanded&&(e._expanded=!1),void 0===e._collapsible&&(e._collapsible=e.text&&String(e.text).replace(/\s+/g," ").length>300)}),this.$nextTick(()=>this.measureMessageCollapsibles()))},getMessageStorageKey(e){return e?e.id?`msg:${e.id}`:`hash:${this.simpleHash(String(e.text||""))}`:""},simpleHash(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t|=0;return Math.abs(t).toString(36)},measureMessageCollapsibles(e=!1){try{if(!this.$el)return;const t=e?this.messages:this.messages.slice(-5),s=new Set(t.map(e=>String(e.id)));this.$el.querySelectorAll("[data-message-id]").forEach(t=>{const i=t.getAttribute("data-message-id");if(!e&&!s.has(i))return;const o=t.querySelector(".message-text");if(!o)return;const n=window.getComputedStyle(o),a=parseFloat(n.lineHeight)||1.4*parseFloat(n.fontSize),r=Math.round(o.clientHeight/a),l=this.messages.find(e=>String(e.id)===i||String(e.id)===String(i));if(l){const e=r>5;if(l._collapsible=e,void 0===l._expanded){const e=this.getMessageStorageKey(l);l._expanded=!(!this.expandedStateMap||void 0===this.expandedStateMap[e])&&!!this.expandedStateMap[e]}}})}catch(t){}},typeNextChar(e){this.geminiTypingIndex<e.length?(this.geminiTypingText+=e[this.geminiTypingIndex],this.geminiTypingIndex++,setTimeout(()=>this.typeNextChar(e),0)):(this.geminiTypingText=e,this.isGeminiTyping=!1)},onToggleLineMenuClick(){this.showLineMenu?(this.showLineMenu=!1,this.lineMenuCollapsed=!1,this.lineMenuExpanded=!1,this.carouselDotsTimer&&(clearTimeout(this.carouselDotsTimer),this.carouselDotsTimer=null),this.showCarouselDots=!1,this.$nextTick(()=>{this.$refs.inputBox&&this.$refs.inputBox.focus()})):(this.toggleLineMenu(!0),this.carouselDotsTimer=setTimeout(()=>{this.showCarouselDots=!0},500))},toggleLineMenuCollapse(){this.lineMenuCollapsed=!this.lineMenuCollapsed},async toggleGeminiMode(){let e=[];try{e=JSON.parse(localStorage.getItem("chatbot_messages")||"[]")}catch(s){e=[]}if(!(this.messages&&0!==this.messages.length||e&&0!==e.length))return void this._doToggleGeminiMode();if("true"===localStorage.getItem("gemini_toggle_no_confirm"))return void this._doToggleGeminiMode();const t=document.querySelector(".chat-panel");t&&t.classList.add("modal-open");try{if(await Nt.confirm({title:"เริ่มแชทใหม่ใช่ไหม",message:'การเลือกเครื่องมือนี้จะเริ่มแชทใหม่<br>คุณกลับมาที่การสนทนานี้ได้ทุกเมื่อ<br><label style="display:flex;align-items:center;gap:0.5rem;margin-top:0.75rem"><input id="geminiNoAskCheckbox" type="checkbox" /> อย่าถามฉันอีก</label>',variant:"warning",confirmText:"เริ่มแชทใหม่",cancelText:"ยกเลิก",teleportTo:".chat-panel"})){const e=document.getElementById("geminiNoAskCheckbox");if(e&&e.checked)try{localStorage.setItem("gemini_toggle_no_confirm","true")}catch(s){}this._doToggleGeminiMode()}}finally{t&&t.classList.remove("modal-open")}},_doToggleGeminiMode(){if(this.useGeminiMode&&this.messages.length>0?this.saveCurrentGeminiConversation():!this.useGeminiMode&&this.messages.length>0&&this.saveCurrentChatbotConversation(),this.useGeminiMode)try{localStorage.setItem("chatbot_gemini_history_open",this.showGeminiHistory?"true":"false")}catch(e){}this.clearChatHistory(),this.useGeminiMode=!this.useGeminiMode;try{localStorage.setItem("chatbot_use_gemini",this.useGeminiMode?"true":"false")}catch(e){}if(this.$toast&&(this.useGeminiMode?this.$toast.success("เปิดโหมด AI ✨ บอทจะตอบด้วย Gemini AI",{duration:2e3}):this.$toast.info("เปิดโหมดค้นหา 🔍 บอทจะค้นหาจากคลังข้อมูล",{duration:2e3})),!this.useGeminiMode&&this.geminiSessionId&&(this.$axios&&"function"==typeof this.$axios.delete&&this.$axios.delete(`/api/gemini/conversation/${this.geminiSessionId}`).catch(()=>{}),this.geminiSessionId=null),this.useGeminiMode){this.geminiSessionId="web-"+Date.now()+"-"+Math.random().toString(36).substr(2,9);try{const e="true"===localStorage.getItem("chatbot_gemini_history_open");this.showGeminiHistory=e}catch(e){}if(this.geminiConversations.length>0){const e=this.geminiConversations[0];this.currentGeminiConversationId=e.id,this.messages=[...e.messages||[]]}else this.isTemporaryGemini||this.createNewGeminiConversation()}else if(this.chatbotConversations.length>0){const e=this.chatbotConversations[0];this.currentChatbotConversationId=e.id;const t=e.messages||[],s=Math.max(0,t.length-this.MESSAGES_PER_PAGE);this.messages=t.slice(s)}else this.isTemporaryChatbot||this.createNewChatbotConversation();this.showGeminiTutorial||this.$nextTick(()=>{this.startGeminiTutorial()})},toggleVoiceMode(){this.isStartingRecognition||(this.isVoiceMode=!this.isVoiceMode,this.isVoiceMode?this.startVoiceRecognition():this.stopVoiceRecognition())},startVoiceRecognition(){if(this.isStartingRecognition)return;const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return this.$toast.error("เบราว์เซอร์นี้ไม่รองรับการรับรู้เสียงพูด",{duration:3e3}),void(this.isVoiceMode=!1);this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!1,this.recognition.lang="th-TH",this.recognition.onstart=()=>{this.isListening=!0,this.isStartingRecognition=!1,this.$toast.info("กำลังฟัง... พูดคำถามของคุณ",{duration:2e3})},this.recognition.onresult=e=>{const t=e.results[0][0].transcript;this.isListening=!1,this.query=t,this.$nextTick(()=>{this.onSend()}),this.$toast.success(`🎤 "${t}"`,{duration:2e3}),this.isVoiceMode=!1},this.recognition.onerror=e=>{this.isListening=!1;let t="เกิดข้อผิดพลาดในการรับรู้เสียง";switch(e.error){case"no-speech":t="ไม่พบเสียงพูด";break;case"audio-capture":t="ไม่พบอุปกรณ์รับเสียง";break;case"not-allowed":t="ไม่อนุญาตให้เข้าถึงไมโครโฟน";break;case"network":t="ปัญหาการเชื่อมต่อเครือข่าย"}this.$toast.error(`🎤 ${t}`,{duration:3e3}),this.isVoiceMode=!1,this.isStartingRecognition=!1},this.recognition.onend=()=>{this.isListening=!1,this.isVoiceMode=!1,this.isStartingRecognition=!1,this.recognition=null},this.isStartingRecognition=!0;try{this.recognition.start()}catch(t){this.$toast.error("ไม่สามารถเริ่มการรับรู้เสียงได้",{duration:3e3}),this.isVoiceMode=!1}},stopVoiceRecognition(){if(this.recognition){try{this.recognition.stop()}catch(e){}this.recognition=null}this.isListening=!1,this.isVoiceMode=!1,this.isStartingRecognition=!1},toggleLineMenu(e){if(this.showLineMenu=e,this.lineMenuCollapsed=!1,this.selectedParentCategory=null,this.lineMenuExpanded=!1,e){this.lineMenuCategories=this.categories.filter(e=>!e.parent).slice(0,8),this.$nextTick(()=>{this.showPageLabelToastTemporarily()});localStorage.getItem("pcru_menu_tutorial_seen")||setTimeout(()=>{this.startMenuTutorial()},500)}},handleDragStart(e){const t=this.$refs.chatPanel||document.querySelector(".chat-panel");t&&(this.panelHeight=t.offsetHeight),this.isDragging=!0,this.dragStartY="touchstart"===e.type?e.touches[0].clientY:e.clientY,this.dragCurrentY=this.dragStartY,this._dragMoveHandler=e=>this.handleDragMove(e),this._dragEndHandler=e=>this.handleDragEnd(e),"touchstart"===e.type?(document.addEventListener("touchmove",this._dragMoveHandler,{passive:!1}),document.addEventListener("touchend",this._dragEndHandler),document.addEventListener("touchcancel",this._dragEndHandler)):(document.addEventListener("mousemove",this._dragMoveHandler),document.addEventListener("mouseup",this._dragEndHandler))},handleDragMove(e){this.isDragging&&(this.dragCurrentY="touchmove"===e.type?e.touches[0].clientY:e.clientY,e.preventDefault())},handleDragEnd(e){if(!this.isDragging)return;const t=this.dragStartY-this.dragCurrentY,s=this.menuBaseHeight+t;s>.6*(this.panelHeight||700)?this.lineMenuExpanded=!0:s<150&&(this.showLineMenu=!1),this.isDragging=!1,this.dragStartY=0,this.dragCurrentY=0,document.removeEventListener("touchmove",this._dragMoveHandler),document.removeEventListener("touchend",this._dragEndHandler),document.removeEventListener("touchcancel",this._dragEndHandler),document.removeEventListener("mousemove",this._dragMoveHandler),document.removeEventListener("mouseup",this._dragEndHandler)},handleDragStartFullscreen(e){const t=this.$refs.chatPanel||document.querySelector(".chat-panel");t&&(this.panelHeight=t.offsetHeight),this.isDragging=!0,this.dragStartY="touchstart"===e.type?e.touches[0].clientY:e.clientY,this.dragCurrentY=this.dragStartY,this._dragMoveHandler=e=>this.handleDragMove(e),this._dragEndHandler=e=>this.handleDragEndFullscreen(e),"touchstart"===e.type?(document.addEventListener("touchmove",this._dragMoveHandler,{passive:!1}),document.addEventListener("touchend",this._dragEndHandler),document.addEventListener("touchcancel",this._dragEndHandler)):(document.addEventListener("mousemove",this._dragMoveHandler),document.addEventListener("mouseup",this._dragEndHandler))},handleDragEndFullscreen(e){if(!this.isDragging)return;const t=this.dragStartY-this.dragCurrentY,s=this.panelHeight||700,i=s+t;i<.7*s&&(this.lineMenuExpanded=!1),i<150&&(this.showLineMenu=!1,this.lineMenuExpanded=!1),this.isDragging=!1,this.dragStartY=0,this.dragCurrentY=0,document.removeEventListener("touchmove",this._dragMoveHandler),document.removeEventListener("touchend",this._dragEndHandler),document.removeEventListener("touchcancel",this._dragEndHandler),document.removeEventListener("mousemove",this._dragMoveHandler),document.removeEventListener("mouseup",this._dragEndHandler)},onCarouselTouchStart(e){1===e.touches.length&&(this.carouselDragStartX=e.touches[0].clientX,this.carouselDragStartY=e.touches[0].clientY,this.carouselIsDragging=!0,this.carouselDragOffset=0,this.carouselSwipeIsHorizontal=null)},onCarouselTouchMove(e){if(!this.carouselIsDragging||1!==e.touches.length)return;const t=e.touches[0].clientX,s=e.touches[0].clientY,i=Math.abs(t-this.carouselDragStartX),o=Math.abs(s-this.carouselDragStartY);if(null===this.carouselSwipeIsHorizontal&&(i>10||o>10)&&(this.carouselSwipeIsHorizontal=i>o),this.carouselSwipeIsHorizontal){const e=t-this.carouselDragStartX,s=.3*(this.$refs.menuCarousel?.offsetWidth||300);0===this.carouselCurrentPage&&e>0||this.carouselCurrentPage===this.carouselPages.length-1&&e<0?this.carouselDragOffset=0:this.carouselDragOffset=Math.max(-s,Math.min(s,e))}else!1===this.carouselSwipeIsHorizontal&&(this.carouselDragOffset=0)},onCarouselTouchEnd(){this.carouselIsDragging&&(this.carouselSwipeIsHorizontal?this.handleCarouselSwipeEnd():(this.carouselIsDragging=!1,this.carouselDragOffset=0),this.carouselSwipeIsHorizontal=null)},onCarouselMouseDown(e){0===e.button&&(this.carouselDragStartX=e.clientX,this.carouselDragStartY=e.clientY,this.carouselIsDragging=!0,this.carouselDragOffset=0,this.carouselSwipeIsHorizontal=null,document.addEventListener("mousemove",this.onCarouselMouseMove),document.addEventListener("mouseup",this.onCarouselMouseUp))},onCarouselMouseMove(e){if(!this.carouselIsDragging)return;e.preventDefault();const t=e.clientX,s=e.clientY,i=Math.abs(t-this.carouselDragStartX),o=Math.abs(s-this.carouselDragStartY);if(null===this.carouselSwipeIsHorizontal&&(i>10||o>10)&&(this.carouselSwipeIsHorizontal=i>o),this.carouselSwipeIsHorizontal){const e=t-this.carouselDragStartX,s=.3*(this.$refs.menuCarousel?.offsetWidth||300);0===this.carouselCurrentPage&&e>0||this.carouselCurrentPage===this.carouselPages.length-1&&e<0?this.carouselDragOffset=0:this.carouselDragOffset=Math.max(-s,Math.min(s,e))}else!1===this.carouselSwipeIsHorizontal&&(this.carouselDragOffset=0)},onCarouselMouseUp(){this.carouselIsDragging&&(this.carouselSwipeIsHorizontal?this.handleCarouselSwipeEnd():(this.carouselIsDragging=!1,this.carouselDragOffset=0),this.carouselSwipeIsHorizontal=null,document.removeEventListener("mousemove",this.onCarouselMouseMove),document.removeEventListener("mouseup",this.onCarouselMouseUp))},handleCarouselSwipeEnd(){const e=this.$refs.menuCarouselFullscreen||this.$refs.menuCarousel,t=.1*(e?.offsetWidth||300),s=this.carouselCurrentPage;Math.abs(this.carouselDragOffset)>t&&(this.carouselDragOffset>0&&this.carouselCurrentPage>0?this.carouselCurrentPage--:this.carouselDragOffset<0&&this.carouselCurrentPage<this.carouselPages.length-1&&this.carouselCurrentPage++),s!==this.carouselCurrentPage&&this.showPageLabelToastTemporarily(),this.carouselIsDragging=!1,this.carouselDragOffset=0},goToCarouselPage(e){if(e>=0&&e<this.carouselPages.length){const t=this.carouselCurrentPage;this.carouselCurrentPage=e,t!==e&&this.showPageLabelToastTemporarily()}},startDrag(e,t){e.preventDefault(),this.isDragging=!0,this.dragStartX=e.clientX||e.touches[0].clientX,this.dragStartPage=t,document.addEventListener("mousemove",this.handleDrag),document.addEventListener("touchmove",this.handleDrag),document.addEventListener("mouseup",this.endDrag),document.addEventListener("touchend",this.endDrag)},handleDrag(e){if(!this.isDragging)return;e.preventDefault();const t=(e.clientX||e.touches[0].clientX)-this.dragStartX,s=Math.round(t/50),i=Math.max(0,Math.min(this.carouselPages.length-1,this.dragStartPage+s));i!==this.carouselCurrentPage&&this.goToCarouselPage(i)},endDrag(e){this.isDragging&&(this.isDragging=!1,this.dragStartX=0,this.dragStartPage=0,document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("touchmove",this.handleDrag),document.removeEventListener("mouseup",this.endDrag),document.removeEventListener("touchend",this.endDrag))},showPageLabelToastTemporarily(){this.pageLabelToastTimer&&clearTimeout(this.pageLabelToastTimer);const e=this.carouselPages[this.carouselCurrentPage];this.pageLabelToastText={categories:"หมวดหมู่",locations:"นำทาง",contacts:"ติดต่อ"}[e]||e||"",this.pageLabelToastTimer=setTimeout(()=>{this.$nextTick(()=>{this.showPageLabelToast=!0}),setTimeout(()=>{this.showPageLabelToast=!1},1500)},500)},sendLocationQuery(e){this.query=e,this.showLineMenu=!1,this.selectedParentCategory=null,this.carouselCurrentPage=0,this.$nextTick(()=>{this.onSend()})},sendContactQuery(e){this.selectedContact=e},async fetchCarouselContacts(){if(!this.carouselContactsLoading){this.carouselContactsLoading=!0;try{Bt&&Bt.length>0?this.carouselContacts=Bt.map(e=>{let t=e.phone;return e.extension&&(t=`${e.phone} ต่อ ${e.extension}`),{id:e.id,name:e.name,phone:e.phone,extension:e.extension,phoneDisplay:t}}):this.carouselContacts=[]}catch(e){this.carouselContacts=[]}finally{this.carouselContactsLoading=!1}}},selectLineMenuCategory(e){this.query=e.title,this.showLineMenu=!1,this.selectedParentCategory=null,this.$nextTick(()=>{this.onSend()})},getCategoryIcon(e){const t={news:["ข่าว","news","ประกาศ","announcement"],money:["ทุน","scholarship","เงิน","money","ค่าใช้จ่าย","อุดหนุน"],user:["บริการ","นักศึกษา","service","student","สมาชิก"],building:["หอพัก","ที่พัก","บ้าน","ห้อง","room","dorm","house","residence","พัก"],book:["การศึกษา","หลักสูตร","วิชา","education","course","curriculum","สอน","เรียน","สมัคร"],phone:["ติดต่อ","สอบถาม","contact","call","โทร"],clipboard:["รับสมัคร","สมัคร","application","register","ลงทะเบียน"],calendar:["อบรม","กิจกรรม","event","training","activity","ปฏิทิน","กำหนดการ"]},s=(e||"").toLowerCase();for(const[i,o]of Object.entries(t))if(o.some(e=>s.includes(e.toLowerCase())))return this.getMenuIconSvg(i);return this.getMenuIconSvg("default")},getMenuIconSvg(e){const t={news:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><rect x="4" y="5" width="16" height="16" rx="2" stroke="currentColor" stroke-width="1.5"/><line x1="7" y1="9" x2="17" y2="9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><line x1="7" y1="13" x2="13" y2="13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><line x1="7" y1="16" x2="17" y2="16" stroke="currentColor" stroke-width="1" stroke-linecap="round"/></svg>',money:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="1.5"/><path d="M12 7v10M9 9.5c0 0 0-1 3-1s3 1 3 2.25-1.5 2.25-3 2.25-3 1-3 2.25 0 1 3 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>',user:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M5 20c0-3.87 3.13-7 7-7s7 3.13 7 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>',building:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M3 21h18M4 21V7l8-4 8 4v14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><rect x="8" y="11" width="2" height="2" fill="currentColor"/><rect x="14" y="11" width="2" height="2" fill="currentColor"/><rect x="8" y="15" width="2" height="2" fill="currentColor"/><rect x="14" y="15" width="2" height="2" fill="currentColor"/></svg>',book:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M4 19.5A2.5 2.5 0 016.5 17H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',phone:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.12.96.36 1.9.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.91.34 1.85.58 2.81.7A2 2 0 0122 16.92z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',clipboard:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><rect x="8" y="2" width="8" height="4" rx="1" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="10" x2="16" y2="10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="14" x2="16" y2="14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="18" x2="12" y2="18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>',calendar:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.5"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="1.5"/></svg>',default:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/><path d="M12 8v4l2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>'};return t[e]||t.default},hasSubcategories(e){const t=String(e);return this.categories.some(e=>String(e.parent)===t)},getSubcategories(e){const t=String(e);return this.categories.filter(e=>String(e.parent)===t)},onMenuCategoryClick(e){this.hasSubcategories(e.id)?this.selectedParentCategory=e:this.selectLineMenuCategory(e)},startFeedbackTutorial(){if(localStorage.getItem("pcru_feedback_tutorial_seen"))return;if(this.feedbackTutorialTriggered)return;if(1!==this.messages.filter(e=>"bot"===e.type&&!0===e.found&&!e.multipleResults&&!e._temp).length)return;const e=this.messages.length?this.messages[this.messages.length-1]:null;if(!e||"bot"!==e.type||!0!==e.found)return;this.feedbackTutorialTriggered=!0;const t=(e=0,s=10,i=150)=>{if(document.querySelector(".apple-feedback .apple-feedback-btn"))return this.tutorialStep=0,this.tutorialTargetRect=null,this.showFeedbackTutorial=!0,void this.updateTutorialTarget();e<s&&setTimeout(()=>t(e+1,s,i),i)};this.$nextTick(()=>t(0))},updateTutorialTarget(){const e=this.tutorialSteps[this.tutorialStep];e&&e.target?this.$nextTick(()=>{let t=null;if("like"===e.target?t=document.querySelector(".apple-feedback .apple-feedback-btn:first-child"):"dislike"===e.target&&(t=document.querySelector(".apple-feedback .apple-feedback-wrapper .apple-feedback-btn")),t){const e=t.getBoundingClientRect();this.tutorialTargetRect={top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom,right:e.right}}else this.tutorialTargetRect=null}):this.tutorialTargetRect=null},startGeminiTutorial(){localStorage.getItem("pcru_gemini_tutorial_seen")||(this.geminiTutorialStep=0,this.geminiTutorialTargetRect=null,this.showGeminiTutorial=!0,this.$nextTick(()=>{setTimeout(()=>{this.updateGeminiTutorialTarget()},100)}))},updateGeminiTutorialTarget(){const e=this.geminiTutorialSteps[this.geminiTutorialStep];e&&e.target?this.$nextTick(()=>{setTimeout(()=>{let t=null;if("gemini-toggle"===e.target&&(t=document.querySelector(".gemini-toggle-btn")),t){const e=t.getBoundingClientRect();this.geminiTutorialTargetRect={top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom}}else this.geminiTutorialTargetRect=null},50)}):this.geminiTutorialTargetRect=null},nextGeminiTutorialStep(){this.geminiTutorialStep<this.geminiTutorialSteps.length-1&&(this.geminiTutorialStep++,this.updateGeminiTutorialTarget())},prevGeminiTutorialStep(){this.geminiTutorialStep>0&&(this.geminiTutorialStep--,this.updateGeminiTutorialTarget())},completeGeminiTutorial(){this.showGeminiTutorial=!1,localStorage.setItem("pcru_gemini_tutorial_seen","true"),navigator.vibrate&&navigator.vibrate(50)},skipGeminiTutorial(){this.showGeminiTutorial=!1,localStorage.setItem("pcru_gemini_tutorial_seen","true")},nextTutorialStep(){this.tutorialStep<this.tutorialSteps.length-1&&(this.tutorialStep++,this.updateTutorialTarget())},prevTutorialStep(){this.tutorialStep>0&&(this.tutorialStep--,this.updateTutorialTarget())},async completeTutorial(){this.showFeedbackTutorial=!1,localStorage.setItem("pcru_feedback_tutorial_seen","true"),navigator.vibrate&&navigator.vibrate(50)},async skipTutorial(){this.showFeedbackTutorial=!1,localStorage.setItem("pcru_feedback_tutorial_seen","true")},dismissScrollTutorial(){this.showScrollTutorial=!1,this.scrollButtonRect=null,localStorage.setItem("pcru_scroll_tutorial_seen","true")},startMenuTutorial(){localStorage.getItem("pcru_menu_tutorial_seen")||(this.menuTutorialStep=0,this.menuTutorialTargetRect=null,this.showMenuTutorial=!0,this.$nextTick(()=>{setTimeout(()=>{this.updateMenuTutorialTarget()},100)}))},updateMenuTutorialTarget(){const e=this.menuTutorialSteps[this.menuTutorialStep];e&&e.target?this.$nextTick(()=>{setTimeout(()=>{let t=null;if("menu-toggle"===e.target?(t=document.querySelector(".line-toggle-btn:not(.active)"),t||(t=document.querySelector(".line-toggle-btn"))):"keyboard-toggle"===e.target?t=document.querySelector(".line-toggle-btn.active"):"menu-grid"===e.target?t=document.querySelector(".line-menu-grid"):"menu-handle"===e.target?t=document.querySelector(".line-menu-handle"):"menu-back"===e.target&&(t=document.querySelector(".line-menu-back")),t){const e=t.getBoundingClientRect();this.menuTutorialTargetRect={top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom,right:e.right}}else this.menuTutorialTargetRect=null},200)}):this.menuTutorialTargetRect=null},nextMenuTutorialStep(){this.menuTutorialStep<this.menuTutorialSteps.length-1&&(this.menuTutorialStep++,this.menuTutorialStep>=1&&this.menuTutorialStep<=4&&(this.showLineMenu=!0,this.lineMenuCategories=this.categories.filter(e=>!e.parent).slice(0,8),3===this.menuTutorialStep?this.lineMenuCategories.length>0&&this.hasSubcategories(this.lineMenuCategories[0].id)&&(this.selectedParentCategory=this.lineMenuCategories[0]):this.selectedParentCategory=null),this.$nextTick(()=>{this.updateMenuTutorialTarget()}))},prevMenuTutorialStep(){this.menuTutorialStep>0&&(this.menuTutorialStep--,0===this.menuTutorialStep?this.showLineMenu=!1:this.menuTutorialStep>=1&&(this.showLineMenu=!0,this.selectedParentCategory=null),this.$nextTick(()=>{this.updateMenuTutorialTarget()}))},completeMenuTutorial(){this.showMenuTutorial=!1,this.selectedParentCategory=null,localStorage.setItem("pcru_menu_tutorial_seen","true"),navigator.vibrate&&navigator.vibrate(50)},skipMenuTutorial(){this.showMenuTutorial=!1,this.selectedParentCategory=null,localStorage.setItem("pcru_menu_tutorial_seen","true")},resetMenuTutorial(){localStorage.removeItem("pcru_menu_tutorial_seen")},updateScrollButtonRect(){const e=document.querySelector(".scroll-to-top-btn");if(e){const t=e.getBoundingClientRect();this.scrollButtonRect={top:t.top,left:t.left,width:t.width,height:t.height,bottom:t.bottom,right:t.right}}else this.scrollButtonRect=null},resetFeedbackTutorial(){localStorage.removeItem("pcru_feedback_tutorial_seen"),this.tutorialStep=0,this.tutorialTargetRect=null},onFabPointerDown(e){this.longPressStartTimer&&clearTimeout(this.longPressStartTimer),this.longPressTimer&&clearInterval(this.longPressTimer),this.fabPointerActive=!0,this.isLongPressing=!1,this.longPressStartTimer=setTimeout(()=>{this.isLongPressing=!0,this.longPressCountdown=3,this.showLongPressOverlay=!0,this.triggerVibration(3),this.longPressTimer=setInterval(()=>{this.longPressCountdown--,this.longPressCountdown>0&&this.triggerVibration(this.longPressCountdown),this.longPressCountdown<=0&&this.completeLongPress()},1e3)},500)},triggerVibration(e){if(!navigator.vibrate)return;const t=[];for(let i=0;i<e;i++)t.push(100),i<e-1&&t.push(50);try{navigator.vibrate(t)}catch(s){}},onFabPointerUp(e){if(("pointerleave"!==e?.type||this.fabPointerActive)&&!this.showLongPressOverlay){if(navigator.vibrate&&navigator.vibrate(0),this.longPressStartTimer&&(clearTimeout(this.longPressStartTimer),this.longPressStartTimer=null),this.longPressTimer&&(clearInterval(this.longPressTimer),this.longPressTimer=null),this.isLongPressing)return this.isLongPressing=!1,void(this.fabPointerActive=!1);"pointerleave"!==e?.type&&"pointercancel"!==e?.type?(this.checkFirstTimeUser()?this.startIntroAnimation():this.visible=!0,this.isLongPressing=!1,this.fabPointerActive=!1):this.fabPointerActive=!1}},completeLongPress(){this.longPressStartTimer&&clearTimeout(this.longPressStartTimer),this.longPressTimer&&clearInterval(this.longPressTimer),this.longPressStartTimer=null,this.longPressTimer=null,this.showLongPressOverlay=!1,window.location.href="/login"},cancelLongPressOverlay(){this.longPressStartTimer&&clearTimeout(this.longPressStartTimer),this.longPressTimer&&clearInterval(this.longPressTimer),this.longPressStartTimer=null,this.longPressTimer=null,this.showLongPressOverlay=!1,this.longPressCountdown=0,this.isLongPressing=!1},isMobileDevice(){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=window.innerWidth<=768;return e&&t},checkFirstTimeUser(){try{const e=localStorage.getItem("chatbot_intro_shown");this.hasShownIntroEver="true"===e}catch(e){this.hasShownIntroEver=!1}return!this.hasShownIntroEver},checkAndShowFirstVisitIntro(){this.checkFirstTimeUser()&&this.startIntroAnimation()},startIntroAnimation(){this.showIntroAnimation=!0,this.introPhase=0,setTimeout(()=>{this.introPhase=1},100),setTimeout(()=>{this.introPhase=2},600),setTimeout(()=>{this.introPhase=3},1200),setTimeout(()=>{this.completeIntro()},4e3)},skipIntro(){this.completeIntro()},completeIntro(){this.showIntroAnimation=!1,this.introPhase=0,this.hasShownIntroEver=!0;try{localStorage.setItem("chatbot_intro_shown","true")}catch(e){}this.$nextTick(()=>{this.visible=!0})},async initGyroscope(){if(window.DeviceOrientationEvent)try{window.addEventListener("deviceorientation",this.handleDeviceOrientation,!0),this.gyroscopeEnabled=!0}catch(e){this.gyroscopeEnabled=!1}},requestUserLocation(){const e=localStorage.getItem("locationPermissionStatus");"granted"!==e&&"denied"!==e&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},localStorage.setItem("locationPermissionStatus","granted")},e=>{localStorage.setItem("locationPermissionStatus","denied")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}):localStorage.setItem("locationPermissionStatus","denied"))},handleDeviceOrientation(e){if("low"===this.graphicsQuality)return;if(!this.gyroscopeEnabled)return;const t=e.beta||0,s=e.gamma||0,i=t-40,o=Math.max(-25,Math.min(25,.8*s)),n=Math.max(-25,Math.min(25,.8*i));this.pcruTilt={x:o,y:n}},async requestGyroscopePermission(){try{if("function"==typeof DeviceOrientationEvent.requestPermission){"granted"===await DeviceOrientationEvent.requestPermission()&&(this.gyroscopeEnabled=!0)}else this.gyroscopeEnabled=!0}catch(e){}},onPanelMouseMove(e){if("low"===this.graphicsQuality)return;const t=e.currentTarget.getBoundingClientRect(),s=t.width/2,i=t.height/2,o=(e.clientX-t.left-s)/s*20,n=-(e.clientY-t.top-i)/i*20;this.pcruTilt={x:o,y:n},this.onAiGreetMouseMove(e)},onEnterKey(){this.isComposing||this.onSend()},async fetchStopwordsAndKeywords(){try{const[t,s,i,o]=await Promise.all([this.$axios.get("/stopwords/public"),this.$axios.get("/keywords/public"),this.$axios.get("/negativekeywords/public").catch(()=>({data:[]})),this.$axios.get("/synonyms/public").catch(()=>({data:[]}))]),n=t.data?.data||t.data||[],a=s.data?.data||s.data||[],r=i.data?.data||i.data||[],l=o.data?.data||o.data||[],c=new Set;if(Array.isArray(a)){for(const e of a){const t=(e.KeywordText||e.keyword||e.text||"").toLowerCase().trim();t&&(c.add(t),t.split(/\s+/).forEach(e=>e&&c.add(e)))}this.protectedKeywords=new Set(a.map(e=>(e.KeywordText||"").toLowerCase())),this.autocompleteKeywords=Array.from(new Set(a.map(e=>(e&&(e.KeywordText||e.keyword||e.text||e)).toString().trim()).filter(Boolean)));try{this.autocompleteKeywords.sort((e,t)=>e.localeCompare(t,"th"))}catch(e){}}else this.autocompleteKeywords=[];if(Array.isArray(r))for(const d of r){const t=(d.Word||d.word||d.keyword||"").toLowerCase().trim();if(t)if(c.add(t),this.segmenter)try{Array.from(this.segmenter.segment(t)).forEach(e=>e.isWordLike&&c.add(e.segment.toLowerCase()))}catch(e){}else t.split(/\s+/).forEach(e=>e&&c.add(e))}if(Array.isArray(l))for(const e of l){const t=(e.OriginalWord||e.original||"").toLowerCase().trim(),s=(e.SynonymWord||e.synonym||"").toLowerCase().trim();t&&c.add(t),s&&c.add(s)}this.allProtectedWords=c,Array.isArray(n)&&(this.stopwords=n.map(e=>(e.StopwordText||"").toLowerCase()).filter(e=>e&&!c.has(e)))}catch(t){}},formatTel(e){if(!e)return"";const t=String(e).match(/\b(0[- \d]{8,15}\d)(?:\s*(?:ต่อ|ext\.?|x)\s*([\d, ]+))?\b/i);if(t){let e=t[1].replace(/\D/g,"");if(t[2]){const s=t[2].split(",")[0].replace(/\D/g,"");s&&(e+=","+s)}return e}return String(e).replace(/\D/g,"")},initTheme(){try{const e=localStorage.getItem("chatbot_theme");this.theme="dark"===e||"light"===e||"auto"===e?e:"auto"}catch(t){this.theme="auto"}let e=this.theme;"auto"===this.theme&&(e=this.resolveAutoTheme());try{document.documentElement.setAttribute("data-theme",e);const t=document.querySelector('meta[name="theme-color"]');t&&t.setAttribute("content","dark"===e?"#202124":"#8B4CB8");const s=document.querySelector('meta[name="color-scheme"]');s&&s.setAttribute("content","dark"===e?"dark":"light")}catch(t){}},toggleTheme(){document.documentElement.classList.add("theme-transitioning"),document.body.classList.add("theme-transitioning"),"light"===this.theme?this.theme="dark":"dark"===this.theme?this.theme="auto":this.theme="light";try{localStorage.setItem("chatbot_theme",this.theme);let e=this.theme;"auto"===this.theme&&(e=this.resolveAutoTheme()),document.documentElement.setAttribute("data-theme",e);const t=document.querySelector('meta[name="theme-color"]');t&&t.setAttribute("content","dark"===e?"#202124":"#8B4CB8");const s=document.querySelector('meta[name="color-scheme"]');s&&s.setAttribute("content","dark"===e?"dark":"light")}catch(e){}document.documentElement.offsetHeight,document.body.offsetHeight,setTimeout(()=>{document.documentElement.classList.remove("theme-transitioning"),document.body.classList.remove("theme-transitioning")},100),this.isExpanded=!0,this.expandTimer&&clearTimeout(this.expandTimer),this.expandTimer=setTimeout(()=>{this.isExpanded=!1},2e3)},getThemeButtonTitle(){return"light"===this.theme?"สลับเป็นโหมดมืด":"dark"===this.theme?"สลับเป็นโหมดอัตโนมัติ":"สลับเป็นโหมดสว่าง"},toggleGraphicsMenu(){this.showGraphicsMenu=!this.showGraphicsMenu,this.showGraphicsMenu&&setTimeout(()=>{document.addEventListener("click",this.closeGraphicsMenu,{once:!0})},0)},closeGraphicsMenu(){this.showGraphicsMenu=!1},toggleMoreMenu(){this.showMoreMenu?this.closeMoreMenu():this.openMoreMenu()},openMoreMenu(){this.showMoreMenu=!0,this.isMoreMenuClosing=!1,this.moreMenuItemsVisible=[!1,!1,!1],this.moreMenuItemsHiding=[!1,!1,!1];const e="low"===this.graphicsQuality?0:80;setTimeout(()=>{this.moreMenuItemsVisible=[!0,!1,!1]},0*e),setTimeout(()=>{this.moreMenuItemsVisible=[!0,!0,!1]},1*e),setTimeout(()=>{this.moreMenuItemsVisible=[!0,!0,!0]},2*e),this.$nextTick(()=>{document.addEventListener("click",this.handleOutsideClick,!0)})},closeMoreMenu(){if(this.isMoreMenuClosing)return;this.isMoreMenuClosing=!0,document.removeEventListener("click",this.handleOutsideClick,!0);const e="low"===this.graphicsQuality?0:60;this.moreMenuItemsHiding=[!1,!1,!0],setTimeout(()=>{this.moreMenuItemsVisible=[!0,!0,!1],this.moreMenuItemsHiding=[!1,!0,!1]},1*e),setTimeout(()=>{this.moreMenuItemsVisible=[!0,!1,!1],this.moreMenuItemsHiding=[!0,!1,!1]},2*e),setTimeout(()=>{this.moreMenuItemsVisible=[!1,!1,!1],this.moreMenuItemsHiding=[!1,!1,!1],this.showMoreMenu=!1,this.isMoreMenuClosing=!1},3*e)},handleOutsideClick(e){const t=document.querySelector(".more-menu-items"),s=document.querySelector(".more-options-btn");t&&t.contains(e.target)||s&&s.contains(e.target)||this.closeMoreMenu()},onPanelClick(e){if(!this.showMoreMenu)return;const t=e.target.closest(".more-menu-items"),s=e.target.closest(".more-options-btn");t||s||this.closeMoreMenu()},onPanelTouchStart(e){this.gyroscopeEnabled||this.permissionRequested||(this.permissionRequested=!0,this.requestGyroscopePermission())},toggleThemeFromMenu(){this.toggleTheme(),this.closeMoreMenu()},cycleGraphicsQuality(){const e=["medium","high"],t=(e.indexOf(this.graphicsQuality)+1)%e.length;this.setGraphicsQuality(e[t]),this.closeMoreMenu()},async clearChatFromMenu(){this.closeMoreMenu(),this.clearBtnHidden=!0,this.clearChatHistory(),setTimeout(()=>{this.clearBtnHidden=!1},500)},setGraphicsQuality(e){this.graphicsQuality=e,this.showGraphicsMenu=!1;try{localStorage.setItem("chatbot_graphics_quality",e)}catch(t){}this.stopFpsMonitoring(),this.applyGraphicsQuality(e),"low"!==e?(this.fpsMonitorEnabled=!0,this.startFpsMonitoring()):this.fpsMonitorEnabled=!1},applyGraphicsQuality(e){const t=document.documentElement,s=document.body;t.classList.remove("gfx-low","gfx-medium","gfx-high"),s.classList.remove("gfx-low","gfx-medium","gfx-high"),t.classList.add(`gfx-${e}`),s.classList.add(`gfx-${e}`),this.loadGraphicsCss(e),"low"===e?(this.snowEnabled=!1,this.particleEnabled=!1,this.shadowEnabled=!1,this.animationEnabled=!1,s.classList.add("no-effects")):"medium"===e?(this.snowEnabled=!1,this.particleEnabled=!1,this.shadowEnabled=!0,this.animationEnabled=!0,s.classList.remove("no-effects")):(this.snowEnabled=this.isWinterSeason,this.particleEnabled=!0,this.shadowEnabled=!0,this.animationEnabled=!0,s.classList.remove("no-effects")),this.snowEnabled&&this.generateSnowflakeStyles()},loadGraphicsCss(e){const t=e=>`gfx-css-${e}`;["low","medium","high"].forEach(e=>{const s=document.getElementById(t(e));s&&s.remove()});const s=document.createElement("link");s.id=t(e),s.rel="stylesheet";s.href=`/~s651102064101/frontend/gfx-${e}.css`,document.head.appendChild(s)},loadGraphicsQuality(){try{const e=localStorage.getItem("chatbot_graphics_quality");if(e&&["low","medium","high"].includes(e)){const t="low"===e?"medium":e;this.graphicsQuality=t,this.applyGraphicsQuality(t)}else this.applyGraphicsQuality("high")}catch(e){this.applyGraphicsQuality("high")}},initVideoObserver(){"IntersectionObserver"in window&&(this.videoObserver=new IntersectionObserver(e=>{e.forEach(e=>{const t=e.target;e.isIntersecting?t.play().catch(e=>{}):t.pause()})},{root:null,rootMargin:"50px",threshold:.1}),this.$nextTick(()=>{this.observeBotVideos()}))},observeBotVideos(){if(!this.videoObserver)return;document.querySelectorAll(".bot-avatar-video").forEach(e=>{this.videoObserver.observe(e)})},startFpsMonitoring(){if(!this.fpsMonitorEnabled)return;this.frameCount=0,this.lastFrameTime=performance.now(),this.lowFpsCount=0,this.autoGraphicsAdjusted=!1;const e=t=>{this.frameCount++;const s=t-this.lastFrameTime;s>=1e3&&(this.currentFps=Math.round(1e3*this.frameCount/s),this.fpsHistory.push(this.currentFps),this.fpsHistory.length>10&&this.fpsHistory.shift(),this.checkPerformance(),this.frameCount=0,this.lastFrameTime=t),this.visible&&this.fpsMonitorEnabled&&(this.fpsAnimationFrame=requestAnimationFrame(e))};this.fpsAnimationFrame=requestAnimationFrame(e)},stopFpsMonitoring(){this.fpsAnimationFrame&&(cancelAnimationFrame(this.fpsAnimationFrame),this.fpsAnimationFrame=null),this.fpsCheckInterval&&(clearInterval(this.fpsCheckInterval),this.fpsCheckInterval=null)},checkPerformance(){if("low"!==this.graphicsQuality){if(this.currentFps>=30&&this.showAppleAlert)return this.showAppleAlert=!1,void(this.lowFpsCount=0);this.currentFps<30?(this.lowFpsCount++,this.lowFpsCount>=3&&!this.appleAlertShown&&(this.showAppleAlert=!0,this.appleAlertShown=!0),this.lowFpsCount>=3&&!this.autoGraphicsAdjusted&&(this.autoGraphicsAdjusted=!0)):this.lowFpsCount>0&&(this.lowFpsCount=0),this.checkDeviceHeat()}else this.fpsMonitorEnabled=!1},async checkDeviceHeat(){try{if("getBattery"in navigator){const e=await navigator.getBattery();e.dischargingTime<1800&&e.dischargingTime>0&&"high"===this.graphicsQuality&&this.autoDowngradeGraphics("heat")}}catch(e){}},autoDowngradeGraphics(e){this.graphicsQuality;let t,s;if("high"===this.graphicsQuality)t="medium",s="fps"===e?`ตรวจพบว่าเครื่องทำงานช้า (${this.currentFps} FPS)`:"ตรวจพบว่าเครื่องร้อนเกินไป";else{if("medium"!==this.graphicsQuality)return;t="low",s="fps"===e?`เครื่องยังทำงานช้าอยู่ (${this.currentFps} FPS)`:"เครื่องยังร้อนอยู่"}this.setGraphicsQuality(t),this.showPerformanceWarning(`ปรับกราฟิกเป็น "${this.graphicsQualityLabel}" โดยอัตโนมัติ`,s)},showPerformanceWarning(e,t){this.perfWarningTimer&&clearTimeout(this.perfWarningTimer),this.perfWarningMessage=e,this.perfWarningReason=t,this.showPerfWarning=!0,this.perfWarningTimer=setTimeout(()=>{this.dismissPerfWarning()},5e3)},dismissPerfWarning(){this.showPerfWarning=!1,this.perfWarningMessage="",this.perfWarningReason="",this.perfWarningTimer&&(clearTimeout(this.perfWarningTimer),this.perfWarningTimer=null)},closeAppleAlert(){this.showAppleAlert=!1,this.appleAlertShown=!0},reduceGraphicsFromAlert(){"high"===this.graphicsQuality?this.setGraphicsQuality("medium"):"medium"===this.graphicsQuality&&this.setGraphicsQuality("low"),this.closeAppleAlert()},resolveAutoTheme(){try{const e=(new Date).getHours();return e>=7&&e<19?"light":"dark"}catch(e){return"light"}},handleSystemThemeChange(){if("auto"===this.theme){const t=this.resolveAutoTheme();try{document.documentElement.setAttribute("data-theme",t);const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content","dark"===t?"#202124":"#8B4CB8");const s=document.querySelector('meta[name="color-scheme"]');s&&s.setAttribute("content","dark"===t?"dark":"light")}catch(e){}}},parseContactParts(e){if(!e)return[];const t=String(e).replace(/^(?:เบอร์โทรศัพท์|ติดต่อ)\s*:\s*/i,"").trim().split(/(?:,|;|\r?\n)/i).map(e=>e.trim()).filter(Boolean),s=[];for(const o of t)/https?:\/\/|www\.|facebook\./i.test(o)?s.push(o):s.push(...o.split(/\s(?:หรือ)\s/i).map(e=>e.trim()).filter(Boolean));const i=[];for(let o=0;o<s.length;o++){let e=s[o];if(/^https?:$/i.test(e)&&s[o+1]&&(e+=s[o+1],o++),/(facebook\.com|www\.|https?:)/i.test(e)&&o+1<s.length)for(;o+1<s.length&&(/^[\?=&]/.test(s[o+1])||/facebook\.com|www\.|\./i.test(s[o+1])&&!/^https?:\/\//i.test(s[o+1]));)e+=s[o+1],o++;if(/^ต่อ\s*$/i.test(e)&&i.length>0){const e=i.length-1,t=i[e];if(/\b0[- \d]{8,15}\d\b/.test(t)){i[e]=`${t} ต่อ`;continue}}const t=e.split(/\s+/).filter(Boolean);if(t.length>1&&/^0[0-9\-\s]{6,}$/.test(t[0])){const i=t[0],n=t.slice(1);if(n.every(e=>/^[0-9,]+$/.test(e))){e=i;const t=n.flatMap(e=>e.split(/[,\s]+/).filter(Boolean));t.length&&s.splice(o+1,0,...t)}}else{const t=e.match(/\b0[- \d]{8,15}\d\b(?!\s+\d)/);if(t){const i=t[0],n=e.slice(e.indexOf(i)+i.length).trim();if(/^[0-9][0-9,\s]*$/.test(n)){const t=n.split(/[,\s]+/).filter(Boolean);e=i,t.length&&s.splice(o+1,0,...t)}}}if(/^[0-9\s,]+$/.test(e)&&i.length>0){const t=i.length-1,s=i[t],o=e.replace(/\s+/g,"").replace(/(^,|,$)/g,"");if(/ต่อ\s*(?:\d+)?$/i.test(s)||/ต่อ\s*\d+/i.test(s)){/ต่อ\s*$/.test(s)?i[t]=`${s} ${o}`:i[t]=`${s} หรือ ${o}`;continue}if(/\b0[- \d]{8,15}\d\b/.test(s)){i[t]=`${s} ต่อ ${o}`;continue}}i.push(e)}return i},joinBrokenUrls(e){if(!e)return e;const t=new RegExp("(https?:\\/\\/[^^\\s]+)\\n(?!0\\d|https?:\\/\\/|www\\.|ลิงค์)([A-Za-z0-9\\/\\?#%._=&+\\-:@]+)","ig");let s;do{s=e,e=e.replace(t,"$1$2")}while(e!==s);return e},hasContact(e){const t=(this.linkifyText(e||"")||"").replace(/<[^>]+>/g,"").trim();return!!t&&!/^ไม่มี$/i.test(t)},hasPhoneOrUrl(e){if(!e)return!1;const t=String(e),s=/0[- ]?\d{1,2}[- ]?\d{3}[- ]?\d{3,4}/.test(t),i=/https?:\/\/|www\.|facebook\./i.test(t),o=/ต่อ\s*\d{3,5}/i.test(t);return s||i||o},createMapWidget(e,t,s,i="ดูแผนที่"){const o=localStorage.getItem("locationPermissionStatus"),n="granted"===o||"denied"===o;return!navigator.geolocation||this.userLocation||n||navigator.geolocation.getCurrentPosition(e=>{this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},localStorage.setItem("locationPermissionStatus","granted")},e=>{localStorage.setItem("locationPermissionStatus","denied")},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5}),this.generateMapWithLocation(e,t,s,i,8)},generateMapWithLocation(e,t,s,i,o){let n;if(this.userLocation){const e=this.userLocation.lat,i=this.userLocation.lng;n=`https://www.google.com/maps/embed/v1/directions?key=&origin=${e},${i}&destination=${t},${s}&mode=driving`,n=`https://www.google.com/maps?saddr=${e},${i}&daddr=${t},${s}&output=embed`}else n=`https://www.google.com/maps?q=${t},${s}&output=embed`;return`<div class="map-widget-container w-100">\n<div class="map-widget">\n<div class="map-preview">\n<button class="map-fullscreen-btn" onclick="window.openMapFullscreen('${n}')" title="เปิดแบบเต็มจอ">\n<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>\n</svg>\n</button>\n<iframe src="${n}" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>\n</div>\n<div class="map-widget-footer">\n<div class="map-widget-info">\n<span class="map-widget-icon">📍</span>\n<span class="map-widget-label">${i}</span>\n</div>\n<div class="map-widget-actions">\n<button class="map-navigate-btn" onclick="window.pcruNavigateTo(${t}, ${s});" title="นำทาง">\n<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>\n</svg>\n<span>นำทาง</span>\n</button>\n<button class="map-open-btn" onclick="window.open('${e}', '_blank');" title="เปิดแผนที่">\n<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>\n<polyline points="15,3 21,3 21,9"></polyline>\n<line x1="10" y1="14" x2="21" y2="3"></line>\n</svg>\n<span>ดูแผนที่</span>\n</button>\n</div>\n</div>\n</div>\n</div>`},linkifyText(e,t=null,s=!1,i=!1){if(!e)return"";const o={"หน่วยหอพักนักศึกษา มหาวิทยาลัยราชภัฏเพชรบูรณ์":"https://www.facebook.com/dsd.pcru.news/","งาน กยศ. กองพัฒนานักศึกษา มหาวิทยาลัยราชภัฏเพชรบูรณ์":"https://www.facebook.com/Studentloan.PCRU/?locale=th_TH"},n=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(\bwww\.[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,a=/\b(0[- \d]{8,15}\d)(\s*(?:ต่อ|ext\.?|x)\s*([\d, ]+))?\b/gi;let r=e.replace(/<br\s*\/?>|&lt;br\s*\/?>/gi,"<br>");r=r.replace(/^สวัสดีค่ะ 😊 .*?ยินดีให้บริการค่ะ\s*/,""),r=r.replace(/Facebook "([^"]+)"/g,(e,t)=>o[t]?`<a href="${o[t]}" target="_blank" rel="noopener noreferrer" class="message-link">${e}</a>`:e);r=r.replace(/((?:Facebook|เพจ Facebook)\s*:\s*|ดูที่เพจ Facebook ")([^<"\n]+)(")?/g,(e,t,s,i)=>{const n=s.trim();return o[n]?`${t}<a href="${o[n]}" target="_blank" rel="noopener noreferrer" class="message-link">${n}</a>${i||""}`:e});const l=new RegExp("(https?:\\/\\/[^^\\s]+)\\n([A-Za-z0-9\\/\\?#%._=&+\\-:@]+)","ig");let c;do{c=r,r=r.replace(l,"$1$2")}while(r!==c);r=r.replace(/(ลิงค์\s*:\s*)([\s\S]*?)(?=(?:\n\S|$))/gi,(e,s,i)=>{const o=[],n=/(https?:\/\/[A-Za-z0-9\/\?#%._=&+\-:@][^\n\s]*)|(www\.[A-Za-z0-9\/\?#%._=&+\-:@][^\n\s]*)/gi;let a;for(;null!==(a=n.exec(i));)o.push(a[0]);if(0===o.length)return e;return s+o.map((e,s)=>`<a href="${e.toLowerCase().startsWith("www.")?"http://"+e:e}" target="_blank" rel="noopener noreferrer" class="message-link">${t&&1===o.length?t:e}</a>`).join(" หรือ ")});const d=r.split(/(<a[^>]*>.*?<\/a>)/g);for(let k=0;k<d.length;k++)d[k].startsWith("<a")||(d[k]=d[k].replace(n,function(e){let s=e;return e.toLowerCase().startsWith("www.")&&(s="http://"+e),`<a href="${s}" target="_blank" rel="noopener noreferrer" class="message-link">${t||e}</a>`}));r=d.join("");const u=r.split(/(<a[^>]*>.*?<\/a>)/g);for(let k=0;k<u.length;k++)u[k].startsWith("<a")||(u[k]=u[k].replace(a,function(e,t,s,i){const o=t.replace(/\D/g,"");if(9===o.length||10===o.length){let e=o,s="";if(i){const t=i.split(/[ ,]+/).map(e=>e.replace(/\D/g,"")).filter(Boolean);t.length&&(e+=","+t[0],s=" ต่อ "+t.join(" หรือ "))}return`<a href="tel:${e}" class="message-link">${t}</a>${s}`}return e}));if(r=u.join(""),i)return r;const h=/Google\s*map\s*:\s*<a[^>]*href="(https?:\/\/maps\.app\.goo\.gl\/[A-Za-z0-9]+)"[^>]*>[^<]*<\/a>/i.exec(r),p=/Google\s*map\s*:\s*(https?:\/\/maps\.app\.goo\.gl\/[A-Za-z0-9]+)/i.exec(r),g=/<a[^>]*href="(https?:\/\/maps\.app\.goo\.gl\/[A-Za-z0-9]+)"[^>]*>[^<]*<\/a>/i.exec(r),m=/^(https?:\/\/maps\.app\.goo\.gl\/[A-Za-z0-9]+)$/i.exec(e?.trim()||""),f=h||p||g||m,w=/latitude\s*longitude\s*:\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)/i.exec(r),v=/^(-?\d{1,3}\.\d{4,})\s*,\s*(-?\d{1,3}\.\d{4,})$/i.exec(e?.trim()||""),b=/📍\s*พิกัด\s*:\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)/i.exec(r),y=w||v||b;if(f||y){let e="";if(t&&s&&(e+=`<div class="message-title">\n<span class="title-label">✨ นี่คือคำตอบที่คุณหา</span>\n<strong>${t}</strong>\n</div>`),f&&y){const t=f[1],s=parseFloat(y[1]),i=parseFloat(y[2]);e+=this.createMapWidget(t,s,i,"Google Map")}else if(f){const t=f[1];e+=this.createMapWidget(t,16.451354168722986,101.15144827382676,"Google Map")}else if(y){const t=parseFloat(y[1]),s=parseFloat(y[2]),i=`https://www.google.com/maps?q=${t},${s}`;e+=this.createMapWidget(i,t,s,"ตำแหน่ง GPS")}r+=e}return r},async streamText(e,t){if(!t||!this.messages[e])return;if("low"===this.graphicsQuality||"medium"===this.graphicsQuality)return this.messages[e].text=t,void this.$nextTick(()=>{this.scrollToBottomInstant()});this.messages[e].text="";let s=parseInt("0",10);(Number.isNaN(s)||s<0)&&(s=0),s=Math.min(Math.max(s,0),200);const i=t.split(/(<[^>]+>|\n)/g),o=this.$refs.panelBody,n=()=>{o&&(o.offsetHeight,o.scrollTop=o.scrollHeight)};for(const a of i)if(a)if(a.match(/<[^>]+>/)||"\n"===a)this.messages[e].text+=a,await this.$nextTick(),n();else for(let t=0;t<a.length;t++){if(await new Promise(e=>setTimeout(e,s)),!this.messages[e])return;this.messages[e].text+=a[t],await this.$nextTick(),n()}},async typeWelcomeMessage(){const e=`สวัสดี <span class="wave-hand" aria-hidden="true">👋</span> ${this.botPronoun}ชื่อ ${this.botName} <br> ผู้ช่วย AI ของ PCRU ค่ะ`;this.welcomeTitle="",this.welcomeSub="",this.welcomeInstruction="",await this.streamToVariable("welcomeTitle",e),await this.streamToVariable("welcomeSub","ยินดีที่ได้ช่วยคุณ! มาหาคำตอบที่คุณต้องการกันเลยค่ะ ✨"),await this.streamToVariable("welcomeInstruction","เลือกหมวดหมู่ด้านล่าง <br> หรือพิมพ์คำถามได้เลยค่ะ 😊")},async streamToVariable(e,t){if("low"===this.graphicsQuality||"medium"===this.graphicsQuality)return void(this[e]=t);let s=parseInt("0",10);(Number.isNaN(s)||s<0)&&(s=0),s=Math.min(Math.max(s,0),200);const i=t.split(/(<[^>]+>)/g);for(const o of i)if(o.match(/<[^>]+>/))this[e]+=o;else for(const t of o)this[e]+=t,await new Promise(e=>setTimeout(e,s))},generateSnowflakeStyles(){const e=[];for(let t=1;t<=this.snowCount;t++){const t=40*(Math.random()-.5)*2;e.push({left:100*Math.random()+"%",animationDuration:`${this.snowMinDuration+Math.random()*(this.snowMaxDuration-this.snowMinDuration)}s`,animationDelay:8*Math.random()+"s",fontSize:`${this.snowMinSize+Math.random()*(this.snowMaxSize-this.snowMinSize)}px`,opacity:.6+.3*Math.random(),symbol:"❄","--drift":`${t}px`})}this.snowflakeStyles=Object.freeze(e)},getSnowflakeStyle(e,t){const s=this.snowflakeDragOffsets[t],i={left:e.left,animationDuration:e.animationDuration,animationDelay:e.animationDelay,fontSize:e.fontSize,opacity:e.opacity,"--drift":e["--drift"],cursor:"grab"};if(s){const e=this.draggedSnowflakeIndex===t;return{...i,animationPlayState:"paused",animation:"none",position:"fixed",left:`${s.x}px`,top:`${s.y}px`,cursor:e?"grabbing":"grab",zIndex:e?99999:99991}}return i},isSnowflakeFloating(e){if(this.draggedSnowflakeIndex===e)return!0;const t=this.snowflakeDragOffsets[e];return t&&t.falling},getFloatingSnowflakeStyle(e,t){const s=this.snowflakeDragOffsets[t];if(!e||!s)return{display:"none"};const i=this.draggedSnowflakeIndex===t;return{position:"fixed",left:`${s.x}px`,top:`${s.y}px`,fontSize:e.fontSize,opacity:e.opacity,cursor:i?"grabbing":"default",zIndex:i?999999:99999,animation:"none",pointerEvents:i?"none":"auto"}},onSnowflakeMouseDown(e,t){e.stopPropagation(),this.draggedSnowflakeIndex=t;const s=e.clientX-15,i=e.clientY-15;this.snowflakeDragOffsets={...this.snowflakeDragOffsets,[t]:{x:s,y:i}},window.addEventListener("mousemove",this.onSnowflakeMouseMove),window.addEventListener("mouseup",this.onSnowflakeMouseUp)},onSnowflakeMouseMove(e){if(null==this.draggedSnowflakeIndex)return;const t=this.draggedSnowflakeIndex;this.snowflakeDragOffsets={...this.snowflakeDragOffsets,[t]:{x:e.clientX-15,y:e.clientY-15}}},onSnowflakeMouseUp(){this.releaseSnowflake(),window.removeEventListener("mousemove",this.onSnowflakeMouseMove),window.removeEventListener("mouseup",this.onSnowflakeMouseUp)},onSnowflakeTouchStart(e,t){if(!e.touches||0===e.touches.length)return;e.stopPropagation(),this.draggedSnowflakeIndex=t;const s=e.touches[0],i=s.clientX-15,o=s.clientY-15;this.snowflakeDragOffsets={...this.snowflakeDragOffsets,[t]:{x:i,y:o}},window.addEventListener("touchmove",this.onSnowflakeTouchMove,{passive:!1}),window.addEventListener("touchend",this.onSnowflakeTouchEnd),window.addEventListener("touchcancel",this.onSnowflakeTouchEnd)},onSnowflakeTouchMove(e){if(null==this.draggedSnowflakeIndex)return;if(!e.touches||0===e.touches.length)return;e.preventDefault();const t=e.touches[0],s=this.draggedSnowflakeIndex;this.snowflakeDragOffsets={...this.snowflakeDragOffsets,[s]:{x:t.clientX-15,y:t.clientY-15}}},onSnowflakeTouchEnd(){this.releaseSnowflake(),window.removeEventListener("touchmove",this.onSnowflakeTouchMove),window.removeEventListener("touchend",this.onSnowflakeTouchEnd),window.removeEventListener("touchcancel",this.onSnowflakeTouchEnd)},releaseSnowflake(){if(null==this.draggedSnowflakeIndex)return;const e=this.draggedSnowflakeIndex,t=this.snowflakeDragOffsets[e];if(this.draggedSnowflakeIndex=null,!t)return;this.snowflakeDragOffsets={...this.snowflakeDragOffsets,[e]:{...t,falling:!0,startY:t.y}};const s=()=>{const t=this.snowflakeDragOffsets[e];if(!t||!t.falling)return;const i=t.y+3;if(i>window.innerHeight+50){const t={...this.snowflakeDragOffsets};return delete t[e],void(this.snowflakeDragOffsets=t)}this.snowflakeDragOffsets={...this.snowflakeDragOffsets,[e]:{...t,y:i}},requestAnimationFrame(s)};requestAnimationFrame(s)},hideAllTooltips(){try{this.showUserTypingTooltip=!1,this.userTypingTooltipStyle={},this._tooltipPositionHandler&&(window.removeEventListener("resize",this._tooltipPositionHandler),window.removeEventListener("scroll",this._tooltipPositionHandler,!0),this._tooltipPositionHandler=null)}catch(e){}},updateTypingTooltipPosition(){this.$nextTick(()=>{try{const e=this.$el.querySelectorAll(".bot-avatar");if(!e||0===e.length)return;const t=e[e.length-1].getBoundingClientRect(),s=t.left+t.width/2;let i=t.top-64;window.innerWidth<=640&&(i-=20),document.documentElement.classList.contains("keyboard-open")&&(i-=40),this.$nextTick(()=>{try{const e=this.$el.querySelector(".chat-panel"),o=document.querySelector(".typing-tooltip");let n=s,a=null;if(e&&o){const r=e.getBoundingClientRect(),l=o.getBoundingClientRect(),c=r.left+l.width/2+8,d=r.right-l.width/2-8;n=Math.max(c,Math.min(d,s));const u=n-l.width/2,h=s-u;if(l.width<220)a=12;else{const e=Math.max(12,Math.floor(.35*l.width));a=Math.max(10,Math.min(Math.floor(h),e))}const p=8;let g=t.top-l.height-p;window.innerWidth<=640&&(g=t.top-l.height-6),document.documentElement.classList.contains("keyboard-open")&&(g-=12);const m=r.top+8,f=r.bottom-l.height-8;g=Math.max(m,Math.min(f,g)),i=g,this._tooltipRecalcTimer&&clearTimeout(this._tooltipRecalcTimer),this._tooltipRecalcTimer=setTimeout(()=>{try{const e=o.getBoundingClientRect(),i=r.left+e.width/2+8,n=r.right-e.width/2-8,a=Math.max(i,Math.min(n,s)),l=a-e.width/2,c=s-l;let d;if(e.width<220)d=12;else{const t=Math.max(12,Math.floor(.35*e.width));d=Math.max(10,Math.min(Math.floor(c),t))}const u=8;let h=t.top-e.height-u;window.innerWidth<=640&&(h=t.top-e.height-6),document.documentElement.classList.contains("keyboard-open")&&(h-=12);const p=r.top+8,g=r.bottom-e.height-8;h=Math.max(p,Math.min(g,h)),this.userTypingTooltipStyle={position:"fixed",left:`${a}px`,top:`${h}px`,transform:"translateX(-50%) translateY(0)",zIndex:99999,"--tail-left":`${d}px`}}catch(e){}},140)}const r={position:"fixed",left:`${n}px`,top:`${i}px`,transform:"translateX(-50%) translateY(0)",zIndex:99999};null!==a&&(r["--tail-left"]=`${a}px`),this.userTypingTooltipStyle=r}catch(e){}})}catch(e){}})},onSendBtnMouseEnter(e){if(!document.documentElement.classList.contains("keyboard-open"))try{this.query&&String(this.query).trim()||this.botTooltip.info("ต้องพิมพ์ก่อนส่งนะคะ 📝")}catch(t){}},onSendBtnMouseLeave(e){this.typingTooltipTimer&&(clearTimeout(this.typingTooltipTimer),this.typingTooltipTimer=null),this.hideAllTooltips()},computeTimeGreeting(){const e=new Intl.DateTimeFormat("th-TH",{timeZone:"Asia/Bangkok",hour:"numeric",hour12:!1}),t=Number(e.format(new Date));return t>=5&&t<11?"สวัสดีตอนเช้า ☀️ ขอให้วันนี้สดใสจัง":t>=11&&t<13?"สวัสดีตอนเที่ยง 🍚 อย่าลืมพักทานข้าวนะคะ":t>=13&&t<17?"สวัสดีตอนบ่าย 🌤 รีเฟรชพลังแล้วลุยกันต่อ":t>=17&&t<20?"สวัสดีตอนเย็น 🌇 วันนี้เป็นไงบ้างคะ":t>=20&&t<23?"สวัสดีตอนค่ำ 🌙 พักผ่อนสายตาบ้างนะ":"สวัสดีดึกแล้ว 💤 อย่าลืมพักผ่อนให้เพียงพอนะคะ"},handleKeyboardDetection(){const e=window.innerHeight;this.initialViewportHeight-e>150?(this.isKeyboardOpen=!0,document.documentElement.classList.add("keyboard-open")):(this.isKeyboardOpen=!1,document.documentElement.classList.remove("keyboard-open"))},onInputFocus(){this.unlikeTooltipTimer&&(clearTimeout(this.unlikeTooltipTimer),this.unlikeTooltipTimer=null),this.hideAllTooltips(),this.trackRapidInputFocus(),setTimeout(()=>{this.handleKeyboardDetection(),this.panelFocused=!0,this.updateSendBtnPosition(),this._sendBtnPositionHandler=()=>this.updateSendBtnPosition(),window.addEventListener("resize",this._sendBtnPositionHandler),window.addEventListener("scroll",this._sendBtnPositionHandler,!0)},300)},onInputBlur(){setTimeout(()=>{this.handleKeyboardDetection(),this.panelFocused=!1,this.showUserTypingTooltip=!1,this.typingTooltipTimer&&(clearTimeout(this.typingTooltipTimer),this.typingTooltipTimer=null),this.suggestionText="",this.isComposing=!1,this.sendBtnFixedStyle=null;try{this._sendBtnPositionHandler&&(window.removeEventListener("resize",this._sendBtnPositionHandler),window.removeEventListener("scroll",this._sendBtnPositionHandler,!0),this._sendBtnPositionHandler=null)}catch(e){}},300)},trackRapidInputFocus(){try{const e=Date.now();if(e<(this.inputFocusCooldownUntil||0))return;const t=3e3;this.inputFocusTimestamps=(this.inputFocusTimestamps||[]).filter(s=>e-s<t),this.inputFocusTimestamps.push(e);const s=e-(this.lastBotNudgeAt||0)>=(this.botNudgeMinIntervalMs||45e3),i=Math.random()<=.5;this.inputFocusTimestamps.length>=4&&s&&i&&(this.inputFocusTimestamps=[],this.inputFocusCooldownUntil=e+2e4,this.lastBotNudgeAt=e)}catch(e){}},startIdleTracking(){this.resetIdleTimer(),this.idleLastActivity=Date.now(),this.idleCheckInterval&&clearInterval(this.idleCheckInterval),this.idleCheckInterval=setInterval(()=>{Date.now()-this.idleLastActivity>=this.idleTimeout&&this.triggerBotSleep()},500);["mousemove","mousedown","keydown","scroll","touchstart","click"].forEach(e=>{document.addEventListener(e,this.resetIdleTimer,{passive:!0})})},stopIdleTracking(){["mousemove","mousedown","keydown","scroll","touchstart","click"].forEach(e=>{document.removeEventListener(e,this.resetIdleTimer)}),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.idleCheckInterval&&(clearInterval(this.idleCheckInterval),this.idleCheckInterval=null),this.isBotSleeping=!1},resetIdleTimer(){if(this.idleLastActivity=Date.now(),this.isBotSleeping)return this.isBotSleeping=!1,this.isBotWakingUp=!0,this.showWakeSparkle=!1,void this.$nextTick(()=>{document.querySelectorAll(".bot-avatar-video-wake").forEach(e=>{e.currentTime=0,e.play().catch(()=>{})}),this.$refs.aiGreetVideo&&(this.$refs.aiGreetVideo.currentTime=0,this.$refs.aiGreetVideo.play().catch(()=>{}))});this.isBotWakingUp||(this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=setTimeout(()=>{this.triggerBotSleep()},this.idleTimeout))},onMainVideoEnded(){this.isPlayingReverse=!0,this.$nextTick(()=>{document.querySelectorAll(".bot-avatar-video-reverse").forEach(e=>{e.currentTime=0,e.play().catch(()=>{})})})},onReverseVideoEnded(){this.isPlayingReverse=!1,this.$nextTick(()=>{document.querySelectorAll(".bot-avatar-video-main").forEach(e=>{e.currentTime=0,e.play().catch(()=>{})})})},onWakeVideoEnded(){if(!this.isBotWakingUp)return;this.isBotWakingUp=!1,this.showWakeSparkle=!0;document.querySelectorAll(".bot-avatar-video:not(.bot-avatar-video-sleep):not(.bot-avatar-video-wake)").forEach(e=>{e.currentTime=0,e.play().catch(()=>{})}),this.$refs.aiGreetVideo&&(this.$refs.aiGreetVideo.currentTime=0,this.$refs.aiGreetVideo.play().catch(()=>{})),setTimeout(()=>{this.showWakeSparkle=!1,this.resetIdleTimer()},800)},triggerBotSleep(){this.isBotSleeping||(this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null),this.isBotWakingUp=!1,this.isBotSleeping=!0,this.$nextTick(()=>{document.querySelectorAll(".bot-avatar-video-sleep").forEach(e=>{e.currentTime=0,e.play().catch(()=>{})})}))},simulateKeyboardCycle(){try{if(this.hasSimulatedKeyboardCycle)return;const e=navigator.userAgent||"",t=/iPhone|Android|iPad|iPod/i.test(e),s=this.$refs.inputBox;if(!t||!s)return;this.hasSimulatedKeyboardCycle=!0,setTimeout(()=>{try{s.focus()}catch(e){}setTimeout(()=>{this.handleKeyboardDetection();try{s.blur()}catch(e){}setTimeout(()=>{this.handleKeyboardDetection(),document.documentElement.classList.add("keyboard-initialized")},400)},600)},300)}catch(e){}},updateSendBtnPosition(){try{if(!this.$refs.inputBox)return void(this.sendBtnFixedStyle=null);this.sendBtnFixedStyle=null}catch(e){}},getCategoryIcon:(e,t=null)=>Le(e),_OLD_getCategoryIcon_DEPRECATED(e){const t=e?.toLowerCase()||"";return t.includes("ข่าว")||t.includes("news")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <rect class="news-paper" x="4" y="5" width="16" height="16" rx="2" stroke="white" stroke-width="2" stroke-dasharray="60" stroke-dashoffset="60">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n          </rect>\n          <line class="news-line-1" x1="7" y1="9" x2="17" y2="9" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-dasharray="10" stroke-dashoffset="10">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.2s" fill="freeze"/>\n          </line>\n          <line class="news-line-2" x1="7" y1="13" x2="13" y2="13" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-dasharray="6" stroke-dashoffset="6">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n          </line>\n          <line class="news-line-3" x1="7" y1="16" x2="17" y2="16" stroke="white" stroke-width="1" stroke-linecap="round" stroke-dasharray="10" stroke-dashoffset="10">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.4s" fill="freeze"/>\n          </line>\n        </svg>':t.includes("ทุน")||t.includes("scholarship")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <circle class="coin-outer" cx="12" cy="12" r="8" stroke="white" stroke-width="2" stroke-dasharray="50" stroke-dashoffset="50">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n          </circle>\n          <circle class="coin-inner" cx="12" cy="12" r="5" stroke="white" stroke-width="1.5" stroke-dasharray="32" stroke-dashoffset="32">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.4s" begin="0.2s" fill="freeze"/>\n          </circle>\n          <text x="12" y="15" text-anchor="middle" fill="white" font-size="10" font-weight="bold" opacity="0">\n            <animate attributeName="opacity" to="1" dur="0.3s" begin="0.4s" fill="freeze"/>฿\n          </text>\n        </svg>':t.includes("บริการ")||t.includes("นักศึกษา")||t.includes("service")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <circle class="user-head" cx="12" cy="8" r="3" stroke="white" stroke-width="2" stroke-dasharray="19" stroke-dashoffset="19">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" fill="freeze"/>\n          </circle>\n          <path class="user-body" d="M5 20c0-3.87 3.13-7 7-7s7 3.13 7 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-dasharray="22" stroke-dashoffset="22">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" begin="0.2s" fill="freeze"/>\n          </path>\n        </svg>':t.includes("หอพัก")||t.includes("ที่พัก")||t.includes("บ้าน")||t.includes("dorm")||t.includes("house")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path class="building" d="M3 21h18M4 21V7l8-4 8 4v14" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="70" stroke-dashoffset="70">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.6s" fill="freeze"/>\n          </path>\n          <rect class="window-1" x="8" y="11" width="2" height="2" fill="white" opacity="0">\n            <animate attributeName="opacity" to="1" dur="0.2s" begin="0.4s" fill="freeze"/>\n          </rect>\n          <rect class="window-2" x="14" y="11" width="2" height="2" fill="white" opacity="0">\n            <animate attributeName="opacity" to="1" dur="0.2s" begin="0.5s" fill="freeze"/>\n          </rect>\n          <rect class="window-3" x="8" y="15" width="2" height="2" fill="white" opacity="0">\n            <animate attributeName="opacity" to="1" dur="0.2s" begin="0.6s" fill="freeze"/>\n          </rect>\n          <rect class="window-4" x="14" y="15" width="2" height="2" fill="white" opacity="0">\n            <animate attributeName="opacity" to="1" dur="0.2s" begin="0.7s" fill="freeze"/>\n          </rect>\n        </svg>':t.includes("การศึกษา")||t.includes("หลักสูตร")||t.includes("วิชา")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path class="book" d="M4 19.5A2.5 2.5 0 016.5 17H20" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="20" stroke-dashoffset="20">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.4s" fill="freeze"/>\n          </path>\n          <path class="book-cover" d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="80" stroke-dashoffset="80">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.6s" begin="0.2s" fill="freeze"/>\n          </path>\n        </svg>':t.includes("ติดต่อ")||t.includes("สอบถาม")||t.includes("contact")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path class="phone" d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="100" stroke-dashoffset="100">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.7s" fill="freeze"/>\n          </path>\n        </svg>':t.includes("รับสมัคร")||t.includes("สมัคร")||t.includes("application")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <rect class="clipboard" x="5" y="3" width="14" height="18" rx="2" stroke="white" stroke-width="2" stroke-dasharray="68" stroke-dashoffset="68">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.6s" fill="freeze"/>\n          </rect>\n          <path class="clip-top" d="M9 3h6v2H9z" stroke="white" stroke-width="2" stroke-dasharray="14" stroke-dashoffset="14">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n          </path>\n          <path class="checkmark" d="M9 12l2 2 4-4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="10" stroke-dashoffset="10">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.5s" fill="freeze"/>\n          </path>\n        </svg>':t.includes("อบรม")||t.includes("กิจกรรม")||t.includes("event")?'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <rect class="calendar" x="3" y="6" width="18" height="15" rx="2" stroke="white" stroke-width="2" stroke-dasharray="66" stroke-dashoffset="66">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n          </rect>\n          <line class="cal-top" x1="3" y1="10" x2="21" y2="10" stroke="white" stroke-width="2" stroke-dasharray="18" stroke-dashoffset="18">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n          </line>\n          <line class="cal-hook-1" x1="8" y1="3" x2="8" y2="7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-dasharray="4" stroke-dashoffset="4">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.2s" begin="0.5s" fill="freeze"/>\n          </line>\n          <line class="cal-hook-2" x1="16" y1="3" x2="16" y2="7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-dasharray="4" stroke-dashoffset="4">\n            <animate attributeName="stroke-dashoffset" to="0" dur="0.2s" begin="0.6s" fill="freeze"/>\n          </line>\n        </svg>':'<svg class="cat-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle class="info-circle" cx="12" cy="12" r="9" stroke="white" stroke-width="2" stroke-dasharray="57" stroke-dashoffset="57">\n          <animate attributeName="stroke-dashoffset" to="0" dur="0.5s" fill="freeze"/>\n        </circle>\n        <path class="info-i" d="M12 16v-4m0-4h.01" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8" stroke-dashoffset="8">\n          <animate attributeName="stroke-dashoffset" to="0" dur="0.3s" begin="0.3s" fill="freeze"/>\n        </path>\n      </svg>'},openAiIntro(){this.showAiIntro=!0},closeAiIntro(){this.showAiIntro=!1},stopVideo(){this.showVideo=!1;this.$el.querySelectorAll(".bot-avatar-video").forEach(e=>e.pause())},openHelpModal(){this.showHelpModal=!0},triggerMiniHelp(){try{const e=this.$refs.miniHelpBtn;e&&(e.classList.remove("pressed"),e.offsetWidth,e.classList.add("pressed"),setTimeout(()=>{e.classList.remove("pressed")},450))}catch(e){}setTimeout(()=>{this.openHelpModal()},180)},dismissMiniHelp(){try{localStorage.setItem("chatbot_mini_help_dismissed","1")}catch(e){}this.miniHelpDismissed=!0},closeHelpModal(){this.showHelpModal=!1,this.showAiIntro=!1,this.$nextTick(()=>{this.visible||(this.visible=!0)})},onAiMouseMove(e){this.aiTiltRafId&&cancelAnimationFrame(this.aiTiltRafId);const t=e.currentTarget;this.aiTiltRafId=requestAnimationFrame(()=>{const s=t.getBoundingClientRect(),i=(e.clientX-s.left)/s.width-.5,o=(e.clientY-s.top)/s.height-.5;this.aiTilt={x:8*i,y:8*-o,s:1.02},this.aiTiltRafId=null})},onAiMouseLeave(){this.aiTiltRafId&&(cancelAnimationFrame(this.aiTiltRafId),this.aiTiltRafId=null),this.aiTilt={x:0,y:0,s:1}},onAiGreetMouseMove(e){this.aiGreetTiltRafId&&cancelAnimationFrame(this.aiGreetTiltRafId);const t=this.$refs.aiGreetWrapper;t&&(this.aiGreetTiltRafId=requestAnimationFrame(()=>{const s=t.getBoundingClientRect(),i=s.left+s.width/2,o=s.top+s.height/2,n=e.clientX-i,a=e.clientY-o,r=Math.max(s.width,s.height,200),l=Math.max(-12,Math.min(12,n/r*16)),c=Math.max(-12,Math.min(12,-a/r*10));this.aiGreetTilt={x:l,y:c},this.aiGreetTiltRafId=null}))},onAiGreetMouseLeave(){this.aiGreetTiltRafId&&(cancelAnimationFrame(this.aiGreetTiltRafId),this.aiGreetTiltRafId=null),this.aiGreetTilt={x:0,y:0}},toggle(e,t,s=null){const i=t?t.currentTarget:null;if(s){s.openIndexes||(this.$set?this.$set(s,"openIndexes",[]):s.openIndexes=[]);const t=s.openIndexes.indexOf(e);return s.openIndexes=-1===t?[e]:[],this.saveChatHistory(),void(-1===t&&this.$nextTick(()=>{setTimeout(()=>{this.updateAnchoring(),i&&"function"==typeof i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",block:"nearest"})},300)}))}const o=this.openIndexes.indexOf(e);this.openIndexes=-1===o?[e]:[],this.saveCategoryState(),-1===o&&this.$nextTick(()=>{setTimeout(()=>{this.updateAnchoring(),i&&"function"==typeof i.scrollIntoView&&i.scrollIntoView({behavior:"smooth",block:"nearest"})},300)})},sendBotReply(e,t=1200,s={}){if(!e)return;const i=!!s.insertAtTop;let o=parseInt("0",10);(Number.isNaN(o)||o<0)&&(o=0);const n=parseInt("0",10)||0,a=(e,t)=>{e>=this.messages.length?this.messages.push(t):this.messages.splice(e,0,t)};if(0===o&&0===n){return a(i?0:this.messages.length,{id:++this.messageIdCounter,type:"bot",text:e,typing:!1,timestamp:(new Date).toISOString()}),this.saveChatHistory(),void this.$nextTick(()=>{i?this.scrollToTop():this.scrollToBottom(),this.updateAnchoring()})}let r;if(s.insertAfterUser){let e=-1;for(let t=this.messages.length-1;t>=0;t--)if(this.messages[t]&&"user"===this.messages[t].type){e=t;break}r=e>=0?e+1:this.messages.length}else r=i?0:this.messages.length;a(r,{id:++this.messageIdCounter,type:"bot",text:"",typing:!0}),this.saveChatHistory(),this.$nextTick(()=>{const e=this.$refs.panelBody;if(e){const s=e.querySelectorAll(".message-wrapper.bot"),o=s&&s.length?s[s.length-1]:null;if(o&&"function"==typeof o.scrollIntoView)try{o.scrollIntoView({behavior:"smooth",block:"center"})}catch(t){i?this.scrollToTop():this.scrollToBottom()}else i?this.scrollToTop():this.scrollToBottom()}else i?this.scrollToTop():this.scrollToBottom();this.updateAnchoring()});const l=setTimeout(()=>{this.messages[r]&&"bot"===this.messages[r].type&&(this.messages[r].typing=!1,this.messages[r]._temp=!1,this.messages[r].text=e,this.messages[r].timestamp=(new Date).toISOString(),this.saveChatHistory(),this.$nextTick(()=>{i?this.scrollToTop():this.scrollToBottom(),this.updateAnchoring()}));const t=this.botTypingTimers.indexOf(l);-1!==t&&this.botTypingTimers.splice(t,1)},t||n||0);this.botTypingTimers.push(l)},selectCategoryItem(e,t,s,i){let o="string"==typeof e?e:e.label||e.text||"";if(!o&&this.categories&&this.categories[t]&&(o=this.categories[t].title||""),!o)return;if("object"==typeof e&&e._disabled)return;if(!(!!!(this.categories&&this.categories[t]&&this.categories[t].items)||null==s))try{this.$set?this.$set(this.categories[t].items,s,{label:o,_disabled:!0}):this.categories[t].items[s]={label:o,_disabled:!0};try{localStorage.setItem("chatbot_categories",JSON.stringify(this.categories))}catch(n){}}catch(n){}this.welcomeTyping=!1,this.query=o,this.onSend(),this.openIndexes=this.openIndexes.filter(e=>e!==t),this.$nextTick(()=>{this.$refs.panelBody&&this.$refs.panelBody.scrollTo({top:this.$refs.panelBody.scrollHeight,behavior:"smooth"}),this.updateAnchoring()})},onTyping(){if(!this.isComposing){this.typingTimeout&&clearTimeout(this.typingTimeout),this.animationEnabled&&(this.isTyping=!0);try{const e=(this.query||"").toString();!e||e.trim().length<2?(this.suggestionText="",this.autocompleteSuggestTimer&&(clearTimeout(this.autocompleteSuggestTimer),this.autocompleteSuggestTimer=null)):this.queueAutocompleteSuggestion(e)}catch(e){this.suggestionText=""}try{this.adjustInputHeight()}catch(e){}this.typingTimeout=setTimeout(()=>{this.isTyping=!1},300)}},adjustInputHeight(){try{const e=this.$refs.inputBox;if(!e)return;let t=this._inputSizer;t||(t=document.createElement("textarea"),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="0",t.style.height="0",t.style.overflow="hidden",t.style.visibility="hidden",t.style.whiteSpace="pre-wrap",t.style.wordWrap="break-word",document.body.appendChild(t),this._inputSizer=t);const s=window.getComputedStyle(e);t.style.font=s.font,t.style.lineHeight=s.lineHeight,t.style.letterSpacing=s.letterSpacing,t.style.padding=s.padding,t.style.boxSizing=s.boxSizing,t.style.width=e.clientWidth+"px",t.value=e.value||e.placeholder||"";const i=t.scrollHeight,o=Math.max(1,(e.value||"").split("\n").length),n=parseFloat(s.lineHeight)||Math.max(1.2*parseFloat(s.fontSize),18);let a=Math.max(1,Math.ceil(i/n)),r=Math.max(o,a);this.maxInputRows&&Number.isFinite(this.maxInputRows)&&(r=Math.min(r,this.maxInputRows));const l=this.maxInputRows&&Number.isFinite(this.maxInputRows)?this.maxInputRows*n:1/0,c=Math.min(i,l);e.style.overflowY=i>l?"auto":"hidden",e.style.resize="none",e.style.height=c+2+"px",e.rows=r,e.scrollTop=e.scrollHeight}catch(e){}},getAutocompleteContext(e){const t=(e||"").toString();if(!t)return null;const s=e=>/[\s.,!?;:()\[\]{}"'“”‘’。、，。·…—–\-/_\\]/.test(e),i=t[t.length-1];if(i&&s(i))return null;let o=-1;for(let l=t.length-1;l>=0;l--)if(s(t[l])){o=l;break}const n=t.slice(0,o+1),a=t.slice(o+1);if(!a||a.trim().length<1)return null;const r=a.trim();if(-1===o&&r.length>3){const e=r.toLowerCase();for(let t=Math.min(10,e.length);t>=2;t--){const e=r.slice(r.length-t),s=e.toLowerCase();if((this.autocompleteKeywords||[]).some(e=>{if(!e)return!1;const t=e.toString().toLowerCase();return t.startsWith(s)&&t!==s})){return{prefix:n+r.slice(0,r.length-t),token:e}}}}return{prefix:n,token:a}},applyLocalAutocomplete(e){try{const t=(e||"").toString(),s=this.getAutocompleteContext(t);if(!s)return void(this.suggestionText="");if((s.token||"").toString().trim().length<2)return void(this.suggestionText="");const{prefix:i,token:o}=s,n=o.toLowerCase(),a=(this.autocompleteKeywords||[]).find(e=>{if(!e)return!1;const t=e.toString().toLowerCase();return t.startsWith(n)&&t!==n});if(a){const e=a.toString();this.suggestionText=i+o+e.slice(o.length)}else this.suggestionText=""}catch(t){this.suggestionText=""}},pickAutocompleteSuggestionText(e,t){const s=(e||"").toString(),i=this.getAutocompleteContext(s);if(!i)return"";const{prefix:o,token:n}=i,a=n.toLowerCase(),r=Array.isArray(t)?t:[];for(const l of r){const e="string"==typeof l?l:l&&l.text;if(!e)continue;const t=e.toString(),s=t.toLowerCase();if(s.startsWith(a)&&s!==a)return o+n+t.slice(n.length)}return""},queueAutocompleteSuggestion(e){const t=(e||"").toString();if(this.suggestionText="",this.autocompleteSuggestTimer&&(clearTimeout(this.autocompleteSuggestTimer),this.autocompleteSuggestTimer=null),!t||t.trim().length<3)return;const s=++this.autocompleteSuggestSeq,i=parseInt(void 0)||80,o=parseInt(void 0)||5e3;this.autocompleteSuggestTimer=setTimeout(async()=>{if(this.isComposing)return;const e=(this.query||"").toString();if(e&&e===t)try{const i=await this.$axios.post("/api/gemini/autocomplete",{text:e.trim(),limit:1},{timeout:o});if(s!==this.autocompleteSuggestSeq)return;const n=i?.data?.suggestion||"";(this.query||"").toString()===t&&n&&(this.suggestionText=n)}catch(i){this.suggestionText=""}},i)},acceptSuggestion(){this.suggestionText&&(this.query=this.suggestionText,this.suggestionText="",this.$nextTick(()=>{const e=this.$refs.inputBox;if(e&&"function"==typeof e.focus){e.focus();const s=(this.query||"").length;try{e.setSelectionRange(s,s)}catch(t){}}}))},selectIntent(e){e&&(this.query=e,this.$nextTick(()=>{try{this.onSend()}catch(e){}}))},checkAcceptSuggestion(e){if(!this.suggestionText)return;const t=e&&e.target?e.target:this.$refs.inputBox;try{t.selectionEnd===t.value.length&&(this.query=this.suggestionText,this.suggestionText="",this.$nextTick(()=>{try{t.setSelectionRange(this.query.length,this.query.length),t.focus()}catch(e){}}))}catch(s){}},onCompositionStart(){this.isComposing=!0},onCompositionEnd(){this.isComposing=!1,this.$nextTick(()=>this.onTyping())},async onSend(e={}){if(this.suggestionText="",this.query&&("เมนู"===this.query.trim()||"menu"===this.query.trim())){const e=this.query.trim().replace(/<[^>]*>/g,""),t={id:++this.messageIdCounter,type:"user",text:e,timestamp:(new Date).toISOString()},s=(t.text||"").replace(/\s+/g," ");t._collapsible=s.length>300,t._expanded=!1,this.messages.push(t);try{localStorage.setItem("chatbot_has_asked","1")}catch(r){}this.hasAskedBot=!0,this.query="",this.adjustInputHeight();const i=this.$refs.inputBox;i&&(i.rows=1,i.style.height="auto"),this.welcomeTyping=!1;const o="";return this.messages.push({id:++this.messageIdCounter,type:"bot",text:"",typing:!0,_typed:!1}),this.$nextTick(()=>this.scrollToBottom()),void setTimeout(()=>{this.messages.pop(),this.messages.push({id:++this.messageIdCounter,type:"bot",text:o,showCategories:!0,openIndexes:[],timestamp:(new Date).toISOString()}),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})},600)}if(!this.query||!this.query.trim())return;const t=this.query.trim().replace(/<[^>]*>/g,"");let s=t;if(!["ไม่เอา","ไม่ต้องการ","ไม่อยาก","ไม่สนใจ","ไม่ต้อง","ไม่","บ่เอา","ยกเว้น","แต่หนูจะเอา","แต่จะเอา","แต่เอา"].some(e=>t.toLowerCase().includes(e))&&this.segmenter&&this.stopwords&&this.stopwords.length>0)try{const e=Array.from(this.segmenter.segment(t));s=e.filter(e=>{if(!e.isWordLike)return!0;const t=e.segment.toLowerCase();return!(!this.allProtectedWords||!this.allProtectedWords.has(t))||!this.stopwords.includes(t)}).map(e=>e.segment).join("").replace(/\s+/g," ").trim()}catch(r){s=t}this.showUserTypingTooltip=!1,this.typingTooltipTimer&&(clearTimeout(this.typingTooltipTimer),this.typingTooltipTimer=null),this.currentTypingMessageIndex=(this.currentTypingMessageIndex+1)%this.dynamicUnlikeMessages.length,this.userTypingTooltipText=this.dynamicUnlikeMessages[this.currentTypingMessageIndex],this.query="",this.adjustInputHeight();const i=this.$refs.inputBox;i&&(i.rows=1,i.style.height="auto"),this.welcomeTyping=!1;const o={id:++this.messageIdCounter,type:"user",text:t,timestamp:(new Date).toISOString()},n=(o.text||"").replace(/\s+/g," ");o._collapsible=n.length>300,o._expanded=!1,this.messages.push(o);try{localStorage.setItem("chatbot_has_asked","1")}catch(r){}this.hasAskedBot=!0;try{this.disableCategoryItemByLabel(t)}catch(r){}this.useGeminiMode||this.currentChatbotConversationId||this.isTemporaryChatbot||this.createNewChatbotConversation(),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()});let a=null;for(const d of this.messages)if(d&&d.results&&Array.isArray(d.results)){for(const e of d.results){const s="string"==typeof e?e:e.title||e.name||e.question||"";if(s&&s.trim()===t){a=e;break}}if(a)break}if(this.$axios&&"function"==typeof this.$axios.post){if(this.useGeminiMode){this.geminiSessionId||(this.geminiSessionId="web-"+Date.now()+"-"+Math.random().toString(36).substr(2,9));const e=this.messages.length;this.messages.push({id:++this.messageIdCounter,type:"bot",text:"",typing:!0,_typed:!1}),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()});try{const s=await this.$axios.post("/api/gemini/conversation",{sessionId:this.geminiSessionId,message:t});let i="";return s&&s.data&&(i=s.data.response||s.data.text||s.data.message||""),i||(i="ขออภัยค่ะ AI ไม่สามารถตอบคำถามนี้ได้ในขณะนี้ 😅"),await new Promise(e=>setTimeout(e,500)),this.messages[e]&&"bot"===this.messages[e].type&&(this.messages[e].typing=!1,this.messages[e].text=i,this.messages[e].isGemini=!0,this.messages[e].timestamp=(new Date).toISOString()),this.saveChatHistory(),this.saveCurrentGeminiConversation(),void this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})}catch(l){return this.messages[e]&&"bot"===this.messages[e].type&&(this.messages[e].typing=!1,this.messages[e].text="ขออภัยค่ะ ไม่สามารถเชื่อมต่อ AI ได้ในขณะนี้ 😅 กรุณาลองใหม่อีกครั้งหรือเปลี่ยนเป็นโหมดค้นหา",this.messages[e].timestamp=(new Date).toISOString()),this.saveChatHistory(),this.saveCurrentGeminiConversation(),void this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})}}let i=parseInt("0",10);(Number.isNaN(i)||i<0)&&(i=0);const o=parseInt("0",10)||0;let n=null;i>0||o>0?(n=this.messages.length,this.messages.push({id:++this.messageIdCounter,type:"bot",text:"",typing:!0,_typed:!1}),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})):n=null;try{const r=e.payload||null;let l;l=r||(a&&a.id?{id:a.id}:{message:s});const c=await this.$axios.post("/chat/respond",l);let d="",u=null,h=null,p=null,g=!1,m=null,f=!1,w=!0,v=!1,b=!1,y=null,k=[],x=null;if(c&&c.data)if("string"==typeof c.data)d=c.data;else{c.data.lowConfidence&&(v=!0),c.data.needsClarification&&(b=!0),c.data.confidenceLevel&&(y=c.data.confidenceLevel),Array.isArray(c.data.verificationWarnings)&&(k=c.data.verificationWarnings),Array.isArray(c.data.suggestions)&&(x=c.data.suggestions);const e=Array.isArray(c.data.results)?c.data.results:Array.isArray(c.data.alternatives)?c.data.alternatives:null;if(!m&&e&&e.length>0&&(m=e[0].id||null),e&&e.length>0)if(e.length>1)p=e,g=!0,d=c.data.message?c.data.message:"";else{const t=e[0];t&&!u&&(u=t.pdf||t.pdfUrl||t.attachment||t.attachmentUrl||t.categoriesPDF||t.categoriesPdf||t.fileUrl||t.file||t.url||null);const s=e.map(e=>"string"==typeof e?e:e.answer||e.message||e.text||e.description||e.detail||e.content||e.body||e.title||"").filter(e=>e&&e.trim());s.length>0&&(d=s.join("\n\n"))}if(d||(d=c.data.message?c.data.message:c.data.text?c.data.text:c.data.answer?c.data.answer:c.data.response?c.data.response:c.data.result?c.data.result:c.data.data&&"string"==typeof c.data.data?c.data.data:Array.isArray(c.data.messages)&&c.data.messages.length>0?c.data.messages.join("\n"):""),!u){if(u=c.data.pdf||c.data.pdfUrl||c.data.attachment||c.data.attachmentUrl||c.data.categoriesPDF||c.data.categoriesPdf||c.data.fileUrl||c.data.file||c.data.url||null,!u&&Array.isArray(c.data.categories)){const e=c.data.categories.map(e=>e&&(e.pdf||e.pdfUrl||e.attachment||e.attachmentUrl||e.categoriesPDF||e.categoriesPdf||e.fileUrl||e.file||e.url)).find(Boolean);e&&(u=e)}if(!u&&Array.isArray(c.data.attachments)){const e=c.data.attachments.map(e=>e&&(e.pdf||e.url||e.link||e.href||e.file||e.path)).find(Boolean);e&&(u=e)}}Array.isArray(c.data.contacts)&&c.data.contacts.length&&(h=c.data.contacts.map(e=>({name:e.name||e.organization||e.org||e.department||"",organization:e.organization||e.org||e.department||"",category:e.category||e.CategoriesName||null,contact:e.contact||e.Contact||null,officer:e.officer||e.name||e.person||"",phone:e.phone||e.tel||e.phoneNumber||"",phones:Array.isArray(e.phones)?e.phones:e.phone?[e.phone]:[],unit:e.unit||e.ext||e.extension||e.phoneExtension||e.departmentUnit||"",url:e.url||e.website||"",facebook:e.facebook||e.fb||""}))),void 0!==c.data.found&&(f=!!c.data.found),void 0!==c.data.keywordMatch&&(w=c.data.keywordMatch),c.data.questionId&&(m=c.data.questionId)}else d="ขออภัยค่ะ 😅 ในขณะนี้ระบบมีเรื่องไปหน่อย ลองอีกครั้งได้ไหมคะ?";d&&""!==d.trim()||(d="เออ... ดูเหมือนว่าคำถามนี้ยังเหนือความสามารถของฉันเลย 🤔 ลองพูดคุยกับศูนย์บริการจึงสวัสดิการนักศึกษาได้ค่ะ!"),!d.includes("ขออภัยจริงๆ ฉันไม่มีข้อมูลเกี่ยวกับคำถามนี้")&&!d.includes("ยังเหนือความสามารถของฉันเลย")||h&&h.length||(h=(Pt||[]).map(e=>({organization:e.name||e.organization||e.OrgName||e.title||"",category:null,contact:e.phone?`เบอร์โทรศัพท์ : ${e.phone}`:Array.isArray(e.phones)&&e.phones.length?`เบอร์โทรศัพท์ : ${e.phones.join(", ")}`:null}))),d&&d.includes("พบ")&&(d=d.replace(" (","\n("));const T=o||(i>0?750:0);if(await new Promise(e=>setTimeout(e,T)),this.messages[n]&&"bot"===this.messages[n].type){const e=this.messages[n];u&&(e.pdf=u),h&&(e.contacts=h);let s=(h||[]).filter(e=>e.contact&&String(e.contact).trim());if(s&&s.length>0){e.showContacts=!0,e.visibleContacts=s;const t=new Map;for(const e of s){const s=e.organization||"อื่นๆ";t.has(s)||t.set(s,{organization:s,categories:[]}),t.get(s).categories.push({category:e.category,contact:e.contact})}e.groupedContacts=Array.from(t.values())}if(m&&(e.questionId=m),void 0!==f&&(e.found=f),e.keywordMatch=w,c.data&&c.data.title&&(e.title=c.data.title),v&&(e.lowConfidence=!0),b&&(e.needsClarification=!0),y&&(e.confidenceLevel=y),k.length&&(e.verificationWarnings=k),x&&(e.suggestions=x),e.feedback||(e.feedback=null),e.timestamp=(new Date).toISOString(),!1===f){const s=await this.sendNoAnswerLog(t);s&&(e.chatLogId=s)}else if(!0===f&&!g){const s=await this.sendHasAnswerLog(t,m);s&&(e.chatLogId=s)}if(e.typing=!0,d?(await this.streamText(n,d),e.typing=!1,!0!==e.found||e.multipleResults||this.$nextTick(()=>{setTimeout(()=>this.startFeedbackTutorial(),500)})):e.typing=!1,p&&p.length>0){g&&(e.multipleResults=!0),e.results=[];for(const t of p)e.results.push(t),e.results.length<=5&&(await new Promise(e=>setTimeout(e,150)),this.scrollToBottom());this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})}if(s&&0!==s.length||(h&&h.length>0?s=h:(g||!1===f)&&Pt&&Pt.length>0&&(s=Pt.map(e=>({organization:e.name||e.organization||e.OrgName||e.title||"",category:null,contact:e.phone?`เบอร์โทรศัพท์ : ${e.phone}`:Array.isArray(e.phones)&&e.phones.length?`เบอร์โทรศัพท์ : ${e.phones.join(", ")}`:null})))),s&&s.length>0&&(e.showContacts=!0),s&&s.length>0){const t=(e=>{const t=[];for(const u of e){const e=u.organization||"อื่นๆ";let s=(u.contact||"").trim();const i=String(s||"").match(/^(เบอร์โทรศัพท์|ติดต่อ|ลิงค์)\s*:/i),o=i&&/ลิงค์/i.test(i[1]),n=String(s||"").replace(/^(?:เบอร์โทรศัพท์|ติดต่อ|ลิงค์)\s*:\s*/i,"").trim();if(!n)continue;const a=/https?:\/\/|www\./i.test(n);if(/^[\?&]/.test(n)||/[=&]/.test(n)&&n.length<120){let s=!1;for(let i=t.length-1;i>=0;i--){const o=t[i];if(o&&o.contact){if(o.organization!==e)break;if(/https?:\/\/|www\./i.test(o.contact)){o.contact=String(o.contact).trim()+n,s=!0;break}}}if(s)continue}o&&!a||t.push({organization:e,contact:s||null})}const s=new Map,i=new Map,o=[],n=e=>{const t=String(e||"").match(/0(?:2|[3-9]\d)[-\s]?\d{3}[-\s]?\d{3,4}|0\d{2}[-\s]?\d{3}[-\s]?\d{4}/);return t?t[0].replace(/\D/g,""):null},a=e=>{if(!e)return[];const t=String(e),s=new Set;for(const o of t.matchAll(/(?:ต่อ|ext\.?|x)\s*[:\.]?\s*(\d{1,6})/gi))if(o[1]){const e=o[1].replace(/\D/g,"");e.length>=4&&e.length<=5&&!e.startsWith("0")&&s.add(e)}const i=t.match(/0(?:2|[3-9]\d)[-\s]?\d{3}[-\s]?\d{3,4}|0\d{2}[-\s]?\d{3}[-\s]?\d{4}/);if(i){const e=t.slice(t.indexOf(i[0])+i[0].length).match(/(\d{2,6})/g);e&&e.forEach(e=>{const t=e.replace(/\D/g,"");t.length>=4&&t.length<=5&&!t.startsWith("0")&&s.add(t)})}return Array.from(s)},r=e=>{if(!e)return[];let t=String(e);t=this.joinBrokenUrls(t);const s=new RegExp("(https?:\\/\\/[^^\\s]+)","ig"),i=[];let o;for(;null!==(o=s.exec(t));){let e=o[0].trim().replace(/\n/g,"").replace(/\/$/,"");const t=/(0(?:2|[3-9]\d)[-\d]{6,10}|0\d{2}[-\d]{7,10})$/;t.test(e)&&(e=e.replace(t,"").replace(/[-_.]+$/,"")),i.push(e)}return Array.from(new Set(i))},l=e=>e?9===e.length?e.slice(0,3)+"-"+e.slice(3):10===e.length?e.slice(0,3)+"-"+e.slice(3,6)+"-"+e.slice(6):e:"",c=new Map;for(const u of t){const e=n(u.contact),t=a(u.contact),d=r(u.contact),h=(u.organization||"").trim();if(e){const s=`${h}|${e}`;if(c.has(s)){const i=c.get(s);t&&t.length&&t.forEach(e=>i.exts.add(e)),d&&d.length&&d.forEach(e=>i.urls.add(e));const n=`${l(e)}${i.exts.size?" ต่อ "+Array.from(i.exts).join(" หรือ "):""}${i.urls.size?"\nลิงค์ : "+Array.from(i.urls).join(" หรือ "):""}`;o[i.idx].contact=n}else{const i=new Set,n=new Set;t&&t.length&&t.forEach(e=>i.add(e)),d&&d.length&&d.forEach(e=>n.add(e));const a=`${l(e)}${i.size?" ต่อ "+Array.from(i).join(" หรือ "):""}${n.size?"\nลิงค์ : "+Array.from(n).join(" หรือ "):""}`,r=o.length;o.push({organization:u.organization,contact:a}),c.set(s,{idx:r,exts:i,urls:n})}}else if(d&&d.length){const e=e=>Array.from(c.values()).some(t=>t.urls&&t.urls.has(e)),t=d.filter(t=>!e(t));if(t.length){const e=t.filter(e=>!i.has(e));if(e.length){const t=o.length;o.push({organization:u.organization,contact:"ลิงค์ : "+e.join(" หรือ ")}),e.forEach(e=>i.set(e,t))}}}else{const e=`name:${(u.organization||"").trim()}`;if(!s.has(e)){const t=o.length;o.push({organization:u.organization,contact:u.contact}),s.set(e,t)}}}const d=new Map;for(const u of o){const e=u.organization;d.has(e)||d.set(e,{organization:e,categories:[]}),d.get(e).categories.push({category:null,contact:u.contact})}return Array.from(d.values())})(s);e.groupedContacts=t,e.visibleContacts=s,e.showContacts=!0,this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})}this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})}else{const e=this.messages.length;this.messages.push({id:++this.messageIdCounter,type:"bot",text:d||"",typing:!1,timestamp:(new Date).toISOString(),_typed:!1});const t=this.messages[e];u&&(t.pdf=u),h&&(t.contacts=h),m&&(t.questionId=m),void 0!==f&&(t.found=f),v&&(t.lowConfidence=!0),b&&(t.needsClarification=!0),y&&(t.confidenceLevel=y),k.length&&(t.verificationWarnings=k),x&&(t.suggestions=x),t.feedback||(t.feedback=null),p&&p.length>0&&(g&&(t.multipleResults=!0),t.results=p);let s=(h||[]).filter(e=>e.contact&&String(e.contact).trim());if(s&&s.length>0){t.showContacts=!0,t.visibleContacts=s;const e=new Map;for(const t of s){const s=t.organization||"อื่นๆ";e.has(s)||e.set(s,{organization:s,categories:[]}),e.get(s).categories.push({category:t.category,contact:t.contact})}t.groupedContacts=Array.from(e.values())}this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})}}catch(c){null!==n&&this.messages[n]?(this.messages[n].typing=!1,this.messages[n].text="อุ๊ะ 😭 ฉันเหนื่อยไปหน่อย ลองอีกครั้งได้ไหมคะ?",this.messages[n].timestamp=(new Date).toISOString(),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})):(this.messages.push({id:++this.messageIdCounter,type:"bot",text:"อุ๊ะ 😭 ฉันเหนื่อยไปหน่อย ลองอีกครั้งได้ไหมคะ?",typing:!1,timestamp:(new Date).toISOString(),_typed:!1}),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})),this.sendNoAnswerLog(t)}}else{let e=parseInt("0",10);if((Number.isNaN(e)||e<0)&&(e=0),0===e)this.messages.push({type:"bot",text:"ค่ะ 💔 ฉันไม่สามารถติดต่อเซิร์ฟเวอร์ได้ขณะนี้ ลองใหม่ทีหลัง!",typing:!1,timestamp:(new Date).toISOString(),_typed:!1}),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()});else{const e=this.messages.length;this.messages.push({type:"bot",text:"",typing:!0,_typed:!1}),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()}),setTimeout(()=>{this.messages[e]&&(this.messages[e].typing=!1,this.messages[e].text="ค่ะ 💔 ฉันไม่สามารถติดต่อเซิร์ฟเวอร์ได้ขณะนี้ ลองใหม่ทีหลัง!",this.messages[e].timestamp=(new Date).toISOString(),this.saveChatHistory(),this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()}))},600)}this.sendNoAnswerLog(t)}},scrollToBottom(){this.$refs.panelBody&&(this.$refs.panelBody.scrollTo({top:this.$refs.panelBody.scrollHeight,behavior:"smooth"}),setTimeout(()=>{this.showFooter=!0},300))},scrollToBottomInstant(){const e=this.$refs.panelBody,t=this.$refs.messagesContainer||document.querySelector(".chat-messages");e&&(e.style.scrollBehavior="auto",t&&(t.style.visibility="hidden"),e.scrollTop=e.scrollHeight);const s=document.querySelector(".chat-panel");s&&(s.scrollTop=s.scrollHeight),setTimeout(()=>{e&&(e.scrollTop=e.scrollHeight),s&&(s.scrollTop=s.scrollHeight)},50),setTimeout(()=>{e&&(e.scrollTop=e.scrollHeight,e.style.scrollBehavior=""),s&&(s.scrollTop=s.scrollHeight),t&&(t.style.visibility="")},200)},selectSuggestion(e,t,s){if(!t)return;if(t._disabled)return;this.$set?this.$set(t,"_disabled",!0):t._disabled=!0,this.$set?this.$set(t,"_selected",!0):t._selected=!0,this.saveChatHistory();const i="string"==typeof t?t:t.title||t.name||t.question||"";if(i){this.query=i;try{this.disableCategoryItemByLabel(i)}catch(o){}"object"==typeof t&&t.id?this.onSend({forceBackend:!0,payload:{id:t.id}}):this.onSend({forceBackend:!0})}},getVisibleSuggestions(e){if(!e||!e.results)return[];const t=this.messages.indexOf(e),s=this.suggestionVisibleCounts[t]||3;return e.results.slice(0,s)},getVisibleCount(e){const t=this.messages.indexOf(e);return this.suggestionVisibleCounts[t]||3},loadMoreSuggestions(e){const t=this.messages.indexOf(e);if(-1===t)return;const s=(this.suggestionVisibleCounts[t]||3)+3;this.$set?this.$set(this.suggestionVisibleCounts,t,s):this.suggestionVisibleCounts[t]=s,this.saveChatHistory();try{const e=this.messages[t]||{},s=e.visibleContacts&&e.visibleContacts.length?e.visibleContacts:(Pt||[]).filter(e=>e.phone&&e.phone.trim()||Array.isArray(e.phones)&&e.phones.length>0),i=Object.assign({},e,{showContacts:!0,visibleContacts:s});this.messages.splice(t,1,i),this.saveChatHistory()}catch(i){}},getContactVisibleCount(e){const t=this.messages.indexOf(e),s=e.groupedContacts&&e.groupedContacts.length?e.groupedContacts:Pt||[];return this.contactVisibleCounts[t]||s.length||999},getVisibleContactGroups(e){const t=e.groupedContacts&&e.groupedContacts.length?e.groupedContacts:Pt||[],s=this.getContactVisibleCount(e);return t.filter(e=>{if(!e||!Array.isArray(e.categories))return!1;for(const t of e.categories){if(!t||!t.contact)continue;const e=t.contact||"";if(/https?:\/\/|www\.|facebook\./i.test(e))return!0;if(/0[0-9\-\s]{8,}/.test(e))return!0;const s=this.parseContactParts(e);for(const t of s){if(/^(https?:|www\.|facebook\.|ลิงค์)/i.test(t))return!0;if(this.hasContact(t))return!0}}return!1}).map(e=>{if(!e||!Array.isArray(e.categories))return e;const t=new Set,s=[];for(const i of e.categories){if(!i||!i.contact)continue;const e=(i.contact||"").replace(/[\s\-]/g,"").toLowerCase();t.has(e)||(t.add(e),s.push(i))}return{...e,categories:s}}).slice(0,s)},toggleLoadMoreContacts(e){const t=this.messages.indexOf(e);if(-1===t)return;const s=(e.groupedContacts&&e.groupedContacts.length?e.groupedContacts:Pt||[]).length,i=(this.contactVisibleCounts[t]||3)>=s?3:s;this.$set?this.$set(this.contactVisibleCounts,t,i):this.contactVisibleCounts[t]=i,this.saveChatHistory()},disableCategoryItemByLabel(e){if(e&&Array.isArray(this.categories)){for(let s=0;s<this.categories.length;s++){const i=this.categories[s];if(i&&Array.isArray(i.items))for(let o=0;o<i.items.length;o++){const n=i.items[o],a="string"==typeof n?n:n.label||n.text||n;if(a===e){const e={label:a,_disabled:!0};this.$set?this.$set(this.categories[s].items,o,e):this.categories[s].items[o]=e;try{localStorage.setItem("chatbot_categories_disabled",JSON.stringify(this.categories))}catch(t){}return!0}}}return!1}},async retryLoadCategories(){this.loading=!0,this.loadError="",this.isOffline=!1;try{let e=(await this.$axios.get("/categories",{params:{onlyWithAnswers:1}})).data;if(e&&!Array.isArray(e)){if(!Array.isArray(e.categories))throw new Error("Categories API returned unexpected structure");e=e.categories}if(Array.isArray(e)&&e.length&&e[0].hasOwnProperty("CategoriesID")){const t=e.map(e=>{const t=String(e.CategoriesID),s=null==e.ParentCategoriesID?null:String(e.ParentCategoriesID),i=!s||s===t;return{id:t,title:e.CategoriesName||"Untitled",parent:i?null:s,pdf:e.CategoriesPDF||null}});t.length>0&&(this.categories=t,this.lineMenuCategories=t.filter(e=>!e.parent).slice(0,8))}this.restoreCategoriesDisabledState()}catch(e){this.loadError=e?.message||"Failed to load categories",this.isOffline=!0}finally{this.loading=!1}},restoreCategoriesDisabledState(){try{const e=localStorage.getItem("chatbot_categories_disabled");if(!e||!Array.isArray(this.categories))return;const t=JSON.parse(e);if(!Array.isArray(t))return;const s=new Set;t.forEach(e=>{e&&Array.isArray(e.items)&&e.items.forEach(e=>{if(e&&"object"==typeof e&&!0===e._disabled){const t=e.label||e.text||e;t&&s.add(t)}})}),this.categories.forEach((e,t)=>{e&&Array.isArray(e.items)&&e.items.forEach((e,i)=>{const o="string"==typeof e?e:e.label||e.text||e;if(s.has(o)){const e={label:o,_disabled:!0};this.$set?this.$set(this.categories[t].items,i,e):this.categories[t].items[i]=e}})})}catch(e){}},updateAnchoring(){this.$nextTick(()=>{const e=this.$refs.panelBody;if(!e)return;this.anchorBottom=e.scrollHeight<=e.clientHeight+16})},saveChatHistory(){this._saveDebounce&&clearTimeout(this._saveDebounce),this._saveDebounce=setTimeout(()=>{this._doSaveChatHistory(),!this.useGeminiMode&&this.currentChatbotConversationId&&this.saveCurrentChatbotConversation()},300)},_doSaveChatHistory(){try{const e=e=>e.filter(e=>!e.showCategories&&!e._isWelcome&&!e._temp),t=new Set(this.allStoredMessages.map(e=>e.id)),s=e(this.messages).filter(e=>!t.has(e.id)),i=[...e(this.allStoredMessages),...s].slice(-this.MAX_STORED_MESSAGES);localStorage.setItem("chatbot_messages",JSON.stringify(i)),this.allStoredMessages=i}catch(e){}},loadChatHistory(){try{const e=localStorage.getItem("chatbot_messages");if(e){let t=JSON.parse(e);t=t.filter(e=>!e.showCategories&&!e._isWelcome&&!e._temp),t.length>this.MAX_STORED_MESSAGES&&(t=t.slice(-this.MAX_STORED_MESSAGES),localStorage.setItem("chatbot_messages",JSON.stringify(t))),this.allStoredMessages=t;const s=Math.max(0,t.length-this.MESSAGES_PER_PAGE);this.messages=t.slice(s),this.currentPage=1,this.hasMoreMessages=s>0,this.$nextTick(()=>{this.$refs.panelBody&&requestAnimationFrame(()=>{this.$refs.panelBody.scrollTop=this.$refs.panelBody.scrollHeight})}),this.updateAnchoring()}}catch(e){this.messages=[],this.allStoredMessages=[],this.hasMoreMessages=!1}},loadMoreMessages(){!this.isLoadingMore&&this.hasMoreMessages&&(this.isLoadingMore=!0,this.showLoadMoreHint=!0,this.loadMoreHintTimer&&clearTimeout(this.loadMoreHintTimer),this.loadMoreHintTimer=setTimeout(()=>{this.showLoadMoreHint=!1,this.loadMoreHintTimer=null},1e3),setTimeout(()=>{this._doLoadMoreMessages()},1500))},_doLoadMoreMessages(){const e=this.messages.length,t=this.allStoredMessages.length-e;if(t<=0)return this.hasMoreMessages=!1,void(this.isLoadingMore=!1);const s=t-Math.min(this.MESSAGES_PER_PAGE,t),i=t,o=this.allStoredMessages.slice(s,i),n=this.$refs.panelBody,a=n?n.scrollTop:0,r=n?n.scrollHeight:0;this.messages=[...o,...this.messages],this.currentPage++,this.hasMoreMessages=s>0,this.$nextTick(()=>{if(n){const e=n.scrollHeight-r;n.style.scrollBehavior="auto",n.scrollTop=a+e,n.style.scrollBehavior=""}this.isLoadingMore=!1})},loadGeminiConversations(){try{const e=localStorage.getItem("gemini_conversations");e&&(this.geminiConversations=JSON.parse(e));const t=localStorage.getItem("gemini_current_conversation_id");t&&this.geminiConversations.some(e=>e.id===t)&&(this.currentGeminiConversationId=t)}catch(e){this.geminiConversations=[]}},saveGeminiConversations(){try{localStorage.setItem("gemini_conversations",JSON.stringify(this.geminiConversations)),this.currentGeminiConversationId?localStorage.setItem("gemini_current_conversation_id",this.currentGeminiConversationId):localStorage.removeItem("gemini_current_conversation_id")}catch(e){}},createNewGeminiConversation(){this.currentGeminiConversationId&&this.messages.length>0&&!this.isTemporaryGemini&&this.saveCurrentGeminiConversation(),this.isTemporaryGemini=!1;const e=Date.now().toString(),t={id:e,title:"บทสนทนาใหม่",messages:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return this.geminiConversations.unshift(t),this.geminiConversations.length>this.MAX_GEMINI_CONVERSATIONS&&(this.geminiConversations=this.geminiConversations.slice(0,this.MAX_GEMINI_CONVERSATIONS)),this.messages=[],this.currentGeminiConversationId=e,this.showGeminiHistory=!1,this.showGeminiDeleteButtons=!1,this.showWelcomeCategories=!1,this.saveGeminiConversations(),e},startTemporaryGemini(){this.currentGeminiConversationId&&this.messages.length>0&&!this.isTemporaryGemini&&this.saveCurrentGeminiConversation(),this.isTemporaryGemini=!0,this.currentGeminiConversationId=null,this.messages=[],this.showGeminiHistory=!1,this.showGeminiDeleteButtons=!1,this.showWelcomeCategories=!1,this.$toast&&this.$toast.info("เริ่มแชท AI ชั่วคราว - ประวัติจะไม่ถูกบันทึก",{duration:2e3})},saveCurrentGeminiConversation(){if(!this.useGeminiMode||!this.currentGeminiConversationId||this.isTemporaryGemini)return;const e=this.geminiConversations.findIndex(e=>e.id===this.currentGeminiConversationId);if(-1===e)return;const t=this.messages.filter(e=>"user"===e.type||"bot"===e.type);this.geminiConversations[e].messages=t,this.geminiConversations[e].updatedAt=(new Date).toISOString();const s=t.find(e=>"user"===e.type);if(s&&s.text){const t=s.text.slice(0,30)+(s.text.length>30?"...":"");this.geminiConversations[e].title=t}const i=[...t].reverse().find(e=>"bot"===e.type&&e.text);if(i&&i.text){const t=i.text.replace(/<[^>]*>/g,"").slice(0,50)+(i.text.length>50?"...":"");this.geminiConversations[e].preview=t}this.saveGeminiConversations()},loadGeminiConversation(e){const t=this.geminiConversations.find(t=>t.id===e);t&&(this.isTemporaryGemini=!1,this.currentGeminiConversationId=e,this.messages=[...t.messages],this.showGeminiHistory=!1,this.showGeminiDeleteButtons=!1,this.saveGeminiConversations(),this.$nextTick(()=>{this.$refs.panelBody&&(this.$refs.panelBody.style.scrollBehavior="auto",this.$refs.panelBody.scrollTop=this.$refs.panelBody.scrollHeight,this.$refs.panelBody.style.scrollBehavior="")}))},deleteGeminiConversation(e){if(this.geminiConversations=this.geminiConversations.filter(t=>t.id!==e),this.currentGeminiConversationId===e){this.messages=[],this.allStoredMessages=[],this.currentGeminiConversationId=null;try{localStorage.removeItem("chatbot_messages")}catch(t){}}this.saveGeminiConversations()},toggleGeminiHistory(){this.showGeminiHistory=!this.showGeminiHistory},toggleChatbotHistory(){this.showChatbotHistory=!this.showChatbotHistory},loadChatbotConversations(){try{const e=localStorage.getItem("chatbot_conversations");e&&(this.chatbotConversations=JSON.parse(e));const t=localStorage.getItem("chatbot_current_conversation_id");t&&this.chatbotConversations.some(e=>e.id===t)&&(this.currentChatbotConversationId=t)}catch(e){this.chatbotConversations=[]}},saveChatbotConversations(){try{localStorage.setItem("chatbot_conversations",JSON.stringify(this.chatbotConversations)),this.currentChatbotConversationId?localStorage.setItem("chatbot_current_conversation_id",this.currentChatbotConversationId):localStorage.removeItem("chatbot_current_conversation_id")}catch(e){}},createNewChatbotConversation(){this.currentChatbotConversationId&&this.messages.length>0&&!this.isTemporaryChatbot&&this.saveCurrentChatbotConversation(),this.isTemporaryChatbot=!1;const e=Date.now().toString(),t={id:e,title:"บทสนทนาใหม่",messages:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return this.chatbotConversations.unshift(t),this.chatbotConversations.length>this.MAX_CHATBOT_CONVERSATIONS&&(this.chatbotConversations=this.chatbotConversations.slice(0,this.MAX_CHATBOT_CONVERSATIONS)),this.messages=[],this.currentChatbotConversationId=e,this.showChatbotHistory=!1,this.showChatbotDeleteButtons=!1,this.showWelcomeCategories=!1,this.saveChatbotConversations(),e},startTemporaryChatbot(){this.currentChatbotConversationId&&this.messages.length>0&&!this.isTemporaryChatbot&&this.saveCurrentChatbotConversation(),this.isTemporaryChatbot=!0,this.currentChatbotConversationId=null,this.messages=[],this.showChatbotHistory=!1,this.showChatbotDeleteButtons=!1,this.showWelcomeCategories=!1,this.$toast&&this.$toast.info("เริ่มแชทชั่วคราว - ประวัติจะไม่ถูกบันทึก",{duration:2e3})},saveCurrentChatbotConversation(){if(this.useGeminiMode||!this.currentChatbotConversationId||this.isTemporaryChatbot)return;const e=this.chatbotConversations.findIndex(e=>e.id===this.currentChatbotConversationId);if(-1===e)return;const t=this.messages.filter(e=>"user"===e.type||"bot"===e.type);this.chatbotConversations[e].messages=t,this.chatbotConversations[e].updatedAt=(new Date).toISOString();const s=t.find(e=>"user"===e.type);if(s&&s.text){const t=s.text.slice(0,30)+(s.text.length>30?"...":"");this.chatbotConversations[e].title=t}const i=[...t].reverse().find(e=>"bot"===e.type&&e.text);if(i&&i.text){const t=i.text.replace(/<[^>]*>/g,"").slice(0,50)+(i.text.length>50?"...":"");this.chatbotConversations[e].preview=t}this.saveChatbotConversations()},loadChatbotConversation(e){const t=this.chatbotConversations.find(t=>t.id===e);if(!t)return;this.isTemporaryChatbot=!1,this.currentChatbotConversationId=e;const s=t.messages||[],i=Math.max(0,s.length-this.MESSAGES_PER_PAGE);this.messages=s.slice(i),this.showChatbotHistory=!1,this.showChatbotDeleteButtons=!1,this.saveChatbotConversations(),this.$nextTick(()=>{this.$refs.panelBody&&(this.$refs.panelBody.style.scrollBehavior="auto",this.$refs.panelBody.scrollTop=this.$refs.panelBody.scrollHeight,this.$refs.panelBody.style.scrollBehavior="")})},deleteChatbotConversation(e){if(this.chatbotConversations=this.chatbotConversations.filter(t=>t.id!==e),this.currentChatbotConversationId===e){this.messages=[],this.allStoredMessages=[],this.currentChatbotConversationId=null;try{localStorage.removeItem("chatbot_messages")}catch(t){}}this.saveChatbotConversations()},formatChatbotHistoryDate(e){if(!e)return"";const t=new Date(e),s=new Date,i=s-t,o=Math.floor(i/6e4),n=Math.floor(i/36e5),a=Math.floor(i/864e5);return o<1?"เมื่อสักครู่":o<60?`${o} นาทีที่แล้ว`:n<24?`${n} ชั่วโมงที่แล้ว`:a<7?`${a} วันที่แล้ว`:t.toLocaleDateString("th-TH",{day:"numeric",month:"short",year:t.getFullYear()!==s.getFullYear()?"numeric":void 0})},formatGeminiDate(e){if(!e)return"";const t=new Date(e),s=new Date,i=s-t,o=Math.floor(i/6e4),n=Math.floor(i/36e5),a=Math.floor(i/864e5);return o<1?"เมื่อสักครู่":o<60?`${o} นาทีที่แล้ว`:n<24?`${n} ชั่วโมงที่แล้ว`:a<7?`${a} วันที่แล้ว`:t.toLocaleDateString("th-TH",{day:"numeric",month:"short",year:t.getFullYear()!==s.getFullYear()?"numeric":void 0})},clearChatHistory(){this.$axios&&this.$axios.post("/chat/respond",{resetConversation:!0}).catch(e=>{}),this.messages=[],this.allStoredMessages=[],this.hasMoreMessages=!1,this.currentPage=1,this.query="",localStorage.removeItem("chatbot_messages");try{localStorage.removeItem("chatbot_mini_help_dismissed")}catch(s){}this.miniHelpDismissed=!1;try{localStorage.removeItem("chatbot_has_asked")}catch(s){}this.hasAskedBot=!1;try{localStorage.removeItem("chatbot_categories"),localStorage.removeItem("chatbot_categories_disabled")}catch(s){}try{Array.isArray(this.categories)&&(this.categories=this.categories.map(e=>{const t=Array.isArray(e.items)?e.items.map(e=>e?"string"==typeof e?e:e.label||e.text||"":e):[];return{id:e.id,title:e.title,parent:e.parent,pdf:e.pdf,items:t}}))}catch(s){}this.openIndexes=[],this.saveCategoryState();try{localStorage.removeItem("chatbot_welcome_categories_visible")}catch(s){}this.showWelcomeCategories=!1,this.$nextTick(()=>{try{localStorage.setItem("chatbot_welcome_categories_visible","false")}catch(s){}}),this.$forceUpdate(),this.welcomeTypingTimer&&(clearTimeout(this.welcomeTypingTimer),this.welcomeTypingTimer=null);const e=parseInt("0",10),t=parseInt("0",10)||0;if(this.tempTyping=e>0||t>0,this.welcomeTypingShown=!0,this.$nextTick(()=>{this.tempTyping?(this.scrollToBottom(),setTimeout(()=>this.scrollToBottom(),50),setTimeout(()=>this.scrollToBottom(),250)):(this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0),setTimeout(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0)},50),setTimeout(()=>{this.$refs.panelBody&&(this.$refs.panelBody.scrollTop=0)},250)),this.updateAnchoring()}),this.tempTyping){const e=t||1200;this.welcomeTypingTimer=setTimeout(()=>{this.tempTyping=!1,this.welcomeTypingTimer=null,this.$nextTick(()=>{this.scrollToBottom(),this.updateAnchoring()})},e)}else this.welcomeTypingTimer=null,this.$nextTick(()=>this.scrollToBottom())},saveCategoryState(){try{const e=Array.isArray(this.openIndexes)&&this.openIndexes.length>0?[this.openIndexes[0]]:[];localStorage.setItem("chatbot_category_state",JSON.stringify(e))}catch(e){}},loadCategoryState(){try{const e=localStorage.getItem("chatbot_category_state");if(e){const t=JSON.parse(e);Array.isArray(t)&&t.length>0?this.openIndexes=[t[0]]:this.openIndexes=[]}}catch(e){this.openIndexes=[]}},toggleFeedbackDropdown(e){this.openFeedbackDropdownIndex===e?this.openFeedbackDropdownIndex=null:(this.openFeedbackDropdownIndex=e,this.$nextTick(()=>{this.updateDropdownPosition(e),this.startDropdownDiagnostics&&this.startDropdownDiagnostics(e),this._dropdownReanchorHandler=()=>this.updateDropdownPosition(e),this._dropdownScrollHandler=()=>this.updateDropdownPosition(e),window.addEventListener("resize",this._dropdownReanchorHandler),window.addEventListener("scroll",this._dropdownScrollHandler,!0)}))},updateDropdownPosition(e){try{const t=this.$el.querySelectorAll(".feedback-unlike-wrapper"),s=t&&t[e];if(!s)return;const i=s.querySelector(".feedback-btn"),o=s.querySelector(".feedback-reason-dropdown-inline");if(!o||!i)return;const n=i.getBoundingClientRect();let a=o.getBoundingClientRect();a.width&&a.height||(o.style.visibility="hidden",o.style.display="block",o.style.position="fixed",o.style.left="-9999px",o.style.top="-9999px",a=o.getBoundingClientRect(),o.style.display="",o.style.visibility="");const r=Math.round(n.left+(n.width-a.width)/2),l=(n.top,window.innerHeight-n.bottom),c=8;let d=n.top-a.height-c;d<8&&l>a.height+c&&(d=Math.round(n.bottom+c)),o.style.position="fixed",o.style.left=`${r}px`,o.style.top=`${d}px`,o.style.right="auto",o.style.transform="translateX(0)",o.style.willChange="transform, opacity, left, top",o.style.backfaceVisibility="hidden",o.style.transition="none",o.style.animation="none",o.offsetWidth,o.style.animation="appleDropdownInInline 0.36s cubic-bezier(0.175, 0.885, 0.32, 1.275)",o.style.animationFillMode="forwards";const u=()=>{o.style.animation="",o.removeEventListener("animationend",u)};o.addEventListener("animationend",u),o.style.outline="2px dashed rgba(255,80,80,0.9)",setTimeout(()=>{o.style.outline=""},700)}catch(t){}},showUnlikeTooltipMessage(){if(this.feedbackToggleCount>=3)return void this.showFeedbackWarning();const e=Math.floor(Math.random()*this.dynamicApologyMessages.length),t=this.dynamicApologyMessages[e];setTimeout(()=>{this.botTooltip.cute(t)},400)},startDropdownDiagnostics(e){try{if(this._dropdownDiagnostics&&this._dropdownDiagnostics.running)return;const t=this.$el.querySelectorAll(".feedback-unlike-wrapper"),s=t&&t[e];if(!s)return;const i=s.querySelector(".feedback-btn"),o=s.querySelector(".feedback-reason-dropdown-inline");if(!o||!i)return;this._dropdownDiagnostics={running:!0,frames:[],start:performance.now(),raf:null},i.style.outline="2px solid rgba(0,120,255,0.9)",o.style.outline="2px dashed rgba(255,80,80,0.95)";let n=null;const a=e=>{if(!this._dropdownDiagnostics||!this._dropdownDiagnostics.running)return;const t=o.getBoundingClientRect(),s=window.getComputedStyle(o).transform||"",r=Math.round(100*t.left)/100,l=null===n?0:Math.round(100*(r-n))/100;this._dropdownDiagnostics.frames.push({t:Math.round(e),left:r,delta:l,transform:s}),Math.abs(l),n=r,performance.now()-this._dropdownDiagnostics.start<900?this._dropdownDiagnostics.raf=requestAnimationFrame(a):(this._dropdownDiagnostics.running=!1,setTimeout(()=>{try{i.style.outline="",o.style.outline=""}catch(e){}},900))};this._dropdownDiagnostics.raf=requestAnimationFrame(a)}catch(t){}},stopDropdownDiagnostics(){try{if(!this._dropdownDiagnostics)return;this._dropdownDiagnostics.raf&&cancelAnimationFrame(this._dropdownDiagnostics.raf),this._dropdownDiagnostics.running=!1;const t=this.$el.querySelectorAll(".feedback-unlike-wrapper"),s=t&&t[0];if(s){const t=s.querySelector(".feedback-btn"),i=s.querySelector(".feedback-reason-dropdown-inline");try{t&&(t.style.outline="")}catch(e){}try{i&&(i.style.outline="")}catch(e){}}this._dropdownDiagnostics=null}catch(t){}},getLatestBotMessage(){for(let e=this.messages.length-1;e>=0;e--)if("bot"===this.messages[e].type)return this.messages[e];return null},handleLikeClick(e){const t="dislike"===e.feedback,s=!e.feedback;this.closeFeedbackDropdown();try{e&&e.selectedReason&&(this.$set?this.$set(e,"selectedReason",null):e.selectedReason=null),e&&e.feedbackCommentText&&(this.$set?this.$set(e,"feedbackCommentText",""):e.feedbackCommentText="")}catch(i){}this.saveChatHistory(),this.sendFeedback(e,!0,null,null),this.trackFeedbackToggle(),(s||t)&&this.showLikeTooltipMessage()},trackFeedbackToggle(){this.feedbackToggleCount++,this.feedbackToggleCount>=5?this.disableFeedbackButtons():(this.feedbackToggleResetTimer&&clearTimeout(this.feedbackToggleResetTimer),this.feedbackToggleResetTimer=setTimeout(()=>{this.feedbackToggleCount=0,this.feedbackToggleResetTimer=null},5e3))},disableFeedbackButtons(){this.botTooltip.warn("หยุดก่อนนะคะ! รอ 5 วินาที 🚫💤"),this.feedbackButtonsDisabled=!0,this.feedbackCooldownTime=5,this.feedbackCooldownTimer=setTimeout(()=>{this.feedbackButtonsDisabled=!1,this.feedbackToggleCount=0,this.feedbackCooldownTimer=null},5e3)},showFeedbackWarning(){const e=Math.floor(Math.random()*this.dynamicWarningMessages.length),t=this.dynamicWarningMessages[e];setTimeout(()=>{this.botTooltip.warn(t)},400)},showLikeTooltipMessage(){if(this.feedbackToggleCount>=3)return void this.showFeedbackWarning();const e=Math.floor(Math.random()*this.dynamicLikeMessages.length),t=this.dynamicLikeMessages[e];setTimeout(()=>{this.botTooltip.thanks(t)},600)},closeFeedbackDropdown(){this.openFeedbackDropdownIndex=null,this.showFeedbackCommentBox=!1,this.feedbackCommentText="",this.pendingFeedbackMsg=null;try{this._dropdownReanchorHandler&&(window.removeEventListener("resize",this._dropdownReanchorHandler),this._dropdownReanchorHandler=null),this._dropdownScrollHandler&&(window.removeEventListener("scroll",this._dropdownScrollHandler,!0),this._dropdownScrollHandler=null)}catch(e){}},handleOutsideClick(e){if(null===this.openFeedbackDropdownIndex)return;const t=e.target.closest(".feedback-reason-dropdown"),s=e.target.closest(".feedback-btn");t||s||this.closeFeedbackDropdown()},handleReasonSelect(e,t){this._reasonSelectLock||(this._reasonSelectLock=!0,setTimeout(()=>{this._reasonSelectLock=!1},300),this.$set?this.$set(e,"feedback","dislike"):e.feedback="dislike",this.$set?this.$set(e,"_anim","dislike"):e._anim="dislike",this.$set?this.$set(e,"selectedReason",t):e.selectedReason=t,this.saveChatHistory(),setTimeout(()=>{e&&(this.$set?this.$set(e,"_anim",null):e._anim=null)},600),"other"===t?(this.showFeedbackCommentBox=!0,this.pendingFeedbackMsg=e,this.feedbackCommentText=e.feedbackCommentText||"",this.$nextTick(()=>{const e=document.querySelector(".feedback-comment-input");e&&e.focus()})):(this.closeFeedbackDropdown(),this.sendFeedback(e,!1,t,null),this.trackFeedbackToggle(),this.showUnlikeTooltipMessage()))},cancelFeedbackComment(){this.pendingFeedbackMsg&&(this.$set?this.$set(this.pendingFeedbackMsg,"feedbackCommentText",this.feedbackCommentText):this.pendingFeedbackMsg.feedbackCommentText=this.feedbackCommentText),this.showFeedbackCommentBox=!1,this.pendingFeedbackMsg=null,this.closeFeedbackDropdown()},submitFeedbackComment(){if(!this.feedbackCommentText.trim()||!this.pendingFeedbackMsg)return;const e=this.pendingFeedbackMsg;this.$set?this.$set(e,"feedback","dislike"):e.feedback="dislike",this.$set?this.$set(e,"_anim","dislike"):e._anim="dislike",setTimeout(()=>{e&&(this.$set?this.$set(e,"_anim",null):e._anim=null)},600),this.sendFeedback(e,!1,"other",this.feedbackCommentText.trim()),this.showFeedbackCommentBox=!1,this.feedbackCommentText="",this.pendingFeedbackMsg=null,this.closeFeedbackDropdown()},sendFeedback(e,t,s=null,i=null){if(!e||"bot"!==e.type)return;this.$set?this.$set(e,"feedback",t?"like":"dislike"):e.feedback=t?"like":"dislike",this.$set?this.$set(e,"_anim",t?"like":"dislike"):e._anim=t?"like":"dislike",this.saveChatHistory(),setTimeout(()=>{e&&(this.$set?this.$set(e,"_anim",null):e._anim=null)},600);const o={liked:t,message:e.text||"",timestamp:e.timestamp||(new Date).toISOString(),chatLogId:e.chatLogId||null,questionId:e.questionId||null,botResponse:e.text||"",query:this.getOriginalQueryForMessage?this.getOriginalQueryForMessage(e):"",selectedQAId:e.questionId||null,feedbackReason:s||null,feedbackComment:i||""};if(this.$axios&&"function"==typeof this.$axios.post)this.$axios.post("/chat/feedback",o).then(e=>{}).catch(e=>{});else{fetch(`${"https://ict.pcru.ac.th/~s651102064101/backend"}/chat/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("userToken")?`Bearer ${localStorage.getItem("userToken")}`:""},body:JSON.stringify(o)}).then(e=>e.json()).then(e=>{}).catch(e=>{})}},checkWinterSeason(){const e=(new Date).getMonth()+1;this.isWinterSeason=11===e||12===e||1===e||2===e},detectStandaloneMode(){const e=window.matchMedia("(display-mode: standalone)").matches,t=!0===window.navigator.standalone,s=document.referrer.includes("android-app://"),i=window.innerHeight===screen.height||window.innerHeight>.9*screen.height&&/iPhone|iPad|iPod/.test(navigator.userAgent);(e||t||s||i)&&(this.isPwaStandalone=!0,document.documentElement.classList.add("standalone"),document.documentElement.setAttribute("data-pwa","true"))},handleScroll(){this.isIOS&&this.$refs.panelBody&&(this.$refs.panelBody.scrollTop,this.$refs.panelBody.offsetHeight),this.isScrolling||(this.isScrolling=!0),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1},this.isIOS?100:150),this.scrollTicking&&!this.isIOS||(this.isIOS?this.processScroll():window.requestAnimationFrame(()=>{this.processScroll(),this.scrollTicking=!1}),this.scrollTicking=!0)},processScroll(){if(this.$refs.panelBody){const e=this.$refs.panelBody.scrollTop,t=this.$refs.panelBody.scrollHeight,s=e+this.$refs.panelBody.clientHeight>=t-30,i=Math.abs(e-this.lastScrollTop),o=e<this.lastScrollTop,n=e>this.lastScrollTop;if(e<=100&&o&&this.hasMoreMessages&&!this.isLoadingMore&&this.loadMoreMessages(),i<this.scrollThreshold&&!s&&e>10)return;if(e<=10)return!1!==this.showScrollTop&&(this.showScrollTop=!1),!1!==this.showScrollTutorial&&(this.showScrollTutorial=!1),void(this.lastScrollTop=e);if(s)return!0!==this.showFooter&&(this.showFooter=!0),!1!==this.showScrollTop&&(this.showScrollTop=!1),!1!==this.showScrollTutorial&&(this.showScrollTutorial=!1),this.showFooterTimer&&(clearTimeout(this.showFooterTimer),this.showFooterTimer=null),void(this.lastScrollTop=e);o&&(!1!==this.showScrollTop&&(this.showScrollTop=!1),!1!==this.showScrollTutorial&&(this.showScrollTutorial=!1),this.showFooterTimer&&(clearTimeout(this.showFooterTimer),this.showFooterTimer=null)),n&&(!0!==this.showFooter&&(this.showFooter=!0),this.showFooterTimer&&(clearTimeout(this.showFooterTimer),this.showFooterTimer=null)),!s&&e>this.lastScrollTop&&e>100&&(!0!==this.showScrollTop&&(this.showScrollTop=!0),!this.scrollTutorialShown&&this.messages.length>0&&!localStorage.getItem("pcru_scroll_tutorial_seen")&&localStorage.getItem("pcru_feedback_tutorial_seen")&&(this.scrollTutorialShown=!0,this.$nextTick(()=>{this.updateScrollButtonRect(),this.showScrollTutorial=!0}),setTimeout(()=>{this.dismissScrollTutorial()},8e3))),this.$refs.panelTop&&(this.$refs.panelTop.style.top=s?"0":o?"-60px":"0"),this.lastScrollTop=e}},animateOpen(e,t){try{const s=e.querySelector(".panel-body"),i=e.querySelector(".chat-messages");s&&(s.style.scrollBehavior="auto",i&&(i.style.visibility="hidden"),s.scrollTop=s.scrollHeight);const o=e.querySelector(".chat-panel"),n=e.querySelector(".overlay-backdrop");n&&(n.style.opacity="0",n.style.backdropFilter="blur(0px)"),o&&(o.style.opacity="0",o.style.transform="translate3d(28px,0,0) scale(.986)",o.style.willChange="transform, opacity");const a=n?n.animate([{opacity:0,backdropFilter:"blur(0px)"},{opacity:1,backdropFilter:"blur(2px)"}],{duration:420,easing:"cubic-bezier(.2,.8,.2,1)",fill:"forwards"}):null,r=o.animate([{transform:"translate3d(28px,0,0) scale(.986)",opacity:0,offset:0},{transform:"translate3d(-8px,0,0) scale(1.03)",opacity:1,offset:.55},{transform:"translate3d(4px,0,0) scale(.995)",offset:.75},{transform:"translate3d(0,0,0) scale(1)",opacity:1,offset:1}],{duration:460,easing:"cubic-bezier(.2,.8,.2,1)",fill:"forwards"});Promise.all([a?a.finished:Promise.resolve(),r.finished]).then(()=>{o&&(o.style.willChange="");try{s&&(s.style.scrollBehavior="",s.scrollTop=s.scrollHeight),i&&(i.style.visibility="")}catch(e){}t()}).catch(()=>t())}catch(s){t()}},animateClose(e,t){try{const s=e.querySelector(".chat-panel"),i=e.querySelector(".overlay-backdrop");i&&(i.style.opacity="1",i.style.backdropFilter="blur(2px)"),s&&(s.style.opacity="1",s.style.transform="translate3d(0,0,0) scale(1)",s.style.willChange="transform, opacity");const o=i?i.animate([{opacity:1,backdropFilter:"blur(2px)"},{opacity:0,backdropFilter:"blur(0px)"}],{duration:420,easing:"cubic-bezier(.2,.8,.2,1)",fill:"forwards"}):null,n=s.animate([{transform:"translate3d(0,0,0) scale(1)",opacity:1,offset:0},{transform:"translate3d(4px,0,0) scale(.995)",offset:.25},{transform:"translate3d(-8px,0,0) scale(1.02)",offset:.6},{transform:"translate3d(28px,0,0) scale(.986)",opacity:0,offset:1}],{duration:420,easing:"cubic-bezier(.2,.8,.2,1)",fill:"forwards"});Promise.all([o?o.finished:Promise.resolve(),n.finished]).then(()=>{s&&(s.style.willChange=""),t()}).catch(()=>t())}catch(s){t()}},scrollToTop(){this.$refs.panelBody&&this.$refs.panelBody.scrollTo({top:0,behavior:"smooth"})},getOriginalQueryForMessage(e){if(!e)return"";const t=this.messages.indexOf(e);if(t<=0)return"";for(let s=t-1;s>=0;s--)if(this.messages[s]&&"user"===this.messages[s].type)return this.messages[s].text||"";return""},selectClarificationSuggestion(e){if(!e)return;const t="string"==typeof e?e:e.title||e.name||"";t&&("object"==typeof e&&e.id?(this.query=t,this.onSend({payload:{id:e.id}})):(this.query=t,this.onSend()))},openPdf(e,t){try{let e=t;try{const t=import.meta&&Ht?"https://ict.pcru.ac.th/~s651102064101/backend":"",s=t?t.replace(/\/$/,""):"";e&&!/^https?:\/\//i.test(e)&&(e=s?`${s}${e.startsWith("/")?e:`/${e}`}`:e)}catch(s){}"undefined"!=typeof window&&e&&window.open(e,"_blank","noopener")}catch(i){const e=document.createElement("a");e.href=t,e.target="_blank",e.rel="noopener",document.body.appendChild(e),e.click(),e.remove()}},async sendHasAnswerLog(e,t){if(!e)return null;if(!this.$axios||"function"!=typeof this.$axios.post)return null;const s={Timestamp:(new Date).toISOString(),UserQuery:e,Status:1,QuestionsAnswersID:t||null};try{const e=await this.$axios.post("/chat/logs/has-answer",s);return e.data?.chatLogId||e.data?.ChatLogID||e.data?.id||null}catch(i){return null}},sendNoAnswerLog(e){if(!e)return null;if(!this.$axios||"function"!=typeof this.$axios.post)return null;const t={Timestamp:(new Date).toISOString(),UserQuery:e,Status:0};return this.$axios.post("/chat/logs/no-answer",t).then(e=>e.data?.chatLogId||e.data?.ChatLogID||e.data?.id||null).catch(e=>null)},startThemeTransition(){this.showThemeTransition=!0,this.themeTransitionSize=0,this.themeTransitionTimer&&clearTimeout(this.themeTransitionTimer);const e=document.querySelector(".theme-toggle-btn");if(!e)return;const t=e.getBoundingClientRect(),s=t.left+t.width/2,i=t.top+t.height/2;document.documentElement.style.setProperty("--transition-x",s+"px"),document.documentElement.style.setProperty("--transition-y",i+"px");const o=Date.now(),n=()=>{const e=Date.now()-o,t=Math.min(e/600,1),a=2*Math.sqrt(s*s+i*i+(window.innerWidth-s)**2+(window.innerHeight-i)**2);this.themeTransitionSize=a*t,t<1?requestAnimationFrame(n):this.themeTransitionTimer=setTimeout(()=>{this.showThemeTransition=!1},100)};n()},async loadSynonymsCarousel(){try{const e=await this.$axios.get("/synonyms/public"),t=e.data?.data||e.data||[],s=[...t].sort(()=>.5-Math.random()).slice(0,5);this.placeholderExamples=s.map(e=>`${e.OriginalWord||e.original||""} → ${e.SynonymWord||e.synonym||""}`),0===this.placeholderExamples.length&&(this.placeholderExamples=["ขอความช่วยเหลือจาก ปลายฟ้า"]),this.startPlaceholderCarousel()}catch(e){this.placeholderExamples=["ขอความช่วยเหลือจาก ปลายฟ้า"],this.startPlaceholderCarousel()}},startPlaceholderCarousel(){this.placeholderExamples.length>0&&(this.placeholderText=this.placeholderExamples[0]),this.placeholderInterval&&clearInterval(this.placeholderInterval),this.placeholderInterval=setInterval(()=>{this.placeholderIndex=(this.placeholderIndex+1)%this.placeholderExamples.length,this.placeholderText=this.placeholderExamples[this.placeholderIndex]},3e3)}}},Rt={key:0,class:"intro-overlay"},zt={class:"intro-logo-container"},jt=["src"],Vt={class:"intro-title"},qt={key:0,class:"chat-overlay",role:"dialog","aria-label":"Chat drawer"},Gt=["onMousedown","onTouchstart"],Wt={class:"pcru-watermark"},Qt={key:0,class:"floating-orbs"},Ut={class:"panel-top",style:{top:"0"}},Kt={class:"pcru-label"},Yt={key:0,class:"temp-chat-indicator",title:"แชทชั่วคราว - ไม่บันทึกประวัติ"},Xt={key:0,class:"offline-indicator",title:"ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์ได้"},Zt={class:"more-options-wrapper"},Jt={class:"dots-container"},es=["title"],ts={class:"menu-item-icon"},ss={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none"},is={cx:"12",cy:"12",r:"4",fill:"#FFD54F"},os={key:0,attributeName:"r",values:"4;5;4",dur:"2s",repeatCount:"indefinite"},ns={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none"},as={d:"M21 12.8A9 9 0 1111.2 3 7 7 0 0021 12.8z",fill:"#1c1c1e"},rs={key:0,attributeName:"opacity",values:"0.8;1;0.8",dur:"2.5s",repeatCount:"indefinite"},ls={key:2,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none"},cs={class:"menu-item-label"},ds={class:"menu-item-icon graphics-gauge"},us={width:"28",height:"28",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hs=["stroke"],ps=["stroke"],gs=["stroke"],ms=["stroke"],fs=["fill"],ws={class:"menu-item-label"},vs={key:0,class:"gemini-history-panel"},bs={class:"gemini-history-header"},ys={class:"gemini-history-header-actions"},ks={class:"gemini-history-actions"},xs={class:"gemini-history-list"},Ts={key:0,class:"gemini-history-empty"},Cs={key:1,class:"gemini-conversation-items"},_s=["onClick"],Ss={class:"gemini-conv-content"},Ms={class:"gemini-conv-title"},As={class:"gemini-conv-date"},Is={class:"gemini-conv-preview"},Es=["onClick"],Ls={class:"gemini-history-footer"},Ds={key:0,class:"chatbot-history-panel"},$s={class:"chatbot-history-header"},Ps={class:"chatbot-history-header-actions"},Bs={class:"chatbot-history-actions"},Os={class:"chatbot-history-list"},Hs={key:0,class:"chatbot-history-empty"},Ns={key:1,class:"chatbot-conversation-items"},Fs=["onClick"],Rs={class:"chatbot-conv-content"},zs={class:"chatbot-conv-title"},js={class:"chatbot-conv-date"},Vs={class:"chatbot-conv-preview"},qs=["onClick"],Gs={class:"chatbot-history-footer"},Ws={class:"chat-messages",ref:"messagesContainer"},Qs={key:0,class:"welcome-gemini-text"},Us={key:1,class:"message-wrapper bot"},Ks={class:"bot-avatar-wrapper"},Ys=["src"],Xs=["src"],Zs=["src"],Js=["src"],ei=["src"],ti=["src"],si={key:0,class:"bot-avatar-offline-badge",title:"ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์ได้"},ii={key:0,class:"bot-sleeping-zzz"},oi={key:0,class:"bot-wake-up"},ni={key:0,class:"message-bubble bot bot-with-categories backdrop-card",style:{"margin-top":"0rem !important",height:"100%"}},ai={class:"ai-greeting"},ri=["title","aria-label"],li=["src"],ci=["src"],di={key:0,class:"ai-speech-bubble"},ui={class:"bubble-content"},hi=["innerHTML"],pi=["innerHTML"],gi={class:"ai-help-link-wrapper text-center"},mi=["innerHTML"],fi={class:"categories-toggle-wrapper"},wi={class:"category-section"},vi={key:0,class:"py-5 text-center"},bi={key:1,class:"offline-categories-error"},yi={key:2},ki={key:0,class:"py-4 text-center text-muted"},xi={key:1,class:"py-4 text-center text-muted"},Ti={class:"cat-item"},Ci=["onClick","aria-expanded"],_i={class:"cat-text no-underline"},Si={key:0,class:"chev",width:"14",height:"14",viewBox:"0 0 24 24"},Mi={class:"cat-list"},Ai=["disabled","onClick","aria-label"],Ii={class:"cat-sub-text no-underline"},Ei={key:0,class:"loading-more-messages"},Li={key:0,class:"load-more-hint"},Di={key:0,class:"bot-avatar-wrapper"},$i=["src"],Pi=["src"],Bi=["src"],Oi=["src"],Hi=["src"],Ni={key:0,class:"bot-avatar-offline-badge",title:"ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์ได้"},Fi={key:0,class:"bot-sleeping-zzz"},Ri={key:0,class:"bot-wake-up"},zi={key:1,class:"typing-indicator"},ji={key:2,class:"gemini-wrap"},Vi=["innerHTML"],qi=["data-message-id"],Gi=["innerHTML"],Wi=["onClick"],Qi=["onClick","aria-label"],Ui={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"expand-icon"},Ki={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"collapse-icon"},Yi={key:3,class:"category-section",style:{"margin-top":"15px"}},Xi={key:0,class:"py-3 text-center"},Zi={key:1},Ji={key:0,class:"py-2 text-center text-muted"},eo={class:"cat-item"},to=["onClick","aria-expanded"],so={class:"cat-text no-underline"},io={key:0,class:"chev",width:"14",height:"14",viewBox:"0 0 24 24"},oo={class:"cat-list"},no=["disabled","onClick"],ao={class:"cat-sub-text no-underline"},ro={key:4,class:"pdf-attachment"},lo=["href","onClick"],co={key:5,class:"low-confidence-badge"},uo={key:6,class:"clarification-notice"},ho={key:7,class:"clarification-suggestions"},po={class:"suggestions-list clarification-list"},go=["onClick"],mo={key:8,class:"suggestions"},fo=["disabled","onClick","aria-disabled"],wo=["onClick"],vo={class:"read-more-count"},bo={key:9,class:"contact-list"},yo={class:"contact-notice"},ko={class:"org-cards",style:{"margin-top":"1rem"}},xo={class:"org-card-inner"},To={class:"org-card-title"},Co={key:0,class:"org-card-phone contact-detail"},_o={key:0},So={key:0},Mo=["innerHTML"],Ao={key:1},Io=["innerHTML"],Eo=["onClick"],Lo={key:0,class:"read-more-text"},Do={key:1,class:"read-more-text"},$o={class:"read-more-count"},Po={key:10,class:"typing-indicator"},Bo=["onClick","disabled"],Oo={class:"apple-feedback-wrapper"},Ho=["onClick","disabled"],No={class:"apple-dropdown-header"},Fo={key:0,class:"apple-reason-list"},Ro=["onClick","onTouchend"],zo={key:1,class:"apple-comment-box"},jo={class:"apple-comment-actions"},Vo=["disabled"],qo=["placeholder"],Go={key:0,class:"bottom-typing message-wrapper bot"},Wo={class:"bot-avatar-wrapper"},Qo=["src"],Uo=["src"],Ko={key:0,class:"bot-avatar-offline-badge",title:"ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์ได้"},Yo={class:"line-menu-container"},Xo={key:0,class:"line-menu-header"},Zo={key:0},Jo={key:1},en={key:1,class:"contact-detail-view"},tn={class:"org-card"},sn={class:"org-card-inner"},on={class:"org-card-title"},nn={class:"org-card-phone contact-detail"},an=["href"],rn={key:2,class:"line-menu-grid"},ln=["onClick"],cn=["innerHTML"],dn={class:"line-menu-label"},un={class:"line-menu-carousel-page"},hn={class:"line-menu-grid"},pn=["onClick"],gn=["innerHTML"],mn={class:"line-menu-label"},fn={key:0,class:"line-menu-badge"},wn={class:"line-menu-carousel-page","data-page":"locations"},vn={class:"line-menu-grid locations-grid"},bn=["onClick"],yn={class:"line-menu-label"},kn={class:"line-menu-carousel-page","data-page":"contacts"},xn={class:"line-menu-grid contacts-grid"},Tn={key:0,class:"contacts-loading"},Cn={key:1,class:"contacts-empty"},_n=["onClick"],Sn={class:"contact-info"},Mn={class:"line-menu-label contact-name"},An={key:0,class:"contact-phone"},In={key:4,class:"carousel-indicators"},En={key:0,class:"page-label-toast"},Ln={key:0,class:"carousel-dots"},Dn=["onClick","onMousedown","onTouchstart","aria-label"],$n={class:"input-row"},Pn=["aria-label","title"],Bn={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},On={key:1,class:"grid-icon-animated",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Hn=["aria-label","title"],Nn={key:0,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Fn={key:1,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"gemini-icon"},Rn={key:0,class:"gemini-history-badge"},zn={key:0,class:"chatbot-history-badge"},jn=["aria-label","title"],Vn={width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qn={key:0,cx:"12",cy:"12",r:"3",fill:"currentColor",opacity:"0.3"},Gn={class:"line-menu-container-fullscreen"},Wn={key:0,class:"line-menu-header"},Qn={key:0},Un={key:1},Kn={key:1,class:"contact-detail-view"},Yn={class:"org-card"},Xn={class:"org-card-inner"},Zn={class:"org-card-title"},Jn={class:"org-card-phone contact-detail"},ea=["href"],ta={key:2,class:"line-menu-grid"},sa=["onClick"],ia=["innerHTML"],oa={class:"line-menu-label"},na={class:"line-menu-carousel-page"},aa={class:"line-menu-grid"},ra=["onClick"],la=["innerHTML"],ca={class:"line-menu-label"},da={key:0,class:"line-menu-badge"},ua={class:"line-menu-carousel-page"},ha={class:"line-menu-grid locations-grid"},pa=["onClick"],ga={class:"line-menu-label"},ma={class:"line-menu-carousel-page","data-page":"contacts"},fa={class:"line-menu-grid contacts-grid"},wa={key:0,class:"contacts-loading"},va={key:1,class:"contacts-empty"},ba=["onClick"],ya={class:"contact-info"},ka={class:"line-menu-label contact-name"},xa={key:0,class:"contact-phone"},Ta={key:4,class:"carousel-indicators fullscreen-indicators"},Ca={class:"carousel-dots"},_a=["onClick","onMousedown","onTouchstart"],Sa={class:"input-row menu-mode fullscreen-input"},Ma={class:"typing-tooltip-content"},Aa={class:"countdown-container"},Ia={class:"countdown-ring"},Ea={viewBox:"0 0 100 100"},La={class:"countdown-number"},Da={key:0,class:"spotlight-btn-clone menu-toggle-clone"},$a={key:1,class:"spotlight-btn-clone keyboard-toggle-clone"},Pa={key:2,class:"spotlight-btn-clone handle-clone"},Ba={key:3,class:"spotlight-btn-clone grid-clone"},Oa={key:4,class:"spotlight-btn-clone back-clone"},Ha={class:"tutorial-step-indicator"},Na={class:"tutorial-content"},Fa={class:"tutorial-icon"},Ra={class:"tutorial-title"},za={class:"tutorial-description"},ja={class:"tutorial-actions"},Va={key:0,class:"spotlight-btn-clone like"},qa={key:1,class:"spotlight-btn-clone dislike"},Ga={class:"tutorial-step-indicator"},Wa={class:"tutorial-content"},Qa={class:"tutorial-icon"},Ua={class:"tutorial-title"},Ka={class:"tutorial-description"},Ya={class:"tutorial-actions"},Xa={key:0,class:"spotlight-btn-clone gemini-btn"},Za={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},Ja={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",class:"gemini-icon"},er={class:"tutorial-step-indicator"},tr={class:"tutorial-content"},sr={class:"tutorial-icon"},ir={class:"tutorial-title"},or={class:"tutorial-description"},nr={class:"tutorial-actions"},ar={class:"tutorial-actions"},rr={class:"perf-warning-card"},lr={class:"perf-warning-content"},cr={class:"perf-warning-title"},dr={class:"perf-warning-reason"},ur={class:"apple-alert-container"},hr={class:"apple-alert-content"},pr={class:"apple-alert-message"},gr={class:"apple-alert-actions"};const mr=Q(Ft,[["render",function(e,r,h,p,g,m){const w=L("BotTooltip"),v=L("ChatbotHelpView"),b=L("ConfirmModalComponent");return s(),t("div",{class:l(["chat-root",{"intro-playing":g.showIntroAnimation,"tab-hidden":g.isTabHidden,scrolling:g.isScrolling}]),"data-bs-no-js":"true"},[i(x,{name:"intro-fade"},{default:o(()=>[g.showIntroAnimation?(s(),t("div",Rt,[c("div",{class:l(["intro-content",{"phase-1":g.introPhase>=1,"phase-2":g.introPhase>=2,"phase-3":g.introPhase>=3}])},[c("div",zt,[r[112]||(r[112]=c("div",{class:"intro-glow"},null,-1)),r[113]||(r[113]=c("div",{class:"intro-ring ring-1"},null,-1)),r[114]||(r[114]=c("div",{class:"intro-ring ring-2"},null,-1)),r[115]||(r[115]=c("div",{class:"intro-ring ring-3"},null,-1)),c("img",{src:g.botAvatar,alt:"Bot Avatar",class:"intro-avatar"},null,8,jt)]),c("div",Vt,[(s(),t(n,null,a("PCRU CHATBOT",(e,t)=>c("span",{class:"intro-title-char",key:t,style:M({animationDelay:.05*t+"s"})},d(" "===e?" ":e),5)),64))]),r[116]||(r[116]=c("div",{class:"intro-subtitle"},"ผู้ช่วย AI ของมหาวิทยาลัยราชภัฏเพชรบูรณ์",-1)),r[117]||(r[117]=c("div",{class:"intro-loading"},[c("div",{class:"intro-loading-bar"})],-1)),c("div",{class:"intro-skip",onClick:r[0]||(r[0]=(...e)=>m.skipIntro&&m.skipIntro(...e))},"คลิกเพื่อข้าม")],2)])):k("",!0)]),_:1}),g.showThemeTransition?(s(),t("div",{key:0,class:"theme-transition-circle",style:M({width:g.themeTransitionSize+"px",height:g.themeTransitionSize+"px"})},null,4)):k("",!0),i(x,{name:"fade",onEnter:m.animateOpen,onLeave:m.animateClose},{default:o(()=>[g.visible?(s(),t("div",qt,[c("div",{class:"overlay-backdrop",onClick:r[1]||(r[1]=e=>g.visible=!1)}),g.isWinterSeason&&g.snowEnabled?(s(),t("div",{key:0,class:"snowflakes-container",style:M({width:g.drawerWidth,height:g.viewportHeight}),"aria-hidden":"true"},[(s(!0),t(n,null,a(g.snowflakeStyles,(e,i)=>T((s(),t("div",{key:i,class:l(["snowflake",{"snowflake-dragging":g.draggedSnowflakeIndex===i}]),style:M(m.getSnowflakeStyle(e,i)),onMousedown:A(e=>m.onSnowflakeMouseDown(e,i),["stop","prevent"]),onTouchstart:A(e=>m.onSnowflakeTouchStart(e,i),["stop","prevent"])},"❄",46,Gt)),[[C,!m.isSnowflakeFloating(i)]])),128))],4)):k("",!0),g.isWinterSeason&&g.snowEnabled?(s(!0),t(n,{key:1},a(g.snowflakeStyles,(e,i)=>T((s(),t("div",{key:"float-"+i,class:l(["snowflake snowflake-floating",{"snowflake-dragging":g.draggedSnowflakeIndex===i}]),style:M(m.getFloatingSnowflakeStyle(e,i))},d(e.symbol),7)),[[C,m.isSnowflakeFloating(i)]])),128)):k("",!0),c("aside",{class:"chat-panel",style:M({width:g.drawerWidth,height:g.viewportHeight}),onClick:r[80]||(r[80]=(...e)=>m.onPanelClick&&m.onPanelClick(...e)),onMousemove:r[81]||(r[81]=(...e)=>m.onPanelMouseMove&&m.onPanelMouseMove(...e)),onTouchstart:r[82]||(r[82]=(...e)=>m.onPanelTouchStart&&m.onPanelTouchStart(...e))},[c("div",Wt,[c("img",{src:Ot,alt:"PCRU Logo",style:M(m.pcruWatermarkStyle)},null,4)]),"low"!==g.graphicsQuality?(s(),t("div",Qt,[...r[118]||(r[118]=[c("div",{class:"orb orb-1"},null,-1),c("div",{class:"orb orb-2"},null,-1),c("div",{class:"orb orb-3"},null,-1)])])):k("",!0),c("div",Ut,[i(x,{name:"fade"},{default:o(()=>[c("div",null,[c("button",{class:"close-circle",onPointerdown:r[2]||(r[2]=(...e)=>m.triggerCloseAnim&&m.triggerCloseAnim(...e)),onClick:r[3]||(r[3]=e=>g.visible=!1),"aria-label":"close"},[...r[119]||(r[119]=[c("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"close-icon","aria-hidden":"true",focusable:"false"},[c("path",{class:"close-line-1",d:"M6 6L18 18",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"20","stroke-dashoffset":"20"}),c("path",{class:"close-line-2",d:"M6 18L18 6",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"20","stroke-dashoffset":"20"})],-1)])],32),c("span",Kt,d(g.useGeminiMode?"PCRU (Gemini)":"PCRU"),1),i(x,{name:"fade"},{default:o(()=>[g.isTemporaryChatbot&&!g.useGeminiMode||g.isTemporaryGemini&&g.useGeminiMode?(s(),t("span",Yt,[...r[120]||(r[120]=[c("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"}),c("path",{d:"M12 7V12L15 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),f(" ชั่วคราว ",-1)])])):k("",!0)]),_:1})])]),_:1}),i(x,{name:"fade"},{default:o(()=>[g.isOffline?(s(),t("div",Xt,[...r[121]||(r[121]=[c("span",{class:"offline-dot"},null,-1),c("span",{class:"offline-text"},"ออฟไลน์",-1)])])):k("",!0)]),_:1}),i(x,{name:"fade"},{default:o(()=>[c("div",Zt,[T(c("button",{class:l(["more-options-btn",{active:g.showMoreMenu}]),onClick:r[4]||(r[4]=A((...e)=>m.toggleMoreMenu&&m.toggleMoreMenu(...e),["stop"])),"aria-label":"ตัวเลือกเพิ่มเติม",title:"ตัวเลือกเพิ่มเติม"},[c("div",Jt,[c("span",{class:l(["dot",{"dot-animated":"low"!==g.graphicsQuality}])},null,2),c("span",{class:l(["dot",{"dot-animated":"low"!==g.graphicsQuality}])},null,2),c("span",{class:l(["dot",{"dot-animated":"low"!==g.graphicsQuality}])},null,2)])],2),[[C,!g.showMoreMenu]]),c("div",{class:l(["more-menu-items",{open:g.showMoreMenu,closing:g.isMoreMenuClosing}])},[c("button",{class:l(["more-menu-item theme-item",{visible:g.moreMenuItemsVisible[0],hiding:g.moreMenuItemsHiding[0]}]),onClick:r[5]||(r[5]=(...e)=>m.toggleThemeFromMenu&&m.toggleThemeFromMenu(...e)),title:m.getThemeButtonTitle()},[c("div",ts,["dark"===g.theme?(s(),t("svg",ss,[c("circle",is,["low"!==g.graphicsQuality?(s(),t("animate",os)):k("",!0)]),r[122]||(r[122]=c("g",{stroke:"#FFD54F","stroke-width":"1.6","stroke-linecap":"round"},[c("path",{d:"M12 2v2"}),c("path",{d:"M12 20v2"}),c("path",{d:"M2 12h2"}),c("path",{d:"M20 12h2"}),c("path",{d:"M4.9 4.9l1.4 1.4"}),c("path",{d:"M17.7 17.7l1.4 1.4"}),c("path",{d:"M4.9 19.1l1.4-1.4"}),c("path",{d:"M17.7 6.3l1.4-1.4"})],-1))])):"light"===g.theme?(s(),t("svg",ns,[c("path",as,["low"!==g.graphicsQuality?(s(),t("animate",rs)):k("",!0)])])):(s(),t("svg",ls,[...r[123]||(r[123]=[c("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"1.5",fill:"none"},null,-1),c("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"},null,-1),c("path",{d:"M12 4v2M12 18v2M4 12h2M18 12h2",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"},null,-1)])]))]),c("span",cs,d(m.themeDisplayOnly),1)],10,es),c("button",{class:l(["more-menu-item graphics-item",{visible:g.moreMenuItemsVisible[1],hiding:g.moreMenuItemsHiding[1]}]),onClick:r[6]||(r[6]=(...e)=>m.cycleGraphicsQuality&&m.cycleGraphicsQuality(...e)),title:"กดเพื่อเปลี่ยนคุณภาพกราฟิก"},[c("div",ds,[(s(),t("svg",us,[r[124]||(r[124]=c("circle",{cx:"50",cy:"50",r:"35",fill:"none",stroke:"rgba(255,255,255,0.1)","stroke-width":"8"},null,-1)),c("path",{d:"M 50 85 A 35 35 0 0 1 80.62 64.15",fill:"none",stroke:"low"===g.graphicsQuality?"#34C759":"rgba(52, 199, 89, 0.3)","stroke-width":"8","stroke-linecap":"round",style:{transition:"stroke 0.3s ease"}},null,8,hs),c("path",{d:"M 80.62 64.15 A 35 35 0 0 1 19.38 64.15",fill:"none",stroke:"medium"===g.graphicsQuality?"#FBBC05":"rgba(251, 188, 5, 0.3)","stroke-width":"8","stroke-linecap":"round",style:{transition:"stroke 0.3s ease"}},null,8,ps),c("path",{d:"M 19.38 64.15 A 35 35 0 0 1 50 85",fill:"none",stroke:"high"===g.graphicsQuality?"#FF3B30":"rgba(255, 59, 48, 0.3)","stroke-width":"8","stroke-linecap":"round",style:{transition:"stroke 0.3s ease"}},null,8,gs),c("g",{style:M({transform:`rotate(${m.gaugeNeedleRotation}deg)`,transformOrigin:"50px 50px",transition:"transform 0.5s ease"})},[c("line",{x1:"50",y1:"50",x2:"50",y2:"18",stroke:m.gaugeNeedleColor,"stroke-width":"3","stroke-linecap":"round",style:{transition:"stroke 0.3s ease"}},null,8,ms),c("circle",{cx:"50",cy:"50",r:"4",fill:m.gaugeNeedleColor,style:{transition:"fill 0.3s ease"}},null,8,fs)],4)]))]),c("span",ws,[f(d(m.currentGraphicsOption.icon)+" "+d(m.currentGraphicsOption.label)+" ",1),c("span",{class:"fps-display",style:M({color:m.fpsColor})},d(g.currentFps)+" fps",5)])],2)],2)])]),_:1}),r[125]||(r[125]=c("div",{class:"overlay-backdrop-2",style:{display:"block"}},null,-1))]),i(x,{name:"fade-scale"},{default:o(()=>[g.showScrollTop?(s(),t("button",{key:0,class:"scroll-to-top-btn",onClick:r[7]||(r[7]=(...e)=>m.scrollToBottom&&m.scrollToBottom(...e)),"aria-label":"scroll to bottom"},[...r[126]||(r[126]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"scroll-icon"},[c("path",{class:"scroll-arrow",d:"M12 5V19M5 12l7 7 7-7",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"40","stroke-dashoffset":"40"},[c("animate",{attributeName:"stroke-dashoffset",to:"0",dur:"0.5s",fill:"freeze"})])],-1)])])):k("",!0)]),_:1}),i(x,{name:"gemini-history-slide"},{default:o(()=>[g.showGeminiHistory&&g.useGeminiMode?(s(),t("div",vs,[c("div",bs,[r[129]||(r[129]=c("h3",null,"ประวัติการสนทนา AI",-1)),c("div",ys,[c("button",{class:l(["gemini-toggle-delete-btn",{active:g.showGeminiDeleteButtons}]),onClick:r[8]||(r[8]=e=>g.showGeminiDeleteButtons=!g.showGeminiDeleteButtons),"aria-label":"แก้ไข",title:"แก้ไข"},[...r[127]||(r[127]=[c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13M18.5 2.5C18.8978 2.1022 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.1022 21.5 2.5C21.8978 2.8978 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.1022 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2),c("button",{class:"gemini-history-close",onClick:r[9]||(r[9]=e=>{g.showGeminiHistory=!1,g.showGeminiDeleteButtons=!1}),"aria-label":"ปิด"},[...r[128]||(r[128]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M6 6L18 18M6 18L18 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])])]),c("div",ks,[c("button",{class:"gemini-new-chat-btn",onClick:r[10]||(r[10]=(...e)=>m.createNewGeminiConversation&&m.createNewGeminiConversation(...e))},[...r[130]||(r[130]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),f(" สนทนาใหม่ ",-1)])]),c("button",{class:l(["gemini-temp-chat-btn",{active:g.isTemporaryGemini}]),onClick:r[11]||(r[11]=(...e)=>m.startTemporaryGemini&&m.startTemporaryGemini(...e))},[...r[131]||(r[131]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"}),c("path",{d:"M12 7V12L15 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),f(" ชั่วคราว ",-1)])],2)]),c("div",xs,[0===g.geminiConversations.length?(s(),t("div",Ts,[...r[132]||(r[132]=[c("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 2L13.5 7.5L19 9L13.5 10.5L12 16L10.5 10.5L5 9L10.5 7.5L12 2Z",stroke:"currentColor","stroke-width":"1.5",opacity:"0.5"}),c("path",{d:"M18 14L19 17L22 18L19 19L18 22L17 19L14 18L17 17L18 14Z",stroke:"currentColor","stroke-width":"1.5",opacity:"0.3"})],-1),c("p",null,"ยังไม่มีประวัติการสนทนา",-1),c("small",null,"เริ่มพูดคุยกับ AI เลย!",-1)])])):(s(),t("div",Cs,[(s(!0),t(n,null,a(g.geminiConversations,e=>(s(),t("div",{key:e.id,class:l(["gemini-conversation-item",{active:g.currentGeminiConversationId===e.id}]),onClick:t=>m.loadGeminiConversation(e.id)},[r[134]||(r[134]=c("div",{class:"gemini-conv-icon"},[c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 2L13.5 7.5L19 9L13.5 10.5L12 16L10.5 10.5L5 9L10.5 7.5L12 2Z",fill:"currentColor"})])],-1)),c("div",Ss,[c("span",Ms,d(e.title||"สนทนา AI"),1),c("span",As,d(m.formatGeminiDate(e.updatedAt)),1),c("span",Is,d(e.preview||"ไม่มีข้อความ"),1)]),c("button",{class:l(["gemini-conv-delete",{visible:g.showGeminiDeleteButtons}]),onClick:A(t=>m.deleteGeminiConversation(e.id),["stop"]),title:"ลบการสนทนานี้"},[...r[133]||(r[133]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M3 6H21M19 6V20C19 21 18 22 17 22H7C6 22 5 21 5 20V6M8 6V4C8 3 9 2 10 2H14C15 2 16 3 16 4V6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])],10,Es)],10,_s))),128))]))]),c("div",Ls,[c("small",null,"เก็บได้สูงสุด "+d(g.MAX_GEMINI_CONVERSATIONS)+" การสนทนา",1)])])):k("",!0)]),_:1}),i(x,{name:"chatbot-history-slide"},{default:o(()=>[g.showChatbotHistory&&!g.useGeminiMode?(s(),t("div",Ds,[c("div",$s,[r[137]||(r[137]=c("h3",null,"ประวัติการสนทนา",-1)),c("div",Ps,[c("button",{class:l(["chatbot-toggle-delete-btn",{active:g.showChatbotDeleteButtons}]),onClick:r[12]||(r[12]=e=>g.showChatbotDeleteButtons=!g.showChatbotDeleteButtons),"aria-label":"แก้ไข",title:"แก้ไข"},[...r[135]||(r[135]=[c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13M18.5 2.5C18.8978 2.1022 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.1022 21.5 2.5C21.8978 2.8978 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.1022 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2),c("button",{class:"chatbot-history-close",onClick:r[13]||(r[13]=e=>{g.showChatbotHistory=!1,g.showChatbotDeleteButtons=!1}),"aria-label":"ปิด"},[...r[136]||(r[136]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M6 6L18 18M6 18L18 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])])]),c("div",Bs,[c("button",{class:"chatbot-new-chat-btn",onClick:r[14]||(r[14]=(...e)=>m.createNewChatbotConversation&&m.createNewChatbotConversation(...e))},[...r[138]||(r[138]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),f(" สนทนาใหม่ ",-1)])]),c("button",{class:l(["chatbot-temp-chat-btn",{active:g.isTemporaryChatbot}]),onClick:r[15]||(r[15]=(...e)=>m.startTemporaryChatbot&&m.startTemporaryChatbot(...e))},[...r[139]||(r[139]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"}),c("path",{d:"M12 7V12L15 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),f(" แชทชั่วคราว ",-1)])],2)]),c("div",Os,[0===g.chatbotConversations.length?(s(),t("div",Hs,[...r[140]||(r[140]=[c("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",opacity:"0.5"})],-1),c("p",null,"ยังไม่มีประวัติการสนทนา",-1),c("small",null,"เริ่มพูดคุยกับบอทเลย!",-1)])])):(s(),t("div",Ns,[(s(!0),t(n,null,a(g.chatbotConversations,e=>(s(),t("div",{key:e.id,class:l(["chatbot-conversation-item",{active:g.currentChatbotConversationId===e.id}]),onClick:t=>m.loadChatbotConversation(e.id)},[r[142]||(r[142]=c("div",{class:"chatbot-conv-icon"},[c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",fill:"currentColor"})])],-1)),c("div",Rs,[c("span",zs,d(e.title||"สนทนาใหม่"),1),c("span",js,d(m.formatChatbotHistoryDate(e.updatedAt)),1),c("span",Vs,d(e.preview||"ไม่มีข้อความ"),1)]),c("button",{class:l(["chatbot-conv-delete",{visible:g.showChatbotDeleteButtons}]),onClick:A(t=>m.deleteChatbotConversation(e.id),["stop"]),title:"ลบการสนทนานี้"},[...r[141]||(r[141]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M3 6H21M19 6V20C19 21 18 22 17 22H7C6 22 5 21 5 20V6M8 6V4C8 3 9 2 10 2H14C15 2 16 3 16 4V6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])],10,qs)],10,Fs))),128))]))]),c("div",Gs,[c("small",null,"เก็บได้สูงสุด "+d(g.MAX_CHATBOT_CONVERSATIONS)+" การสนทนา",1)])])):k("",!0)]),_:1}),c("div",{class:l(["panel-body",{"anchor-bottom":g.anchorBottom}]),onScroll:r[43]||(r[43]=(...e)=>m.handleScroll&&m.handleScroll(...e)),ref:"panelBody"},[c("div",Ws,[!g.useGeminiMode||g.useGeminiMode&&0===g.messages.length?(s(),t("div",{key:0,class:l(["welcome-message",{"gemini-center":g.useGeminiMode,"gemini-top":g.useGeminiMode}])},[g.useGeminiMode&&0===g.messages.length?(s(),t("div",Qs,[...r[143]||(r[143]=[f("PCRU AI Assistant ",-1),c("br",null,null,-1),f(" (Powered by Gemini)",-1)])])):k("",!0),m.showTopCategories&&!g.useGeminiMode?(s(),t("div",Us,[c("div",Ks,[c("div",{class:"bot-avatar",role:"button",tabindex:"0",onClick:r[19]||(r[19]=(...e)=>m.openAiIntro&&m.openAiIntro(...e)),title:"เปิด AI เต็มจอ"},["high"===g.graphicsQuality?(s(),t("img",{key:0,src:g.botFallbackImg,class:"bot-avatar-img",style:{"z-index":"1"},alt:""},null,8,Ys)):k("",!0),"high"===g.graphicsQuality&&g.botVideo?(s(),t("video",{key:1,src:g.botVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-main",{"video-hidden":g.isBotSleeping||g.isBotWakingUp||g.isPlayingReverse}]),autoplay:"",muted:"",playsinline:"",preload:"auto",onEnded:r[16]||(r[16]=(...e)=>m.onMainVideoEnded&&m.onMainVideoEnded(...e))},null,42,Xs)):k("",!0),"high"===g.graphicsQuality&&g.botReverseVideo?(s(),t("video",{key:2,src:g.botReverseVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-reverse",{"video-visible":g.isPlayingReverse}]),muted:"",playsinline:"",preload:"auto",onEnded:r[17]||(r[17]=(...e)=>m.onReverseVideoEnded&&m.onReverseVideoEnded(...e))},null,42,Zs)):k("",!0),"high"===g.graphicsQuality&&g.botSleepVideo?(s(),t("video",{key:3,src:g.botSleepVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-sleep",{"video-visible":g.isBotSleeping}]),autoplay:"",muted:"",playsinline:"",preload:"auto"},null,10,Js)):k("",!0),"high"===g.graphicsQuality&&g.botWakeVideo?(s(),t("video",{key:4,src:g.botWakeVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-wake",{"video-visible":g.isBotWakingUp}]),muted:"",playsinline:"",preload:"auto",onEnded:r[18]||(r[18]=(...e)=>m.onWakeVideoEnded&&m.onWakeVideoEnded(...e)),ref:"wakeVideoWelcome"},null,42,ei)):k("",!0),"high"!==g.graphicsQuality?(s(),t("img",{key:5,src:g.botAvatar,alt:"Bot",class:"bot-avatar-img"},null,8,ti)):k("",!0),i(x,{name:"fade"},{default:o(()=>[g.isOffline?(s(),t("div",si,[...r[144]||(r[144]=[c("span",{class:"offline-badge-dot"},null,-1)])])):k("",!0)]),_:1})]),i(x,{name:"zzz-fade"},{default:o(()=>[g.isBotSleeping&&!m.hasBotMessages?(s(),t("div",ii,[...r[145]||(r[145]=[c("span",{class:"zzz-bubble zzz-1"},"z",-1),c("span",{class:"zzz-bubble zzz-2"},"z",-1),c("span",{class:"zzz-bubble zzz-3"},"z",-1)])])):k("",!0)]),_:1}),i(x,{name:"wake-up-fade"},{default:o(()=>[g.showWakeSparkle&&!m.hasBotMessages?(s(),t("div",oi,[...r[146]||(r[146]=[c("span",{class:"sparkle sparkle-1"},"✨",-1),c("span",{class:"sparkle sparkle-2"},"✨",-1),c("span",{class:"sparkle sparkle-3"},"✨",-1)])])):k("",!0)]),_:1})]),g.useGeminiMode?k("",!0):(s(),t("div",ni,[c("div",ai,[c("div",{ref:"aiGreetWrapper",class:"ai-greet-img-wrapper",role:"button",tabindex:"0",onClick:r[20]||(r[20]=A(e=>g.showVideo?m.stopVideo():m.openAiIntro(),["stop"])),onKeydown:[r[21]||(r[21]=D(A(e=>g.showVideo?m.stopVideo():m.openAiIntro(),["stop"]),["enter"])),r[22]||(r[22]=D(A(e=>g.showVideo?m.stopVideo():m.openAiIntro(),["prevent","stop"]),["space"]))],title:g.showVideo?"หยุดวิดีโอ":"เปิด AI: ดูรายละเอียดและวิธีใช้งาน","aria-label":g.showVideo?"หยุดวิดีโอ":"เปิด AI",style:M(m.aiGreetTiltStyle)},["high"===g.graphicsQuality&&g.botVideo&&g.showVideo?(s(),t("video",{key:0,src:g.botVideo,class:"ai-greet-img ai-greet-video",autoplay:"",loop:"",muted:"",playsinline:"",ref:"aiGreetVideo"},null,8,li)):(s(),t("img",{key:1,src:g.botAvatar,alt:"PCRU AI",class:"ai-greet-img"},null,8,ci)),i(x,{name:"bubble-fade"},{default:o(()=>[g.showThaiNotice?(s(),t("div",di,[c("div",ui,[c("div",null,d(g.timeGreetingText),1)]),r[147]||(r[147]=c("div",{class:"bubble-tail"},null,-1))])):k("",!0)]),_:1})],44,ri),c("div",{class:"ai-greet-title text-center",innerHTML:g.welcomeTitle},null,8,hi),c("div",{class:"ai-greet-sub",innerHTML:g.welcomeSub},null,8,pi),c("div",gi,[g.miniHelpDismissed?k("",!0):(s(),t("button",{key:0,ref:"miniHelpBtn",class:"ai-help-link apple-help-mini",onClick:r[26]||(r[26]=A((...e)=>m.triggerMiniHelp&&m.triggerMiniHelp(...e),["stop"])),onKeydown:[r[27]||(r[27]=D(A((...e)=>m.triggerMiniHelp&&m.triggerMiniHelp(...e),["prevent","stop"]),["enter"])),r[28]||(r[28]=D(A((...e)=>m.triggerMiniHelp&&m.triggerMiniHelp(...e),["prevent","stop"]),["space"]))],"aria-label":"ดูวิธีใช้งาน Bot"},[r[148]||(r[148]=c("div",{class:"help-btn-ripple"},null,-1)),r[149]||(r[149]=c("svg",{class:"help-btn-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true",focusable:"false"},[c("circle",{class:"help-circle",cx:"12",cy:"12",r:"9"}),c("path",{class:"help-question",d:"M9.5 9.2a2.5 2.5 0 1 1 4 1.8c0 2-2 2.6-2 2.6"}),c("line",{class:"help-dot",x1:"12",y1:"16",x2:"12",y2:"16"})],-1)),r[150]||(r[150]=c("span",{class:"help-btn-text"},"ดูวิธีใช้งาน",-1)),c("span",{class:"mini-help-close",role:"button",tabindex:"0","aria-label":"ปิดปุ่มดูวิธีใช้งาน",onClick:r[23]||(r[23]=A((...e)=>m.dismissMiniHelp&&m.dismissMiniHelp(...e),["stop"])),onKeydown:[r[24]||(r[24]=D(A((...e)=>m.dismissMiniHelp&&m.dismissMiniHelp(...e),["prevent","stop"]),["enter"])),r[25]||(r[25]=D(A((...e)=>m.dismissMiniHelp&&m.dismissMiniHelp(...e),["prevent","stop"]),["space"]))]}," × ",32)],544))])]),g.useGeminiMode?k("",!0):(s(),t("div",{key:0,class:"message-text text-center",style:{"margin-bottom":"1.5rem"},innerHTML:g.welcomeInstruction},null,8,mi)),c("div",fi,[c("button",{class:"categories-toggle-btn",onClick:r[29]||(r[29]=e=>g.showWelcomeCategories=!g.showWelcomeCategories)},[r[152]||(r[152]=c("svg",{class:"grid-icon-animated",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("rect",{class:"grid-rect-1",x:"3",y:"4",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"}),c("rect",{class:"grid-rect-2",x:"14",y:"4",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"}),c("rect",{class:"grid-rect-3",x:"3",y:"13",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"}),c("rect",{class:"grid-rect-4",x:"14",y:"13",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"})],-1)),c("span",null,d(g.showWelcomeCategories?"ซ่อนหมวดหมู่":"แสดงหมวดหมู่"),1),(s(),t("svg",{class:l(["toggle-arrow",{"arrow-up":g.showWelcomeCategories}]),width:"14",height:"14",viewBox:"0 0 24 24"},[...r[151]||(r[151]=[c("path",{d:"M6 9l6 6 6-6",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))])]),i(x,{name:"categories-expand"},{default:o(()=>[T(c("div",wi,[r[161]||(r[161]=c("div",{class:"category-title no-underline"},"หมวดหมู่",-1)),g.loading?(s(),t("div",vi,[...r[153]||(r[153]=[c("div",{class:"spinner-border text-secondary",role:"status"},[c("span",{class:"visually-hidden"},"Loading...")],-1)])])):g.loadError?(s(),t("div",bi,[r[155]||(r[155]=c("div",{class:"offline-icon"},[c("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M1 1l22 22M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),c("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),c("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),c("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),c("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),c("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})])],-1)),r[156]||(r[156]=c("div",{class:"offline-title"},"ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์",-1)),r[157]||(r[157]=c("div",{class:"offline-subtitle"},"กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ตแล้วลองใหม่อีกครั้ง",-1)),c("button",{class:"offline-retry-btn",onClick:r[30]||(r[30]=(...e)=>m.retryLoadCategories&&m.retryLoadCategories(...e))},[...r[154]||(r[154]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("polyline",{points:"23 4 23 10 17 10"}),c("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})],-1),f(" ลองใหม่ ",-1)])])])):(s(),t("div",yi,[m.displayedCategories&&0!==m.displayedCategories.length?m.displayedCategories.every(e=>!e.items||0===e.items.length)?(s(),t("div",xi," กำลังโหลดหมวดหมู่... ")):k("",!0):(s(),t("div",ki," ไม่พบหมวดหมู่ ")),(s(!0),t(n,null,a(m.displayedCategories||[],(e,u)=>(s(),y(x,{name:"cat-pop",key:u},{default:o(()=>[c("div",Ti,[c("button",{class:"cat-toggle",onClick:t=>e.items&&e.items.length>0?m.toggle(u,t):m.selectCategoryItem(e.title,u,null,t),"aria-expanded":!!(e.items&&e.items.length>0)&&g.openIndexes.includes(u)},[c("span",_i,d(e.title),1),e.items&&e.items.length?(s(),t("svg",Si,[...r[158]||(r[158]=[c("path",{d:"M6 9l6 6 6-6",stroke:"white","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):k("",!0)],8,Ci),i(x,{name:"collapse"},{default:o(()=>[T(c("ul",Mi,[(s(!0),t(n,null,a(e.items,(e,i)=>(s(),t("li",{key:i,class:"cat-sub"},[c("button",{type:"button",class:l(["cat-sub-btn",{disabled:"object"==typeof e&&e._disabled}]),disabled:"object"==typeof e&&e._disabled,onClick:t=>m.selectCategoryItem(e,u,i,t),"aria-label":`เลือก ${"string"==typeof e?e:e.label||e.text||""}`},[c("span",Ii,d(i+1)+". "+d("string"==typeof e?e:e.label||e.text||""),1),r[159]||(r[159]=c("svg",{class:"cat-sub-icon",width:"14",height:"14",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},[c("path",{d:"M8 5l8 7-8 7",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))],10,Ai)]))),128))],512),[[C,g.openIndexes.includes(u)]])]),_:2},1024)])]),_:2},1024))),128)),i(x,{name:"expandButton"},{default:o(()=>[!g.showAllCategories&&g.categories&&g.categories.length>3?(s(),t("button",{key:0,class:"read-more-btn",onClick:r[31]||(r[31]=e=>g.showAllCategories=!0)},[...r[160]||(r[160]=[c("span",{class:"read-more-text"},"ดูเพิ่มเติม",-1),c("svg",{class:"read-more-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M12 5v14M5 12l7 7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):k("",!0)]),_:1})]))],512),[[C,g.showWelcomeCategories]])]),_:1})]))])):k("",!0)],2)):k("",!0),i(x,{name:"fade"},{default:o(()=>[g.isLoadingMore?(s(),t("div",Ei,[...r[162]||(r[162]=[c("div",{class:"loading-spinner"},null,-1),c("span",null,"กำลังโหลดข้อความเก่า...",-1)])])):k("",!0)]),_:1}),i(x,{name:"fade"},{default:o(()=>[g.showLoadMoreHint&&!g.isLoadingMore&&g.messages.length>0?(s(),t("div",Li,[...r[163]||(r[163]=[c("span",null,"↑ เลื่อนขึ้นเพื่อดูข้อความเก่า",-1)])])):k("",!0)]),_:1}),(s(),y($(g.messages.length>50?"div":"transition-group"),{name:g.messages.length>50?void 0:"message-pop",tag:"div",class:"message-list",style:M({paddingTop:g.useGeminiMode?"70px":"0px"})},{default:o(()=>[(s(!0),t(n,null,a(g.messages,(h,p)=>(s(),t("div",{key:h.id||p,class:l(["message-wrapper",[h.type,{typing:!!h.typing}]])},["bot"!==h.type||g.useGeminiMode?k("",!0):(s(),t("div",Di,[c("div",{class:"bot-avatar",role:"button",tabindex:"0",onClick:r[35]||(r[35]=(...e)=>m.openAiIntro&&m.openAiIntro(...e)),title:"เปิด AI เต็มจอ"},["high"===g.graphicsQuality&&g.botVideo?(s(),t("video",{key:0,src:g.botVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-main",{"video-hidden":g.isBotSleeping||g.isBotWakingUp||g.isPlayingReverse}]),autoplay:"",muted:"",playsinline:"",onEnded:r[32]||(r[32]=(...e)=>m.onMainVideoEnded&&m.onMainVideoEnded(...e))},null,42,$i)):k("",!0),"high"===g.graphicsQuality&&g.botReverseVideo?(s(),t("video",{key:1,src:g.botReverseVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-reverse",{"video-visible":g.isPlayingReverse}]),muted:"",playsinline:"",onEnded:r[33]||(r[33]=(...e)=>m.onReverseVideoEnded&&m.onReverseVideoEnded(...e))},null,42,Pi)):k("",!0),"high"===g.graphicsQuality&&g.botSleepVideo?(s(),t("video",{key:2,src:g.botSleepVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-sleep",{"video-visible":g.isBotSleeping}]),autoplay:"",muted:"",playsinline:""},null,10,Bi)):k("",!0),"high"===g.graphicsQuality&&g.botWakeVideo?(s(),t("video",{key:3,src:g.botWakeVideo,class:l(["bot-avatar-img bot-avatar-video bot-avatar-video-wake",{"video-visible":g.isBotWakingUp}]),muted:"",playsinline:"",onEnded:r[34]||(r[34]=(...e)=>m.onWakeVideoEnded&&m.onWakeVideoEnded(...e))},null,42,Oi)):k("",!0),"high"!==g.graphicsQuality?(s(),t("img",{key:4,src:g.botAvatar,alt:"Bot",class:"bot-avatar-img"},null,8,Hi)):k("",!0),i(x,{name:"fade"},{default:o(()=>[g.isOffline?(s(),t("div",Ni,[...r[164]||(r[164]=[c("span",{class:"offline-badge-dot"},null,-1)])])):k("",!0)]),_:1})]),i(x,{name:"zzz-fade"},{default:o(()=>[g.isBotSleeping?(s(),t("div",Fi,[...r[165]||(r[165]=[c("span",{class:"zzz-bubble zzz-1"},"z",-1),c("span",{class:"zzz-bubble zzz-2"},"z",-1),c("span",{class:"zzz-bubble zzz-3"},"z",-1)])])):k("",!0)]),_:1}),i(x,{name:"wake-up-fade"},{default:o(()=>[g.showWakeSparkle?(s(),t("div",Ri,[...r[166]||(r[166]=[c("span",{class:"sparkle sparkle-1"},"✨",-1),c("span",{class:"sparkle sparkle-2"},"✨",-1),c("span",{class:"sparkle sparkle-3"},"✨",-1)])])):k("",!0)]),_:1})])),g.useGeminiMode&&"bot"===h.type&&h.typing&&!h.text?(s(),t("div",zi,[...r[167]||(r[167]=[c("span",null,null,-1),c("span",null,null,-1),c("span",null,null,-1)])])):k("",!0),g.useGeminiMode&&"bot"===h.type?(s(),t("div",ji,[c("div",{class:l(["gemini-message",{clamped:!h._expanded,expanded:h._expanded}]),innerHTML:m.linkifyText(p===g.messages.length-1&&g.useGeminiMode&&"bot"===h.type&&g.isGeminiTyping?g.geminiTypingText:h.text,h.title,h.found,!1)},null,10,Vi)])):k("",!0),g.useGeminiMode&&"bot"===h.type?k("",!0):(s(),t("div",{key:3,class:l(["message-bubble",[h.type,{"has-contacts":h.showContacts||h.visibleContacts&&h.visibleContacts.length>0}]]),"data-message-id":h.id},[h.multipleResults&&h.text&&h.text.trim().startsWith("พบหลายคำถาม")?k("",!0):(s(),t("div",{key:0,class:l(["message-text",{clamped:!h._expanded&&"bot"!==h.type,expanded:h._expanded,overflowing:h._isOverflowing}]),ref_for:!0,ref:e=>g.messageTextRefs[h.id]=e,innerHTML:"user"===h.type?h.text.replace(/</g,"<").replace(/>/g,">"):m.linkifyText(h.text,h.title,h.found,!1)},null,10,Gi)),h.text&&"user"===h.type?(s(),t("button",{key:1,type:"button",class:"copy-button",onClick:A(e=>m.copyMessage(h),["stop","prevent"]),"aria-label":"คัดลอกข้อความ"},[...r[168]||(r[168]=[c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"copy-icon"},[c("path",{d:"M16 1H5a2 2 0 0 0-2 2v11",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"}),c("rect",{x:"8",y:"4",width:"13",height:"13",rx:"2",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,Wi)):k("",!0),"user"===h.type&&!g.isGeminiTyping&&h._isOverflowing?(s(),t("button",{key:2,type:"button",class:"expand-button",onClick:A(e=>{m.toggleExpand(h),e.stopImmediatePropagation()},["stop","prevent"]),"aria-label":h._expanded?"ย่อข้อความ":"ขยายข้อความ"},[h._expanded?(s(),t("svg",Ki,[...r[170]||(r[170]=[c("path",{d:"M7 14l5-5 5 5",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(s(),t("svg",Ui,[...r[169]||(r[169]=[c("path",{d:"M7 10l5 5 5-5",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))],8,Qi)):k("",!0),h.showCategories?(s(),t("div",Yi,[r[175]||(r[175]=c("div",{class:"category-title no-underline"},"หมวดหมู่",-1)),g.loading?(s(),t("div",Xi,[...r[171]||(r[171]=[c("div",{class:"spinner-border spinner-border-sm text-secondary",role:"status"},null,-1)])])):(s(),t("div",Zi,[m.displayedCategories&&0!==m.displayedCategories.length?k("",!0):(s(),t("div",Ji," ไม่พบหมวดหมู่ ")),(s(!0),t(n,null,a(m.displayedCategories||[],(e,u)=>(s(),y(x,{name:"cat-pop",key:u},{default:o(()=>[c("div",eo,[c("button",{class:"cat-toggle",onClick:t=>e.items&&e.items.length>0?m.toggle(u,t,h):m.selectCategoryItem(e.title,u,null,t),"aria-expanded":!!(e.items&&e.items.length>0)&&(h.openIndexes&&h.openIndexes.includes(u))},[c("span",so,d(e.title),1),e.items&&e.items.length?(s(),t("svg",io,[...r[172]||(r[172]=[c("path",{d:"M6 9l6 6 6-6",stroke:"white","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):k("",!0)],8,to),i(x,{name:"collapse"},{default:o(()=>[T(c("ul",oo,[(s(!0),t(n,null,a(e.items,(e,i)=>(s(),t("li",{key:i,class:"cat-sub"},[c("button",{type:"button",class:l(["cat-sub-btn",{disabled:"object"==typeof e&&e._disabled}]),disabled:"object"==typeof e&&e._disabled,onClick:t=>m.selectCategoryItem(e,u,i,t)},[c("span",ao,d(i+1)+". "+d("string"==typeof e?e:e.label||e.text||""),1),r[173]||(r[173]=c("svg",{class:"cat-sub-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("path",{d:"M8 5l8 7-8 7"})],-1))],10,no)]))),128))],512),[[C,h.openIndexes&&h.openIndexes.includes(u)]])]),_:2},1024)])]),_:2},1024))),128)),i(x,{name:"expandButton"},{default:o(()=>[!g.showAllCategories&&g.categories&&g.categories.length>3?(s(),t("button",{key:0,class:"read-more-btn",onClick:r[36]||(r[36]=e=>g.showAllCategories=!0)},[...r[174]||(r[174]=[c("span",{class:"read-more-text"},"ดูเพิ่มเติม",-1),c("svg",{class:"read-more-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M12 5v14M5 12l7 7 7-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):k("",!0)]),_:1})]))])):k("",!0),h.pdf?(s(),t("div",ro,[c("a",{href:h.pdf,target:"_blank",rel:"noopener",class:"pdf-link",onClick:A(e=>m.openPdf(h,h.pdf),["prevent"])},[...r[176]||(r[176]=[c("svg",{class:"pdf-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{class:"pdf-doc",d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{class:"pdf-fold",d:"M14 2v6h6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),c("path",{class:"pdf-arrow",d:"M12 11v6m0 0l-2-2m2 2l2-2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c("span",{class:"pdf-text"},"ดาวน์โหลดเอกสาร PDF",-1)])],8,lo)])):k("",!0),h.lowConfidence?(s(),t("div",co,[r[177]||(r[177]=c("svg",{class:"warning-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c("span",null,"ความมั่นใจต่ำ "+d(h.confidenceLevel?`(${h.confidenceLevel})`:""),1)])):k("",!0),h.needsClarification?(s(),t("div",uo,[...r[178]||(r[178]=[c("span",{class:"clarification-icon"},"🤔",-1),c("span",null,"กรุณาให้รายละเอียดเพิ่มเติม",-1)])])):k("",!0),h.suggestions&&h.suggestions.length?(s(),t("div",ho,[r[179]||(r[179]=c("div",{class:"suggestion-label"},"คุณอาจต้องการถามเกี่ยวกับ:",-1)),c("ul",po,[(s(!0),t(n,null,a(h.suggestions,(e,i)=>(s(),t("li",{key:e.id||i,class:"suggestion-item"},[c("button",{class:"suggestion-btn clarification-btn",type:"button",onClick:t=>m.selectClarificationSuggestion(e)},d(e.title||e),9,go)]))),128))])])):k("",!0),h.results&&h.results.length?(s(),t("div",mo,[i(u,{name:"suggestion-fade",tag:"ul",class:"suggestions-list"},{default:o(()=>[(s(!0),t(n,null,a(m.getVisibleSuggestions(h),(e,i)=>(s(),t("li",{key:e.id||i,class:"suggestion-item"},[c("button",{class:l(["suggestion-btn",{disabled:e._disabled,selected:e._selected}]),disabled:e._disabled,type:"button",onClick:t=>m.selectSuggestion(h,e,i),"aria-disabled":e._disabled?"true":"false"},d(e.title||e),11,fo)]))),128))]),_:2},1024),i(x,{name:"readmore-fade"},{default:o(()=>[h.results.length>m.getVisibleCount(h)?(s(),t("button",{key:0,class:"read-more-btn",onClick:e=>m.loadMoreSuggestions(h),type:"button"},[r[180]||(r[180]=c("span",{class:"read-more-text"},"Read More",-1)),r[181]||(r[181]=c("svg",{class:"read-more-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M6 9l6 6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c("span",vo,"เหลืออีก "+d(h.results.length-m.getVisibleCount(h))+" คำถาม",1)],8,wo)):k("",!0)]),_:2},1024)])):k("",!0),h.showContacts||h.visibleContacts&&h.visibleContacts.length>0?(s(),t("div",bo,[r[185]||(r[185]=c("hr",{class:"contact-divider"},null,-1)),c("div",yo,[r[184]||(r[184]=c("div",{class:"contact-notice-sub"},"   หากต้องการความช่วยเหลือเพิ่มเติม โปรดติดต่อเจ้าหน้าที่ตามข้อมูลด้านล่าง",-1)),c("div",ko,[(s(!0),t(n,null,a(m.getVisibleContactGroups(h),(e,i)=>(s(),t("div",{key:i,class:"org-card",role:"group","aria-label":"contact-organization"},[c("div",xo,[c("div",To,d(e.organization),1),(s(!0),t(n,null,a(e.categories,(e,i)=>(s(),t("div",{key:i},[e.contact?(s(),t("div",Co,[(s(!0),t(n,null,a(m.parseContactParts(e.contact),(e,i)=>(s(),t("div",{key:i},[/^(https?:|www\.|facebook\.|ลิงค์)/i.test(e)?(s(),t("div",_o,[/^ลิงค์/i.test(e)?k("",!0):(s(),t("span",So,"ลิงค์ : ")),c("span",{innerHTML:m.linkifyText(e)},null,8,Mo)])):m.hasPhoneOrUrl(e)?(s(),t("div",Ao,[r[182]||(r[182]=c("span",null,"ติดต่อ: ",-1)),c("span",{innerHTML:m.linkifyText(e)},null,8,Io)])):k("",!0)]))),128))])):k("",!0)]))),128))])]))),128)),i(x,{name:"readmore-fade"},{default:o(()=>[(h.groupedContacts&&h.groupedContacts.length?h.groupedContacts.length:(e.universityContacts||[]).length)>m.getContactVisibleCount(h)?(s(),t("button",{key:0,class:"read-more-btn",onClick:e=>m.toggleLoadMoreContacts(h),type:"button"},[m.getContactVisibleCount(h)<(h.groupedContacts&&h.groupedContacts.length?h.groupedContacts.length:(e.universityContacts||[]).length)?(s(),t("span",Lo,"ดูเพิ่มเติม")):(s(),t("span",Do,"ย่อ")),r[183]||(r[183]=c("svg",{class:"read-more-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M6 9l6 6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c("span",$o,"เหลืออีก "+d((h.groupedContacts&&h.groupedContacts.length?h.groupedContacts.length:(e.universityContacts||[]).length)-m.getContactVisibleCount(h))+" หน่วยงาน",1)],8,Eo)):k("",!0)]),_:2},1024)])])])):k("",!0),"bot"===h.type&&h.typing&&!h.text?(s(),t("div",Po,[...r[186]||(r[186]=[c("span",null,null,-1),c("span",null,null,-1),c("span",null,null,-1)])])):k("",!0),"bot"!==h.type||h.typing||!h.text&&!h.results||!0!==h.found||h.multipleResults?k("",!0):(s(),t("div",{key:11,class:l(["apple-feedback",{"has-feedback":h.feedback}])},[c("button",{class:l(["apple-feedback-btn",{active:"like"===h.feedback,disabled:g.feedbackButtonsDisabled}]),onClick:A(e=>m.handleLikeClick(h),["stop"]),disabled:g.feedbackButtonsDisabled,"aria-label":"ถูกใจ"},[...r[187]||(r[187]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],10,Bo),c("div",Oo,[c("button",{class:l(["apple-feedback-btn",{active:"dislike"===h.feedback,disabled:g.feedbackButtonsDisabled}]),onClick:A(e=>m.toggleFeedbackDropdown(p),["stop"]),disabled:g.feedbackButtonsDisabled,"aria-label":"ไม่ถูกใจ"},[...r[188]||(r[188]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],10,Ho),i(x,{name:"apple-dropdown"},{default:o(()=>[g.openFeedbackDropdownIndex===p?(s(),t("div",{key:0,class:"apple-feedback-dropdown",onClick:r[42]||(r[42]=A(()=>{},["stop"]))},[c("div",No,[r[190]||(r[190]=c("span",null,"บอกเหตุผลให้เราปรับปรุง",-1)),c("button",{class:"apple-dropdown-close",onClick:r[37]||(r[37]=(...e)=>m.closeFeedbackDropdown&&m.closeFeedbackDropdown(...e)),"aria-label":"ปิด"},[...r[189]||(r[189]=[c("svg",{width:"10",height:"10",viewBox:"0 0 14 14",fill:"none"},[c("path",{d:"M1 1l12 12M13 1L1 13",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)])])]),g.showFeedbackCommentBox?(s(),t("div",zo,[T(c("textarea",{"onUpdate:modelValue":r[38]||(r[38]=e=>g.feedbackCommentText=e),class:"apple-comment-input",placeholder:"พิมพ์ความคิดเห็น...",rows:"2",autofocus:"",onKeydown:r[39]||(r[39]=D(A((...e)=>m.submitFeedbackComment&&m.submitFeedbackComment(...e),["prevent"]),["enter"]))},null,544),[[P,g.feedbackCommentText]]),c("div",jo,[c("button",{class:"apple-comment-btn cancel",onClick:r[40]||(r[40]=(...e)=>m.cancelFeedbackComment&&m.cancelFeedbackComment(...e))},"ยกเลิก"),c("button",{class:"apple-comment-btn submit",onClick:r[41]||(r[41]=(...e)=>m.submitFeedbackComment&&m.submitFeedbackComment(...e)),disabled:!g.feedbackCommentText.trim()},"ส่ง",8,Vo)])])):(s(),t("ul",Fo,[(s(!0),t(n,null,a(g.feedbackReasonOptions,e=>(s(),t("li",{key:e.value,class:l(["apple-reason-item",{active:h.selectedReason===e.value}]),onClick:A(t=>m.handleReasonSelect(h,e.value),["stop","prevent"]),onTouchend:A(t=>m.handleReasonSelect(h,e.value),["stop","prevent"])},d(e.label),43,Ro))),128))]))])):k("",!0)]),_:2},1024)])],2))],10,qi))],2))),128))]),_:1},8,["name","style"]))],512)],34),i(x,{name:"fade"},{default:o(()=>[T(c("div",{class:l(["panel-footer",{focused:g.panelFocused,"pwa-standalone":g.isPwaStandalone,"menu-open":g.showLineMenu}]),style:M(m.pwaFooterStyle),ref:"panelFooter"},[c("div",null,[T(c("textarea",{"onUpdate:modelValue":r[44]||(r[44]=e=>g.query=e),class:l(["input-pill real-input",{shake:g.isTyping}]),style:M(m.typingStyle),placeholder:m.dynamicPlaceholder,onKeydown:[r[45]||(r[45]=D(A((...e)=>m.onEnterKey&&m.onEnterKey(...e),["exact","prevent"]),["enter"])),r[46]||(r[46]=D(A(()=>{},["shift","stop"]),["enter"])),r[47]||(r[47]=D(A((...e)=>m.acceptSuggestion&&m.acceptSuggestion(...e),["prevent"]),["tab"])),r[48]||(r[48]=D(A((...e)=>m.checkAcceptSuggestion&&m.checkAcceptSuggestion(...e),["prevent"]),["arrow-right"]))],onCompositionstart:r[49]||(r[49]=(...e)=>m.onCompositionStart&&m.onCompositionStart(...e)),onCompositionend:r[50]||(r[50]=(...e)=>m.onCompositionEnd&&m.onCompositionEnd(...e)),onInput:r[51]||(r[51]=(...e)=>m.onTyping&&m.onTyping(...e)),onFocus:r[52]||(r[52]=(...e)=>m.onInputFocus&&m.onInputFocus(...e)),onBlur:r[53]||(r[53]=(...e)=>m.onInputBlur&&m.onInputBlur(...e)),ref:"inputBox",autocomplete:"off",rows:"1"},null,46,qo),[[P,g.query]])]),g.tempTyping?(s(),t("div",Go,[c("div",Wo,[c("div",{class:"bot-avatar",role:"button",tabindex:"0",onClick:r[54]||(r[54]=(...e)=>m.openAiIntro&&m.openAiIntro(...e)),title:"เปิด AI เต็มจอ"},["high"===g.graphicsQuality&&g.botVideo?(s(),t("video",{src:g.botVideo,class:"bot-avatar-img bot-avatar-video",autoplay:"",loop:"",muted:"",playsinline:"",key:"awake"},null,8,Qo)):(s(),t("img",{key:1,src:g.botAvatar,alt:"Bot",class:"bot-avatar-img"},null,8,Uo)),i(x,{name:"fade"},{default:o(()=>[g.isOffline?(s(),t("div",Ko,[...r[191]||(r[191]=[c("span",{class:"offline-badge-dot"},null,-1)])])):k("",!0)]),_:1})])]),r[192]||(r[192]=c("div",{class:"message-bubble bot"},[c("div",{class:"typing-indicator"},[c("span"),c("span"),c("span")])],-1))])):k("",!0),i(x,{name:"line-menu-slide"},{default:o(()=>[!g.showLineMenu||g.lineMenuExpanded||g.lineMenuCollapsed?k("",!0):(s(),t("div",{class:l(["line-menu-wrapper",{"is-dragging":g.isDragging}]),style:M(m.menuDragStyle),key:g.selectedParentCategory?g.selectedParentCategory.id:"main"},[r[201]||(r[201]=c("div",{class:"line-menu-blur-backdrop"},null,-1)),c("div",{class:"line-menu-handle",onMousedown:r[55]||(r[55]=(...e)=>m.handleDragStart&&m.handleDragStart(...e)),onTouchstart:r[56]||(r[56]=A((...e)=>m.handleDragStart&&m.handleDragStart(...e),["prevent"]))},[...r[193]||(r[193]=[c("div",{class:"line-menu-handle-bar"},null,-1)])],32),c("div",Yo,[g.selectedParentCategory||g.selectedContact?(s(),t("div",Xo,[c("button",{class:"line-menu-back",onClick:r[57]||(r[57]=e=>{g.selectedParentCategory=null,g.selectedContact=null})},[r[194]||(r[194]=c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g.selectedParentCategory?(s(),t("span",Zo,d(g.selectedParentCategory.title),1)):g.selectedContact?(s(),t("span",Jo,"ติดต่อ")):k("",!0)])])):k("",!0),g.selectedContact?(s(),t("div",en,[c("div",tn,[c("div",sn,[c("div",on,d(g.selectedContact.name),1),c("div",nn,[c("div",null,[r[195]||(r[195]=c("span",null,"ติดต่อ: ",-1)),c("span",null,[c("a",{href:`tel:${g.selectedContact.phone}`,class:"message-link"},d(g.selectedContact.phoneDisplay),9,an)])])])])])])):g.selectedParentCategory?(s(),t("div",rn,[(s(!0),t(n,null,a(m.getSubcategories(g.selectedParentCategory.id),e=>(s(),t("button",{key:e.id,class:"line-menu-item",onClick:t=>m.selectLineMenuCategory(e)},[c("div",{class:"line-menu-icon",innerHTML:m.getCategoryIcon(e.title)},null,8,cn),c("span",dn,d(e.title),1)],8,ln))),128))])):(s(),t("div",{key:3,class:"line-menu-carousel",ref:"menuCarousel",onTouchstartPassive:r[58]||(r[58]=(...e)=>m.onCarouselTouchStart&&m.onCarouselTouchStart(...e)),onTouchmovePassive:r[59]||(r[59]=(...e)=>m.onCarouselTouchMove&&m.onCarouselTouchMove(...e)),onTouchend:r[60]||(r[60]=(...e)=>m.onCarouselTouchEnd&&m.onCarouselTouchEnd(...e)),onMousedown:r[61]||(r[61]=(...e)=>m.onCarouselMouseDown&&m.onCarouselMouseDown(...e))},[c("div",{class:"line-menu-carousel-track",style:M(m.carouselTrackStyle)},[c("div",un,[c("div",hn,[(s(!0),t(n,null,a(g.lineMenuCategories,e=>(s(),t("button",{key:e.id,class:l(["line-menu-item",{"has-children":m.hasSubcategories(e.id)}]),onClick:t=>m.onMenuCategoryClick(e)},[c("div",{class:"line-menu-icon",innerHTML:m.getCategoryIcon(e.title)},null,8,gn),c("span",mn,d(e.title),1),m.hasSubcategories(e.id)?(s(),t("span",fn,"›")):k("",!0)],10,pn))),128))])]),c("div",wn,[c("div",vn,[(s(!0),t(n,null,a(g.locationQuickLinks,e=>(s(),t("button",{key:e.id,class:"line-menu-item location-item",onClick:t=>m.sendLocationQuery(e.query)},[r[196]||(r[196]=c("div",{class:"line-menu-icon location-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{class:"nav-arrow",d:"M12 2L19 21L12 17L5 21L12 2Z",stroke:"white","stroke-width":"2","stroke-linejoin":"round",fill:"none"},[c("animate",{attributeName:"stroke-dashoffset",from:"50",to:"0",dur:"0.6s",fill:"freeze"}),c("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 12;5 12 12;-5 12 12;0 12 12",dur:"2s",repeatCount:"indefinite"})])])],-1)),c("span",yn,d(e.label),1)],8,bn))),128))])]),c("div",kn,[c("div",xn,[g.carouselContactsLoading?(s(),t("div",Tn,[...r[197]||(r[197]=[c("div",{class:"loading-spinner"},null,-1),c("span",null,"กำลังโหลด...",-1)])])):0===g.carouselContacts.length?(s(),t("div",Cn,[...r[198]||(r[198]=[c("span",null,"ไม่มีข้อมูลติดต่อ",-1)])])):(s(!0),t(n,{key:2},a(g.carouselContacts,e=>(s(),t("button",{key:e.id,class:"line-menu-item contact-item",onClick:t=>m.sendContactQuery(e)},[r[199]||(r[199]=c("div",{class:"line-menu-icon contact-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.12.96.36 1.9.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.91.34 1.85.58 2.81.7A2 2 0 0122 16.92z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("animate",{attributeName:"stroke-dashoffset",from:"100",to:"0",dur:"0.8s",fill:"freeze"})])])],-1)),c("div",Sn,[c("span",Mn,d(e.name),1),e.phoneDisplay?(s(),t("span",An,"ติดต่อ: "+d(e.phoneDisplay),1)):k("",!0)])],8,_n))),128))])])],4)],544)),g.selectedParentCategory?k("",!0):(s(),t("div",In,[i(x,{name:"page-toast"},{default:o(()=>[g.showPageLabelToast?(s(),t("div",En,d(g.pageLabelToastText),1)):k("",!0)]),_:1}),i(x,{name:"dots-fade"},{default:o(()=>[g.showCarouselDots&&!g.selectedContact?(s(),t("div",Ln,[(s(!0),t(n,null,a(g.carouselPages,(e,i)=>(s(),t("button",{key:i,class:l(["carousel-dot",{active:g.carouselCurrentPage===i,dragging:g.isDragging}]),onClick:e=>m.goToCarouselPage(i),onMousedown:e=>m.startDrag(e,i),onTouchstart:e=>m.startDrag(e,i),"aria-label":`ไปหน้า ${i+1}`},[...r[200]||(r[200]=[c("span",{class:"dot-inner"},null,-1)])],42,Dn))),128))])):k("",!0)]),_:1})]))])],6))]),_:1}),T(c("div",$n,[c("button",{class:l(["line-toggle-btn",{active:g.showLineMenu}]),onClick:r[62]||(r[62]=(...e)=>m.onToggleLineMenuClick&&m.onToggleLineMenuClick(...e)),"aria-label":g.showLineMenu?"แป้นพิมพ์":"เมนู",title:g.showLineMenu?"แป้นพิมพ์":"เมนู"},[g.showLineMenu?(s(),t("svg",Bn,[...r[202]||(r[202]=[c("rect",{x:"2",y:"4",width:"20",height:"16",rx:"3",stroke:"currentColor","stroke-width":"2"},null,-1),c("rect",{x:"5",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"9",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"13",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"17",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"5",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"9",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"13",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"17",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"},null,-1),c("rect",{x:"7",y:"16",width:"10",height:"2",rx:"0.5",fill:"currentColor"},null,-1)])])):(s(),t("svg",On,[...r[203]||(r[203]=[c("rect",{class:"grid-rect-1",x:"3",y:"4",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"},null,-1),c("rect",{class:"grid-rect-2",x:"14",y:"4",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"},null,-1),c("rect",{class:"grid-rect-3",x:"3",y:"13",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"},null,-1),c("rect",{class:"grid-rect-4",x:"14",y:"13",width:"7",height:"7",rx:"1.5",stroke:"currentColor","stroke-width":"2"},null,-1)])]))],10,Pn),c("button",{class:l(["gemini-toggle-btn",{active:g.useGeminiMode}]),onClick:r[63]||(r[63]=(...e)=>m.toggleGeminiMode&&m.toggleGeminiMode(...e)),"aria-label":g.useGeminiMode?"เปลี่ยนเป็นโหมดค้นหา":"เปลี่ยนเป็นโหมด AI",title:g.useGeminiMode?"โหมด AI ✨ (คลิกเพื่อเปลี่ยนเป็นค้นหา)":"โหมดค้นหา 🔍 (คลิกเพื่อเปลี่ยนเป็น AI)"},[g.useGeminiMode?(s(),t("svg",Fn,[...r[205]||(r[205]=[c("path",{d:"M12 2L13.5 7.5L19 9L13.5 10.5L12 16L10.5 10.5L5 9L10.5 7.5L12 2Z",fill:"currentColor"},null,-1),c("path",{d:"M18 14L19 17L22 18L19 19L18 22L17 19L14 18L17 17L18 14Z",fill:"currentColor",opacity:"0.7"},null,-1),c("path",{d:"M6 14L6.5 16L4 16.5L6.5 17L6 19L6.5 17L9 16.5L6.5 16L6 14Z",fill:"currentColor",opacity:"0.5"},null,-1)])])):(s(),t("svg",Nn,[...r[204]||(r[204]=[c("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor","stroke-width":"2"},null,-1),c("path",{d:"M16 16L20 20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)])]))],10,Hn),g.useGeminiMode?(s(),t("button",{key:0,class:l(["gemini-history-btn",{active:g.showGeminiHistory}]),onClick:r[64]||(r[64]=(...e)=>m.toggleGeminiHistory&&m.toggleGeminiHistory(...e)),"aria-label":"ประวัติการสนทนา AI",title:"ประวัติการสนทนา AI"},[r[206]||(r[206]=c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 8V12L15 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),c("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"})],-1)),g.geminiConversations.length>0?(s(),t("span",Rn,d(g.geminiConversations.length),1)):k("",!0)],2)):k("",!0),g.useGeminiMode?k("",!0):(s(),t("button",{key:1,class:l(["chatbot-history-btn",{active:g.showChatbotHistory}]),onClick:r[65]||(r[65]=(...e)=>m.toggleChatbotHistory&&m.toggleChatbotHistory(...e)),"aria-label":"ประวัติการสนทนา",title:"ประวัติการสนทนา"},[r[207]||(r[207]=c("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M12 8V12L15 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),c("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor","stroke-width":"2"})],-1)),g.chatbotConversations.length>0?(s(),t("span",zn,d(g.chatbotConversations.length),1)):k("",!0)],2)),i(x,{name:"send-btn-fade",mode:"out-in"},{default:o(()=>[g.query&&g.query.trim()&&!g.isVoiceMode?T((s(),t("button",{key:0,class:"btn-send",onClick:r[66]||(r[66]=(...e)=>m.onSend&&m.onSend(...e)),"aria-label":"send",ref:"sendBtn",style:M(g.sendBtnFixedStyle),onMouseenter:r[67]||(r[67]=(...e)=>m.onSendBtnMouseEnter&&m.onSendBtnMouseEnter(...e)),onMouseleave:r[68]||(r[68]=(...e)=>m.onSendBtnMouseLeave&&m.onSendBtnMouseLeave(...e)),onFocus:r[69]||(r[69]=(...e)=>m.onSendBtnMouseEnter&&m.onSendBtnMouseEnter(...e)),onBlur:r[70]||(r[70]=(...e)=>m.onSendBtnMouseLeave&&m.onSendBtnMouseLeave(...e))},[...r[208]||(r[208]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"send-icon","aria-hidden":"true",focusable:"false"},[c("path",{class:"send-bubble",fill:"white",d:"M21 6a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h2v3l4-3h6a3 3 0 0 0 3-3V6z"},[c("animate",{attributeName:"opacity",values:"0;1",dur:"0.4s",fill:"freeze"})]),c("circle",{class:"send-dot",cx:"12",cy:"10",r:"0",fill:"rgba(107,44,145,0.6)"},[c("animate",{attributeName:"r",values:"0;2;0",dur:"1.5s",repeatCount:"indefinite"})])],-1)])],36)),[[C,!g.showLineMenu]]):(s(),t("button",{key:1,class:l(["mic-toggle-btn",{active:g.isVoiceMode||g.isListening}]),onClick:r[71]||(r[71]=(...e)=>m.toggleVoiceMode&&m.toggleVoiceMode(...e)),"aria-label":g.isVoiceMode?"ปิดเสียงพูด":"เปิดเสียงพูด",title:g.isVoiceMode?"ปิดโหมดเสียงพูด":"เปิดโหมดเสียงพูด"},[r[213]||(r[213]=c("span",{class:"mat-mdc-button-touch-target"},null,-1)),(s(),t("svg",Vn,[r[210]||(r[210]=c("path",{d:"M12 1C10.3431 1 9 2.34315 9 4V12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12V4C15 2.34315 13.6569 1 12 1Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),r[211]||(r[211]=c("path",{d:"M19 10V12C19 16.4183 15.4183 20 11 20C6.58172 20 3 16.4183 3 12V10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),r[212]||(r[212]=c("path",{d:"M12 20V23",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)),g.isListening?(s(),t("circle",qn,[...r[209]||(r[209]=[c("animate",{attributeName:"r",values:"2;4;2",dur:"1.5s",repeatCount:"indefinite"},null,-1)])])):k("",!0)]))],10,jn))]),_:1})],512),[[C,g.showFooter]])],6),[[C,g.showFooter]])]),_:1}),i(x,{name:"line-menu-fullscreen"},{default:o(()=>[g.showLineMenu&&g.lineMenuExpanded?(s(),t("div",{key:0,class:l(["line-menu-fullscreen-wrapper",{"is-dragging":g.isDragging}]),style:M(m.fullscreenDragStyle)},[c("div",{class:"line-menu-handle",onMousedown:r[72]||(r[72]=(...e)=>m.handleDragStartFullscreen&&m.handleDragStartFullscreen(...e)),onTouchstart:r[73]||(r[73]=A((...e)=>m.handleDragStartFullscreen&&m.handleDragStartFullscreen(...e),["prevent"]))},[...r[214]||(r[214]=[c("div",{class:"line-menu-handle-bar"},null,-1)])],32),c("div",Gn,[g.selectedParentCategory||g.selectedContact?(s(),t("div",Wn,[c("button",{class:"line-menu-back",onClick:r[74]||(r[74]=e=>{g.selectedParentCategory=null,g.selectedContact=null})},[r[215]||(r[215]=c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),g.selectedParentCategory?(s(),t("span",Qn,d(g.selectedParentCategory.title),1)):g.selectedContact?(s(),t("span",Un,"ติดต่อ")):k("",!0)])])):k("",!0),g.selectedContact?(s(),t("div",Kn,[c("div",Yn,[c("div",Xn,[c("div",Zn,d(g.selectedContact.name),1),c("div",Jn,[c("div",null,[r[216]||(r[216]=c("span",null,"ติดต่อ: ",-1)),c("span",null,[c("a",{href:`tel:${g.selectedContact.phone}`,class:"message-link"},d(g.selectedContact.phoneDisplay),9,ea)])])])])])])):g.selectedParentCategory?(s(),t("div",ta,[(s(!0),t(n,null,a(m.getSubcategories(g.selectedParentCategory.id),e=>(s(),t("button",{key:e.id,class:"line-menu-item",onClick:t=>m.selectLineMenuCategory(e)},[c("div",{class:"line-menu-icon",innerHTML:m.getCategoryIcon(e.title)},null,8,ia),c("span",oa,d(e.title),1)],8,sa))),128))])):(s(),t("div",{key:3,class:"line-menu-carousel fullscreen-carousel",ref:"menuCarouselFullscreen",onTouchstartPassive:r[75]||(r[75]=(...e)=>m.onCarouselTouchStart&&m.onCarouselTouchStart(...e)),onTouchmovePassive:r[76]||(r[76]=(...e)=>m.onCarouselTouchMove&&m.onCarouselTouchMove(...e)),onTouchend:r[77]||(r[77]=(...e)=>m.onCarouselTouchEnd&&m.onCarouselTouchEnd(...e)),onMousedown:r[78]||(r[78]=(...e)=>m.onCarouselMouseDown&&m.onCarouselMouseDown(...e))},[c("div",{class:"line-menu-carousel-track",style:M(m.carouselTrackStyle)},[c("div",na,[c("div",aa,[(s(!0),t(n,null,a(g.lineMenuCategories,e=>(s(),t("button",{key:e.id,class:l(["line-menu-item",{"has-children":m.hasSubcategories(e.id)}]),onClick:t=>m.onMenuCategoryClick(e)},[c("div",{class:"line-menu-icon",innerHTML:m.getCategoryIcon(e.title)},null,8,la),c("span",ca,d(e.title),1),m.hasSubcategories(e.id)?(s(),t("span",da,"›")):k("",!0)],10,ra))),128))])]),c("div",ua,[c("div",ha,[(s(!0),t(n,null,a(g.locationQuickLinks,e=>(s(),t("button",{key:e.id,class:"line-menu-item location-item",onClick:t=>m.sendLocationQuery(e.query)},[r[217]||(r[217]=c("div",{class:"line-menu-icon location-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{class:"nav-arrow",d:"M12 2L19 21L12 17L5 21L12 2Z",stroke:"white","stroke-width":"2","stroke-linejoin":"round",fill:"none"},[c("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 12;5 12 12;-5 12 12;0 12 12",dur:"2s",repeatCount:"indefinite"})])])],-1)),c("span",ga,d(e.label),1)],8,pa))),128))])]),c("div",ma,[c("div",fa,[g.carouselContactsLoading?(s(),t("div",wa,[...r[218]||(r[218]=[c("div",{class:"loading-spinner"},null,-1),c("span",null,"กำลังโหลด...",-1)])])):0===g.carouselContacts.length?(s(),t("div",va,[...r[219]||(r[219]=[c("span",null,"ไม่มีข้อมูลติดต่อ",-1)])])):(s(!0),t(n,{key:2},a(g.carouselContacts,e=>(s(),t("button",{key:e.id,class:"line-menu-item contact-item",onClick:t=>m.sendContactQuery(e)},[r[220]||(r[220]=c("div",{class:"line-menu-icon contact-icon"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.12.96.36 1.9.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.91.34 1.85.58 2.81.7A2 2 0 0122 16.92z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[c("animate",{attributeName:"stroke-dashoffset",from:"100",to:"0",dur:"0.8s",fill:"freeze"})])])],-1)),c("div",ya,[c("span",ka,d(e.name),1),e.phoneDisplay?(s(),t("span",xa,"ติดต่อ: "+d(e.phoneDisplay),1)):k("",!0)])],8,ba))),128))])])],4)],544)),g.selectedParentCategory?k("",!0):(s(),t("div",Ta,[c("div",Ca,[(s(!0),t(n,null,a(g.carouselPages,(e,i)=>(s(),t("button",{key:i,class:l(["carousel-dot",{active:g.carouselCurrentPage===i,dragging:g.isDragging}]),onClick:e=>m.goToCarouselPage(i),onMousedown:e=>m.startDrag(e,i),onTouchstart:e=>m.startDrag(e,i)},[...r[221]||(r[221]=[c("span",{class:"dot-inner"},null,-1)])],42,_a))),128))])]))]),c("div",Sa,[c("button",{class:"line-toggle-btn active",onClick:r[79]||(r[79]=(...e)=>m.onToggleLineMenuClick&&m.onToggleLineMenuClick(...e)),"aria-label":"แป้นพิมพ์",title:"แป้นพิมพ์"},[...r[222]||(r[222]=[c("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("rect",{x:"2",y:"4",width:"20",height:"16",rx:"3",stroke:"currentColor","stroke-width":"2"}),c("rect",{x:"5",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"9",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"13",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"17",y:"8",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"5",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"9",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"13",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"17",y:"12",width:"2",height:"2",rx:"0.5",fill:"currentColor"}),c("rect",{x:"7",y:"16",width:"10",height:"2",rx:"0.5",fill:"currentColor"})],-1)])])])],6)):k("",!0)]),_:1}),i(w,{"show-footer":g.showFooter},null,8,["show-footer"])],36),i(x,{name:"typing-tooltip-fade"},{default:o(()=>[g.showUserTypingTooltip?(s(),t("div",{key:0,class:"typing-tooltip",style:M(g.userTypingTooltipStyle)},[c("div",Ma,d(g.userTypingTooltipText),1),r[223]||(r[223]=c("div",{class:"typing-tooltip-tail"},null,-1))],4)):k("",!0)]),_:1})])):k("",!0)]),_:1},8,["onEnter","onLeave"]),g.visible?k("",!0):(s(),t("button",{key:1,class:"fab-open",style:{"touch-action":"none"},onPointerdown:r[83]||(r[83]=A((...e)=>m.onFabPointerDown&&m.onFabPointerDown(...e),["prevent"])),onPointerup:r[84]||(r[84]=(...e)=>m.onFabPointerUp&&m.onFabPointerUp(...e)),onPointerleave:r[85]||(r[85]=(...e)=>m.onFabPointerUp&&m.onFabPointerUp(...e)),onPointercancel:r[86]||(r[86]=(...e)=>m.onFabPointerUp&&m.onFabPointerUp(...e)),onContextmenu:r[87]||(r[87]=A(()=>{},["prevent"])),"aria-label":"open chat"},[...r[224]||(r[224]=[c("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"fab-icon","aria-hidden":"true",focusable:"false"},[c("path",{class:"fab-bubble",fill:"white",d:"M21 6a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h2v3l4-3h6a3 3 0 0 0 3-3V6z","stroke-dasharray":"80","stroke-dashoffset":"80"},[c("animate",{attributeName:"stroke-dashoffset",to:"0",dur:"0.6s",fill:"freeze"}),c("animate",{attributeName:"opacity",values:"0.9;1;0.9",dur:"2s",repeatCount:"indefinite"})]),c("circle",{class:"fab-pulse",cx:"8",cy:"10",r:"1.5",fill:"rgba(107,44,145,0.5)"},[c("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1.5s",repeatCount:"indefinite"}),c("animate",{attributeName:"r",values:"1.5;2;1.5",dur:"1.5s",repeatCount:"indefinite"})]),c("circle",{class:"fab-pulse",cx:"12",cy:"10",r:"1.5",fill:"rgba(107,44,145,0.5)"},[c("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1.5s",begin:"0.3s",repeatCount:"indefinite"}),c("animate",{attributeName:"r",values:"1.5;2;1.5",dur:"1.5s",begin:"0.3s",repeatCount:"indefinite"})]),c("circle",{class:"fab-pulse",cx:"16",cy:"10",r:"1.5",fill:"rgba(107,44,145,0.5)"},[c("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"1.5s",begin:"0.6s",repeatCount:"indefinite"}),c("animate",{attributeName:"r",values:"1.5;2;1.5",dur:"1.5s",begin:"0.6s",repeatCount:"indefinite"})])],-1)])],32)),i(x,{name:"fade-blur"},{default:o(()=>[g.showLongPressOverlay?(s(),t("div",{key:0,class:"long-press-overlay",onPointerup:r[88]||(r[88]=(...e)=>m.cancelLongPressOverlay&&m.cancelLongPressOverlay(...e)),onClick:r[89]||(r[89]=(...e)=>m.cancelLongPressOverlay&&m.cancelLongPressOverlay(...e))},[c("div",Aa,[c("div",Ia,[(s(),t("svg",Ea,[r[225]||(r[225]=c("circle",{class:"ring-bg",cx:"50",cy:"50",r:"45"},null,-1)),c("circle",{class:"ring-progress",cx:"50",cy:"50",r:"45",style:M({strokeDashoffset:283*(1-(3-g.longPressCountdown)/3)})},null,4)])),c("div",La,d(g.longPressCountdown),1)]),r[226]||(r[226]=c("div",{class:"countdown-text"},"กำลังเข้าสู่ระบบ...",-1)),r[227]||(r[227]=c("div",{class:"countdown-hint"},"ปล่อยเพื่อยกเลิก",-1))])],32)):k("",!0)]),_:1}),i(x,{name:"tutorial-fade"},{default:o(()=>[g.showMenuTutorial?(s(),t("div",{key:0,class:"tutorial-overlay menu-tutorial",onClick:r[94]||(r[94]=A((...e)=>m.skipMenuTutorial&&m.skipMenuTutorial(...e),["self"]))},[r[234]||(r[234]=c("div",{class:"tutorial-backdrop"},null,-1)),g.menuTutorialTargetRect?(s(),t("div",{key:0,class:"tutorial-spotlight menu-spotlight",style:M(m.menuTutorialSpotlightStyle)},["menu-toggle"===m.currentMenuTutorialData.target?(s(),t("div",Da,[...r[228]||(r[228]=[c("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("rect",{x:"3",y:"4",width:"7",height:"7",rx:"1.5",stroke:"#8B4CB8","stroke-width":"2"}),c("rect",{x:"14",y:"4",width:"7",height:"7",rx:"1.5",stroke:"#8B4CB8","stroke-width":"2"}),c("rect",{x:"3",y:"13",width:"7",height:"7",rx:"1.5",stroke:"#8B4CB8","stroke-width":"2"}),c("rect",{x:"14",y:"13",width:"7",height:"7",rx:"1.5",stroke:"#8B4CB8","stroke-width":"2"})],-1)])])):k("",!0),"keyboard-toggle"===m.currentMenuTutorialData.target?(s(),t("div",$a,[...r[229]||(r[229]=[c("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("rect",{x:"2",y:"4",width:"20",height:"16",rx:"3",stroke:"#8B4CB8","stroke-width":"2"}),c("rect",{x:"5",y:"8",width:"2",height:"2",rx:"0.5",fill:"#8B4CB8"}),c("rect",{x:"9",y:"8",width:"2",height:"2",rx:"0.5",fill:"#8B4CB8"}),c("rect",{x:"13",y:"8",width:"2",height:"2",rx:"0.5",fill:"#8B4CB8"}),c("rect",{x:"17",y:"8",width:"2",height:"2",rx:"0.5",fill:"#8B4CB8"}),c("rect",{x:"7",y:"16",width:"10",height:"2",rx:"0.5",fill:"#8B4CB8"})],-1)])])):k("",!0),"menu-handle"===m.currentMenuTutorialData.target?(s(),t("div",Pa,[...r[230]||(r[230]=[c("div",{class:"handle-bar-clone"},null,-1)])])):k("",!0),"menu-grid"===m.currentMenuTutorialData.target?(s(),t("div",Ba,[...r[231]||(r[231]=[c("div",{class:"grid-item-clone"},null,-1),c("div",{class:"grid-item-clone"},null,-1)])])):k("",!0),"menu-back"===m.currentMenuTutorialData.target?(s(),t("div",Oa,[...r[232]||(r[232]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M15 18l-6-6 6-6",stroke:"#8B4CB8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),c("span",null,"ย้อนกลับ",-1)])])):k("",!0)],4)):k("",!0),c("div",{class:"tutorial-card menu-tutorial-card",style:M(m.menuTutorialCardStyle)},[c("div",Ha,[(s(!0),t(n,null,a(g.menuTutorialSteps.length,e=>(s(),t("span",{key:e,class:l(["step-dot",{active:e-1===g.menuTutorialStep,completed:e-1<g.menuTutorialStep}])},null,2))),128))]),c("div",Na,[c("div",Fa,d(m.currentMenuTutorialData.icon),1),c("h3",Ra,d(m.currentMenuTutorialData.title),1),c("p",za,d(m.currentMenuTutorialData.description),1)]),c("div",ja,[g.menuTutorialStep>0?(s(),t("button",{key:0,class:"tutorial-btn secondary",onClick:r[90]||(r[90]=(...e)=>m.prevMenuTutorialStep&&m.prevMenuTutorialStep(...e))}," ย้อนกลับ ")):k("",!0),g.menuTutorialStep<g.menuTutorialSteps.length-1?(s(),t("button",{key:1,class:"tutorial-btn primary",onClick:r[91]||(r[91]=(...e)=>m.nextMenuTutorialStep&&m.nextMenuTutorialStep(...e))}," ถัดไป ")):(s(),t("button",{key:2,class:"tutorial-btn primary",onClick:r[92]||(r[92]=(...e)=>m.completeMenuTutorial&&m.completeMenuTutorial(...e))}," เข้าใจแล้ว! ✨ "))]),c("button",{class:"tutorial-skip",onClick:r[93]||(r[93]=(...e)=>m.skipMenuTutorial&&m.skipMenuTutorial(...e))}," ข้าม ")],4),m.currentMenuTutorialData.showArrow&&g.menuTutorialTargetRect?(s(),t("div",{key:1,class:"tutorial-arrow menu-arrow",style:M(m.menuTutorialArrowStyle)},[...r[233]||(r[233]=[c("svg",{width:"40",height:"60",viewBox:"0 0 40 60"},[c("path",{d:"M20 0 L20 45 M10 35 L20 45 L30 35",stroke:"#8B4CB8","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],4)):k("",!0)])):k("",!0)]),_:1}),i(x,{name:"tutorial-fade"},{default:o(()=>[g.showFeedbackTutorial?(s(),t("div",{key:0,class:"tutorial-overlay",onClick:r[99]||(r[99]=A((...e)=>m.skipTutorial&&m.skipTutorial(...e),["self"]))},[r[238]||(r[238]=c("div",{class:"tutorial-backdrop"},null,-1)),c("div",{class:"tutorial-spotlight",style:M(m.tutorialSpotlightStyle)},["like"===m.currentTutorialData.target?(s(),t("div",Va,[...r[235]||(r[235]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3",stroke:"#007AFF",fill:"none","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):k("",!0),"dislike"===m.currentTutorialData.target?(s(),t("div",qa,[...r[236]||(r[236]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17",stroke:"#FF3B30",fill:"none","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):k("",!0)],4),c("div",{class:"tutorial-card",style:M(m.tutorialCardStyle)},[c("div",Ga,[(s(!0),t(n,null,a(g.tutorialSteps.length,e=>(s(),t("span",{key:e,class:l(["step-dot",{active:e-1===g.tutorialStep,completed:e-1<g.tutorialStep}])},null,2))),128))]),c("div",Wa,[c("div",Qa,d(m.currentTutorialData.icon),1),c("h3",Ua,d(m.currentTutorialData.title),1),c("p",Ka,d(m.currentTutorialData.description),1)]),c("div",Ya,[g.tutorialStep>0?(s(),t("button",{key:0,class:"tutorial-btn secondary",onClick:r[95]||(r[95]=(...e)=>m.prevTutorialStep&&m.prevTutorialStep(...e))}," ย้อนกลับ ")):k("",!0),g.tutorialStep<g.tutorialSteps.length-1?(s(),t("button",{key:1,class:"tutorial-btn primary",onClick:r[96]||(r[96]=(...e)=>m.nextTutorialStep&&m.nextTutorialStep(...e))}," ถัดไป ")):(s(),t("button",{key:2,class:"tutorial-btn primary",onClick:r[97]||(r[97]=(...e)=>m.completeTutorial&&m.completeTutorial(...e))}," เข้าใจแล้ว! ✨ "))]),c("button",{class:"tutorial-skip",onClick:r[98]||(r[98]=(...e)=>m.skipTutorial&&m.skipTutorial(...e))}," ข้าม ")],4),m.currentTutorialData.showArrow?(s(),t("div",{key:0,class:"tutorial-arrow",style:M(m.tutorialArrowStyle)},[...r[237]||(r[237]=[c("svg",{width:"40",height:"60",viewBox:"0 0 40 60"},[c("path",{d:"M20 0 L20 45 M10 35 L20 45 L30 35",stroke:"white","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],4)):k("",!0)])):k("",!0)]),_:1}),i(x,{name:"tutorial-fade"},{default:o(()=>[g.showGeminiTutorial?(s(),t("div",{key:0,class:"tutorial-overlay gemini-tutorial",onClick:r[104]||(r[104]=A((...e)=>m.skipGeminiTutorial&&m.skipGeminiTutorial(...e),["self"]))},[r[241]||(r[241]=c("div",{class:"tutorial-backdrop"},null,-1)),c("div",{class:"tutorial-spotlight",style:M(m.geminiTutorialSpotlightStyle)},["gemini-toggle"===m.currentGeminiTutorialData.target?(s(),t("div",Xa,[g.useGeminiMode?(s(),t("svg",Ja,[...r[240]||(r[240]=[c("path",{d:"M12 2L13.5 7.5L19 9L13.5 10.5L12 16L10.5 10.5L5 9L10.5 7.5L12 2Z",fill:"#4285F4"},null,-1),c("path",{d:"M18 14L19 17L22 18L19 19L18 22L17 19L14 18L17 17L18 14Z",fill:"#4285F4",opacity:"0.7"},null,-1)])])):(s(),t("svg",Za,[...r[239]||(r[239]=[c("circle",{cx:"11",cy:"11",r:"7",stroke:"#4285F4","stroke-width":"2"},null,-1),c("path",{d:"M16 16L20 20",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round"},null,-1)])]))])):k("",!0)],4),c("div",{class:"tutorial-card",style:M(m.geminiTutorialCardStyle)},[c("div",er,[(s(!0),t(n,null,a(g.geminiTutorialSteps.length,e=>(s(),t("span",{key:e,class:l(["step-dot",{active:e-1===g.geminiTutorialStep,completed:e-1<g.geminiTutorialStep}])},null,2))),128))]),c("div",tr,[c("div",sr,d(m.currentGeminiTutorialData.icon),1),c("h3",ir,d(m.currentGeminiTutorialData.title),1),c("p",or,d(m.currentGeminiTutorialData.description),1)]),c("div",nr,[g.geminiTutorialStep>0?(s(),t("button",{key:0,class:"tutorial-btn secondary",onClick:r[100]||(r[100]=(...e)=>m.prevGeminiTutorialStep&&m.prevGeminiTutorialStep(...e))}," ย้อนกลับ ")):k("",!0),g.geminiTutorialStep<g.geminiTutorialSteps.length-1?(s(),t("button",{key:1,class:"tutorial-btn primary",onClick:r[101]||(r[101]=(...e)=>m.nextGeminiTutorialStep&&m.nextGeminiTutorialStep(...e))}," ถัดไป ")):(s(),t("button",{key:2,class:"tutorial-btn primary",onClick:r[102]||(r[102]=(...e)=>m.completeGeminiTutorial&&m.completeGeminiTutorial(...e))}," เข้าใจแล้ว! ✨ "))]),c("button",{class:"tutorial-skip",onClick:r[103]||(r[103]=(...e)=>m.skipGeminiTutorial&&m.skipGeminiTutorial(...e))}," ข้าม ")],4)])):k("",!0)]),_:1}),i(x,{name:"tutorial-fade"},{default:o(()=>[g.showScrollTutorial?(s(),t("div",{key:0,class:"scroll-tutorial-overlay",onClick:r[106]||(r[106]=A((...e)=>m.dismissScrollTutorial&&m.dismissScrollTutorial(...e),["self"]))},[r[245]||(r[245]=c("div",{class:"tutorial-backdrop"},null,-1)),c("div",{class:"scroll-tutorial-spotlight",style:M(m.scrollTutorialSpotlightStyle)},[...r[242]||(r[242]=[c("div",{class:"spotlight-scroll-btn-clone"},[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M12 5V19M5 12l7 7 7-7",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])],4),c("div",{class:"scroll-tutorial-card",style:M(m.scrollTutorialCardStyle)},[r[243]||(r[243]=c("div",{class:"tutorial-content"},[c("div",{class:"tutorial-icon"},"⬇️"),c("h3",{class:"tutorial-title"},"เลื่อนลงด้านล่าง"),c("p",{class:"tutorial-description"},"กดปุ่มนี้เพื่อกลับไปดูข้อความล่าสุดและคำตอบจากบอทได้เลยค่ะ")],-1)),c("div",ar,[c("button",{class:"tutorial-btn primary",onClick:r[105]||(r[105]=(...e)=>m.dismissScrollTutorial&&m.dismissScrollTutorial(...e))}," เข้าใจแล้ว! ✨ ")])],4),c("div",{class:"scroll-tutorial-arrow-pointer",style:M(m.scrollTutorialArrowStyle)},[...r[244]||(r[244]=[c("svg",{width:"30",height:"50",viewBox:"0 0 30 50"},[c("path",{d:"M15 0 L15 40 M5 30 L15 40 L25 30",stroke:"white","stroke-width":"3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],4)])):k("",!0)]),_:1}),i(x,{name:"perf-warning"},{default:o(()=>[g.showPerfWarning?(s(),t("div",{key:0,class:"perf-warning-overlay",onClick:r[108]||(r[108]=A((...e)=>m.dismissPerfWarning&&m.dismissPerfWarning(...e),["self"]))},[c("div",rr,[r[248]||(r[248]=c("div",{class:"perf-warning-icon"},"⚡",-1)),c("div",lr,[c("h4",cr,d(g.perfWarningMessage),1),c("p",dr,d(g.perfWarningReason),1),r[246]||(r[246]=c("p",{class:"perf-warning-hint"},[f("คุณสามารถปรับกราฟิกได้ที่ปุ่ม "),c("span",{class:"dots-icon"},"⋯"),f(" ด้านบน")],-1))]),c("button",{class:"perf-warning-close",onClick:r[107]||(r[107]=(...e)=>m.dismissPerfWarning&&m.dismissPerfWarning(...e))},[...r[247]||(r[247]=[c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[c("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])])])):k("",!0)]),_:1}),i(x,{name:"apple-alert-fade"},{default:o(()=>[g.showAppleAlert?(s(),t("div",{key:0,class:"apple-alert-overlay",onClick:r[111]||(r[111]=A((...e)=>m.closeAppleAlert&&m.closeAppleAlert(...e),["self"]))},[c("div",ur,[c("div",hr,[r[257]||(r[257]=c("div",{class:"apple-alert-icon"},[c("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none"},[c("circle",{cx:"12",cy:"12",r:"10",stroke:"#FF9500","stroke-width":"2",fill:"none"}),c("path",{d:"M12 7v6M12 16v.5",stroke:"#FF9500","stroke-width":"2","stroke-linecap":"round"})])],-1)),r[258]||(r[258]=c("h3",{class:"apple-alert-title"},"ประสิทธิภาพของระบบลดลง",-1)),c("p",pr,[r[249]||(r[249]=f(" ระบบตรวจพบว่าอัตราเฟรม (FPS) อยู่ที่ ",-1)),c("strong",null,d(g.currentFps)+" fps",1),r[250]||(r[250]=f(" ซึ่งต่ำกว่ามาตรฐาน",-1)),r[251]||(r[251]=c("br",null,null,-1)),r[252]||(r[252]=f(" อาจส่งผลให้เครื่องทำงานช้า ร้อน หรือกระตุก",-1)),r[253]||(r[253]=c("br",null,null,-1)),r[254]||(r[254]=c("br",null,null,-1)),r[255]||(r[255]=c("strong",null,"แนะนำ:",-1)),r[256]||(r[256]=f(" ลดคุณภาพกราฟิกลง 1 ระดับเพื่อปรับปรุงประสิทธิภาพ ",-1))])]),c("div",gr,[c("button",{class:"apple-alert-btn apple-alert-btn-secondary",onClick:r[109]||(r[109]=(...e)=>m.closeAppleAlert&&m.closeAppleAlert(...e))}," ไม่เป็นไร "),c("button",{class:"apple-alert-btn apple-alert-btn-primary",onClick:r[110]||(r[110]=(...e)=>m.reduceGraphicsFromAlert&&m.reduceGraphicsFromAlert(...e))}," ลดคุณภาพกราฟิก ")])])])):k("",!0)]),_:1}),i(v,{visible:g.showHelpModal,onClose:m.closeHelpModal},null,8,["visible","onClose"]),i(b)],2)}],["__scopeId","data-v-f044e202"]]),fr=e(0),wr=e(0);function vr(){return{rotateX:fr,rotateY:wr}}const br={class:"overflow-hidden"},yr={class:"bg-c vh-100 px-xl-c pt-xl-c vh-100 overflow-hidden justify-content-center align-items-center row"},kr={class:"col-xl-12 col-xxl-8"},xr={class:"card-c px-5 pe-xl-5 row rounded-top-0 overflow-auto overflow-hidden-lg rounded-top-5 justify-content-center align-items-lg-center bg-light vh-100","data-aos":"fade-in","data-aos-duration":"600"},Tr={class:"col-lg-6 col-xl-6 col-xl-4 pt-5 mt-5 pt-lg-0 mt-lg-0"},Cr={class:"logo-section d-flex justify-content-center align-items-center mb-lg-5 pb-lg-5"},_r={class:"col-lg-6 col-xl-6 pe-xl-5"},Sr={__name:"AuthLayout",setup(n){const{rotateX:a,rotateY:l}=vr(),{isDragging:d,handleMouseDown:u,handleTouchStart:h}=function(){const{rotateX:t,rotateY:s}=vr(),i=e(!1),o=e(0),n=e(0),a=e(0),r=e(0),l=e(null);function c(e){i.value&&(p(e.clientX-o.value,e.clientY-n.value),o.value=e.clientX,n.value=e.clientY)}function d(){i.value=!1,window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),m()}function u(e){if(!i.value)return;e.cancelable&&e.preventDefault();const t=e.touches[0];p(t.clientX-o.value,t.clientY-n.value),o.value=t.clientX,n.value=t.clientY}function h(){i.value=!1,window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h),m()}function p(e,i){a.value=.7*a.value+.3*e*2.18,r.value=.7*r.value+.3*i*2.18,s.value+=e,t.value-=i}function m(){if(!i.value){const e=.96,i=.118;Math.abs(a.value)>.1||Math.abs(r.value)>.1?(s.value+=a.value,t.value-=r.value,a.value*=e,r.value*=e):s.value+=i}l.value=requestAnimationFrame(m)}return g(()=>m()),B(()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",h),l.value&&cancelAnimationFrame(l.value)}),{isDragging:i,handleMouseDown:function(e){l.value&&(cancelAnimationFrame(l.value),l.value=null),i.value=!0,o.value=e.clientX,n.value=e.clientY,a.value=0,r.value=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},handleTouchStart:function(e){l.value&&(cancelAnimationFrame(l.value),l.value=null),i.value=!0;const t=e.touches[0];o.value=t.clientX,n.value=t.clientY,a.value=0,r.value=0,window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("touchend",h)}}}();return(e,n)=>{const p=L("router-view");return s(),t("div",br,[c("div",yr,[c("div",kr,[c("div",xr,[c("div",Tr,[c("div",Cr,[c("img",{src:Ot,alt:"Phetchabun Rajabhat University Logo",class:"logo-img",style:M({transform:`perspective(1000px) rotateX(${r(a)}deg) rotateY(${r(l)}deg)`,cursor:r(d)?"grabbing":"grab"}),onMousedown:n[0]||(n[0]=A((...e)=>r(u)&&r(u)(...e),["prevent"])),onTouchstart:n[1]||(n[1]=A((...e)=>r(h)&&r(h)(...e),["prevent"]))},null,36)])]),c("div",_r,[i(p,null,{default:o(({Component:e})=>[i(x,{name:"form-fade",mode:"out-in"},{default:o(()=>[(s(),y($(e)))]),_:2},1024)]),_:1})])])])])])}}};var Mr="top",Ar="bottom",Ir="right",Er="left",Lr="auto",Dr=[Mr,Ar,Ir,Er],$r="start",Pr="end",Br="clippingParents",Or="viewport",Hr="popper",Nr="reference",Fr=Dr.reduce(function(e,t){return e.concat([t+"-"+$r,t+"-"+Pr])},[]),Rr=[].concat(Dr,[Lr]).reduce(function(e,t){return e.concat([t,t+"-"+$r,t+"-"+Pr])},[]),zr="beforeRead",jr="read",Vr="afterRead",qr="beforeMain",Gr="main",Wr="afterMain",Qr="beforeWrite",Ur="write",Kr="afterWrite",Yr=[zr,jr,Vr,qr,Gr,Wr,Qr,Ur,Kr];function Xr(e){return e?(e.nodeName||"").toLowerCase():null}function Zr(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Jr(e){return e instanceof Zr(e).Element||e instanceof Element}function el(e){return e instanceof Zr(e).HTMLElement||e instanceof HTMLElement}function tl(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Zr(e).ShadowRoot||e instanceof ShadowRoot)}const sl={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},i=t.attributes[e]||{},o=t.elements[e];el(o)&&Xr(o)&&(Object.assign(o.style,s),Object.keys(i).forEach(function(e){var t=i[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,s={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,s.popper),t.styles=s,t.elements.arrow&&Object.assign(t.elements.arrow.style,s.arrow),function(){Object.keys(t.elements).forEach(function(e){var i=t.elements[e],o=t.attributes[e]||{},n=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:s[e]).reduce(function(e,t){return e[t]="",e},{});el(i)&&Xr(i)&&(Object.assign(i.style,n),Object.keys(o).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]};function il(e){return e.split("-")[0]}var ol=Math.max,nl=Math.min,al=Math.round;function rl(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ll(){return!/^((?!chrome|android).)*safari/i.test(rl())}function cl(e,t,s){void 0===t&&(t=!1),void 0===s&&(s=!1);var i=e.getBoundingClientRect(),o=1,n=1;t&&el(e)&&(o=e.offsetWidth>0&&al(i.width)/e.offsetWidth||1,n=e.offsetHeight>0&&al(i.height)/e.offsetHeight||1);var a=(Jr(e)?Zr(e):window).visualViewport,r=!ll()&&s,l=(i.left+(r&&a?a.offsetLeft:0))/o,c=(i.top+(r&&a?a.offsetTop:0))/n,d=i.width/o,u=i.height/n;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function dl(e){var t=cl(e),s=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:i}}function ul(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&tl(s)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function hl(e){return Zr(e).getComputedStyle(e)}function pl(e){return["table","td","th"].indexOf(Xr(e))>=0}function gl(e){return((Jr(e)?e.ownerDocument:e.document)||window.document).documentElement}function ml(e){return"html"===Xr(e)?e:e.assignedSlot||e.parentNode||(tl(e)?e.host:null)||gl(e)}function fl(e){return el(e)&&"fixed"!==hl(e).position?e.offsetParent:null}function wl(e){for(var t=Zr(e),s=fl(e);s&&pl(s)&&"static"===hl(s).position;)s=fl(s);return s&&("html"===Xr(s)||"body"===Xr(s)&&"static"===hl(s).position)?t:s||function(e){var t=/firefox/i.test(rl());if(/Trident/i.test(rl())&&el(e)&&"fixed"===hl(e).position)return null;var s=ml(e);for(tl(s)&&(s=s.host);el(s)&&["html","body"].indexOf(Xr(s))<0;){var i=hl(s);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return s;s=s.parentNode}return null}(e)||t}function vl(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function bl(e,t,s){return ol(e,nl(t,s))}function yl(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function kl(e,t){return t.reduce(function(t,s){return t[s]=e,t},{})}const xl={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,s=e.state,i=e.name,o=e.options,n=s.elements.arrow,a=s.modifiersData.popperOffsets,r=il(s.placement),l=vl(r),c=[Er,Ir].indexOf(r)>=0?"height":"width";if(n&&a){var d=function(e,t){return yl("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:kl(e,Dr))}(o.padding,s),u=dl(n),h="y"===l?Mr:Er,p="y"===l?Ar:Ir,g=s.rects.reference[c]+s.rects.reference[l]-a[l]-s.rects.popper[c],m=a[l]-s.rects.reference[l],f=wl(n),w=f?"y"===l?f.clientHeight||0:f.clientWidth||0:0,v=g/2-m/2,b=d[h],y=w-u[c]-d[p],k=w/2-u[c]/2+v,x=bl(b,k,y),T=l;s.modifiersData[i]=((t={})[T]=x,t.centerOffset=x-k,t)}},effect:function(e){var t=e.state,s=e.options.element,i=void 0===s?"[data-popper-arrow]":s;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&ul(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tl(e){return e.split("-")[1]}var Cl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _l(e){var t,s=e.popper,i=e.popperRect,o=e.placement,n=e.variation,a=e.offsets,r=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=a.x,p=void 0===h?0:h,g=a.y,m=void 0===g?0:g,f="function"==typeof d?d({x:p,y:m}):{x:p,y:m};p=f.x,m=f.y;var w=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),b=Er,y=Mr,k=window;if(c){var x=wl(s),T="clientHeight",C="clientWidth";if(x===Zr(s)&&"static"!==hl(x=gl(s)).position&&"absolute"===r&&(T="scrollHeight",C="scrollWidth"),o===Mr||(o===Er||o===Ir)&&n===Pr)y=Ar,m-=(u&&x===k&&k.visualViewport?k.visualViewport.height:x[T])-i.height,m*=l?1:-1;if(o===Er||(o===Mr||o===Ar)&&n===Pr)b=Ir,p-=(u&&x===k&&k.visualViewport?k.visualViewport.width:x[C])-i.width,p*=l?1:-1}var _,S=Object.assign({position:r},c&&Cl),M=!0===d?function(e,t){var s=e.x,i=e.y,o=t.devicePixelRatio||1;return{x:al(s*o)/o||0,y:al(i*o)/o||0}}({x:p,y:m},Zr(s)):{x:p,y:m};return p=M.x,m=M.y,l?Object.assign({},S,((_={})[y]=v?"0":"",_[b]=w?"0":"",_.transform=(k.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",_)):Object.assign({},S,((t={})[y]=v?m+"px":"",t[b]=w?p+"px":"",t.transform="",t))}const Sl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,s=e.options,i=s.gpuAcceleration,o=void 0===i||i,n=s.adaptive,a=void 0===n||n,r=s.roundOffsets,l=void 0===r||r,c={placement:il(t.placement),variation:Tl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,_l(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,_l(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Ml={passive:!0};const Al={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,s=e.instance,i=e.options,o=i.scroll,n=void 0===o||o,a=i.resize,r=void 0===a||a,l=Zr(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&c.forEach(function(e){e.addEventListener("scroll",s.update,Ml)}),r&&l.addEventListener("resize",s.update,Ml),function(){n&&c.forEach(function(e){e.removeEventListener("scroll",s.update,Ml)}),r&&l.removeEventListener("resize",s.update,Ml)}},data:{}};var Il={left:"right",right:"left",bottom:"top",top:"bottom"};function El(e){return e.replace(/left|right|bottom|top/g,function(e){return Il[e]})}var Ll={start:"end",end:"start"};function Dl(e){return e.replace(/start|end/g,function(e){return Ll[e]})}function $l(e){var t=Zr(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Pl(e){return cl(gl(e)).left+$l(e).scrollLeft}function Bl(e){var t=hl(e),s=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+o+i)}function Ol(e){return["html","body","#document"].indexOf(Xr(e))>=0?e.ownerDocument.body:el(e)&&Bl(e)?e:Ol(ml(e))}function Hl(e,t){var s;void 0===t&&(t=[]);var i=Ol(e),o=i===(null==(s=e.ownerDocument)?void 0:s.body),n=Zr(i),a=o?[n].concat(n.visualViewport||[],Bl(i)?i:[]):i,r=t.concat(a);return o?r:r.concat(Hl(ml(a)))}function Nl(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Fl(e,t,s){return t===Or?Nl(function(e,t){var s=Zr(e),i=gl(e),o=s.visualViewport,n=i.clientWidth,a=i.clientHeight,r=0,l=0;if(o){n=o.width,a=o.height;var c=ll();(c||!c&&"fixed"===t)&&(r=o.offsetLeft,l=o.offsetTop)}return{width:n,height:a,x:r+Pl(e),y:l}}(e,s)):Jr(t)?function(e,t){var s=cl(e,!1,"fixed"===t);return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}(t,s):Nl(function(e){var t,s=gl(e),i=$l(e),o=null==(t=e.ownerDocument)?void 0:t.body,n=ol(s.scrollWidth,s.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=ol(s.scrollHeight,s.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),r=-i.scrollLeft+Pl(e),l=-i.scrollTop;return"rtl"===hl(o||s).direction&&(r+=ol(s.clientWidth,o?o.clientWidth:0)-n),{width:n,height:a,x:r,y:l}}(gl(e)))}function Rl(e,t,s,i){var o="clippingParents"===t?function(e){var t=Hl(ml(e)),s=["absolute","fixed"].indexOf(hl(e).position)>=0&&el(e)?wl(e):e;return Jr(s)?t.filter(function(e){return Jr(e)&&ul(e,s)&&"body"!==Xr(e)}):[]}(e):[].concat(t),n=[].concat(o,[s]),a=n[0],r=n.reduce(function(t,s){var o=Fl(e,s,i);return t.top=ol(o.top,t.top),t.right=nl(o.right,t.right),t.bottom=nl(o.bottom,t.bottom),t.left=ol(o.left,t.left),t},Fl(e,a,i));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function zl(e){var t,s=e.reference,i=e.element,o=e.placement,n=o?il(o):null,a=o?Tl(o):null,r=s.x+s.width/2-i.width/2,l=s.y+s.height/2-i.height/2;switch(n){case Mr:t={x:r,y:s.y-i.height};break;case Ar:t={x:r,y:s.y+s.height};break;case Ir:t={x:s.x+s.width,y:l};break;case Er:t={x:s.x-i.width,y:l};break;default:t={x:s.x,y:s.y}}var c=n?vl(n):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case $r:t[c]=t[c]-(s[d]/2-i[d]/2);break;case Pr:t[c]=t[c]+(s[d]/2-i[d]/2)}}return t}function jl(e,t){void 0===t&&(t={});var s=t,i=s.placement,o=void 0===i?e.placement:i,n=s.strategy,a=void 0===n?e.strategy:n,r=s.boundary,l=void 0===r?Br:r,c=s.rootBoundary,d=void 0===c?Or:c,u=s.elementContext,h=void 0===u?Hr:u,p=s.altBoundary,g=void 0!==p&&p,m=s.padding,f=void 0===m?0:m,w=yl("number"!=typeof f?f:kl(f,Dr)),v=h===Hr?Nr:Hr,b=e.rects.popper,y=e.elements[g?v:h],k=Rl(Jr(y)?y:y.contextElement||gl(e.elements.popper),l,d,a),x=cl(e.elements.reference),T=zl({reference:x,element:b,placement:o}),C=Nl(Object.assign({},b,T)),_=h===Hr?C:x,S={top:k.top-_.top+w.top,bottom:_.bottom-k.bottom+w.bottom,left:k.left-_.left+w.left,right:_.right-k.right+w.right},M=e.modifiersData.offset;if(h===Hr&&M){var A=M[o];Object.keys(S).forEach(function(e){var t=[Ir,Ar].indexOf(e)>=0?1:-1,s=[Mr,Ar].indexOf(e)>=0?"y":"x";S[e]+=A[s]*t})}return S}const Vl={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=s.mainAxis,n=void 0===o||o,a=s.altAxis,r=void 0===a||a,l=s.fallbackPlacements,c=s.padding,d=s.boundary,u=s.rootBoundary,h=s.altBoundary,p=s.flipVariations,g=void 0===p||p,m=s.allowedAutoPlacements,f=t.options.placement,w=il(f),v=l||(w===f||!g?[El(f)]:function(e){if(il(e)===Lr)return[];var t=El(e);return[Dl(e),t,Dl(t)]}(f)),b=[f].concat(v).reduce(function(e,s){return e.concat(il(s)===Lr?function(e,t){void 0===t&&(t={});var s=t,i=s.placement,o=s.boundary,n=s.rootBoundary,a=s.padding,r=s.flipVariations,l=s.allowedAutoPlacements,c=void 0===l?Rr:l,d=Tl(i),u=d?r?Fr:Fr.filter(function(e){return Tl(e)===d}):Dr,h=u.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=u);var p=h.reduce(function(t,s){return t[s]=jl(e,{placement:s,boundary:o,rootBoundary:n,padding:a})[il(s)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}(t,{placement:s,boundary:d,rootBoundary:u,padding:c,flipVariations:g,allowedAutoPlacements:m}):s)},[]),y=t.rects.reference,k=t.rects.popper,x=new Map,T=!0,C=b[0],_=0;_<b.length;_++){var S=b[_],M=il(S),A=Tl(S)===$r,I=[Mr,Ar].indexOf(M)>=0,E=I?"width":"height",L=jl(t,{placement:S,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),D=I?A?Ir:Er:A?Ar:Mr;y[E]>k[E]&&(D=El(D));var $=El(D),P=[];if(n&&P.push(L[M]<=0),r&&P.push(L[D]<=0,L[$]<=0),P.every(function(e){return e})){C=S,T=!1;break}x.set(S,P)}if(T)for(var B=function(e){var t=b.find(function(t){var s=x.get(t);if(s)return s.slice(0,e).every(function(e){return e})});if(t)return C=t,"break"},O=g?3:1;O>0;O--){if("break"===B(O))break}t.placement!==C&&(t.modifiersData[i]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ql(e,t,s){return void 0===s&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function Gl(e){return[Mr,Ir,Ar,Er].some(function(t){return e[t]>=0})}const Wl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,s=e.name,i=t.rects.reference,o=t.rects.popper,n=t.modifiersData.preventOverflow,a=jl(t,{elementContext:"reference"}),r=jl(t,{altBoundary:!0}),l=ql(a,i),c=ql(r,o,n),d=Gl(l),u=Gl(c);t.modifiersData[s]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}};const Ql={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,s=e.options,i=e.name,o=s.offset,n=void 0===o?[0,0]:o,a=Rr.reduce(function(e,s){return e[s]=function(e,t,s){var i=il(e),o=[Er,Mr].indexOf(i)>=0?-1:1,n="function"==typeof s?s(Object.assign({},t,{placement:e})):s,a=n[0],r=n[1];return a=a||0,r=(r||0)*o,[Er,Ir].indexOf(i)>=0?{x:r,y:a}:{x:a,y:r}}(s,t.rects,n),e},{}),r=a[t.placement],l=r.x,c=r.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=a}};const Ul={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,s=e.name;t.modifiersData[s]=zl({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}};const Kl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,s=e.options,i=e.name,o=s.mainAxis,n=void 0===o||o,a=s.altAxis,r=void 0!==a&&a,l=s.boundary,c=s.rootBoundary,d=s.altBoundary,u=s.padding,h=s.tether,p=void 0===h||h,g=s.tetherOffset,m=void 0===g?0:g,f=jl(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),w=il(t.placement),v=Tl(t.placement),b=!v,y=vl(w),k="x"===y?"y":"x",x=t.modifiersData.popperOffsets,T=t.rects.reference,C=t.rects.popper,_="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,S="number"==typeof _?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(x){if(n){var I,E="y"===y?Mr:Er,L="y"===y?Ar:Ir,D="y"===y?"height":"width",$=x[y],P=$+f[E],B=$-f[L],O=p?-C[D]/2:0,H=v===$r?T[D]:C[D],N=v===$r?-C[D]:-T[D],F=t.elements.arrow,R=p&&F?dl(F):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=z[E],V=z[L],q=bl(0,T[D],R[D]),G=b?T[D]/2-O-q-j-S.mainAxis:H-q-j-S.mainAxis,W=b?-T[D]/2+O+q+V+S.mainAxis:N+q+V+S.mainAxis,Q=t.elements.arrow&&wl(t.elements.arrow),U=Q?"y"===y?Q.clientTop||0:Q.clientLeft||0:0,K=null!=(I=null==M?void 0:M[y])?I:0,Y=$+W-K,X=bl(p?nl(P,$+G-K-U):P,$,p?ol(B,Y):B);x[y]=X,A[y]=X-$}if(r){var Z,J="x"===y?Mr:Er,ee="x"===y?Ar:Ir,te=x[k],se="y"===k?"height":"width",ie=te+f[J],oe=te-f[ee],ne=-1!==[Mr,Er].indexOf(w),ae=null!=(Z=null==M?void 0:M[k])?Z:0,re=ne?ie:te-T[se]-C[se]-ae+S.altAxis,le=ne?te+T[se]+C[se]-ae-S.altAxis:oe,ce=p&&ne?(ue=bl(re,te,de=le))>de?de:ue:bl(p?re:ie,te,p?le:oe);x[k]=ce,A[k]=ce-te}var de,ue;t.modifiersData[i]=A}},requiresIfExists:["offset"]};function Yl(e,t,s){void 0===s&&(s=!1);var i,o,n=el(t),a=el(t)&&function(e){var t=e.getBoundingClientRect(),s=al(t.width)/e.offsetWidth||1,i=al(t.height)/e.offsetHeight||1;return 1!==s||1!==i}(t),r=gl(t),l=cl(e,a,s),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!s)&&(("body"!==Xr(t)||Bl(r))&&(c=(i=t)!==Zr(i)&&el(i)?{scrollLeft:(o=i).scrollLeft,scrollTop:o.scrollTop}:$l(i)),el(t)?((d=cl(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):r&&(d.x=Pl(r))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Xl(e){var t=new Map,s=new Set,i=[];function o(e){s.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!s.has(e)){var i=t.get(e);i&&o(i)}}),i.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){s.has(e.name)||o(e)}),i}var Zl={placement:"bottom",modifiers:[],strategy:"absolute"};function Jl(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function ec(e){void 0===e&&(e={});var t=e,s=t.defaultModifiers,i=void 0===s?[]:s,o=t.defaultOptions,n=void 0===o?Zl:o;return function(e,t,s){void 0===s&&(s=n);var o,a,r={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zl,n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:r,setOptions:function(s){var o="function"==typeof s?s(r.options):s;u(),r.options=Object.assign({},n,r.options,o),r.scrollParents={reference:Jr(e)?Hl(e):e.contextElement?Hl(e.contextElement):[],popper:Hl(t)};var a,c,h=function(e){var t=Xl(e);return Yr.reduce(function(e,s){return e.concat(t.filter(function(e){return e.phase===s}))},[])}((a=[].concat(i,r.options.modifiers),c=a.reduce(function(e,t){var s=e[t.name];return e[t.name]=s?Object.assign({},s,t,{options:Object.assign({},s.options,t.options),data:Object.assign({},s.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return r.orderedModifiers=h.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,s=e.options,i=void 0===s?{}:s,o=e.effect;if("function"==typeof o){var n=o({state:r,name:t,instance:d,options:i}),a=function(){};l.push(n||a)}}),d.update()},forceUpdate:function(){if(!c){var e=r.elements,t=e.reference,s=e.popper;if(Jl(t,s)){r.rects={reference:Yl(t,wl(s),"fixed"===r.options.strategy),popper:dl(s)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],n=o.fn,a=o.options,l=void 0===a?{}:a,u=o.name;"function"==typeof n&&(r=n({state:r,options:l,name:u,instance:d})||r)}else r.reset=!1,i=-1}}},update:(o=function(){return new Promise(function(e){d.forceUpdate(),e(r)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(o())})})),a}),destroy:function(){u(),c=!0}};if(!Jl(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(s).then(function(e){!c&&s.onFirstUpdate&&s.onFirstUpdate(e)}),d}}var tc=ec(),sc=ec({defaultModifiers:[Al,Ul,Sl,sl]}),ic=ec({defaultModifiers:[Al,Ul,Sl,sl,Ql,Vl,Kl,xl,Wl]});const oc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Wr,afterRead:Vr,afterWrite:Kr,applyStyles:sl,arrow:xl,auto:Lr,basePlacements:Dr,beforeMain:qr,beforeRead:zr,beforeWrite:Qr,bottom:Ar,clippingParents:Br,computeStyles:Sl,createPopper:ic,createPopperBase:tc,createPopperLite:sc,detectOverflow:jl,end:Pr,eventListeners:Al,flip:Vl,hide:Wl,left:Er,main:Gr,modifierPhases:Yr,offset:Ql,placements:Rr,popper:Hr,popperGenerator:ec,popperOffsets:Ul,preventOverflow:Kl,read:jr,reference:Nr,right:Ir,start:$r,top:Mr,variationPlacements:Fr,viewport:Or,write:Ur},Symbol.toStringTag,{value:"Module"})),nc=new Map,ac={set(e,t,s){nc.has(e)||nc.set(e,new Map);const i=nc.get(e);(i.has(t)||0===i.size)&&i.set(t,s)},get:(e,t)=>nc.has(e)&&nc.get(e).get(t)||null,remove(e,t){if(!nc.has(e))return;const s=nc.get(e);s.delete(t),0===s.size&&nc.delete(e)}},rc="transitionend",lc=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),cc=e=>null==e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),dc=e=>{e.dispatchEvent(new Event(rc))},uc=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),hc=e=>uc(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(lc(e)):null,pc=e=>{if(!uc(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),s=e.closest("details:not([open])");if(!s)return t;if(s!==e){const t=e.closest("summary");if(t&&t.parentNode!==s)return!1;if(null===t)return!1}return t},gc=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),mc=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?mc(e.parentNode):null},fc=()=>{},wc=e=>{e.offsetHeight},vc=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,bc=[],yc=()=>"rtl"===document.documentElement.dir,kc=e=>{var t;t=()=>{const t=vc();if(t){const s=e.NAME,i=t.fn[s];t.fn[s]=e.jQueryInterface,t.fn[s].Constructor=e,t.fn[s].noConflict=()=>(t.fn[s]=i,e.jQueryInterface)}},"loading"===document.readyState?(bc.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of bc)e()}),bc.push(t)):t()},xc=(e,t=[],s=e)=>"function"==typeof e?e.call(...t):s,Tc=(e,t,s=!0)=>{if(!s)return void xc(e);const i=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:s}=window.getComputedStyle(e);const i=Number.parseFloat(t),o=Number.parseFloat(s);return i||o?(t=t.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(s))):0})(t)+5;let o=!1;const n=({target:s})=>{s===t&&(o=!0,t.removeEventListener(rc,n),xc(e))};t.addEventListener(rc,n),setTimeout(()=>{o||dc(t)},i)},Cc=(e,t,s,i)=>{const o=e.length;let n=e.indexOf(t);return-1===n?!s&&i?e[o-1]:e[0]:(n+=s?1:-1,i&&(n=(n+o)%o),e[Math.max(0,Math.min(n,o-1))])},_c=/[^.]*(?=\..*)\.|.*/,Sc=/\..*/,Mc=/::\d+$/,Ac={};let Ic=1;const Ec={mouseenter:"mouseover",mouseleave:"mouseout"},Lc=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Dc(e,t){return t&&`${t}::${Ic++}`||e.uidEvent||Ic++}function $c(e){const t=Dc(e);return e.uidEvent=t,Ac[t]=Ac[t]||{},Ac[t]}function Pc(e,t,s=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===s)}function Bc(e,t,s){const i="string"==typeof t,o=i?s:t||s;let n=Fc(e);return Lc.has(n)||(n=e),[i,o,n]}function Oc(e,t,s,i,o){if("string"!=typeof t||!e)return;let[n,a,r]=Bc(t,s,i);if(t in Ec){a=(e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)})(a)}const l=$c(e),c=l[r]||(l[r]={}),d=Pc(c,a,n?s:null);if(d)return void(d.oneOff=d.oneOff&&o);const u=Dc(a,t.replace(_c,"")),h=n?function(e,t,s){return function i(o){const n=e.querySelectorAll(t);for(let{target:a}=o;a&&a!==this;a=a.parentNode)for(const r of n)if(r===a)return zc(o,{delegateTarget:a}),i.oneOff&&Rc.off(e,o.type,t,s),s.apply(a,[o])}}(e,s,a):function(e,t){return function s(i){return zc(i,{delegateTarget:e}),s.oneOff&&Rc.off(e,i.type,t),t.apply(e,[i])}}(e,a);h.delegationSelector=n?s:null,h.callable=a,h.oneOff=o,h.uidEvent=u,c[u]=h,e.addEventListener(r,h,n)}function Hc(e,t,s,i,o){const n=Pc(t[s],i,o);n&&(e.removeEventListener(s,n,Boolean(o)),delete t[s][n.uidEvent])}function Nc(e,t,s,i){const o=t[s]||{};for(const[n,a]of Object.entries(o))n.includes(i)&&Hc(e,t,s,a.callable,a.delegationSelector)}function Fc(e){return e=e.replace(Sc,""),Ec[e]||e}const Rc={on(e,t,s,i){Oc(e,t,s,i,!1)},one(e,t,s,i){Oc(e,t,s,i,!0)},off(e,t,s,i){if("string"!=typeof t||!e)return;const[o,n,a]=Bc(t,s,i),r=a!==t,l=$c(e),c=l[a]||{},d=t.startsWith(".");if(void 0===n){if(d)for(const s of Object.keys(l))Nc(e,l,s,t.slice(1));for(const[s,i]of Object.entries(c)){const o=s.replace(Mc,"");r&&!t.includes(o)||Hc(e,l,a,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;Hc(e,l,a,n,o?s:null)}},trigger(e,t,s){if("string"!=typeof t||!e)return null;const i=vc();let o=null,n=!0,a=!0,r=!1;t!==Fc(t)&&i&&(o=i.Event(t,s),i(e).trigger(o),n=!o.isPropagationStopped(),a=!o.isImmediatePropagationStopped(),r=o.isDefaultPrevented());const l=zc(new Event(t,{bubbles:n,cancelable:!0}),s);return r&&l.preventDefault(),a&&e.dispatchEvent(l),l.defaultPrevented&&o&&o.preventDefault(),l}};function zc(e,t={}){for(const[i,o]of Object.entries(t))try{e[i]=o}catch(s){Object.defineProperty(e,i,{configurable:!0,get:()=>o})}return e}function jc(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function Vc(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const qc={setDataAttribute(e,t,s){e.setAttribute(`data-bs-${Vc(t)}`,s)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${Vc(t)}`)},getDataAttributes(e){if(!e)return{};const t={},s=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const i of s){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1),t[s]=jc(e.dataset[i])}return t},getDataAttribute:(e,t)=>jc(e.getAttribute(`data-bs-${Vc(t)}`))};class Gc{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const s=uc(t)?qc.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof s?s:{},...uc(t)?qc.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,i]of Object.entries(t)){const t=e[s],o=uc(t)?"element":cc(t);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${i}".`)}}}class Wc extends Gc{constructor(e,t){super(),(e=hc(e))&&(this._element=e,this._config=this._getConfig(t),ac.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ac.remove(this._element,this.constructor.DATA_KEY),Rc.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,s=!0){Tc(e,t,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return ac.get(hc(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Qc=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&"#"!==s?s.trim():null}return t?t.split(",").map(e=>lc(e)).join(","):null},Uc={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const s=[];let i=e.parentNode.closest(t);for(;i;)s.push(i),i=i.parentNode.closest(t);return s},prev(e,t){let s=e.previousElementSibling;for(;s;){if(s.matches(t))return[s];s=s.previousElementSibling}return[]},next(e,t){let s=e.nextElementSibling;for(;s;){if(s.matches(t))return[s];s=s.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!gc(e)&&pc(e))},getSelectorFromElement(e){const t=Qc(e);return t&&Uc.findOne(t)?t:null},getElementFromSelector(e){const t=Qc(e);return t?Uc.findOne(t):null},getMultipleElementsFromSelector(e){const t=Qc(e);return t?Uc.find(t):[]}},Kc=(e,t="hide")=>{const s=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;Rc.on(document,s,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),gc(this))return;const o=Uc.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(o)[t]()})},Yc=".bs.alert",Xc=`close${Yc}`,Zc=`closed${Yc}`;class Jc extends Wc{static get NAME(){return"alert"}close(){if(Rc.trigger(this._element,Xc).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),Rc.trigger(this._element,Zc),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=Jc.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Kc(Jc,"close"),kc(Jc);const ed='[data-bs-toggle="button"]';class td extends Wc{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=td.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}Rc.on(document,"click.bs.button.data-api",ed,e=>{e.preventDefault();const t=e.target.closest(ed);td.getOrCreateInstance(t).toggle()}),kc(td);const sd=".bs.swipe",id=`touchstart${sd}`,od=`touchmove${sd}`,nd=`touchend${sd}`,ad=`pointerdown${sd}`,rd=`pointerup${sd}`,ld={endCallback:null,leftCallback:null,rightCallback:null},cd={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class dd extends Gc{constructor(e,t){super(),this._element=e,e&&dd.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ld}static get DefaultType(){return cd}static get NAME(){return"swipe"}dispose(){Rc.off(this._element,sd)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),xc(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&xc(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Rc.on(this._element,ad,e=>this._start(e)),Rc.on(this._element,rd,e=>this._end(e)),this._element.classList.add("pointer-event")):(Rc.on(this._element,id,e=>this._start(e)),Rc.on(this._element,od,e=>this._move(e)),Rc.on(this._element,nd,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ud=".bs.carousel",hd=".data-api",pd="ArrowLeft",gd="ArrowRight",md="next",fd="prev",wd="left",vd="right",bd=`slide${ud}`,yd=`slid${ud}`,kd=`keydown${ud}`,xd=`mouseenter${ud}`,Td=`mouseleave${ud}`,Cd=`dragstart${ud}`,_d=`load${ud}${hd}`,Sd=`click${ud}${hd}`,Md="carousel",Ad="active",Id=".active",Ed=".carousel-item",Ld=Id+Ed,Dd={[pd]:vd,[gd]:wd},$d={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Pd={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Bd extends Wc{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Uc.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Md&&this.cycle()}static get Default(){return $d}static get DefaultType(){return Pd}static get NAME(){return"carousel"}next(){this._slide(md)}nextWhenVisible(){!document.hidden&&pc(this._element)&&this.next()}prev(){this._slide(fd)}pause(){this._isSliding&&dc(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Rc.one(this._element,yd,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void Rc.one(this._element,yd,()=>this.to(e));const s=this._getItemIndex(this._getActive());if(s===e)return;const i=e>s?md:fd;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&Rc.on(this._element,kd,e=>this._keydown(e)),"hover"===this._config.pause&&(Rc.on(this._element,xd,()=>this.pause()),Rc.on(this._element,Td,()=>this._maybeEnableCycle())),this._config.touch&&dd.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of Uc.find(".carousel-item img",this._element))Rc.on(t,Cd,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(wd)),rightCallback:()=>this._slide(this._directionToOrder(vd)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new dd(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Dd[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=Uc.findOne(Id,this._indicatorsElement);t.classList.remove(Ad),t.removeAttribute("aria-current");const s=Uc.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(Ad),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const s=this._getActive(),i=e===md,o=t||Cc(this._getItems(),s,i,this._config.wrap);if(o===s)return;const n=this._getItemIndex(o),a=t=>Rc.trigger(this._element,t,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:n});if(a(bd).defaultPrevented)return;if(!s||!o)return;const r=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(n),this._activeElement=o;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";o.classList.add(c),wc(o),s.classList.add(l),o.classList.add(l);this._queueCallback(()=>{o.classList.remove(l,c),o.classList.add(Ad),s.classList.remove(Ad,c,l),this._isSliding=!1,a(yd)},s,this._isAnimated()),r&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Uc.findOne(Ld,this._element)}_getItems(){return Uc.find(Ed,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return yc()?e===wd?fd:md:e===wd?md:fd}_orderToDirection(e){return yc()?e===fd?wd:vd:e===fd?vd:wd}static jQueryInterface(e){return this.each(function(){const t=Bd.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}Rc.on(document,Sd,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=Uc.getElementFromSelector(this);if(!t||!t.classList.contains(Md))return;e.preventDefault();const s=Bd.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");return i?(s.to(i),void s._maybeEnableCycle()):"next"===qc.getDataAttribute(this,"slide")?(s.next(),void s._maybeEnableCycle()):(s.prev(),void s._maybeEnableCycle())}),Rc.on(window,_d,()=>{const e=Uc.find('[data-bs-ride="carousel"]');for(const t of e)Bd.getOrCreateInstance(t)}),kc(Bd);const Od=".bs.collapse",Hd=`show${Od}`,Nd=`shown${Od}`,Fd=`hide${Od}`,Rd=`hidden${Od}`,zd=`click${Od}.data-api`,jd="show",Vd="collapse",qd="collapsing",Gd=`:scope .${Vd} .${Vd}`,Wd='[data-bs-toggle="collapse"]',Qd={parent:null,toggle:!0},Ud={parent:"(null|element)",toggle:"boolean"};class Kd extends Wc{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const s=Uc.find(Wd);for(const i of s){const e=Uc.getSelectorFromElement(i),t=Uc.find(e).filter(e=>e===this._element);null!==e&&t.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Qd}static get DefaultType(){return Ud}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>Kd.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(Rc.trigger(this._element,Hd).defaultPrevented)return;for(const i of e)i.hide();const t=this._getDimension();this._element.classList.remove(Vd),this._element.classList.add(qd),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(qd),this._element.classList.add(Vd,jd),this._element.style[t]="",Rc.trigger(this._element,Nd)},this._element,!0),this._element.style[t]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(Rc.trigger(this._element,Fd).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,wc(this._element),this._element.classList.add(qd),this._element.classList.remove(Vd,jd);for(const t of this._triggerArray){const e=Uc.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(qd),this._element.classList.add(Vd),Rc.trigger(this._element,Rd)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(jd)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=hc(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Wd);for(const t of e){const e=Uc.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=Uc.find(Gd,this._config.parent);return Uc.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const s of e)s.classList.toggle("collapsed",!t),s.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const s=Kd.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===s[e])throw new TypeError(`No method named "${e}"`);s[e]()}})}}Rc.on(document,zd,Wd,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const t of Uc.getMultipleElementsFromSelector(this))Kd.getOrCreateInstance(t,{toggle:!1}).toggle()}),kc(Kd);const Yd="dropdown",Xd=".bs.dropdown",Zd=".data-api",Jd="ArrowUp",eu="ArrowDown",tu=`hide${Xd}`,su=`hidden${Xd}`,iu=`show${Xd}`,ou=`shown${Xd}`,nu=`click${Xd}${Zd}`,au=`keydown${Xd}${Zd}`,ru=`keyup${Xd}${Zd}`,lu="show",cu='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',du=`${cu}.${lu}`,uu=".dropdown-menu",hu=yc()?"top-end":"top-start",pu=yc()?"top-start":"top-end",gu=yc()?"bottom-end":"bottom-start",mu=yc()?"bottom-start":"bottom-end",fu=yc()?"left-start":"right-start",wu=yc()?"right-start":"left-start",vu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},bu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class yu extends Wc{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Uc.next(this._element,uu)[0]||Uc.prev(this._element,uu)[0]||Uc.findOne(uu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return vu}static get DefaultType(){return bu}static get NAME(){return Yd}toggle(){return this._isShown()?this.hide():this.show()}show(){if(gc(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!Rc.trigger(this._element,iu,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))Rc.on(e,"mouseover",fc);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(lu),this._element.classList.add(lu),Rc.trigger(this._element,ou,e)}}hide(){if(gc(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!Rc.trigger(this._element,tu,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Rc.off(e,"mouseover",fc);this._popper&&this._popper.destroy(),this._menu.classList.remove(lu),this._element.classList.remove(lu),this._element.setAttribute("aria-expanded","false"),qc.removeDataAttribute(this._menu,"popper"),Rc.trigger(this._element,su,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!uc(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${Yd.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===oc)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;"parent"===this._config.reference?e=this._parent:uc(this._config.reference)?e=hc(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=ic(e,this._menu,t)}_isShown(){return this._menu.classList.contains(lu)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return fu;if(e.classList.contains("dropstart"))return wu;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?pu:hu:t?mu:gu}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(qc.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...xc(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:t}){const s=Uc.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>pc(e));s.length&&Cc(s,t,e===eu,!s.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=yu.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=Uc.find(du);for(const s of t){const t=yu.getInstance(s);if(!t||!1===t._config.autoClose)continue;const i=e.composedPath(),o=i.includes(t._menu);if(i.includes(t._element)||"inside"===t._config.autoClose&&!o||"outside"===t._config.autoClose&&o)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const n={relatedTarget:t._element};"click"===e.type&&(n.clickEvent=e),t._completeHide(n)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),s="Escape"===e.key,i=[Jd,eu].includes(e.key);if(!i&&!s)return;if(t&&!s)return;e.preventDefault();const o=this.matches(cu)?this:Uc.prev(this,cu)[0]||Uc.next(this,cu)[0]||Uc.findOne(cu,e.delegateTarget.parentNode),n=yu.getOrCreateInstance(o);if(i)return e.stopPropagation(),n.show(),void n._selectMenuItem(e);n._isShown()&&(e.stopPropagation(),n.hide(),o.focus())}}Rc.on(document,au,cu,yu.dataApiKeydownHandler),Rc.on(document,au,uu,yu.dataApiKeydownHandler),Rc.on(document,nu,yu.clearMenus),Rc.on(document,ru,yu.clearMenus),Rc.on(document,nu,cu,function(e){e.preventDefault(),yu.getOrCreateInstance(this).toggle()}),kc(yu);const ku="backdrop",xu="show",Tu=`mousedown.bs.${ku}`,Cu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},_u={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Su extends Gc{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Cu}static get DefaultType(){return _u}static get NAME(){return ku}show(e){if(!this._config.isVisible)return void xc(e);this._append();const t=this._getElement();this._config.isAnimated&&wc(t),t.classList.add(xu),this._emulateAnimation(()=>{xc(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(xu),this._emulateAnimation(()=>{this.dispose(),xc(e)})):xc(e)}dispose(){this._isAppended&&(Rc.off(this._element,Tu),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=hc(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),Rc.on(e,Tu,()=>{xc(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Tc(e,this._getElement(),this._config.isAnimated)}}const Mu=".bs.focustrap",Au=`focusin${Mu}`,Iu=`keydown.tab${Mu}`,Eu="backward",Lu={autofocus:!0,trapElement:null},Du={autofocus:"boolean",trapElement:"element"};class $u extends Gc{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Lu}static get DefaultType(){return Du}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Rc.off(document,Mu),Rc.on(document,Au,e=>this._handleFocusin(e)),Rc.on(document,Iu,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Rc.off(document,Mu))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const s=Uc.focusableChildren(t);0===s.length?t.focus():this._lastTabNavDirection===Eu?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?Eu:"forward")}}const Pu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Bu=".sticky-top",Ou="padding-right",Hu="margin-right";class Nu{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ou,t=>t+e),this._setElementAttributes(Pu,Ou,t=>t+e),this._setElementAttributes(Bu,Hu,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ou),this._resetElementAttributes(Pu,Ou),this._resetElementAttributes(Bu,Hu)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,s){const i=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+i)return;this._saveInitialAttribute(e,t);const o=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${s(Number.parseFloat(o))}px`)})}_saveInitialAttribute(e,t){const s=e.style.getPropertyValue(t);s&&qc.setDataAttribute(e,t,s)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const s=qc.getDataAttribute(e,t);null!==s?(qc.removeDataAttribute(e,t),e.style.setProperty(t,s)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(uc(e))t(e);else for(const s of Uc.find(e,this._element))t(s)}}const Fu=".bs.modal",Ru=`hide${Fu}`,zu=`hidePrevented${Fu}`,ju=`hidden${Fu}`,Vu=`show${Fu}`,qu=`shown${Fu}`,Gu=`resize${Fu}`,Wu=`click.dismiss${Fu}`,Qu=`mousedown.dismiss${Fu}`,Uu=`keydown.dismiss${Fu}`,Ku=`click${Fu}.data-api`,Yu="modal-open",Xu="show",Zu="modal-static",Ju={backdrop:!0,focus:!0,keyboard:!0},eh={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class th extends Wc{constructor(e,t){super(e,t),this._dialog=Uc.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Nu,this._addEventListeners()}static get Default(){return Ju}static get DefaultType(){return eh}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;Rc.trigger(this._element,Vu,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Yu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning)return;Rc.trigger(this._element,Ru).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xu),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){Rc.off(window,Fu),Rc.off(this._dialog,Fu),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Su({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new $u({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Uc.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),wc(this._element),this._element.classList.add(Xu);this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Rc.trigger(this._element,qu,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){Rc.on(this._element,Uu,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Rc.on(window,Gu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Rc.on(this._element,Qu,e=>{Rc.one(this._element,Wu,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Yu),this._resetAdjustments(),this._scrollBar.reset(),Rc.trigger(this._element,ju)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Rc.trigger(this._element,zu).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(Zu)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Zu),this._queueCallback(()=>{this._element.classList.remove(Zu),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),s=t>0;if(s&&!e){const e=yc()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!s&&e){const e=yc()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const s=th.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===s[e])throw new TypeError(`No method named "${e}"`);s[e](t)}})}}Rc.on(document,Ku,'[data-bs-toggle="modal"]',function(e){const t=Uc.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),Rc.one(t,Vu,e=>{e.defaultPrevented||Rc.one(t,ju,()=>{pc(this)&&this.focus()})});const s=Uc.findOne(".modal.show");s&&th.getInstance(s).hide();th.getOrCreateInstance(t).toggle(this)}),Kc(th),kc(th);const sh=".bs.offcanvas",ih=".data-api",oh=`load${sh}${ih}`,nh="show",ah="showing",rh="hiding",lh=".offcanvas.show",ch=`show${sh}`,dh=`shown${sh}`,uh=`hide${sh}`,hh=`hidePrevented${sh}`,ph=`hidden${sh}`,gh=`resize${sh}`,mh=`click${sh}${ih}`,fh=`keydown.dismiss${sh}`,wh={backdrop:!0,keyboard:!0,scroll:!1},vh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class bh extends Wc{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wh}static get DefaultType(){return vh}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(Rc.trigger(this._element,ch,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Nu).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ah);this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(nh),this._element.classList.remove(ah),Rc.trigger(this._element,dh,{relatedTarget:e})},this._element,!0)}hide(){if(!this._isShown)return;if(Rc.trigger(this._element,uh).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(rh),this._backdrop.hide();this._queueCallback(()=>{this._element.classList.remove(nh,rh),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Nu).reset(),Rc.trigger(this._element,ph)},this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Su({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():Rc.trigger(this._element,hh)}:null})}_initializeFocusTrap(){return new $u({trapElement:this._element})}_addEventListeners(){Rc.on(this._element,fh,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():Rc.trigger(this._element,hh))})}static jQueryInterface(e){return this.each(function(){const t=bh.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Rc.on(document,mh,'[data-bs-toggle="offcanvas"]',function(e){const t=Uc.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),gc(this))return;Rc.one(t,ph,()=>{pc(this)&&this.focus()});const s=Uc.findOne(lh);s&&s!==t&&bh.getInstance(s).hide();bh.getOrCreateInstance(t).toggle(this)}),Rc.on(window,oh,()=>{for(const e of Uc.find(lh))bh.getOrCreateInstance(e).show()}),Rc.on(window,gh,()=>{for(const e of Uc.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&bh.getOrCreateInstance(e).hide()}),Kc(bh),kc(bh);const yh={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},kh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Th=(e,t)=>{const s=e.nodeName.toLowerCase();return t.includes(s)?!kh.has(s)||Boolean(xh.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(s))};const Ch={allowList:yh,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},_h={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Sh={entry:"(string|element|function|null)",selector:"(string|element)"};class Mh extends Gc{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Ch}static get DefaultType(){return _h}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,o]of Object.entries(this._config.content))this._setContent(e,o,i);const t=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&t.classList.add(...s.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,s]of Object.entries(e))super._typeCheckConfig({selector:t,entry:s},Sh)}_setContent(e,t,s){const i=Uc.findOne(s,e);i&&((t=this._resolvePossibleFunction(t))?uc(t)?this._putElementInTemplate(hc(t),i):this._config.html?i.innerHTML=this._maybeSanitize(t):i.textContent=t:i.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,s){if(!e.length)return e;if(s&&"function"==typeof s)return s(e);const i=(new window.DOMParser).parseFromString(e,"text/html"),o=[].concat(...i.body.querySelectorAll("*"));for(const n of o){const e=n.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){n.remove();continue}const s=[].concat(...n.attributes),i=[].concat(t["*"]||[],t[e]||[]);for(const t of s)Th(t,i)||n.removeAttribute(t.nodeName)}return i.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return xc(e,[void 0,this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Ah=new Set(["sanitize","allowList","sanitizeFn"]),Ih="fade",Eh="show",Lh=".tooltip-inner",Dh=".modal",$h="hide.bs.modal",Ph="hover",Bh="focus",Oh="click",Hh={AUTO:"auto",TOP:"top",RIGHT:yc()?"left":"right",BOTTOM:"bottom",LEFT:yc()?"right":"left"},Nh={allowList:yh,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Fh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Rh extends Wc{constructor(e,t){if(void 0===oc)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Nh}static get DefaultType(){return Fh}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Rc.off(this._element.closest(Dh),$h,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=Rc.trigger(this._element,this.constructor.eventName("show")),t=(mc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(s),Rc.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(s),s.classList.add(Eh),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))Rc.on(o,"mouseover",fc);this._queueCallback(()=>{Rc.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(Rc.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(Eh),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Rc.off(e,"mouseover",fc);this._activeTrigger[Oh]=!1,this._activeTrigger[Bh]=!1,this._activeTrigger[Ph]=!1,this._isHovered=null;this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Rc.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Ih,Eh),t.classList.add(`bs-${this.constructor.NAME}-auto`);const s=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",s),this._isAnimated()&&t.classList.add(Ih),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Mh({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Lh]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ih)}_isShown(){return this.tip&&this.tip.classList.contains(Eh)}_createPopper(e){const t=xc(this._config.placement,[this,e,this._element]),s=Hh[t.toUpperCase()];return ic(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return xc(e,[this._element,this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...xc(this._config.popperConfig,[void 0,t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)Rc.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger[Oh]=!(t._isShown()&&t._activeTrigger[Oh]),t.toggle()});else if("manual"!==t){const e=t===Ph?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),s=t===Ph?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Rc.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?Bh:Ph]=!0,t._enter()}),Rc.on(this._element,s,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?Bh:Ph]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Rc.on(this._element.closest(Dh),$h,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=qc.getDataAttributes(this._element);for(const s of Object.keys(t))Ah.has(s)&&delete t[s];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:hc(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,s]of Object.entries(this._config))this.constructor.Default[t]!==s&&(e[t]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=Rh.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}kc(Rh);const zh=".popover-header",jh=".popover-body",Vh={...Rh.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},qh={...Rh.DefaultType,content:"(null|string|element|function)"};class Gh extends Rh{static get Default(){return Vh}static get DefaultType(){return qh}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[zh]:this._getTitle(),[jh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=Gh.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}kc(Gh);const Wh=".bs.scrollspy",Qh=`activate${Wh}`,Uh=`click${Wh}`,Kh=`load${Wh}.data-api`,Yh="active",Xh="[href]",Zh=".nav-link",Jh=`${Zh}, .nav-item > ${Zh}, .list-group-item`,ep={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},tp={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class sp extends Wc{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ep}static get DefaultType(){return tp}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=hc(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Rc.off(this._config.target,Uh),Rc.on(this._config.target,Uh,Xh,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const s=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(s.scrollTo)return void s.scrollTo({top:i,behavior:"smooth"});s.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),s=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},i=(this._rootElement||document.documentElement).scrollTop,o=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const n of e){if(!n.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(n));continue}const e=n.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&e){if(s(n),!i)return}else o||e||s(n)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Uc.find(Xh,this._config.target);for(const t of e){if(!t.hash||gc(t))continue;const e=Uc.findOne(decodeURI(t.hash),this._element);pc(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Yh),this._activateParents(e),Rc.trigger(this._element,Qh,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))Uc.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(Yh);else for(const t of Uc.parents(e,".nav, .list-group"))for(const e of Uc.prev(t,Jh))e.classList.add(Yh)}_clearActiveClass(e){e.classList.remove(Yh);const t=Uc.find(`${Xh}.${Yh}`,e);for(const s of t)s.classList.remove(Yh)}static jQueryInterface(e){return this.each(function(){const t=sp.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}Rc.on(window,Kh,()=>{for(const e of Uc.find('[data-bs-spy="scroll"]'))sp.getOrCreateInstance(e)}),kc(sp);const ip=".bs.tab",op=`hide${ip}`,np=`hidden${ip}`,ap=`show${ip}`,rp=`shown${ip}`,lp=`click${ip}`,cp=`keydown${ip}`,dp=`load${ip}`,up="ArrowLeft",hp="ArrowRight",pp="ArrowUp",gp="ArrowDown",mp="Home",fp="End",wp="active",vp="fade",bp="show",yp=".dropdown-toggle",kp=`:not(${yp})`,xp='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Tp=`${`.nav-link${kp}, .list-group-item${kp}, [role="tab"]${kp}`}, ${xp}`,Cp=`.${wp}[data-bs-toggle="tab"], .${wp}[data-bs-toggle="pill"], .${wp}[data-bs-toggle="list"]`;class _p extends Wc{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Rc.on(this._element,cp,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),s=t?Rc.trigger(t,op,{relatedTarget:e}):null;Rc.trigger(e,ap,{relatedTarget:t}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(wp),this._activate(Uc.getElementFromSelector(e));this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),Rc.trigger(e,rp,{relatedTarget:t})):e.classList.add(bp)},e,e.classList.contains(vp))}_deactivate(e,t){if(!e)return;e.classList.remove(wp),e.blur(),this._deactivate(Uc.getElementFromSelector(e));this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),Rc.trigger(e,np,{relatedTarget:t})):e.classList.remove(bp)},e,e.classList.contains(vp))}_keydown(e){if(![up,hp,pp,gp,mp,fp].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!gc(e));let s;if([mp,fp].includes(e.key))s=t[e.key===mp?0:t.length-1];else{const i=[hp,gp].includes(e.key);s=Cc(t,e.target,i,!0)}s&&(s.focus({preventScroll:!0}),_p.getOrCreateInstance(s).show())}_getChildren(){return Uc.find(Tp,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const s of t)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",t),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=Uc.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const s=this._getOuterElement(e);if(!s.classList.contains("dropdown"))return;const i=(e,i)=>{const o=Uc.findOne(e,s);o&&o.classList.toggle(i,t)};i(yp,wp),i(".dropdown-menu",bp),s.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,s){e.hasAttribute(t)||e.setAttribute(t,s)}_elemIsActive(e){return e.classList.contains(wp)}_getInnerElement(e){return e.matches(Tp)?e:Uc.findOne(Tp,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=_p.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}Rc.on(document,lp,xp,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),gc(this)||_p.getOrCreateInstance(this).show()}),Rc.on(window,dp,()=>{for(const e of Uc.find(Cp))_p.getOrCreateInstance(e)}),kc(_p);const Sp=".bs.toast",Mp=`mouseover${Sp}`,Ap=`mouseout${Sp}`,Ip=`focusin${Sp}`,Ep=`focusout${Sp}`,Lp=`hide${Sp}`,Dp=`hidden${Sp}`,$p=`show${Sp}`,Pp=`shown${Sp}`,Bp="hide",Op="show",Hp="showing",Np={animation:"boolean",autohide:"boolean",delay:"number"},Fp={animation:!0,autohide:!0,delay:5e3};class Rp extends Wc{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Fp}static get DefaultType(){return Np}static get NAME(){return"toast"}show(){if(Rc.trigger(this._element,$p).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(Bp),wc(this._element),this._element.classList.add(Op,Hp),this._queueCallback(()=>{this._element.classList.remove(Hp),Rc.trigger(this._element,Pp),this._maybeScheduleHide()},this._element,this._config.animation)}hide(){if(!this.isShown())return;if(Rc.trigger(this._element,Lp).defaultPrevented)return;this._element.classList.add(Hp),this._queueCallback(()=>{this._element.classList.add(Bp),this._element.classList.remove(Hp,Op),Rc.trigger(this._element,Dp)},this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Op),super.dispose()}isShown(){return this._element.classList.contains(Op)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){Rc.on(this._element,Mp,e=>this._onInteraction(e,!0)),Rc.on(this._element,Ap,e=>this._onInteraction(e,!1)),Rc.on(this._element,Ip,e=>this._onInteraction(e,!0)),Rc.on(this._element,Ep,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=Rp.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}Kc(Rp),kc(Rp);const zp=["width","height"],jp=Q({__name:"AnimatedToggleIcon",props:{isOpen:{type:Boolean,default:!1},size:{type:[String,Number],default:24}},setup:e=>(i,o)=>(s(),t("svg",{class:"animated-toggle-icon",width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[c("line",{class:l(["line line-menu-1",{open:e.isOpen}]),x1:"3",y1:"6",x2:"21",y2:"6"},null,2),c("line",{class:l(["line line-menu-2",{open:e.isOpen}]),x1:"3",y1:"12",x2:"21",y2:"12"},null,2),c("line",{class:l(["line line-menu-3",{open:e.isOpen}]),x1:"3",y1:"18",x2:"21",y2:"18"},null,2),c("line",{class:l(["line line-x-1",{open:e.isOpen}]),x1:"5",y1:"5",x2:"19",y2:"19"},null,2),c("line",{class:l(["line line-x-2",{open:e.isOpen}]),x1:"5",y1:"19",x2:"19",y2:"5"},null,2)],8,zp))},[["__scopeId","data-v-4c3b913d"]]),Vp={class:"sidebar-header-fixed"},qp={class:"sidebar-header d-flex align-items-center"},Gp={class:"sidebar-nav-wrapper"},Wp={class:"nav nav-pills flex-column"},Qp={class:"nav-item"},Up={key:0,class:"nav-item"},Kp={class:"nav flex-column ms-3 reports-dropdown"},Yp={class:"nav-item"},Xp={class:"nav-item"},Zp={class:"nav-item"},Jp={class:"nav-item"},eg={class:"nav-item"},tg={class:"nav-item"},sg={class:"nav-item"},ig={class:"nav-item"},og={key:1,class:"nav-item"},ng={key:2,class:"nav-item"},ag={key:3,class:"nav-item"},rg={key:4,class:"nav-item"},lg={key:5,class:"nav-item"},cg={class:"nav flex-column ms-3 reports-dropdown manage-dropdown"},dg={class:"nav-item"},ug={class:"nav-item"},hg={class:"nav-item"},pg={class:"nav-item"},gg={class:"nav-item"},mg={key:6,class:"nav-item"},fg={class:"nav flex-column ms-3 reports-dropdown manage-dropdown"},wg={class:"nav-item"},vg={class:"nav-item"},bg={class:"sidebar-footer-fixed"},yg={class:"user-profile-wrapper position-relative"},kg={key:0,class:"animated-google-avatar-container"},xg=["src","alt"],Tg={key:1,class:"animated-avatar-container"},Cg={key:2,class:"user-info-inline ms-3"},_g={class:"user-name-inline"},Sg={class:"user-org-inline"},Mg={class:"profile-dropdown-header"},Ag={class:"profile-info-full"},Ig={class:"profile-name-full"},Eg={class:"profile-badge"},Lg={class:"profile-org-full"},Dg={key:0,class:"profile-email"},$g={class:"profile-dropdown-menu"},Pg=Q({__name:"Sidebar",props:{userType:{type:String,default:""},userInfoObject:{type:Object,default:()=>({})}},setup(n){const a=n,u=v(),w=p();e(!1);const y=ee,_=e(!1),S=e(!1),M=e(""),I=e(""),E=e(""),D=b(()=>"Officer"===a.userType?a.userInfoObject?.OfficerName||"เจ้าหน้าที่":"Admin"===a.userType?a.userInfoObject?.AdminName||"ผู้ดูแลระบบ":"ผู้ใช้งาน"),$=b(()=>a.userInfoObject?.OrgName||""),{appContext:P}=O(),B=P.config.globalProperties.$axios,H=()=>{y.value||(oe.value=!oe.value)},N=()=>{y.value||(ne.value=!ne.value)},F=b(()=>u.path.startsWith("/reports")),R=["/managecategories","/managequestionsanswers","/managestopwords","/managenegativekeywords","/managesynonyms"],z=b(()=>R.includes(u.path)),j=["/manageranking","/ranking-simulator"],V=b(()=>j.includes(u.path));h(()=>u.path,e=>{e.startsWith("/reports")&&(oe.value=!0),R.includes(e)&&(ne.value=!0),j.includes(e)&&(ae.value=!0)},{immediate:!0});const q=()=>{y.value||(ae.value=!ae.value)},G=b(()=>"/manageadminuser"===u.path),W=b(()=>"/manageorganizations"===u.path),Q=b(()=>"/manageofficers"===u.path),U=b(()=>"/manageaiimage"===u.path);b(()=>"/managebotpronoun"===u.path),b(()=>"/managecategories"===u.path),b(()=>"/managequestionsanswers"===u.path),b(()=>"/managethaipatterns"===u.path),b(()=>"/managestopwords"===u.path),b(()=>"/managenegativekeywords"===u.path),b(()=>"/managesynonyms"===u.path),b(()=>"/manageranking"===u.path),b(()=>"/ranking-simulator"===u.path),b(()=>"/about-system"===u.path);const K=b(()=>"/dashboard"===u.path);u.path,h(()=>u.path,(e,t)=>{e!==t&&window.innerWidth<768&&(y.value=!0,re.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"))}),g(()=>{(async()=>{try{const e=await B.get("/auth/google/status");e.data&&e.data.linked?(S.value=!0,M.value=e.data.googlePicture||"",I.value=e.data.googleName||"",E.value=e.data.googleEmail||""):(S.value=!1,M.value="",I.value="",E.value="")}catch(e){}})()});const Y=()=>{window.innerWidth<768?(re.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),y.value=!0):y.value=!y.value},X=()=>{_.value=!_.value},Z=()=>{(e=>{localStorage.removeItem("userToken"),localStorage.removeItem("userType"),localStorage.removeItem("userInfo"),e.push({name:"login"})})(w)};return(e,a)=>{const h=L("router-link");return s(),t("div",{class:l(["sidebar d-flex flex-column flex-shrink-0 ps-0 pe-0",{collapsed:r(y)}])},[c("div",Vp,[c("div",qp,[c("button",{class:"btn btn-link text-dark p-0 toggle-btn",onClick:Y},[i(jp,{isOpen:!r(y)},null,8,["isOpen"])]),c("span",{class:l(["fs-4 fw-bold pcru-text",{"collapsed-text":r(y)}])},"PCRU",2)]),a[3]||(a[3]=c("hr",null,null,-1))]),c("div",Gp,[c("ul",Wp,[c("li",Qp,[i(h,{to:"/dashboard",class:l(["nav-link d-flex align-items-center gap-2",{active:K.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),"aria-current":K.value?"page":null},{default:o(()=>[c("i",{class:l(["bi bi-house-door fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l({"collapsed-text":r(y)})},"Dashboard",2)]),_:1},8,["class","aria-current"])]),"Officer"===n.userType?(s(),t("li",Up,[c("div",{class:l(["nav-link d-flex align-items-center gap-2 dropdown-toggle-custom",{active:F.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),onClick:H,role:"button"},[c("i",{class:l(["bi bi-bar-chart-line fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l([{"collapsed-text":r(y)},"flex-grow-1"])},"Reports",2),r(y)?k("",!0):(s(),t("i",{key:0,class:l(["bi",r(oe)?"bi-chevron-up":"bi-chevron-down","me-2"])},null,2))],2),T(c("ul",Kp,[c("li",Yp,[i(h,{to:"/reports/categories",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/categories"===r(u).path}])},{default:o(()=>[...a[4]||(a[4]=[c("i",{class:"bi bi-tags"},null,-1),c("span",null,"Categories",-1)])]),_:1},8,["class"])]),c("li",Xp,[i(h,{to:"/reports/questionsanswers",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/questionsanswers"===r(u).path}])},{default:o(()=>[...a[5]||(a[5]=[c("i",{class:"bi bi-question-circle"},null,-1),c("span",null,"Q&A",-1)])]),_:1},8,["class"])]),c("li",Zp,[i(h,{to:"/reports/questions-need-review",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/questions-need-review"===r(u).path}])},{default:o(()=>[...a[6]||(a[6]=[c("i",{class:"bi bi-exclamation-triangle"},null,-1),c("span",null,"Need Review",-1)])]),_:1},8,["class"])]),c("li",Jp,[i(h,{to:"/reports/keywords",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/keywords"===r(u).path}])},{default:o(()=>[...a[7]||(a[7]=[c("i",{class:"bi bi-key"},null,-1),c("span",null,"Keywords",-1)])]),_:1},8,["class"])]),c("li",eg,[i(h,{to:"/reports/chatlog-has-answers",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/chatlog-has-answers"===r(u).path}])},{default:o(()=>[...a[8]||(a[8]=[c("i",{class:"bi bi-chat-left-text"},null,-1),c("span",null,"ChatLog (Answered)",-1)])]),_:1},8,["class"])]),c("li",tg,[i(h,{to:"/reports/feedbacks",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/feedbacks"===r(u).path}])},{default:o(()=>[...a[9]||(a[9]=[c("i",{class:"bi bi-hand-thumbs-up"},null,-1),c("span",null,"Feedbacks",-1)])]),_:1},8,["class"])]),c("li",sg,[i(h,{to:"/reports/feedbacks-handled",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/feedbacks-handled"===r(u).path}])},{default:o(()=>[...a[10]||(a[10]=[c("i",{class:"bi bi-check-circle"},null,-1),c("span",null,"Handled Feedbacks",-1)])]),_:1},8,["class"])]),c("li",ig,[i(h,{to:"/reports/chatlog-no-answers",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/reports/chatlog-no-answers"===r(u).path}])},{default:o(()=>[...a[11]||(a[11]=[c("i",{class:"bi bi-chat-left-dots"},null,-1),c("span",null,"ChatLog (No Answer)",-1)])]),_:1},8,["class"])])],512),[[C,r(oe)&&!r(y)]])])):k("",!0),"Super Admin"===n.userType?(s(),t("li",og,[i(h,{to:"/manageadminuser",class:l(["nav-link d-flex align-items-center gap-2",{active:G.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),"aria-current":G.value?"page":null},{default:o(()=>[c("i",{class:l(["bi bi-people fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l({"collapsed-text":r(y)})},"Manage Admins",2)]),_:1},8,["class","aria-current"])])):k("",!0),"Admin"===n.userType?(s(),t("li",ng,[i(h,{to:"/manageorganizations",class:l(["nav-link d-flex align-items-center gap-2",{active:W.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),"aria-current":W.value?"page":null},{default:o(()=>[c("i",{class:l(["bi bi-building fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l({"collapsed-text":r(y)})},"Manage Organizations",2)]),_:1},8,["class","aria-current"])])):k("",!0),"Admin"===n.userType?(s(),t("li",ag,[i(h,{to:"/manageofficers",class:l(["nav-link d-flex align-items-center gap-2",{active:Q.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),"aria-current":Q.value?"page":null},{default:o(()=>[c("i",{class:l(["bi bi-person-badge fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l({"collapsed-text":r(y)})},"Manage Officers",2)]),_:1},8,["class","aria-current"])])):k("",!0),"Admin"===n.userType?(s(),t("li",rg,[i(h,{to:"/manageaiimage",class:l(["nav-link d-flex align-items-center gap-2",{active:U.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),"aria-current":U.value?"page":null},{default:o(()=>[c("i",{class:l(["bi bi-robot fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l({"collapsed-text":r(y)})},"Manage AI Assistant",2)]),_:1},8,["class","aria-current"])])):k("",!0),"Officer"===n.userType?(s(),t("li",lg,[c("div",{class:l(["nav-link d-flex align-items-center gap-2 dropdown-toggle-custom",{active:z.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),onClick:N,role:"button"},[c("i",{class:l(["bi bi-gear fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l([{"collapsed-text":r(y)},"flex-grow-1"])},"Manage",2),r(y)?k("",!0):(s(),t("i",{key:0,class:l(["bi",r(ne)?"bi-chevron-up":"bi-chevron-down","me-2"])},null,2))],2),T(c("ul",cg,[c("li",dg,[i(h,{to:"/managecategories",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/managecategories"===r(u).path}])},{default:o(()=>[...a[12]||(a[12]=[c("i",{class:"bi bi-tags"},null,-1),c("span",null,"Categories",-1)])]),_:1},8,["class"])]),c("li",ug,[i(h,{to:"/managequestionsanswers",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/managequestionsanswers"===r(u).path}])},{default:o(()=>[...a[13]||(a[13]=[c("i",{class:"bi bi-question-circle"},null,-1),c("span",null,"Q&A",-1)])]),_:1},8,["class"])]),c("li",hg,[i(h,{to:"/managestopwords",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/managestopwords"===r(u).path}])},{default:o(()=>[...a[14]||(a[14]=[c("i",{class:"bi bi-funnel"},null,-1),c("span",null,"Stopwords",-1)])]),_:1},8,["class"])]),c("li",pg,[i(h,{to:"/managenegativekeywords",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/managenegativekeywords"===r(u).path}])},{default:o(()=>[...a[15]||(a[15]=[c("i",{class:"bi bi-x-circle"},null,-1),c("span",null,"Negative Keywords",-1)])]),_:1},8,["class"])]),c("li",gg,[i(h,{to:"/managesynonyms",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/managesynonyms"===r(u).path}])},{default:o(()=>[...a[16]||(a[16]=[c("i",{class:"bi bi-link-45deg"},null,-1),c("span",null,"Synonyms",-1)])]),_:1},8,["class"])])],512),[[C,r(ne)&&!r(y)]])])):k("",!0),"Officer"===n.userType?(s(),t("li",mg,[c("div",{class:l(["nav-link d-flex align-items-center gap-2 dropdown-toggle-custom",{active:V.value,"justify-content-flex-start":!r(y),"justify-content-center":r(y)}]),onClick:q,role:"button"},[c("i",{class:l(["bi bi-bar-chart fs-4",{"ms-2":!r(y)}])},null,2),c("span",{class:l([{"collapsed-text":r(y)},"flex-grow-1"])},"Ranking",2),r(y)?k("",!0):(s(),t("i",{key:0,class:l(["bi",r(ae)?"bi-chevron-up":"bi-chevron-down","me-2"])},null,2))],2),T(c("ul",fg,[c("li",wg,[i(h,{to:"/manageranking",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/manageranking"===r(u).path}])},{default:o(()=>[...a[17]||(a[17]=[c("i",{class:"bi bi-bar-chart-line"},null,-1),c("span",null,"Final Ranking",-1)])]),_:1},8,["class"])]),c("li",vg,[i(h,{to:"/ranking-simulator",class:l(["nav-link py-2 d-flex align-items-center gap-2",{active:"/ranking-simulator"===r(u).path}])},{default:o(()=>[...a[18]||(a[18]=[c("i",{class:"bi bi-cpu"},null,-1),c("span",null,"Ranking Simulator",-1)])]),_:1},8,["class"])])],512),[[C,r(ae)&&!r(y)]])])):k("",!0)])]),c("div",bg,[c("div",yg,[c("div",{class:l(["user-profile-trigger d-flex align-items-center",{"justify-content-center":r(y),"justify-content-start":!r(y)}]),onClick:X,role:"button",tabindex:"0"},[S.value&&M.value?(s(),t("div",kg,[a[19]||(a[19]=m('<svg class="avatar-ring" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg" data-v-e340639c><defs data-v-e340639c><linearGradient id="googleGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-e340639c><stop offset="0%" style="stop-color:#4285F4;stop-opacity:1;" data-v-e340639c><animate attributeName="stop-color" values="#4285F4;#EA4335;#FBBC05;#34A853;#4285F4" dur="5s" repeatCount="indefinite" data-v-e340639c></animate></stop><stop offset="100%" style="stop-color:#EA4335;stop-opacity:1;" data-v-e340639c><animate attributeName="stop-color" values="#EA4335;#FBBC05;#34A853;#4285F4;#EA4335" dur="5s" repeatCount="indefinite" data-v-e340639c></animate></stop></linearGradient></defs><circle cx="29" cy="29" r="27" fill="none" stroke="url(#googleGradient)" stroke-width="2" opacity="0.4" data-v-e340639c><animateTransform attributeName="transform" type="rotate" from="0 29 29" to="360 29 29" dur="15s" repeatCount="indefinite" data-v-e340639c></animateTransform></circle></svg>',1)),c("img",{src:M.value,alt:I.value||"Google Profile",class:"profile-avatar",referrerpolicy:"no-referrer"},null,8,xg)])):(s(),t("div",Tg,[...a[20]||(a[20]=[m('<svg class="animated-avatar" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-v-e340639c><defs data-v-e340639c><linearGradient id="avatarGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-e340639c><stop offset="0%" style="stop-color:#007AFF;stop-opacity:1;" data-v-e340639c><animate attributeName="stop-color" values="#007AFF;#5856D6;#AF52DE;#007AFF" dur="4s" repeatCount="indefinite" data-v-e340639c></animate></stop><stop offset="100%" style="stop-color:#5856D6;stop-opacity:1;" data-v-e340639c><animate attributeName="stop-color" values="#5856D6;#AF52DE;#007AFF;#5856D6" dur="4s" repeatCount="indefinite" data-v-e340639c></animate></stop></linearGradient><filter id="avatarGlow" data-v-e340639c><feGaussianBlur stdDeviation="2" result="coloredBlur" data-v-e340639c></feGaussianBlur><feMerge data-v-e340639c><feMergeNode in="coloredBlur" data-v-e340639c></feMergeNode><feMergeNode in="SourceGraphic" data-v-e340639c></feMergeNode></feMerge></filter></defs><circle cx="50" cy="50" r="46" fill="none" stroke="url(#avatarGradient)" stroke-width="2" opacity="0.3" data-v-e340639c><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="20s" repeatCount="indefinite" data-v-e340639c></animateTransform></circle><circle cx="50" cy="50" r="42" fill="url(#avatarGradient)" filter="url(#avatarGlow)" data-v-e340639c><animate attributeName="r" values="42;44;42" dur="2s" repeatCount="indefinite" data-v-e340639c></animate></circle><circle cx="50" cy="38" r="14" fill="white" opacity="0.95" data-v-e340639c><animate attributeName="cy" values="38;36;38" dur="3s" repeatCount="indefinite" data-v-e340639c></animate></circle><path d="M 26 75 Q 26 58, 50 55 Q 74 58, 74 75" fill="white" opacity="0.95" data-v-e340639c><animate attributeName="d" values="M 26 75 Q 26 58, 50 55 Q 74 58, 74 75;M 26 75 Q 26 56, 50 53 Q 74 56, 74 75;M 26 75 Q 26 58, 50 55 Q 74 58, 74 75" dur="3s" repeatCount="indefinite" data-v-e340639c></animate></path><circle cx="25" cy="25" r="2" fill="white" opacity="0.6" data-v-e340639c><animate attributeName="cy" values="25;20;25" dur="2s" repeatCount="indefinite" data-v-e340639c></animate><animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite" data-v-e340639c></animate></circle><circle cx="75" cy="30" r="1.5" fill="white" opacity="0.5" data-v-e340639c><animate attributeName="cy" values="30;25;30" dur="2.5s" repeatCount="indefinite" data-v-e340639c></animate><animate attributeName="opacity" values="0.5;0.9;0.5" dur="2.5s" repeatCount="indefinite" data-v-e340639c></animate></circle><circle cx="80" cy="70" r="1" fill="white" opacity="0.4" data-v-e340639c><animate attributeName="cx" values="80;82;80" dur="3s" repeatCount="indefinite" data-v-e340639c></animate><animate attributeName="opacity" values="0.4;0.8;0.4" dur="3s" repeatCount="indefinite" data-v-e340639c></animate></circle></svg>',1)])])),r(y)?k("",!0):(s(),t("div",Cg,[c("div",_g,d(D.value),1),c("div",Sg,d($.value||"มหาวิทยาลัยราชภัฏเพชรบูรณ์"),1)]))],2),i(x,{name:"dropdown-fade"},{default:o(()=>[_.value?(s(),t("div",{key:0,class:"profile-dropdown",onClick:a[1]||(a[1]=A(()=>{},["stop"]))},[c("div",Mg,[c("div",Ag,[c("strong",Ig,d(D.value),1),c("div",Eg,[c("span",{class:l(["badge-type","Admin"===n.userType?"badge-admin":"badge-officer"])},d("Admin"===n.userType?"ผู้ดูแลระบบ":"เจ้าหน้าที่"),3)]),c("small",Lg,[a[21]||(a[21]=c("i",{class:"bi bi-building me-1"},null,-1)),f(d($.value||"มหาวิทยาลัยราชภัฏเพชรบูรณ์"),1)]),S.value&&E.value?(s(),t("small",Dg,[a[22]||(a[22]=c("i",{class:"bi bi-envelope me-1"},null,-1)),f(d(E.value),1)])):k("",!0)])]),a[25]||(a[25]=c("div",{class:"dropdown-divider"},null,-1)),c("div",$g,[i(h,{to:"/managegoogleaccount",class:"dropdown-item",onClick:a[0]||(a[0]=e=>_.value=!1)},{default:o(()=>[...a[23]||(a[23]=[c("svg",{class:"item-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"18",height:"18"},[c("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),c("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),c("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),c("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})],-1),c("span",null,"บัญชี Google",-1)])]),_:1}),c("button",{class:"dropdown-item text-danger",onClick:Z},[...a[24]||(a[24]=[c("i",{class:"bi bi-box-arrow-right item-icon"},null,-1),c("span",null,"ออกจากระบบ",-1)])])])])):k("",!0)]),_:1}),_.value?(s(),t("div",{key:0,class:"profile-dropdown-backdrop",onClick:a[2]||(a[2]=e=>_.value=!1)})):k("",!0)])])],2)}}},[["__scopeId","data-v-e340639c"]]),Bg={class:"apple-filters"},Og={key:0,class:"filter-count"},Hg={key:0,class:"filter-group"},Ng={class:"filter-dropdown"},Fg=["value"],Rg={key:1,class:"filter-group filter-group-order"},zg={class:"order-toggle"},jg={key:2,class:"filter-group"},Vg={class:"filter-label"},qg={class:"filter-dropdown"},Gg=["value"],Wg={key:3,class:"filter-group"},Qg={class:"filter-label"},Ug={class:"filter-pills"},Kg=["onClick"],Yg={key:4,class:"filter-group"},Xg={class:"date-range-inputs"},Zg={class:"date-input-wrap"},Jg=["max"],em={class:"date-input-wrap"},tm=["min","max"],sm={key:5,class:"filter-group"},im={class:"filter-pills"},om=["onClick"],nm={key:6,class:"filter-group"},am={class:"filter-label"},rm={class:"number-range-inputs"},lm=["placeholder"],cm=["placeholder","min"],dm={key:7,class:"filter-group filter-group-actions"},um={key:0,class:"active-filters-summary d-none d-lg-flex"},hm={class:"active-filter-tags"},pm=["onClick"],gm=Q({__name:"AppleFilters",props:{showSort:{type:Boolean,default:!0},sortOptions:{type:Array,default:()=>[{value:"date",label:"วันที่"},{value:"id",label:"รหัส"},{value:"name",label:"ชื่อ"}]},defaultSortBy:{type:String,default:"date"},defaultSortOrder:{type:String,default:"desc"},categories:{type:Array,default:()=>[]},categoryLabel:{type:String,default:"หมวดหมู่"},statuses:{type:Array,default:()=>[]},statusLabel:{type:String,default:"สถานะ"},showDateRange:{type:Boolean,default:!1},showDatePresets:{type:Boolean,default:!0},customDatePresets:{type:Array,default:null},datePresetDirection:{type:String,default:"past"},showNumberRange:{type:Boolean,default:!1},numberRangeLabel:{type:String,default:"จำนวน"},minPlaceholder:{type:String,default:"ต่ำสุด"},maxPlaceholder:{type:String,default:"สูงสุด"},modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(i,{expose:o,emit:r}){const u=i,p=r,g=e(!1),m=[{value:"all",label:"ทั้งหมด"},{value:"today",label:"วันนี้"},{value:"week",label:"7 วัน"},{value:"month",label:"30 วัน"},{value:"quarter",label:"3 เดือน"},{value:"year",label:"1 ปี"}],w=b(()=>u.customDatePresets||m);function v(e){const t=Array.isArray(u.customDatePresets)&&u.customDatePresets.length>0?u.customDatePresets:m,s=(e??"").toString().trim();return s&&t.some(e=>e&&e.value===s)?s:"all"}const y=e({sortBy:u.defaultSortBy,sortOrder:u.defaultSortOrder,category:"",status:"",dateFrom:"",dateTo:"",datePreset:"all",minValue:null,maxValue:null,...u.modelValue});y.value.datePreset=v(y.value.datePreset),h(()=>y.value.dateFrom,e=>{if(e&&y.value.dateTo){new Date(e)>new Date(y.value.dateTo)&&(y.value.dateTo=e)}}),h(()=>y.value.dateTo,e=>{if(e&&y.value.dateFrom){const t=new Date(y.value.dateFrom);new Date(e)<t&&(y.value.dateFrom=e)}}),h(()=>u.modelValue,e=>{y.value={...y.value,...e},y.value.datePreset=v(y.value.datePreset)},{deep:!0});const x=b(()=>(new Date).toISOString().split("T")[0]),C=b(()=>{if("future"===u.datePresetDirection)return y.value.dateTo||void 0;const e=x.value,t=y.value.dateTo;return t&&t<e?t:e}),_=b(()=>y.value.dateFrom||void 0),S=b(()=>{if("future"!==u.datePresetDirection)return x.value});h(w,()=>{y.value.datePreset=v(y.value.datePreset)},{deep:!0});const M=b(()=>{const e=y.value;return""!==e.category||""!==e.status||""!==e.dateFrom||""!==e.dateTo||"all"!==e.datePreset||null!==e.minValue||null!==e.maxValue}),I=b(()=>{let e=0;const t=y.value;return t.category&&e++,t.status&&e++,(t.dateFrom||t.dateTo)&&e++,t.datePreset&&"all"!==t.datePreset&&e++,null===t.minValue&&null===t.maxValue||e++,e}),E=b(()=>{const e=[],t=y.value;if(t.category){const s=u.categories.find(e=>e.value===t.category);e.push({key:"category",label:s?.label||t.category})}if(t.status){const s=u.statuses.find(e=>e.value===t.status);e.push({key:"status",label:s?.label||t.status})}if(t.datePreset&&"all"!==t.datePreset){const s=w.value.find(e=>e.value===t.datePreset);e.push({key:"datePreset",label:s?.label||t.datePreset})}if(t.dateFrom||t.dateTo){const s=t.dateFrom&&t.dateTo?`${t.dateFrom} - ${t.dateTo}`:t.dateFrom?`ตั้งแต่ ${t.dateFrom}`:`ถึง ${t.dateTo}`;e.push({key:"dateRange",label:s})}if(null!==t.minValue||null!==t.maxValue){const s=null!==t.minValue&&null!==t.maxValue?`${t.minValue} - ${t.maxValue}`:null!==t.minValue?`≥ ${t.minValue}`:`≤ ${t.maxValue}`;e.push({key:"numberRange",label:s})}return e});function L(){p("update:modelValue",{...y.value}),p("change",{...y.value})}function D(e){y.value.sortOrder=e,L()}function $(e){y.value.status=e,L()}function B(e){y.value.datePreset=v(e);const t=new Date,s=t.toISOString().split("T")[0];let i="",o="";if("all"===e)i="",o="";else if("future"===u.datePresetDirection){i=s;const n=new Date(t);"today"===e?o=s:"week"===e?(n.setDate(n.getDate()+7),o=n.toISOString().split("T")[0]):"month"===e?(n.setDate(n.getDate()+30),o=n.toISOString().split("T")[0]):"quarter"===e?(n.setMonth(n.getMonth()+3),o=n.toISOString().split("T")[0]):"year"===e&&(n.setFullYear(n.getFullYear()+1),o=n.toISOString().split("T")[0])}else{o=s;const n=new Date(t);"today"===e?i=s:"week"===e?(n.setDate(n.getDate()-7),i=n.toISOString().split("T")[0]):"month"===e?(n.setDate(n.getDate()-30),i=n.toISOString().split("T")[0]):"quarter"===e?(n.setMonth(n.getMonth()-3),i=n.toISOString().split("T")[0]):"year"===e&&(n.setFullYear(n.getFullYear()-1),i=n.toISOString().split("T")[0])}y.value.dateFrom=i,y.value.dateTo=o,L()}function O(){y.value={sortBy:u.defaultSortBy,sortOrder:u.defaultSortOrder,category:"",status:"",dateFrom:"",dateTo:"",datePreset:"all",minValue:null,maxValue:null},L()}return o({clearFilters:O,setDatePreset:B,localFilters:y}),(e,o)=>(s(),t("div",Bg,[c("button",{class:l(["filter-toggle-btn d-lg-none",{"has-active-filters":M.value}]),onClick:o[0]||(o[0]=e=>g.value=!g.value)},[o[10]||(o[10]=c("i",{class:"bi bi-sliders2"},null,-1)),o[11]||(o[11]=c("span",null,"ตัวกรอง",-1)),I.value>0?(s(),t("span",Og,d(I.value),1)):k("",!0),c("i",{class:l(["bi",g.value?"bi-chevron-up":"bi-chevron-down"])},null,2)],2),c("div",{class:l(["filters-container",{expanded:g.value}])},[i.showSort?(s(),t("div",Hg,[o[13]||(o[13]=c("label",{class:"filter-label"},[c("i",{class:"bi bi-arrow-down-up"}),f(" เรียงตาม ")],-1)),c("div",Ng,[T(c("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>y.value.sortBy=e),onChange:L,class:"filter-select"},[(s(!0),t(n,null,a(i.sortOptions,e=>(s(),t("option",{key:e.value,value:e.value},d(e.label),9,Fg))),128))],544),[[N,y.value.sortBy]]),o[12]||(o[12]=c("i",{class:"bi bi-chevron-down dropdown-icon"},null,-1))])])):k("",!0),i.showSort?(s(),t("div",Rg,[c("div",zg,[c("button",{class:l(["order-btn",{active:"desc"===y.value.sortOrder}]),onClick:o[2]||(o[2]=e=>D("desc")),title:"ใหม่สุด / มากสุด"},[...o[14]||(o[14]=[c("i",{class:"bi bi-sort-down"},null,-1)])],2),c("button",{class:l(["order-btn",{active:"asc"===y.value.sortOrder}]),onClick:o[3]||(o[3]=e=>D("asc")),title:"เก่าสุด / น้อยสุด"},[...o[15]||(o[15]=[c("i",{class:"bi bi-sort-up"},null,-1)])],2)])])):k("",!0),i.categories&&i.categories.length>0?(s(),t("div",jg,[c("label",Vg,[o[16]||(o[16]=c("i",{class:"bi bi-tag"},null,-1)),f(" "+d(i.categoryLabel),1)]),c("div",qg,[T(c("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>y.value.category=e),onChange:L,class:"filter-select"},[o[17]||(o[17]=c("option",{value:""},"ทั้งหมด",-1)),(s(!0),t(n,null,a(i.categories,e=>(s(),t("option",{key:e.value,value:e.value},d(e.label),9,Gg))),128))],544),[[N,y.value.category]]),o[18]||(o[18]=c("i",{class:"bi bi-chevron-down dropdown-icon"},null,-1))])])):k("",!0),i.statuses&&i.statuses.length>0?(s(),t("div",Wg,[c("label",Qg,[o[19]||(o[19]=c("i",{class:"bi bi-flag"},null,-1)),f(" "+d(i.statusLabel),1)]),c("div",Ug,[c("button",{class:l(["pill-btn",{active:""===y.value.status}]),onClick:o[5]||(o[5]=e=>$(""))}," ทั้งหมด ",2),(s(!0),t(n,null,a(i.statuses,e=>(s(),t("button",{key:e.value,class:l(["pill-btn",{active:y.value.status===e.value,[e.color||""]:!0}]),onClick:t=>$(e.value)},[e.icon?(s(),t("i",{key:0,class:l(e.icon)},null,2)):k("",!0),f(" "+d(e.label),1)],10,Kg))),128))])])):k("",!0),i.showDateRange?(s(),t("div",Yg,[o[21]||(o[21]=c("label",{class:"filter-label"},[c("i",{class:"bi bi-calendar3"}),f(" ช่วงวันที่ ")],-1)),c("div",Xg,[c("div",Zg,[T(c("input",{type:"date","onUpdate:modelValue":o[6]||(o[6]=e=>y.value.dateFrom=e),onChange:L,class:"filter-date",max:C.value},null,40,Jg),[[P,y.value.dateFrom]])]),o[20]||(o[20]=c("span",{class:"date-separator"},"ถึง",-1)),c("div",em,[T(c("input",{type:"date","onUpdate:modelValue":o[7]||(o[7]=e=>y.value.dateTo=e),onChange:L,class:"filter-date",min:_.value,max:S.value},null,40,tm),[[P,y.value.dateTo]])])])])):k("",!0),i.showDatePresets?(s(),t("div",sm,[o[22]||(o[22]=c("label",{class:"filter-label"},[c("i",{class:"bi bi-clock-history"}),f(" ช่วงเวลา ")],-1)),c("div",im,[(s(!0),t(n,null,a(w.value,e=>(s(),t("button",{type:"button",key:e.value,class:l(["pill-btn pill-sm",{active:y.value.datePreset===e.value}]),onClick:A(t=>B(e.value),["prevent","stop"])},d(e.label),11,om))),128))])])):k("",!0),i.showNumberRange?(s(),t("div",nm,[c("label",am,[o[23]||(o[23]=c("i",{class:"bi bi-hash"},null,-1)),f(" "+d(i.numberRangeLabel),1)]),c("div",rm,[T(c("input",{type:"number","onUpdate:modelValue":o[8]||(o[8]=e=>y.value.minValue=e),onInput:L,class:"filter-number",placeholder:i.minPlaceholder,min:0},null,40,lm),[[P,y.value.minValue,void 0,{number:!0}]]),o[24]||(o[24]=c("span",{class:"range-separator"},"-",-1)),T(c("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=e=>y.value.maxValue=e),onInput:L,class:"filter-number",placeholder:i.maxPlaceholder,min:y.value.minValue||0},null,40,cm),[[P,y.value.maxValue,void 0,{number:!0}]])])])):k("",!0),H(e.$slots,"custom-filters",{},void 0),M.value?(s(),t("div",dm,[c("button",{class:"clear-filters-btn",onClick:O},[...o[25]||(o[25]=[c("i",{class:"bi bi-x-circle"},null,-1),f(" ล้างตัวกรอง ",-1)])])])):k("",!0)],2),M.value?(s(),t("div",um,[o[27]||(o[27]=c("span",{class:"summary-label"},"ตัวกรองที่ใช้:",-1)),c("div",hm,[(s(!0),t(n,null,a(E.value,e=>(s(),t("span",{key:e.key,class:"active-tag",onClick:t=>{return"category"===(s=e.key)?y.value.category="":"status"===s?y.value.status="":"datePreset"===s?(y.value.datePreset="all",y.value.dateFrom="",y.value.dateTo=""):"dateRange"===s?(y.value.dateFrom="",y.value.dateTo="",y.value.datePreset="all"):"numberRange"===s&&(y.value.minValue=null,y.value.maxValue=null),void L();var s}},[f(d(e.label)+" ",1),o[26]||(o[26]=c("i",{class:"bi bi-x"},null,-1))],8,pm))),128))])])):k("",!0)]))}},[["__scopeId","data-v-e38fac83"]]);function mm(e){if(!e)return"-";const t=new Date(e);if(isNaN(t.getTime()))return e;const s=new Date-t,i=Math.abs(s),o=Math.floor(i/1e3),n=Math.floor(o/60),a=Math.floor(n/60),r=Math.floor(a/24),l=Math.floor(r/30),c=Math.floor(r/365);return s<0?o<60?`อีก ${o} วิน.`:n<60?`อีก ${n} นาที`:a<24?`อีก ${a} ชม.`:r<30?`อีก ${r} วัน`:l<12?`อีก ${l} เดือน`:`อีก ${c} ปี`:o<10?"เมื่อสักครู่":o<60?`${o} วิน.`:n<60?`${n} นาที`:a<24?`${a} ชม.`:r<30?`${r} วัน`:l<12?`${l} เดือน`:`เลยมา ${c} ปี`}const fm={class:"dashboard-container"},wm={class:"main-content"},vm={class:"container-fluid"},bm={key:0,class:"text-center py-5"},ym={key:1},km={class:"header-section my-4"},xm={class:"header-top d-flex align-items-center gap-3 mb-3"},Tm=["aria-label"],Cm={class:"search-container-wrapper"},_m={class:"search-container"},Sm={class:"bg-white shadow-apple rounded-4 overflow-hidden apple-card"},Mm={class:"table-responsive"},Am={class:"table apple-table qa-table mb-0"},Im=["onClick"],Em={"data-label":"ID",class:"ps-4 fw-medium text-secondary"},Lm={"data-label":"หัวข้อคำถาม",class:"py-3"},Dm=["title"],$m={"data-label":"วันหมดอายุ",class:"py-3 review-date-cell text-center"},Pm={class:"review-date-wrap"},Bm=["title"],Om={"data-label":"คำตอบ",class:"py-3"},Hm=["title"],Nm={"data-label":"หมวดหมู่",class:"py-3"},Fm={class:"cell-ellipsis"},Rm={"data-label":"Keywords",class:"py-3"},zm={key:0,class:"d-flex flex-nowrap gap-1 keywords-nowrap"},jm={key:0,class:"keyword-tag-more"},Vm={key:1,class:"text-muted small"},qm=["onClick"],Gm=["onClick"],Wm=["onClick"],Qm={key:0},Um={class:"d-flex justify-content-between align-items-center p-3 border-top"},Km={class:"small text-secondary"},Ym={"aria-label":"Page navigation"},Xm={class:"pagination pagination-sm mb-0 align-items-center"},Zm=["onClick"],Jm={class:"apple-modal-content"},ef={class:"apple-modal-body"},tf={class:"upload-text"},sf={key:0},of={key:1,class:"file-selected"},nf={class:"d-flex justify-content-center gap-2 mt-4"},af=["disabled"],rf=["disabled"],lf={class:"apple-actions mt-4"},cf=["disabled"],df=["disabled"],uf={key:0,class:"spinner-border spinner-border-sm me-2"},hf={class:"apple-modal-content wide-modal"},pf={class:"apple-modal-body p-0 d-flex justify-content-center bg-light"},gf=["src"],mf={class:"drawer-body"},ff={class:"drawer-section"},wf={class:"drawer-value text-secondary"},vf={class:"drawer-section"},bf={class:"drawer-value fw-bold text-dark"},yf={class:"drawer-section"},kf={class:"drawer-value text-dark whitespace-prewrap"},xf={class:"drawer-section"},Tf={key:0,class:"d-flex flex-wrap gap-2 mt-2"},Cf={key:1,class:"text-muted"},_f={class:"drawer-section"},Sf={class:"mt-2"},Mf={class:"drawer-section"},Af={class:"mt-2 d-flex align-items-center gap-2"},If={class:"text-muted small"},Ef={class:"apple-modal-content wide-modal"},Lf={class:"apple-modal-header"},Df={class:"d-flex flex-column"},$f={class:"apple-modal-title"},Pf={class:"apple-modal-subtitle"},Bf={class:"apple-modal-body"},Of={class:"apple-input-group"},Hf={class:"apple-input-group"},Nf={class:"answer-type-toggle mb-3"},Ff={class:"d-flex gap-2"},Rf={key:0},zf={key:1,class:"gps-input-section"},jf={class:"gps-type-toggle mb-3"},Vf={class:"d-flex gap-2"},qf={key:0},Gf={class:"input-with-icon"},Wf=["required"],Qf={key:1},Uf=["required"],Kf={key:0,class:"coords-parsed mt-2 p-2 bg-success bg-opacity-10 rounded small"},Yf={class:"text-dark"},Xf={key:1,class:"coords-error mt-2 p-2 bg-danger bg-opacity-10 rounded small"},Zf={key:2,class:"gps-preview mt-3"},Jf={class:"d-block mt-1 p-2 bg-light rounded small"},ew={class:"row g-3"},tw={class:"col-md-7"},sw={class:"apple-input-group"},iw={class:"d-flex flex-wrap gap-2 mt-2"},ow=["onClick"],nw={class:"col-md-5"},aw={class:"apple-input-group"},rw={class:"select-wrapper"},lw=["value","disabled"],cw={class:"apple-input-group"},dw={class:"d-flex align-items-center justify-content-between mb-1"},uw=["disabled"],hw={class:"keyword-input-wrapper"},pw=["onKeydown"],gw={class:"d-flex flex-wrap gap-2 mt-2"},mw=["onClick"],fw={class:"apple-actions"},ww=["disabled"],vw={key:0,class:"spinner-border spinner-border-sm me-2"},bw=Q({__name:"ManageQuestionsAnswers",props:{categoriesNameMap:{type:Object,default:()=>({})},formatThaiDateTime:{type:Function,default:e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}}},setup(u){const w=p(),{appContext:v}=O(),y=v.config.globalProperties.$axios;v.config.globalProperties.$swal;const{success:C,error:_,warning:S,info:I}=W(),{confirmAction:E,ConfirmModalComponent:L}=$t(),$=e({}),H=e("");let R=null,z=null;const j=()=>{const e=document.querySelector(".sidebar");!re.value?(z=ee.value,ee.value=!1,e&&e.classList.remove("collapsed"),document.body.classList.add("sidebar-open"),document.body.classList.add("sidebar-mobile-expanded"),re.value=!0):(ee.value=!!z,e&&z&&e.classList.add("collapsed"),document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),re.value=!1,z=null)},V=e([]),q=e(!0),G=e(null),Q=e(""),U=e({sortBy:"id",sortOrder:"desc",category:"",status:"",datePreset:"all",dateFrom:"",dateTo:"",minValue:null,maxValue:null}),K=[{value:"date",label:"วันหมดอายุ"},{value:"id",label:"รหัส"},{value:"title",label:"หัวข้อ"},{value:"likes",label:"Likes"},{value:"unlikes",label:"Unlikes"}],Y=[{value:"active",label:"ยังใช้งาน",icon:"bi bi-check-circle-fill",color:"success"},{value:"expired",label:"หมดอายุ",icon:"bi bi-exclamation-circle-fill",color:"danger"},{value:"expiring",label:"ใกล้หมดอายุ",icon:"bi bi-clock-fill",color:"warning"}],X=b(()=>me.value.map(e=>({value:e.CategoriesID,label:e.CategoriesName||e.CategoriesID})));function Z(){J.value=1}const J=e(1),te=e(5),se=e(null),ie=e(!1),oe=e(!1),ne=e(!1),ae=e(null),ce=e(!1),de=e(!1),ue=e(!1),he=e(null),pe=e(!1),ge=e(""),me=e([]),fe=e({QuestionTitle:"",QuestionText:"",ReviewDate:"",CategoriesID:null,keywords:[]}),we=e("text"),ve=e("url"),be=e(""),ye=e(""),ke=b(()=>{const e=ye.value.trim().match(/^(-?\d+\.\d+)\s*,\s*(-?\d+\.\d+)$/);return e?e[1]:""}),xe=b(()=>{const e=ye.value.trim().match(/^(-?\d+\.\d+)\s*,\s*(-?\d+\.\d+)$/);return e?e[2]:""});function Te(e){setTimeout(()=>{let e=ye.value.trim();e=e.replace(/\s+/g," ").replace(/\s*,\s*/g,", "),ye.value=e},0)}function Ce(){return"text"===we.value?fe.value.QuestionText:"url"===ve.value?be.value.trim():`${ke.value},${xe.value}`}h([we,ve,be,ye],()=>{"gps"===we.value&&(fe.value.QuestionText=Ce())}),h(we,e=>{"text"===e&&(be.value="",ye.value="")}),h(()=>fe.value.CategoriesID,(e,t)=>{if(!e||e===t)return;const s=me.value.find(t=>String(t.CategoriesID)===String(e));if(s&&s.CategoriesName){const e=s.CategoriesName.trim();e&&!fe.value.keywords.includes(e)&&fe.value.keywords.push(e)}});const _e=b(()=>{const e=fe.value.QuestionTitle&&fe.value.QuestionTitle.trim().length>0,t=fe.value.QuestionText&&fe.value.QuestionText.trim().length>0;return e&&t}),Se=e(!1);async function Me(){if(_e.value){Se.value=!0;try{const e=fe.value.QuestionTitle.trim(),t=`${e} ${fe.value.QuestionText.trim()}`,s=await y.post("/tokenize",{text:t});if(s.data&&s.data.tokens){const e=s.data.tokens.filter(e=>e&&e.length>1&&!/^\d+$/.test(e)).map(e=>e.trim()).filter(Boolean);let t=0;e.forEach(e=>{fe.value.keywords.includes(e)||(fe.value.keywords.push(e),t++)}),t>0?C(`เพิ่ม ${t} keywords สำเร็จ`):I("Keywords ที่สร้างมีอยู่ในรายการแล้ว")}else{const e=t.split(/[\s,.、。\n]+/).map(e=>e.trim()).filter(e=>e.length>1&&!/^\d+$/.test(e));let s=0;e.slice(0,10).forEach(e=>{fe.value.keywords.includes(e)||(fe.value.keywords.push(e),s++)}),s>0&&C(`เพิ่ม ${s} keywords สำเร็จ`)}}catch(e){const t=`${fe.value.QuestionTitle.trim()} ${fe.value.QuestionText.trim()}`.split(/[\s,.、。\n]+/).map(e=>e.trim()).filter(e=>e.length>2&&!/^\d+$/.test(e));let s=0;t.slice(0,8).forEach(e=>{fe.value.keywords.includes(e)||(fe.value.keywords.push(e),s++)}),s>0?C(`เพิ่ม ${s} keywords สำเร็จ (fallback)`):S("ไม่สามารถสร้าง keywords ได้")}finally{Se.value=!1}}}const Ae=[{label:"+1 เดือน",months:1},{label:"+3 เดือน",months:3},{label:"+6 เดือน",months:6},{label:"+12 เดือน",months:12}],Ie=e(!1),Ee=e(!1),Le=u;function De(e){if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}function $e(e,t){const s=new Date(e);return s.setMonth(s.getMonth()+t),s}function Pe(e){return new Date(e).toISOString().split("T")[0]}function Be(e){if(!e)return"bg-light text-muted border";const t=new Date,s=new Date(e);if(isNaN(s.getTime()))return"bg-light text-muted border";const i=s-t,o=Math.floor(i/864e5);return i<=0?"bg-danger-subtle text-danger border border-danger":o<=3?"bg-warning-subtle text-warning-emphasis border border-warning":o<=14?"bg-info-subtle text-info-emphasis border border-info":"bg-success-subtle text-success border border-success"}function Oe(){ne.value=!1}function He(){se.value=null,oe.value=!0}function Ne(){oe.value=!1}function Fe(){de.value=!0}function Re(){de.value=!1}function ze(e,t=null){const s={questionId:e};t&&(s.status=t),w.push({name:"report-feedbacks",query:s})}const je=async()=>{try{const e=await y.get("/questionsanswers/categories");me.value=e.data?.data||(Array.isArray(e.data)?e.data:[])}catch(e){}};function Ve(){const e=Pe($e(new Date,6));fe.value={QuestionTitle:"",QuestionText:"",ReviewDate:e,CategoriesID:null,keywords:[]},ge.value="",ue.value=!1,he.value=null,we.value="text",ve.value="url",be.value="",ye.value=""}async function qe(){Ve(),await je(),ce.value=!0}function Ge(){ce.value=!1,Ve()}async function We(){if(!ae.value)return;await je(),ue.value=!0,he.value=ae.value.QuestionsAnswersID;const e=(e=>{if(!e)return null;const t=me.value.find(t=>String(t.CategoriesID)===String(e));if(t)return t.CategoriesID;const s=me.value.find(t=>String(t.CategoriesName)===String(e));return s?s.CategoriesID:null})(ae.value.CategoriesID||ae.value.CategoryID);let t=(new Date).toISOString().split("T")[0];if(ae.value.ReviewDate)try{t=new Date(ae.value.ReviewDate).toISOString().split("T")[0]}catch(i){}const s=function(e){if(!e)return{type:"text",gpsType:"url",url:"",lat:"",lng:""};const t=e.match(/https?:\/\/(maps\.app\.goo\.gl|goo\.gl\/maps|www\.google\.com\/maps|maps\.google\.com)\/[^\s]+/i);if(t)return{type:"gps",gpsType:"url",url:t[0],lat:"",lng:""};const s=e.trim().match(/^(-?\d+\.\d+)\s*,\s*(-?\d+\.\d+)$/);return s?{type:"gps",gpsType:"coords",url:"",lat:s[1],lng:s[2]}:{type:"text",gpsType:"url",url:"",lat:"",lng:""}}(ae.value.QuestionText);we.value=s.type,ve.value=s.gpsType,be.value=s.url,s.lat&&s.lng?ye.value=`${s.lat}, ${s.lng}`:ye.value="",fe.value={QuestionTitle:ae.value.QuestionTitle||"",QuestionText:ae.value.QuestionText||"",ReviewDate:t,CategoriesID:e,keywords:(ae.value.keywords||[]).map(e=>e.KeywordText)},Oe(),ce.value=!0}function Qe(){const e=(ge.value||"").trim();if(!e)return;e.split(/[;,\n]+/).map(e=>e.trim()).filter(Boolean).forEach(e=>{fe.value.keywords.includes(e)||fe.value.keywords.push(e)}),ge.value=""}const Ue=async()=>{if(ge.value&&ge.value.trim()&&Qe(),"gps"===we.value){if("url"===ve.value&&!be.value.trim())return void S("กรุณากรอก Google Maps URL");if("coords"===ve.value){if(!ke.value||!xe.value)return void S("กรุณากรอกพิกัด GPS ให้ถูกต้อง เช่น 16.4321, 102.8236");const e=parseFloat(ke.value),t=parseFloat(xe.value);if(isNaN(e)||isNaN(t))return void S("ละติจูดหรือลองจิจูดไม่ถูกต้อง");if(e<-90||e>90)return void S("ละติจูดต้องอยู่ระหว่าง -90 ถึง 90");if(t<-180||t>180)return void S("ลองจิจูดต้องอยู่ระหว่าง -180 ถึง 180")}fe.value.QuestionText=Ce()}if(fe.value.QuestionTitle&&fe.value.QuestionText&&fe.value.CategoriesID&&fe.value.ReviewDate){pe.value=!0;try{const e={questionTitle:fe.value.QuestionTitle,questionText:fe.value.QuestionText,reviewDate:fe.value.ReviewDate,categoriesId:fe.value.CategoriesID,keywords:fe.value.keywords};if(ue.value&&he.value)await y.put(`/questionsanswers/update/${he.value}`,e),C("แก้ไขสำเร็จ!",2e3);else{const t=await y.post("/questionsanswers/create",e);C("เพิ่มรายการสำเร็จ!",2e3),t.data?.skippedKeywords?.length>0&&setTimeout(()=>S(`ข้ามคำสำคัญ: ${t.data.skippedKeywords.join(", ")}`,3500),500)}Ge(),await Ze()}catch(e){_(e.response?.data?.message||e.message||"เกิดข้อผิดพลาด",4e3)}finally{pe.value=!1}}else S("กรุณากรอกข้อมูลให้ครบ")},Ke=async()=>{if(!ae.value)return;const e=ae.value,t=e.QuestionsAnswersID;try{await E({title:"ยืนยันการลบ",message:`คุณต้องการลบรายการ "<strong>${e.QuestionTitle}</strong>" ใช่หรือไม่?`,variant:"danger",confirmText:"ลบ",loadingText:"กำลังลบ...",onConfirm:async()=>{await y.delete(`/questionsanswers/delete/${t}`),C("ลบสำเร็จ!",2e3),Oe(),await Ze()}})}catch(s){_(s.response?.data?.message||"เกิดข้อผิดพลาด",4e3)}},Ye=["#0071e3","#34C759","#FF3B30","#FF9500","#AF52DE","#5856D6","#FF2D55","#5AC8FA"],Xe=b(()=>Le.categoriesNameMap||{}),Ze=async()=>{q.value=!0;try{const e=await y.get("/questionsanswers");V.value=Array.isArray(e.data)?e.data:e.data?.data||[]}catch(e){G.value="Failed to load"}finally{q.value=!1}},Je=b(()=>Array.isArray(V.value)?V.value:[]);const et=b(()=>{let e=Je.value;if(U.value.category){const t=String(U.value.category);e=e.filter(e=>{const s=String(e.CategoriesID);return s===t||s.startsWith(t+"-")})}if(U.value.status&&(e=e.filter(e=>function(e){if(!e.ReviewDate)return"active";const t=new Date,s=new Date(e.ReviewDate);if(isNaN(s.getTime()))return"active";const i=s-t,o=Math.floor(i/864e5);return i<=0?"expired":o<=14?"expiring":"active"}(e)===U.value.status)),U.value.dateFrom){const t=new Date(U.value.dateFrom);t.setHours(0,0,0,0),e=e.filter(e=>!!e.ReviewDate&&new Date(e.ReviewDate)>=t)}if(U.value.dateTo){const t=new Date(U.value.dateTo);t.setHours(23,59,59,999),e=e.filter(e=>!!e.ReviewDate&&new Date(e.ReviewDate)<=t)}null!==U.value.minValue&&(e=e.filter(e=>(e.likeCount||0)>=U.value.minValue)),null!==U.value.maxValue&&(e=e.filter(e=>(e.likeCount||0)<=U.value.maxValue));const t=(Q.value||"").toString().trim().toLowerCase();return t&&(e=e.filter(e=>JSON.stringify(e).toLowerCase().includes(t))),e}),tt=b(()=>{const e=et.value.slice(),{sortBy:t,sortOrder:s}=U.value,i="asc"===s?1:-1;return e.sort((e,s)=>{let o=0;if("date"===t){o=(e?.ReviewDate?new Date(e.ReviewDate).getTime():0)-(s?.ReviewDate?new Date(s.ReviewDate).getTime():0)}else"id"===t?o=(e?.QuestionsAnswersID||0)-(s?.QuestionsAnswersID||0):"title"===t?o=(e?.QuestionTitle||"").localeCompare(s?.QuestionTitle||"","th"):"likes"===t?o=(e?.likeCount||0)-(s?.likeCount||0):"unlikes"===t&&(o=(e?.unlikeCount||0)-(s?.unlikeCount||0));return o*i})}),st=b(()=>Math.max(1,Math.ceil(tt.value.length/te.value))),it=b(()=>tt.value.length),ot=b(()=>0===it.value?0:(J.value-1)*te.value+1),nt=b(()=>0===it.value?0:Math.min(J.value*te.value,it.value)),at=b(()=>{const e=(J.value-1)*te.value;return tt.value.slice(e,e+te.value)}),rt=b(()=>{const e=st.value,t=J.value;return e<=5?Array.from({length:e},(e,t)=>t+1):t<=3?[1,2,3,4,5]:t>=e-2?[e-4,e-3,e-2,e-1,e]:[t-2,t-1,t,t+1,t+2]});function lt(e){e>=1&&e<=st.value&&(J.value=e)}function ct(){lt(Math.max(1,J.value-1))}function dt(){lt(Math.min(st.value,J.value+1))}function ut(){lt(1)}function ht(){lt(st.value)}h(Q,()=>{J.value=1}),h(U,()=>{J.value=1},{deep:!0});const pt=b(()=>me.value.filter(e=>!String(e.CategoriesID).includes("-")).sort((e,t)=>String(e.CategoriesID).localeCompare(String(t.CategoriesID),void 0,{numeric:!0}))),gt=e=>{const t=String(e);return me.value.filter(e=>String(e.CategoriesID).startsWith(t+"-")&&String(e.CategoriesID)!==t).sort((e,t)=>String(e.CategoriesID).localeCompare(String(t.CategoriesID),void 0,{numeric:!0}))},mt=b(()=>{const e=[];for(const t of pt.value){e.push({...t,isMain:!0});const s=gt(t.CategoriesID);for(const t of s)e.push({...t,isMain:!1})}return e});function ft(e){const t=e.target.files?.[0];t&&(se.value=t),e.target.value=""}function wt(e){const t=e.dataTransfer?.files?.[0];t&&(se.value=t)}const vt=async()=>{if(se.value){ie.value=!0;try{const e=new FormData;e.append("file",se.value);const t=await y.post("/questionsanswers/upload",e,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});C(t.data?.message||"Upload successful!"),await Ze(),Ne()}catch(e){_("Upload Failed: "+(e.response?.data?.message||e.message))}finally{ie.value=!1}}},bt=async()=>{try{const e=await y.get("/questionsanswers/template",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.download="template.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(e){_("Download Failed")}},yt=()=>{if(V.value.length)try{const e=["QuestionTitle","QuestionText","ReviewDate","CategoriesID","Keywords"],t=V.value.map(e=>[`"${(e.QuestionTitle||"").replace(/"/g,'""')}"`,`"${(e.QuestionText||"").replace(/"/g,'""')}"`,e.ReviewDate?e.ReviewDate.split("T")[0]:"",e.CategoriesID||"",`"${(e.keywords||[]).map(e=>e.KeywordText).join(",")}"`]),s=([e.join(","),...t.join("\n")].join("\n"),[e.join(","),...t.map(e=>e.join(","))].join("\n")),i=URL.createObjectURL(new Blob(["\ufeff"+s],{type:"text/csv;charset=utf-8;"})),o=document.createElement("a");o.href=i,o.download="export.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(e){_("Export Failed")}};return g(()=>{R=le();if(!localStorage.getItem("userToken"))return void w.replace({name:"login"});const e=localStorage.getItem("userInfo");e&&($.value=JSON.parse(e)),H.value=localStorage.getItem("userType")||"",re.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),Ze(),je(),F(()=>document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(e=>new Rh(e)))}),B(()=>{R&&R(),re.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded")}),(e,u)=>(s(),t("div",fm,[i(Pg,{userType:H.value,userInfoObject:$.value},null,8,["userType","userInfoObject"]),r(re)?(s(),t("div",{key:0,class:"mobile-sidebar-backdrop",onClick:j,"aria-hidden":"true"})):k("",!0),c("main",wm,[c("div",vm,[q.value?(s(),t("div",bm,[...u[19]||(u[19]=[c("div",{class:"spinner-border text-primary",role:"status"},[c("span",{class:"visually-hidden"},"Loading...")],-1),c("p",{class:"mt-2 text-secondary"},"กำลังโหลดข้อมูลคำถาม-คำตอบ...",-1)])])):(s(),t("div",ym,[c("div",km,[c("div",xm,[c("button",{class:"mobile-sidebar-toggle mobile-inline-toggle",onClick:A(j,["stop"]),"aria-label":r(re)?"Close sidebar":"Open sidebar"},[c("i",{class:l(r(re)?"bi bi-x":"bi bi-list")},null,2)],8,Tm),u[22]||(u[22]=m('<svg class="book-icon" width="40" height="40" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3c95cea><circle cx="32" cy="32" r="30" fill="#7c3aed" opacity="0.08" data-v-b3c95cea></circle><path class="brain-outline brain-left" d="M 16 14 L 48 14 Q 50 14 50 16 L 50 50 Q 50 52 48 52 L 16 52 Q 14 52 14 50 L 14 16 Q 14 14 16 14 Z" stroke="#7c3aed" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-1" d="M 32 16 L 32 52" stroke="#7c3aed" stroke-width="2.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-2" d="M 22 26 L 28 26" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-2" d="M 22 32 L 28 32" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-2" d="M 22 38 L 28 38" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-2" d="M 36 26 L 42 26" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-2" d="M 36 32 L 42 32" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><path class="brain-wrinkle wrinkle-2" d="M 36 38 L 42 38" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" fill="none" data-v-b3c95cea></path><g class="neuron-group" data-v-b3c95cea><circle class="neuron-glow" cx="25" cy="45" r="5" fill="#7c3aed" opacity="0.2" data-v-b3c95cea></circle><circle class="neuron neuron-1" cx="25" cy="45" r="2.5" fill="#7c3aed" data-v-b3c95cea></circle></g><g class="neuron-group" data-v-b3c95cea><circle class="neuron-glow" cx="39" cy="45" r="5" fill="#a78bfa" opacity="0.2" data-v-b3c95cea></circle><circle class="neuron neuron-2" cx="39" cy="45" r="2.5" fill="#a78bfa" data-v-b3c95cea></circle></g></svg><h2 class="page-title m-0" data-v-b3c95cea>Manage Question Answer</h2>',2)),c("div",{class:"header-actions d-flex gap-2"},[c("button",{class:"btn-apple-primary",onClick:qe,title:"เพิ่มรายการใหม่"},[...u[20]||(u[20]=[c("i",{class:"bi bi-plus-lg"},null,-1),c("span",{class:"d-none d-sm-inline"},"เพิ่มคำถาม",-1)])]),c("button",{class:"btn-apple-icon",onClick:He,title:"อัพโหลด CSV"},[...u[21]||(u[21]=[c("i",{class:"bi bi-cloud-upload"},null,-1)])])])]),u[25]||(u[25]=m('<div class="info-card apple-card mb-4 p-4 rounded-4 shadow-apple" data-v-b3c95cea><svg class="book-icon float-start me-3" width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3c95cea><rect class="book-cover" x="12" y="12" width="48" height="48" rx="3" fill="#7c3aed" opacity="0.15" data-v-b3c95cea></rect><rect class="book-spine" x="12" y="12" width="6" height="48" rx="1" fill="#7c3aed" opacity="0.3" data-v-b3c95cea></rect><path class="book-page page-1" d="M22 20 L54 20" stroke="#7c3aed" stroke-width="2.5" stroke-linecap="round" data-v-b3c95cea></path><path class="book-page page-2" d="M22 28 L54 28" stroke="#7c3aed" stroke-width="2.5" stroke-linecap="round" data-v-b3c95cea></path><path class="book-page page-3" d="M22 36 L50 36" stroke="#7c3aed" stroke-width="2.5" stroke-linecap="round" data-v-b3c95cea></path><path class="book-page page-4" d="M22 44 L48 44" stroke="#7c3aed" stroke-width="2.5" stroke-linecap="round" data-v-b3c95cea></path><path class="book-page page-5" d="M22 52 L46 52" stroke="#7c3aed" stroke-width="2.5" stroke-linecap="round" data-v-b3c95cea></path><rect x="12" y="12" width="48" height="48" rx="3" stroke="#7c3aed" stroke-width="2" fill="none" data-v-b3c95cea></rect><rect class="bookmark" x="52" y="12" width="4" height="20" fill="#a78bfa" data-v-b3c95cea></rect></svg><h5 class="fw-bold mb-3" data-v-b3c95cea>คำถาม-คำตอบคืออะไร?</h5><p class="mb-2 text-muted" data-v-b3c95cea><strong data-v-b3c95cea>คำถาม-คำตอบ</strong> คือข้อมูลที่ใช้สำหรับตอบกลับข้อความจากผู้ใช้ เมื่อระบบค้นหากับคำถามตรงกัน ก็จะแสดงคำตอบที่เหมาะสม</p><ul class="mb-3 text-muted small" data-v-b3c95cea><li class="d-flex align-items-center gap-2 mb-2" data-v-b3c95cea><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-b3c95cea><circle cx="10" cy="10" r="8" stroke="#7c3aed" stroke-width="2" data-v-b3c95cea></circle><path d="M6 10 L9 13 L14 7" stroke="#7c3aed" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3c95cea></path></svg><span data-v-b3c95cea>คำตอบจะถูกส่งไปหาผู้ใช้เมื่อมีการค้นหาตรงกับคำถาม</span></li><li class="d-flex align-items-center gap-2 mb-2" data-v-b3c95cea><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-b3c95cea><path d="M7 4 L13 4 L15 8 L13 16 L7 16 L5 8 Z" stroke="#7c3aed" stroke-width="2" stroke-linejoin="round" data-v-b3c95cea></path><path d="M10 6 L10 12" stroke="#7c3aed" stroke-width="1.5" stroke-linecap="round" data-v-b3c95cea></path></svg><span data-v-b3c95cea>สามารถกำหนดวันหมดอายุของคำถาม-คำตอบได้</span></li><li class="d-flex align-items-center gap-2" data-v-b3c95cea><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-b3c95cea><circle cx="10" cy="10" r="8" stroke="#7c3aed" stroke-width="2" data-v-b3c95cea></circle><path d="M10 6 V10 L13 13" stroke="#7c3aed" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3c95cea></path></svg><span data-v-b3c95cea>เพิ่ม/ลบ หรืออัพเดตคำถาม-คำตอบได้ตลอด</span></li></ul><p class="mb-0 small text-success fw-bold d-flex align-items-center gap-2" data-v-b3c95cea><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-b3c95cea><circle cx="10" cy="10" r="8" stroke="#7c3aed" stroke-width="2" data-v-b3c95cea></circle><path d="M10 6 L10 11" stroke="#ffd60a" stroke-width="2" stroke-linecap="round" data-v-b3c95cea></path><path d="M8 14 L12 14" stroke="#7c3aed" stroke-width="2" stroke-linecap="round" data-v-b3c95cea></path><circle cx="10" cy="8" r="4" fill="#ffd60a" opacity="0.3" data-v-b3c95cea></circle></svg><span data-v-b3c95cea>ระบบจะค้นหาคำถามที่เหมาะสมที่สุดสำหรับผู้ใช้อัตโนมัติ</span></p></div>',1)),c("div",Cm,[c("div",_m,[u[24]||(u[24]=c("i",{class:"bi bi-search search-icon"},null,-1)),T(c("input",{type:"text",class:"search-input",placeholder:"ค้นหาคำถาม / คำตอบ / หัวข้อ...","onUpdate:modelValue":u[0]||(u[0]=e=>Q.value=e)},null,512),[[P,Q.value]]),Q.value?(s(),t("button",{key:0,class:"search-clear",onClick:u[1]||(u[1]=e=>Q.value="")},[...u[23]||(u[23]=[c("i",{class:"bi bi-x-circle-fill"},null,-1)])])):k("",!0)])]),i(gm,{modelValue:U.value,"onUpdate:modelValue":u[2]||(u[2]=e=>U.value=e),"show-sort":!0,"sort-options":K,"default-sort-by":"id","default-sort-order":"desc",categories:X.value,"category-label":"หมวดหมู่",statuses:Y,"status-label":"สถานะ","show-date-presets":!0,"date-preset-direction":"future","show-number-range":!0,"number-range-label":"Like/Unlike","min-placeholder":"ต่ำสุด","max-placeholder":"สูงสุด",onChange:Z},null,8,["modelValue","categories"])]),c("div",Sm,[c("div",Mm,[c("table",Am,[u[30]||(u[30]=c("thead",null,[c("tr",null,[c("th",{class:"ps-4"},"ID"),c("th",null,"หัวข้อคำถาม"),c("th",{class:"col-review-date text-center"},"วันหมดอายุ"),c("th",null,"คำตอบ"),c("th",null,"หมวดหมู่"),c("th",null,"Keywords"),c("th",{class:"text-center"},"👍 Like"),c("th",{class:"text-center"},"👎 Unlike"),c("th",{class:"text-center"},"⏳ Pending")])],-1)),c("tbody",null,[(s(!0),t(n,null,a(at.value,(e,i)=>(s(),t("tr",{key:e.QuestionsAnswersID,class:"align-middle apple-row",onClick:t=>function(e){ae.value=e,ne.value=!0}(e)},[c("td",Em,d(e.QuestionsAnswersID),1),c("td",Lm,[c("div",{class:"question-title-cell cell-ellipsis",title:e.QuestionTitle},d(e.QuestionTitle),9,Dm)]),c("td",$m,[c("div",Pm,[c("span",{class:l(["badge-pill",Be(e.ReviewDate)]),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:De(e.ReviewDate)},d(r(mm)(e.ReviewDate)),11,Bm)])]),c("td",Om,[c("div",{class:"question-text-cell cell-ellipsis text-muted",title:e.QuestionText},d(e.QuestionText),9,Hm)]),c("td",Nm,[c("span",{class:"category-badge",style:M({backgroundColor:Ye[(e.CategoriesID||0)%Ye.length]+"20",color:Ye[(e.CategoriesID||0)%Ye.length]})},[c("span",Fm,d(e.CategoriesName||Xe.value[e.CategoriesID]||e.CategoriesID),1)],4)]),c("td",Rm,[e.keywords&&e.keywords.length?(s(),t("div",zm,[(s(!0),t(n,null,a(e.keywords.slice(0,3),(e,i)=>(s(),t("span",{key:e.KeywordID||e.KeywordText+i,class:"keyword-tag"},d(e.KeywordText),1))),128)),e.keywords.length>3?(s(),t("span",jm,"+"+d(e.keywords.length-3),1)):k("",!0)])):(s(),t("span",Vm,"-"))]),c("td",{"data-label":"Like",class:"py-3 text-center",onClick:u[3]||(u[3]=A(()=>{},["stop"]))},[c("div",{class:l(["stat-pill like",{active:e.likeCount>0}]),onClick:t=>ze(e.QuestionsAnswersID,"like")},[u[26]||(u[26]=c("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1)),c("span",null,d(e.likeCount||0),1)],10,qm)]),c("td",{"data-label":"Unlike",class:"py-3 text-center",onClick:u[4]||(u[4]=A(()=>{},["stop"]))},[c("div",{class:l(["stat-pill unlike",{active:e.unlikeCount>0}]),onClick:t=>ze(e.QuestionsAnswersID,"unlike")},[u[27]||(u[27]=c("i",{class:"bi bi-hand-thumbs-down-fill"},null,-1)),c("span",null,d(e.unlikeCount||0),1)],10,Gm)]),c("td",{"data-label":"Pending",class:"py-3 text-center",onClick:u[5]||(u[5]=A(()=>{},["stop"]))},[c("div",{class:l(["stat-pill pending",{active:e.pendingCount>0}]),onClick:t=>ze(e.QuestionsAnswersID,"pending")},[u[28]||(u[28]=c("i",{class:"bi bi-hourglass-split"},null,-1)),c("span",null,d(e.pendingCount||0),1)],10,Wm)])],8,Im))),128)),0===at.value.length?(s(),t("tr",Qm,[...u[29]||(u[29]=[c("td",{colspan:"9",class:"text-center text-muted py-5"},[c("div",{class:"empty-state"},[c("i",{class:"bi bi-search"}),c("p",null,"ไม่พบข้อมูลคำถาม-คำตอบ")])],-1)])])):k("",!0)])])]),c("div",Um,[c("div",Km," แสดง "+d(ot.value)+" ถึง "+d(nt.value)+" จาก "+d(it.value)+" รายการ ",1),c("nav",Ym,[c("ul",Xm,[c("li",{class:l(["page-item",{disabled:1===J.value}])},[c("a",{class:"page-link",href:"#",onClick:A(ut,["prevent"])},"«")],2),c("li",{class:l(["page-item",{disabled:1===J.value}])},[c("a",{class:"page-link",href:"#",onClick:A(ct,["prevent"])},"‹")],2),(s(!0),t(n,null,a(rt.value,e=>(s(),t("li",{key:e,class:l(["page-item",{active:J.value===e}])},[c("a",{class:"page-link page-num",href:"#",onClick:A(t=>lt(e),["prevent"])},d(e),9,Zm)],2))),128)),c("li",{class:l(["page-item",{disabled:J.value===st.value||0===st.value}])},[c("a",{class:"page-link",href:"#",onClick:A(dt,["prevent"])},"›")],2),c("li",{class:l(["page-item",{disabled:J.value===st.value||0===st.value}])},[c("a",{class:"page-link",href:"#",onClick:A(ht,["prevent"])},"»")],2)])])])])]))])]),i(x,{name:"apple-zoom"},{default:o(()=>[oe.value?(s(),t("div",{key:0,class:"apple-modal-overlay",onClick:A(Ne,["self"])},[c("div",Jm,[u[41]||(u[41]=c("div",{class:"apple-modal-header-bg"},null,-1)),c("div",{class:"apple-modal-header"},[u[32]||(u[32]=c("div",{class:"d-flex flex-column"},[c("h5",{class:"apple-modal-title"},"อัพโหลดไฟล์"),c("span",{class:"apple-modal-subtitle"},"Import CSV Data")],-1)),c("button",{class:"apple-close-btn",onClick:Ne},[...u[31]||(u[31]=[c("i",{class:"bi bi-x-lg"},null,-1)])])]),c("div",ef,[c("div",{class:l(["upload-drop-area-apple",{"has-file":se.value}]),onDrop:A(wt,["prevent"]),onDragover:u[6]||(u[6]=A(()=>{},["prevent"])),onClick:u[7]||(u[7]=t=>e.$refs.fileInput.click())},[u[35]||(u[35]=c("div",{class:"upload-icon-wrapper"},[c("i",{class:"bi bi-cloud-arrow-up-fill"})],-1)),c("div",tf,[se.value?(s(),t("span",of,[u[34]||(u[34]=c("i",{class:"bi bi-file-earmark-spreadsheet-fill me-2 text-success"},null,-1)),f(d(se.value.name),1)])):(s(),t("span",sf,[...u[33]||(u[33]=[f("ลากไฟล์มาวางที่นี่ หรือ ",-1),c("strong",null,"คลิกเลือกไฟล์",-1)])]))]),u[36]||(u[36]=c("div",{class:"upload-hint"},"รองรับไฟล์ .csv เท่านั้น",-1)),c("input",{ref:"fileInput",type:"file",accept:".csv",class:"d-none",onChange:ft},null,544)],34),c("div",nf,[c("button",{class:"btn-apple-secondary small",onClick:A(bt,["stop"]),disabled:Ee.value},[...u[37]||(u[37]=[c("i",{class:"bi bi-file-earmark-arrow-down me-1"},null,-1),f(" Template ",-1)])],8,af),c("button",{class:"btn-apple-secondary small",onClick:A(Fe,["stop"])},[...u[38]||(u[38]=[c("i",{class:"bi bi-eye me-1"},null,-1),f(" ตัวอย่าง ",-1)])]),c("button",{class:"btn-apple-secondary small",onClick:A(yt,["stop"]),disabled:Ie.value},[...u[39]||(u[39]=[c("i",{class:"bi bi-download me-1"},null,-1),f(" Export CSV ",-1)])],8,rf)]),c("div",lf,[c("button",{class:"btn-apple-secondary",onClick:Ne,disabled:ie.value},"ยกเลิก",8,cf),c("button",{class:"btn-apple-primary",onClick:vt,disabled:!se.value||ie.value},[ie.value?(s(),t("span",uf)):k("",!0),u[40]||(u[40]=f(" อัพโหลด ",-1))],8,df)])])])])):k("",!0)]),_:1}),i(x,{name:"apple-zoom"},{default:o(()=>[de.value?(s(),t("div",{key:0,class:"apple-modal-overlay",onClick:A(Re,["self"])},[c("div",hf,[c("div",{class:"apple-modal-header"},[u[43]||(u[43]=c("h5",{class:"apple-modal-title"},"ตัวอย่าง Template",-1)),c("button",{class:"apple-close-btn",onClick:Re},[...u[42]||(u[42]=[c("i",{class:"bi bi-x-lg"},null,-1)])])]),c("div",pf,[c("img",{src:r("/~s651102064101/frontend/assets/svg/ex5-D6q8oBAo.svg"),alt:"Template Example",class:"img-fluid",style:{"max-height":"70vh"}},null,8,gf)])])])):k("",!0)]),_:1}),ne.value?(s(),t("div",{key:1,class:"drawer-overlay",onClick:Oe})):k("",!0),c("div",{class:l(["apple-drawer",{"drawer-open":ne.value}])},[c("div",{class:"drawer-header"},[u[45]||(u[45]=c("h5",{class:"drawer-title"},"รายละเอียด",-1)),c("button",{class:"btn-close-drawer",onClick:Oe},[...u[44]||(u[44]=[c("i",{class:"bi bi-x-lg"},null,-1)])])]),c("div",mf,[c("div",ff,[u[46]||(u[46]=c("div",{class:"drawer-label"},"ID",-1)),c("div",wf,d(ae.value?.QuestionsAnswersID||"-"),1)]),c("div",vf,[u[47]||(u[47]=c("div",{class:"drawer-label"},"หัวข้อคำถาม",-1)),c("div",bf,d(ae.value?.QuestionTitle||"-"),1)]),c("div",yf,[u[48]||(u[48]=c("div",{class:"drawer-label"},"คำตอบ",-1)),c("div",kf,d(ae.value?.QuestionText||"-"),1)]),c("div",xf,[u[49]||(u[49]=c("div",{class:"drawer-label"},"Keywords",-1)),ae.value?.keywords&&ae.value.keywords.length?(s(),t("div",Tf,[(s(!0),t(n,null,a(ae.value.keywords,(e,i)=>(s(),t("span",{key:e.KeywordID||e.KeywordText+i,class:"keyword-tag large"},d(e.KeywordText),1))),128))])):(s(),t("div",Cf,"—"))]),c("div",_f,[u[50]||(u[50]=c("div",{class:"drawer-label"},"หมวดหมู่",-1)),c("div",Sf,[c("span",{class:"category-badge large",style:M({backgroundColor:Ye[(ae.value?.CategoriesID||0)%Ye.length]+"20",color:Ye[(ae.value?.CategoriesID||0)%Ye.length]})},d(ae.value?.CategoriesName||Xe.value[ae.value?.CategoriesID]||ae.value?.CategoriesID||"-"),5)])]),c("div",Mf,[u[51]||(u[51]=c("div",{class:"drawer-label"},"วันหมดอายุ",-1)),c("div",Af,[c("span",{class:l(["badge-pill",Be(ae.value?.ReviewDate)])},d(De(ae.value?.ReviewDate)),3),c("span",If,"("+d(r(mm)(ae.value?.ReviewDate))+")",1)])])]),c("div",{class:"drawer-footer"},[c("div",{class:"d-flex gap-2"},[c("button",{class:"btn-apple-primary flex-fill",onClick:We},[...u[52]||(u[52]=[c("i",{class:"bi bi-pencil-square me-2"},null,-1),f(" แก้ไข ",-1)])]),c("button",{class:"btn-apple-secondary text-danger flex-fill",onClick:Ke},[...u[53]||(u[53]=[c("i",{class:"bi bi-trash me-2"},null,-1),f(" ลบ ",-1)])])])])],2),i(x,{name:"apple-zoom"},{default:o(()=>[ce.value?(s(),t("div",{key:0,class:"apple-modal-overlay",onClick:A(Ge,["self"])},[c("div",Ef,[u[78]||(u[78]=c("div",{class:"apple-modal-header-bg"},null,-1)),c("div",Lf,[c("div",Df,[c("h5",$f,d(ue.value?"แก้ไขรายการ":"เพิ่มรายการใหม่"),1),c("span",Pf,d(ue.value?"Edit Question & Answer":"Create New Question & Answer"),1)]),c("button",{class:"apple-close-btn",onClick:Ge},[...u[54]||(u[54]=[c("i",{class:"bi bi-x-lg"},null,-1)])])]),c("div",Bf,[c("form",{onSubmit:A(Ue,["prevent"]),class:"apple-form-container"},[c("div",Of,[u[55]||(u[55]=c("label",null,[f("หัวข้อคำถาม (Question Title) "),c("span",{class:"text-danger"},"*")],-1)),T(c("input",{type:"text",class:"apple-input","onUpdate:modelValue":u[8]||(u[8]=e=>fe.value.QuestionTitle=e),required:"",placeholder:"เช่น ทุนเรียนดีมีกี่อย่าง?"},null,512),[[P,fe.value.QuestionTitle]])]),c("div",Hf,[u[70]||(u[70]=c("label",null,[f("คำตอบ (Answer) "),c("span",{class:"text-danger"},"*")],-1)),c("div",Nf,[c("div",Ff,[c("button",{type:"button",class:l(["btn-type-option",{active:"text"===we.value}]),onClick:u[9]||(u[9]=e=>we.value="text")},[...u[56]||(u[56]=[c("i",{class:"bi bi-chat-left-text me-2"},null,-1),f("ข้อความปกติ ",-1)])],2),c("button",{type:"button",class:l(["btn-type-option",{active:"gps"===we.value}]),onClick:u[10]||(u[10]=e=>we.value="gps")},[...u[57]||(u[57]=[c("i",{class:"bi bi-geo-alt me-2"},null,-1),f("ตำแหน่ง GPS ",-1)])],2)])]),"text"===we.value?(s(),t("div",Rf,[T(c("textarea",{class:"apple-input apple-textarea","onUpdate:modelValue":u[11]||(u[11]=e=>fe.value.QuestionText=e),rows:"5",required:"",placeholder:"รายละเอียดคำตอบ..."},null,512),[[P,fe.value.QuestionText]])])):(s(),t("div",zf,[c("div",jf,[c("div",Vf,[c("button",{type:"button",class:l(["btn-gps-option",{active:"url"===ve.value}]),onClick:u[12]||(u[12]=e=>ve.value="url")},[...u[58]||(u[58]=[c("i",{class:"bi bi-link-45deg me-1"},null,-1),f("Google Maps URL ",-1)])],2),c("button",{type:"button",class:l(["btn-gps-option",{active:"coords"===ve.value}]),onClick:u[13]||(u[13]=e=>ve.value="coords")},[...u[59]||(u[59]=[c("i",{class:"bi bi-pin-map me-1"},null,-1),f("ละติจูด/ลองจิจูด ",-1)])],2)])]),"url"===ve.value?(s(),t("div",qf,[c("div",Gf,[u[60]||(u[60]=c("i",{class:"bi bi-google input-icon-left"},null,-1)),T(c("input",{type:"url",class:"apple-input ps-5","onUpdate:modelValue":u[14]||(u[14]=e=>be.value=e),placeholder:"https://maps.app.goo.gl/xxxxx หรือ https://goo.gl/maps/xxxxx",required:"gps"===we.value&&"url"===ve.value},null,8,Wf),[[P,be.value]])]),u[61]||(u[61]=c("small",{class:"text-muted d-block mt-2"},[c("i",{class:"bi bi-info-circle me-1"}),f(" วิธีรับ URL: เปิด Google Maps → คลิกสถานที่ → แชร์ → คัดลอกลิงก์ ")],-1))])):(s(),t("div",Qf,[u[67]||(u[67]=c("label",{class:"small text-secondary mb-1"},"พิกัด GPS (Latitude, Longitude)",-1)),T(c("input",{type:"text",class:"apple-input","onUpdate:modelValue":u[15]||(u[15]=e=>ye.value=e),placeholder:"วาง พิกัด เช่น 16.4321, 102.8236",onPaste:Te,required:"gps"===we.value&&"coords"===ve.value},null,40,Uf),[[P,ye.value]]),u[68]||(u[68]=c("small",{class:"text-muted d-block mt-2"},[c("i",{class:"bi bi-info-circle me-1"}),f(" วิธีหาพิกัด: เปิด Google Maps → คลิกขวาที่ตำแหน่ง → คัดลอกพิกัด → วางที่นี่ ")],-1)),ke.value&&xe.value?(s(),t("div",Kf,[u[64]||(u[64]=c("i",{class:"bi bi-check-circle text-success me-1"},null,-1)),u[65]||(u[65]=c("span",{class:"text-success"},"พิกัดถูกต้อง: ",-1)),c("span",Yf,[u[62]||(u[62]=f("Lat: ",-1)),c("strong",null,d(ke.value),1),u[63]||(u[63]=f(", Lng: ",-1)),c("strong",null,d(xe.value),1)])])):ye.value&&!ke.value?(s(),t("div",Xf,[...u[66]||(u[66]=[c("i",{class:"bi bi-exclamation-circle text-danger me-1"},null,-1),c("span",{class:"text-danger"},'รูปแบบไม่ถูกต้อง - ต้องเป็น "ละติจูด, ลองจิจูด" เช่น 16.4321, 102.8236',-1)])])):k("",!0)])),"url"===ve.value&&be.value||"coords"===ve.value&&ke.value&&xe.value?(s(),t("div",Zf,[u[69]||(u[69]=c("div",{class:"d-flex align-items-center gap-2"},[c("i",{class:"bi bi-eye text-primary"}),c("span",{class:"small text-secondary"},"ข้อมูลที่จะบันทึก:")],-1)),c("code",Jf,d("url"===ve.value?be.value:`${ke.value},${xe.value}`),1)])):k("",!0)]))]),c("div",ew,[c("div",tw,[c("div",sw,[u[71]||(u[71]=c("label",null,[f("วันหมดอายุ (Review Date) "),c("span",{class:"text-danger"},"*")],-1)),T(c("input",{type:"date",class:"apple-input","onUpdate:modelValue":u[16]||(u[16]=e=>fe.value.ReviewDate=e),required:""},null,512),[[P,fe.value.ReviewDate]]),c("div",iw,[(s(),t(n,null,a(Ae,e=>c("button",{key:e.months,type:"button",class:"btn-tag-option",onClick:t=>function(e){const t=$e(new Date,e);fe.value.ReviewDate=Pe(t)}(e.months)},d(e.label),9,ow)),64))])])]),c("div",nw,[c("div",aw,[u[74]||(u[74]=c("label",null,[f("หมวดหมู่ (Category) "),c("span",{class:"text-danger"},"*")],-1)),c("div",rw,[T(c("select",{class:"apple-input","onUpdate:modelValue":u[17]||(u[17]=e=>fe.value.CategoriesID=e),required:""},[u[72]||(u[72]=c("option",{value:null,disabled:""},"-- เลือกหมวดหมู่ --",-1)),(s(!0),t(n,null,a(mt.value,e=>(s(),t("option",{key:e.CategoriesID,value:e.CategoriesID,disabled:e.isMain,class:l(e.isMain?"fw-bold text-muted bg-light":"")},d(e.isMain?"▸ ":" └ ")+d(e.CategoriesName),11,lw))),128))],512),[[N,fe.value.CategoriesID]]),u[73]||(u[73]=c("i",{class:"bi bi-chevron-down select-icon"},null,-1))])])])]),c("div",cw,[c("div",dw,[u[75]||(u[75]=c("label",{class:"mb-0"},"Keywords",-1)),_e.value?(s(),t("button",{key:0,type:"button",class:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:Me,disabled:Se.value},[c("i",{class:l(["bi",Se.value?"bi-hourglass-split":"bi-magic"])},null,2),c("span",null,d(Se.value?"กำลังสร้าง...":"Gen Keywords"),1)],8,uw)):k("",!0)]),c("div",hw,[T(c("input",{type:"text",class:"apple-input pe-5","onUpdate:modelValue":u[18]||(u[18]=e=>ge.value=e),placeholder:"พิมพ์แล้วกด Enter หรือ +",onKeydown:D(A(Qe,["prevent"]),["enter"])},null,40,pw),[[P,ge.value]]),c("button",{class:"btn-icon-absolute",type:"button",onClick:Qe},[...u[76]||(u[76]=[c("i",{class:"bi bi-plus-lg"},null,-1)])])]),c("div",gw,[(s(!0),t(n,null,a(fe.value.keywords,(e,i)=>(s(),t("span",{key:i,class:"keyword-tag removable",onClick:e=>{return t=i,void fe.value.keywords.splice(t,1);var t}},[f(d(e)+" ",1),u[77]||(u[77]=c("i",{class:"bi bi-x"},null,-1))],8,mw))),128))])]),c("div",fw,[c("button",{type:"button",class:"btn-apple-secondary",onClick:Ge},"ยกเลิก"),c("button",{type:"submit",class:"btn-apple-primary",disabled:pe.value},[pe.value?(s(),t("span",vw)):k("",!0),f(" "+d(ue.value?"บันทึกการแก้ไข":"เพิ่มรายการ"),1)],8,ww)])],32)])])])):k("",!0)]),_:1}),i(r(L))]))}},[["__scopeId","data-v-b3c95cea"]]),yw=R({history:z("/~s651102064101/frontend/"),routes:[{path:"/",name:"chatbot",component:mr},{path:"/dashboard",name:"dashboard",component:()=>Se(()=>import("./DashboardView-Cdok-7ze.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{requiresAuth:!0}},{path:"/reports/categories",name:"report-categories",component:()=>Se(()=>import("./CategoriesReportView-yMvy1ZNP.js"),__vite__mapDeps([6,1,2,3,7,8,4,9])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/questionsanswers",name:"report-questionsanswers",component:()=>Se(()=>import("./QuestionsAnswersReportView-Bk9LvSqY.js"),__vite__mapDeps([10,1,7,8,11,3,4,12,13])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/questions-need-review",name:"report-questions-need-review",component:()=>Se(()=>import("./QuestionsNeedReviewReportView-Q2SHmvmh.js"),__vite__mapDeps([14,1,7,8,11,3,4,15,13])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/keywords",name:"report-keywords",component:()=>Se(()=>import("./KeywordsReportView-NNsb6NeO.js"),__vite__mapDeps([16,1,2,3,7,8,4,17])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/chatlog-has-answers",name:"report-chatlog-has-answers",component:()=>Se(()=>import("./ChatLogHasAnswersReportView-Cuq3cmLB.js"),__vite__mapDeps([18,1,2,3,7,8,4,19])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/feedbacks",name:"report-feedbacks",component:()=>Se(()=>import("./FeedbacksReportView-B2u2Ma_K.js"),__vite__mapDeps([20,1,11,3,7,8,4,21])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/chatlog-no-answers",name:"report-chatlog-no-answers",component:()=>Se(()=>import("./ChatLogNoAnswersReportView-Hq1Cglnl.js"),__vite__mapDeps([22,1,7,8,11,3,4,23,13])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/reports/feedbacks-handled",name:"report-feedbacks-handled",component:()=>Se(()=>import("./HandledFeedbacksReportView-Dmv9Ah76.js"),__vite__mapDeps([24,1,2,3,7,8,4,25])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/managethaipatterns",name:"managethaipatterns",component:()=>Se(()=>import("./ManageThaiPatterns-Cki_h8yi.js"),__vite__mapDeps([26,1,4,27])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/managestopwords",name:"managestopwords",component:()=>Se(()=>import("./ManageStopwords-vMHJ5Lyi.js"),__vite__mapDeps([28,1,4,29])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/managenegativekeywords",name:"managenegativekeywords",component:()=>Se(()=>import("./ManageNegativeKeywords-DLUYbFUn.js"),__vite__mapDeps([30,1,4,31])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/managesynonyms",name:"managesynonyms",component:()=>Se(()=>import("./ManageSynonyms-jVHmYjP0.js"),__vite__mapDeps([32,1,4,33])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/manageranking",name:"manageranking",component:()=>Se(()=>import("./ManageRanking-DajDZmnJ.js"),__vite__mapDeps([34,1,35,4,36,37])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/ranking-simulator",name:"ranking-simulator",component:()=>Se(()=>import("./ManageRankingSimulator-D_ZLVGXG.js"),__vite__mapDeps([38,1,35,4,36,39])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/about-system",name:"about-system",component:()=>Se(()=>import("./AboutSystemView-D0m9lqsV.js"),__vite__mapDeps([40,1,4,41])),meta:{requiresAuth:!0,allowedRoles:["officer"]}},{path:"/manageaiimage",name:"manageaiimage",component:()=>Se(()=>import("./index-DmQOmHqo.js"),__vite__mapDeps([42,1,4,43])),meta:{requiresAuth:!0,allowedRoles:["admin","officer"]}},{path:"/managebotpronoun",name:"managebotpronoun",component:()=>Se(()=>import("./ManageBotPronoun-DwNuuhCy.js"),__vite__mapDeps([44,1,4,45])),meta:{requiresAuth:!0,allowedRoles:["admin","officer"]}},{path:"/managegoogleaccount",name:"managegoogleaccount",component:()=>Se(()=>import("./ManageGoogleAccountView-DxgzctiY.js"),__vite__mapDeps([46,1,4,47])),meta:{requiresAuth:!0}},{path:"/manageadminuser",name:"manageadminuser",component:()=>Se(()=>import("./ManageAdminUserView-BvlenYII.js"),__vite__mapDeps([48,1,4,49])),meta:{requiresAuth:!0}},{path:"/manageorganizations",name:"manageorganizations",component:()=>Se(()=>import("./ManageOrganizationsView-D18bTdhJ.js"),__vite__mapDeps([50,1,4,51])),meta:{requiresAuth:!0}},{path:"/manageofficers",name:"manageofficers",component:()=>Se(()=>import("./ManageOfficersView-CdF6uNAN.js"),__vite__mapDeps([52,1,4,53])),meta:{requiresAuth:!0}},{path:"/managecategories",component:()=>Se(()=>import("./ManageCategoriesView-nKPQ67Q_.js"),__vite__mapDeps([54,1,4,55]))},{path:"/managequestionsanswers",name:"ManageQuestionsAnswers",component:bw},{path:"/",component:Sr,redirect:"/login",children:[{path:"login",name:"login",component:()=>Se(()=>import("./LoginView-C_uMPkkD.js"),__vite__mapDeps([56,1,57]))},{path:"forgotpassword",name:"forgotpassword",component:()=>Se(()=>import("./ForgotpasswordView-B1dmfxdR.js"),__vite__mapDeps([58,1,4,59]))},{path:"checkemail",name:"checkemail",component:()=>Se(()=>import("./CheckemailView-xhC-q8kF.js"),__vite__mapDeps([60,1,4,61]))},{path:"setnewpassword",name:"setnewpassword",component:()=>Se(()=>import("./SetnewpasswordView-b0W2jaB7.js"),__vite__mapDeps([62,1,4,63]))}]},{path:"/auth/google/callback",name:"google-callback",component:()=>Se(()=>import("./GoogleCallbackView-CGvCERTR.js"),__vite__mapDeps([64,1,4,65]))},{path:"/passwordupdated",name:"passwordupdated",redirect:"/login"}]});function kw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}yw.beforeEach((e,t,s)=>{const i=e.matched.some(e=>e.meta.requiresAuth),o=localStorage.getItem("userToken");i&&!o?s({name:"login"}):s()}),yw.beforeEach((e,t,s)=>{if(e.meta.requiresResetFlow){"true"===sessionStorage.getItem("resetFlowActive")?s():s({name:"forgotpassword"})}else s()});var xw,Tw={exports:{}};const Cw=kw((xw||(xw=1,Tw.exports=function(e){function t(i){if(s[i])return s[i].exports;var o=s[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var s={};return t.m=e,t.c=s,t.p="dist/",t(0)}([function(e,t,s){function i(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},n=(i(s(1)),s(6)),a=i(n),r=i(s(7)),l=i(s(8)),c=i(s(9)),d=i(s(10)),u=i(s(11)),h=i(s(14)),p=[],g=!1,m={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},f=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(g=!0),g)return p=(0,u.default)(p,m),(0,d.default)(p,m.once),p},w=function(){p=(0,h.default)(),f()},v=function(){p.forEach(function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay")})},b=function(e){return!0===e||"mobile"===e&&c.default.mobile()||"phone"===e&&c.default.phone()||"tablet"===e&&c.default.tablet()||"function"==typeof e&&!0===e()},y=function(e){m=o(m,e),p=(0,h.default)();var t=document.all&&!window.atob;return b(m.disable)||t?v():(m.disableMutationObserver||l.default.isSupported()||(m.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",m.easing),document.querySelector("body").setAttribute("data-aos-duration",m.duration),document.querySelector("body").setAttribute("data-aos-delay",m.delay),"DOMContentLoaded"===m.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?f(!0):"load"===m.startEvent?window.addEventListener(m.startEvent,function(){f(!0)}):document.addEventListener(m.startEvent,function(){f(!0)}),window.addEventListener("resize",(0,r.default)(f,m.debounceDelay,!0)),window.addEventListener("orientationchange",(0,r.default)(f,m.debounceDelay,!0)),window.addEventListener("scroll",(0,a.default)(function(){(0,d.default)(p,m.once)},m.throttleDelay)),m.disableMutationObserver||l.default.ready("[data-aos]",w),p)};e.exports={init:y,refresh:f,refreshHard:w}},function(e,t){},,,,,function(e,t){(function(t){function s(e,t,s){function i(t){var s=m,i=f;return m=f=void 0,C=t,v=e.apply(i,s)}function n(e){return C=e,b=setTimeout(d,t),_?i(e):v}function a(e){var s=t-(e-y);return S?x(s,w-(e-C)):s}function l(e){var s=e-y;return void 0===y||s>=t||s<0||S&&e-C>=w}function d(){var e=T();return l(e)?u(e):void(b=setTimeout(d,a(e)))}function u(e){return b=void 0,M&&m?i(e):(m=f=void 0,v)}function h(){void 0!==b&&clearTimeout(b),C=0,m=y=f=b=void 0}function p(){return void 0===b?v:u(T())}function g(){var e=T(),s=l(e);if(m=arguments,f=this,y=e,s){if(void 0===b)return n(y);if(S)return b=setTimeout(d,t),i(y)}return void 0===b&&(b=setTimeout(d,t)),v}var m,f,w,v,b,y,C=0,_=!1,S=!1,M=!0;if("function"!=typeof e)throw new TypeError(c);return t=r(t)||0,o(s)&&(_=!!s.leading,w=(S="maxWait"in s)?k(r(s.maxWait)||0,t):w,M="trailing"in s?!!s.trailing:M),g.cancel=h,g.flush=p,g}function i(e,t,i){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError(c);return o(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),s(e,t,{leading:n,maxWait:t,trailing:a})}function o(e){var t=void 0===e?"undefined":l(e);return!!e&&("object"==t||"function"==t)}function n(e){return!!e&&"object"==(void 0===e?"undefined":l(e))}function a(e){return"symbol"==(void 0===e?"undefined":l(e))||n(e)&&y.call(e)==u}function r(e){if("number"==typeof e)return e;if(a(e))return d;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(h,"");var s=g.test(e);return s||m.test(e)?f(e.slice(2),s?2:8):p.test(e)?d:+e}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="Expected a function",d=NaN,u="[object Symbol]",h=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,m=/^0o[0-7]+$/i,f=parseInt,w="object"==(void 0===t?"undefined":l(t))&&t&&t.Object===Object&&t,v="object"==("undefined"==typeof self?"undefined":l(self))&&self&&self.Object===Object&&self,b=w||v||Function("return this")(),y=Object.prototype.toString,k=Math.max,x=Math.min,T=function(){return b.Date.now()};e.exports=i}).call(t,function(){return this}())},function(e,t){(function(t){function s(e,t,s){function o(t){var s=m,i=f;return m=f=void 0,C=t,v=e.apply(i,s)}function n(e){return C=e,b=setTimeout(d,t),_?o(e):v}function r(e){var s=t-(e-T);return S?k(s,w-(e-C)):s}function c(e){var s=e-T;return void 0===T||s>=t||s<0||S&&e-C>=w}function d(){var e=x();return c(e)?u(e):void(b=setTimeout(d,r(e)))}function u(e){return b=void 0,M&&m?o(e):(m=f=void 0,v)}function h(){void 0!==b&&clearTimeout(b),C=0,m=T=f=b=void 0}function p(){return void 0===b?v:u(x())}function g(){var e=x(),s=c(e);if(m=arguments,f=this,T=e,s){if(void 0===b)return n(T);if(S)return b=setTimeout(d,t),o(T)}return void 0===b&&(b=setTimeout(d,t)),v}var m,f,w,v,b,T,C=0,_=!1,S=!1,M=!0;if("function"!=typeof e)throw new TypeError(l);return t=a(t)||0,i(s)&&(_=!!s.leading,w=(S="maxWait"in s)?y(a(s.maxWait)||0,t):w,M="trailing"in s?!!s.trailing:M),g.cancel=h,g.flush=p,g}function i(e){var t=void 0===e?"undefined":r(e);return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==(void 0===e?"undefined":r(e))}function n(e){return"symbol"==(void 0===e?"undefined":r(e))||o(e)&&b.call(e)==d}function a(e){if("number"==typeof e)return e;if(n(e))return c;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var s=p.test(e);return s||g.test(e)?m(e.slice(2),s?2:8):h.test(e)?c:+e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="Expected a function",c=NaN,d="[object Symbol]",u=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,g=/^0o[0-7]+$/i,m=parseInt,f="object"==(void 0===t?"undefined":r(t))&&t&&t.Object===Object&&t,w="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,v=f||w||Function("return this")(),b=Object.prototype.toString,y=Math.max,k=Math.min,x=function(){return v.Date.now()};e.exports=s}).call(t,function(){return this}())},function(e,t){function s(e){var t=void 0,i=void 0;for(t=0;t<e.length;t+=1){if((i=e[t]).dataset&&i.dataset.aos)return!0;if(i.children&&s(i.children))return!0}return!1}function i(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function o(){return!!i()}function n(e,t){var s=window.document,o=new(i())(a);r=t,o.observe(s.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function a(e){e&&e.forEach(function(e){var t=Array.prototype.slice.call(e.addedNodes),i=Array.prototype.slice.call(e.removedNodes);if(s(t.concat(i)))return r()})}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.default={isSupported:o,ready:n}},function(e,t){function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,a=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=function(){function e(){s(this,e)}return o(e,[{key:"phone",value:function(){var e=i();return!(!n.test(e)&&!a.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=i();return!(!r.test(e)&&!l.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),e}();t.default=new c},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,s){var i=e.node.getAttribute("data-aos-once");t>e.position?e.node.classList.add("aos-animate"):void 0!==i&&("false"===i||!s&&"true"!==i)&&e.node.classList.remove("aos-animate")},i=function(e,t){var i=window.pageYOffset,o=window.innerHeight;e.forEach(function(e,n){s(e,o+i,t)})};t.default=i},function(e,t,s){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(s(12)),n=function(e,t){return e.forEach(function(e,s){e.node.classList.add("aos-init"),e.position=(0,o.default)(e.node,t.offset)}),e};t.default=n},function(e,t,s){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(s(13)),n=function(e,t){var s=0,i=0,n=window.innerHeight,a={offset:e.getAttribute("data-aos-offset"),anchor:e.getAttribute("data-aos-anchor"),anchorPlacement:e.getAttribute("data-aos-anchor-placement")};switch(a.offset&&!isNaN(a.offset)&&(i=parseInt(a.offset)),a.anchor&&document.querySelectorAll(a.anchor)&&(e=document.querySelectorAll(a.anchor)[0]),s=(0,o.default)(e).top,a.anchorPlacement){case"top-bottom":break;case"center-bottom":s+=e.offsetHeight/2;break;case"bottom-bottom":s+=e.offsetHeight;break;case"top-center":s+=n/2;break;case"bottom-center":s+=n/2+e.offsetHeight;break;case"center-center":s+=n/2+e.offsetHeight/2;break;case"top-top":s+=n;break;case"bottom-top":s+=e.offsetHeight+n;break;case"center-top":s+=e.offsetHeight/2+n}return a.anchorPlacement||a.offset||isNaN(t)||(i=t),s+i};t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){for(var t=0,s=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),s+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:s,left:t}};t.default=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return e=e||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(e,function(e){return{node:e}})};t.default=s}])),Tw.exports));function _w(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function Sw(e,t){return e.get(_w(e,t))}function Mw(e,t,s){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,s)}const Aw={},Iw=e=>new Promise(t=>{if(!e)return t();const s=window.scrollX,i=window.scrollY;Aw.restoreFocusTimeout=setTimeout(()=>{Aw.previousActiveElement instanceof HTMLElement?(Aw.previousActiveElement.focus(),Aw.previousActiveElement=null):document.body&&document.body.focus(),t()},100),window.scrollTo(s,i)}),Ew="swal2-",Lw=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((e,t)=>(e[t]=Ew+t,e),{}),Dw=["success","warning","info","question","error"].reduce((e,t)=>(e[t]=Ew+t,e),{}),$w=e=>e.charAt(0).toUpperCase()+e.slice(1),Pw=[],Bw=(e,t=null)=>{var s;s=`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`,Pw.includes(s)||Pw.push(s)},Ow=e=>"function"==typeof e?e():e,Hw=e=>e&&"function"==typeof e.toPromise,Nw=e=>Hw(e)?e.toPromise():Promise.resolve(e),Fw=e=>e&&Promise.resolve(e)===e,Rw=()=>document.body.querySelector(`.${Lw.container}`),zw=e=>{const t=Rw();return t?t.querySelector(e):null},jw=e=>zw(`.${e}`),Vw=()=>jw(Lw.popup),qw=()=>jw(Lw.icon),Gw=()=>jw(Lw.title),Ww=()=>jw(Lw["html-container"]),Qw=()=>jw(Lw.image),Uw=()=>jw(Lw["progress-steps"]),Kw=()=>jw(Lw["validation-message"]),Yw=()=>zw(`.${Lw.actions} .${Lw.confirm}`),Xw=()=>zw(`.${Lw.actions} .${Lw.cancel}`),Zw=()=>zw(`.${Lw.actions} .${Lw.deny}`),Jw=()=>zw(`.${Lw.loader}`),ev=()=>jw(Lw.actions),tv=()=>jw(Lw.footer),sv=()=>jw(Lw["timer-progress-bar"]),iv=()=>jw(Lw.close),ov=()=>{const e=Vw();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(t).sort((e,t)=>{const s=parseInt(e.getAttribute("tabindex")||"0"),i=parseInt(t.getAttribute("tabindex")||"0");return s>i?1:s<i?-1:0}),i=e.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),o=Array.from(i).filter(e=>"-1"!==e.getAttribute("tabindex"));return[...new Set(s.concat(o))].filter(e=>xv(e))},nv=()=>lv(document.body,Lw.shown)&&!lv(document.body,Lw["toast-shown"])&&!lv(document.body,Lw["no-backdrop"]),av=()=>{const e=Vw();return!!e&&lv(e,Lw.toast)},rv=(e,t)=>{if(e.textContent="",t){const s=(new DOMParser).parseFromString(t,"text/html"),i=s.querySelector("head");i&&Array.from(i.childNodes).forEach(t=>{e.appendChild(t)});const o=s.querySelector("body");o&&Array.from(o.childNodes).forEach(t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})}},lv=(e,t)=>{if(!t)return!1;const s=t.split(/\s+/);for(let i=0;i<s.length;i++)if(!e.classList.contains(s[i]))return!1;return!0},cv=(e,t,s)=>{if(((e,t)=>{Array.from(e.classList).forEach(s=>{Object.values(Lw).includes(s)||Object.values(Dw).includes(s)||Object.values(t.showClass||{}).includes(s)||e.classList.remove(s)})})(e,t),!t.customClass)return;const i=t.customClass[s];i&&("string"==typeof i||i.forEach)&&pv(e,i)},dv=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${Lw.popup} > .${Lw[t]}`);case"checkbox":return e.querySelector(`.${Lw.popup} > .${Lw.checkbox} input`);case"radio":return e.querySelector(`.${Lw.popup} > .${Lw.radio} input:checked`)||e.querySelector(`.${Lw.popup} > .${Lw.radio} input:first-child`);case"range":return e.querySelector(`.${Lw.popup} > .${Lw.range} input`);default:return e.querySelector(`.${Lw.popup} > .${Lw.input}`)}},uv=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},hv=(e,t,s)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(t=>{Array.isArray(e)?e.forEach(e=>{s?e.classList.add(t):e.classList.remove(t)}):s?e.classList.add(t):e.classList.remove(t)}))},pv=(e,t)=>{hv(e,t,!0)},gv=(e,t)=>{hv(e,t,!1)},mv=(e,t)=>{const s=Array.from(e.children);for(let i=0;i<s.length;i++){const e=s[i];if(e instanceof HTMLElement&&lv(e,t))return e}},fv=(e,t,s)=>{s===`${parseInt(`${s}`)}`&&(s=parseInt(s)),s||0===parseInt(`${s}`)?e.style.setProperty(t,"number"==typeof s?`${s}px`:s):e.style.removeProperty(t)},wv=(e,t="flex")=>{e&&(e.style.display=t)},vv=e=>{e&&(e.style.display="none")},bv=(e,t="block")=>{e&&new MutationObserver(()=>{kv(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},yv=(e,t,s,i)=>{const o=e.querySelector(t);o&&o.style.setProperty(s,i)},kv=(e,t,s="flex")=>{t?wv(e,s):vv(e)},xv=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),Tv=e=>!!(e.scrollHeight>e.clientHeight),Cv=e=>{const t=window.getComputedStyle(e),s=parseFloat(t.getPropertyValue("animation-duration")||"0"),i=parseFloat(t.getPropertyValue("transition-duration")||"0");return s>0||i>0},_v=(e,t=!1)=>{const s=sv();s&&xv(s)&&(t&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${e/1e3}s linear`,s.style.width="0%"},10))},Sv=`\n <div aria-labelledby="${Lw.title}" aria-describedby="${Lw["html-container"]}" class="${Lw.popup}" tabindex="-1">\n   <button type="button" class="${Lw.close}"></button>\n   <ul class="${Lw["progress-steps"]}"></ul>\n   <div class="${Lw.icon}"></div>\n   <img class="${Lw.image}" />\n   <h2 class="${Lw.title}" id="${Lw.title}"></h2>\n   <div class="${Lw["html-container"]}" id="${Lw["html-container"]}"></div>\n   <input class="${Lw.input}" id="${Lw.input}" />\n   <input type="file" class="${Lw.file}" />\n   <div class="${Lw.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${Lw.select}" id="${Lw.select}"></select>\n   <div class="${Lw.radio}"></div>\n   <label class="${Lw.checkbox}">\n     <input type="checkbox" id="${Lw.checkbox}" />\n     <span class="${Lw.label}"></span>\n   </label>\n   <textarea class="${Lw.textarea}" id="${Lw.textarea}"></textarea>\n   <div class="${Lw["validation-message"]}" id="${Lw["validation-message"]}"></div>\n   <div class="${Lw.actions}">\n     <div class="${Lw.loader}"></div>\n     <button type="button" class="${Lw.confirm}"></button>\n     <button type="button" class="${Lw.deny}"></button>\n     <button type="button" class="${Lw.cancel}"></button>\n   </div>\n   <div class="${Lw.footer}"></div>\n   <div class="${Lw["timer-progress-bar-container"]}">\n     <div class="${Lw["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),Mv=()=>{Aw.currentInstance.resetValidationMessage()},Av=e=>{const t=(()=>{const e=Rw();return!!e&&(e.remove(),gv([document.documentElement,document.body],[Lw["no-backdrop"],Lw["toast-shown"],Lw["has-column"]]),!0)})();if("undefined"==typeof window||"undefined"==typeof document)return;const s=document.createElement("div");s.className=Lw.container,t&&pv(s,Lw["no-transition"]),rv(s,Sv),s.dataset.swal2Theme=e.theme;const i="string"==typeof(o=e.target)?document.querySelector(o):o;var o;i.appendChild(s),e.topLayer&&(s.setAttribute("popover",""),s.showPopover()),(e=>{const t=Vw();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")})(e),(e=>{"rtl"===window.getComputedStyle(e).direction&&(pv(Rw(),Lw.rtl),Aw.isRTL=!0)})(i),(()=>{const e=Vw(),t=mv(e,Lw.input),s=mv(e,Lw.file),i=e.querySelector(`.${Lw.range} input`),o=e.querySelector(`.${Lw.range} output`),n=mv(e,Lw.select),a=e.querySelector(`.${Lw.checkbox} input`),r=mv(e,Lw.textarea);t.oninput=Mv,s.onchange=Mv,n.onchange=Mv,a.onchange=Mv,r.oninput=Mv,i.oninput=()=>{Mv(),o.value=i.value},i.onchange=()=>{Mv(),o.value=i.value}})()},Iv=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?Ev(e,t):e&&rv(t,e)},Ev=(e,t)=>{e.jquery?Lv(t,e):rv(t,e.toString())},Lv=(e,t)=>{if(e.textContent="",0 in t)for(let s=0;s in t;s++)e.appendChild(t[s].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Dv=(e,t)=>{const s=ev(),i=Jw();s&&i&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?wv(s):vv(s),cv(s,t,"actions"),function(e,t,s){const i=Yw(),o=Zw(),n=Xw();if(!i||!o||!n)return;Pv(i,"confirm",s),Pv(o,"deny",s),Pv(n,"cancel",s),function(e,t,s,i){if(!i.buttonsStyling)return void gv([e,t,s],Lw.styled);pv([e,t,s],Lw.styled),i.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",i.confirmButtonColor);i.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",i.denyButtonColor);i.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",i.cancelButtonColor);$v(e),$v(t),$v(s)}(i,o,n,s),s.reverseButtons&&(s.toast?(e.insertBefore(n,i),e.insertBefore(o,i)):(e.insertBefore(n,t),e.insertBefore(o,t),e.insertBefore(i,t)))}(s,i,t),rv(i,t.loaderHtml||""),cv(i,t,"loader"))};function $v(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function Pv(e,t,s){const i=$w(t);kv(e,s[`show${i}Button`],"inline-block"),rv(e,s[`${t}ButtonText`]||""),e.setAttribute("aria-label",s[`${t}ButtonAriaLabel`]||""),e.className=Lw[t],cv(e,s,`${t}Button`)}const Bv=(e,t)=>{const s=Rw();s&&(!function(e,t){"string"==typeof t?e.style.background=t:t||pv([document.documentElement,document.body],Lw["no-backdrop"])}(s,t.backdrop),function(e,t){if(!t)return;pv(e,t in Lw?Lw[t]:Lw.center)}(s,t.position),function(e,t){if(!t)return;pv(e,Lw[`grow-${t}`])}(s,t.grow),cv(s,t,"container"))};var Ov={innerParams:new WeakMap,domCache:new WeakMap};const Hv=["input","file","range","select","radio","checkbox","textarea"],Nv=e=>{if(!e.input)return;if(!Gv[e.input])return Object.keys(Gv).join(" | "),void e.input;const t=Vv(e.input);if(!t)return;const s=Gv[e.input](t,e);wv(t),e.inputAutoFocus&&setTimeout(()=>{uv(s)})},Fv=(e,t)=>{const s=Vw();if(!s)return;const i=dv(s,e);if(i){(e=>{for(let t=0;t<e.attributes.length;t++){const s=e.attributes[t].name;["id","type","value","style"].includes(s)||e.removeAttribute(s)}})(i);for(const e in t)i.setAttribute(e,t[e])}},Rv=e=>{if(!e.input)return;const t=Vv(e.input);t&&cv(t,e,"input")},zv=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},jv=(e,t,s)=>{if(s.inputLabel){const i=document.createElement("label"),o=Lw["input-label"];i.setAttribute("for",e.id),i.className=o,"object"==typeof s.customClass&&pv(i,s.customClass.inputLabel),i.innerText=s.inputLabel,t.insertAdjacentElement("beforebegin",i)}},Vv=e=>{const t=Vw();if(t)return mv(t,Lw[e]||Lw.input)},qv=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Fw(t)},Gv={};Gv.text=Gv.email=Gv.password=Gv.number=Gv.tel=Gv.url=Gv.search=Gv.date=Gv["datetime-local"]=Gv.time=Gv.week=Gv.month=(e,t)=>(qv(e,t.inputValue),jv(e,e,t),zv(e,t),e.type=t.input,e),Gv.file=(e,t)=>(jv(e,e,t),zv(e,t),e),Gv.range=(e,t)=>{const s=e.querySelector("input"),i=e.querySelector("output");return qv(s,t.inputValue),s.type=t.input,qv(i,t.inputValue),jv(s,e,t),e},Gv.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const s=document.createElement("option");rv(s,t.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,e.appendChild(s)}return jv(e,e,t),e},Gv.radio=e=>(e.textContent="",e),Gv.checkbox=(e,t)=>{const s=dv(Vw(),"checkbox");s.value="1",s.checked=Boolean(t.inputValue);const i=e.querySelector("span");return rv(i,t.inputPlaceholder||t.inputLabel),s},Gv.textarea=(e,t)=>{qv(e,t.inputValue),zv(e,t),jv(e,e,t);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(Vw()).width);new MutationObserver(()=>{if(!document.body.contains(e))return;const i=e.offsetWidth+(o=e,parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight));var o;i>s?Vw().style.width=`${i}px`:fv(Vw(),"width",t.width)}).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const Wv=(e,t)=>{const s=Ww();s&&(bv(s),cv(s,t,"htmlContainer"),t.html?(Iv(t.html,s),wv(s,"block")):t.text?(s.textContent=t.text,wv(s,"block")):vv(s),((e,t)=>{const s=Vw();if(!s)return;const i=Ov.innerParams.get(e),o=!i||t.input!==i.input;Hv.forEach(e=>{const i=mv(s,Lw[e]);i&&(Fv(e,t.inputAttributes),i.className=Lw[e],o&&vv(i))}),t.input&&(o&&Nv(t),Rv(t))})(e,t))},Qv=(e,t)=>{for(const[s,i]of Object.entries(Dw))t.icon!==s&&gv(e,i);pv(e,t.icon&&Dw[t.icon]),Yv(e,t),Uv(),cv(e,t,"icon")},Uv=()=>{const e=Vw();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),s=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<s.length;i++)s[i].style.backgroundColor=t},Kv=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let s=e.innerHTML,i="";if(t.iconHtml)i=Xv(t.iconHtml);else if("success"===t.icon)i=(e=>`\n  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div>\n  ${e.animation?'<div class="swal2-success-fix"></div>':""}\n  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}\n`)(t),s=s.replace(/ style=".*?"/g,"");else if("error"===t.icon)i='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n';else if(t.icon){i=Xv({question:"?",warning:"!",info:"i"}[t.icon])}s.trim()!==i.trim()&&rv(e,i)},Yv=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])yv(e,s,"background-color",t.iconColor);yv(e,".swal2-success-ring","border-color",t.iconColor)}},Xv=e=>`<div class="${Lw["icon-content"]}">${e}</div>`;let Zv=!1,Jv=0,eb=0,tb=0,sb=0;const ib=e=>{const t=Vw();if(e.target===t||qw().contains(e.target)){Zv=!0;const s=ab(e);Jv=s.clientX,eb=s.clientY,tb=parseInt(t.style.insetInlineStart)||0,sb=parseInt(t.style.insetBlockStart)||0,pv(t,"swal2-dragging")}},ob=e=>{const t=Vw();if(Zv){let{clientX:s,clientY:i}=ab(e);const o=s-Jv;t.style.insetInlineStart=`${tb+(Aw.isRTL?-o:o)}px`,t.style.insetBlockStart=`${sb+(i-eb)}px`}},nb=()=>{const e=Vw();Zv=!1,gv(e,"swal2-dragging")},ab=e=>{let t=0,s=0;return e.type.startsWith("mouse")?(t=e.clientX,s=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,s=e.touches[0].clientY),{clientX:t,clientY:s}},rb=(e,t)=>{const s=Rw(),i=Vw();if(s&&i){if(t.toast){fv(s,"width",t.width),i.style.width="100%";const e=Jw();e&&i.insertBefore(e,qw())}else fv(i,"width",t.width);fv(i,"padding",t.padding),t.color&&(i.style.color=t.color),t.background&&(i.style.background=t.background),vv(Kw()),lb(i,t),t.draggable&&!t.toast?(pv(i,Lw.draggable),(e=>{e.addEventListener("mousedown",ib),document.body.addEventListener("mousemove",ob),e.addEventListener("mouseup",nb),e.addEventListener("touchstart",ib),document.body.addEventListener("touchmove",ob),e.addEventListener("touchend",nb)})(i)):(gv(i,Lw.draggable),(e=>{e.removeEventListener("mousedown",ib),document.body.removeEventListener("mousemove",ob),e.removeEventListener("mouseup",nb),e.removeEventListener("touchstart",ib),document.body.removeEventListener("touchmove",ob),e.removeEventListener("touchend",nb)})(i))}},lb=(e,t)=>{const s=t.showClass||{};e.className=`${Lw.popup} ${xv(e)?s.popup:""}`,t.toast?(pv([document.documentElement,document.body],Lw["toast-shown"]),pv(e,Lw.toast)):pv(e,Lw.modal),cv(e,t,"popup"),"string"==typeof t.customClass&&pv(e,t.customClass),t.icon&&pv(e,Lw[`icon-${t.icon}`])},cb=e=>{const t=document.createElement("li");return pv(t,Lw["progress-step"]),rv(t,e),t},db=e=>{const t=document.createElement("li");return pv(t,Lw["progress-step-line"]),e.progressStepsDistance&&fv(t,"width",e.progressStepsDistance),t},ub=(e,t)=>{rb(0,t),Bv(0,t),((e,t)=>{const s=Uw();if(!s)return;const{progressSteps:i,currentProgressStep:o}=t;i&&0!==i.length&&void 0!==o?(wv(s),s.textContent="",i.length,i.forEach((e,n)=>{const a=cb(e);if(s.appendChild(a),n===o&&pv(a,Lw["active-progress-step"]),n!==i.length-1){const e=db(t);s.appendChild(e)}})):vv(s)})(0,t),((e,t)=>{const s=Ov.innerParams.get(e),i=qw();if(!i)return;if(s&&t.icon===s.icon)return Kv(i,t),void Qv(i,t);if(!t.icon&&!t.iconHtml)return void vv(i);if(t.icon&&-1===Object.keys(Dw).indexOf(t.icon))return t.icon,void vv(i);wv(i),Kv(i,t),Qv(i,t),pv(i,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Uv)})(e,t),((e,t)=>{const s=Qw();s&&(t.imageUrl?(wv(s,""),s.setAttribute("src",t.imageUrl),s.setAttribute("alt",t.imageAlt||""),fv(s,"width",t.imageWidth),fv(s,"height",t.imageHeight),s.className=Lw.image,cv(s,t,"image")):vv(s))})(0,t),((e,t)=>{const s=Gw();s&&(bv(s),kv(s,Boolean(t.title||t.titleText),"block"),t.title&&Iv(t.title,s),t.titleText&&(s.innerText=t.titleText),cv(s,t,"title"))})(0,t),((e,t)=>{const s=iv();s&&(rv(s,t.closeButtonHtml||""),cv(s,t,"closeButton"),kv(s,t.showCloseButton),s.setAttribute("aria-label",t.closeButtonAriaLabel||""))})(0,t),Wv(e,t),Dv(0,t),((e,t)=>{const s=tv();s&&(bv(s),kv(s,Boolean(t.footer),"block"),t.footer&&Iv(t.footer,s),cv(s,t,"footer"))})(0,t);const s=Vw();"function"==typeof t.didRender&&s&&t.didRender(s),Aw.eventEmitter.emit("didRender",s)},hb=()=>{var e;return null===(e=Yw())||void 0===e?void 0:e.click()},pb=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),gb=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},mb=(e,t)=>{var s;const i=ov();if(i.length)return-2===(e+=t)&&(e=i.length-1),e===i.length?e=0:-1===e&&(e=i.length-1),void i[e].focus();null===(s=Vw())||void 0===s||s.focus()},fb=["ArrowRight","ArrowDown"],wb=["ArrowLeft","ArrowUp"],vb=(e,t,s)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?bb(t,e):"Tab"===t.key?yb(t):[...fb,...wb].includes(t.key)?kb(t.key):"Escape"===t.key&&xb(t,e,s)))},bb=(e,t)=>{if(!Ow(t.allowEnterKey))return;const s=dv(Vw(),t.input);if(e.target&&s&&e.target instanceof HTMLElement&&e.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(t.input))return;hb(),e.preventDefault()}},yb=e=>{const t=e.target,s=ov();let i=-1;for(let o=0;o<s.length;o++)if(t===s[o]){i=o;break}e.shiftKey?mb(i,-1):mb(i,1),e.stopPropagation(),e.preventDefault()},kb=e=>{const t=ev(),s=Yw(),i=Zw(),o=Xw();if(!(t&&s&&i&&o))return;const n=[s,i,o];if(document.activeElement instanceof HTMLElement&&!n.includes(document.activeElement))return;const a=fb.includes(e)?"nextElementSibling":"previousElementSibling";let r=document.activeElement;if(r){for(let e=0;e<t.children.length;e++){if(r=r[a],!r)return;if(r instanceof HTMLButtonElement&&xv(r))break}r instanceof HTMLButtonElement&&r.focus()}},xb=(e,t,s)=>{e.preventDefault(),Ow(t.allowEscapeKey)&&s(pb.esc)};var Tb={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Cb=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},_b="undefined"!=typeof window&&!!window.GestureEvent,Sb=()=>{const e=Rw();if(!e)return;let t;e.ontouchstart=e=>{t=Mb(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Mb=e=>{const t=e.target,s=Rw(),i=Ww();return!(!s||!i)&&(!Ab(e)&&!Ib(e)&&(t===s||!(Tv(s)||!(t instanceof HTMLElement)||((e,t)=>{let s=e;for(;s&&s!==t;){if(Tv(s))return!0;s=s.parentElement}return!1})(t,i)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||Tv(i)&&i.contains(t))))},Ab=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Ib=e=>e.touches&&e.touches.length>1;let Eb=null;const Lb=e=>{null===Eb&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Eb=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Eb+(()=>{const e=document.createElement("div");e.className=Lw["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`)};function Db(e,t,s,i){av()?Rb(e,i):(Iw(s).then(()=>Rb(e,i)),gb(Aw)),_b?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),nv()&&(null!==Eb&&(document.body.style.paddingRight=`${Eb}px`,Eb=null),(()=>{if(lv(document.body,Lw.iosfix)){const e=parseInt(document.body.style.top,10);gv(document.body,Lw.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}})(),Cb()),gv([document.documentElement,document.body],[Lw.shown,Lw["height-auto"],Lw["no-backdrop"],Lw["toast-shown"]])}function $b(e){e=Hb(e);const t=Tb.swalPromiseResolve.get(this),s=Pb(this);this.isAwaitingPromise?e.isDismissed||(Ob(this),t(e)):s&&t(e)}const Pb=e=>{const t=Vw();if(!t)return!1;const s=Ov.innerParams.get(e);if(!s||lv(t,s.hideClass.popup))return!1;gv(t,s.showClass.popup),pv(t,s.hideClass.popup);const i=Rw();return gv(i,s.showClass.backdrop),pv(i,s.hideClass.backdrop),Nb(e,t,s),!0};function Bb(e){const t=Tb.swalPromiseReject.get(this);Ob(this),t&&t(e)}const Ob=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,Ov.innerParams.get(e)||e._destroy())},Hb=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Nb=(e,t,s)=>{var i;const o=Rw(),n=Cv(t);"function"==typeof s.willClose&&s.willClose(t),null===(i=Aw.eventEmitter)||void 0===i||i.emit("willClose",t),n?Fb(e,t,o,s.returnFocus,s.didClose):Db(e,o,s.returnFocus,s.didClose)},Fb=(e,t,s,i,o)=>{Aw.swalCloseEventFinishedCallback=Db.bind(null,e,s,i,o);const n=function(e){var s;e.target===t&&(null===(s=Aw.swalCloseEventFinishedCallback)||void 0===s||s.call(Aw),delete Aw.swalCloseEventFinishedCallback,t.removeEventListener("animationend",n),t.removeEventListener("transitionend",n))};t.addEventListener("animationend",n),t.addEventListener("transitionend",n)},Rb=(e,t)=>{setTimeout(()=>{var s;"function"==typeof t&&t.bind(e.params)(),null===(s=Aw.eventEmitter)||void 0===s||s.emit("didClose"),e._destroy&&e._destroy()})},zb=e=>{let t=Vw();if(t||new yk,t=Vw(),!t)return;const s=Jw();av()?vv(qw()):jb(t,e),wv(s),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},jb=(e,t)=>{const s=ev(),i=Jw();s&&i&&(!t&&xv(Yw())&&(t=Yw()),wv(s),t&&(vv(t),i.setAttribute("data-button-to-replace",t.className),s.insertBefore(i,t)),pv([e,s],Lw.loading))},Vb=e=>e.checked?1:0,qb=e=>e.checked?e.value:null,Gb=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,Wb=(e,t)=>{const s=Vw();if(!s)return;const i=e=>{"select"===t.input?function(e,t,s){const i=mv(e,Lw.select);if(!i)return;const o=(e,t,i)=>{const o=document.createElement("option");o.value=i,rv(o,t),o.selected=Kb(i,s.inputValue),e.appendChild(o)};t.forEach(e=>{const t=e[0],s=e[1];if(Array.isArray(s)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,i.appendChild(e),s.forEach(t=>o(e,t[1],t[0]))}else o(i,s,t)}),i.focus()}(s,Ub(e),t):"radio"===t.input&&function(e,t,s){const i=mv(e,Lw.radio);if(!i)return;t.forEach(e=>{const t=e[0],o=e[1],n=document.createElement("input"),a=document.createElement("label");n.type="radio",n.name=Lw.radio,n.value=t,Kb(t,s.inputValue)&&(n.checked=!0);const r=document.createElement("span");rv(r,o),r.className=Lw.label,a.appendChild(n),a.appendChild(r),i.appendChild(a)});const o=i.querySelectorAll("input");o.length&&o[0].focus()}(s,Ub(e),t)};Hw(t.inputOptions)||Fw(t.inputOptions)?(zb(Yw()),Nw(t.inputOptions).then(t=>{e.hideLoading(),i(t)})):"object"==typeof t.inputOptions?i(t.inputOptions):t.inputOptions},Qb=(e,t)=>{const s=e.getInput();s&&(vv(s),Nw(t.inputValue).then(i=>{s.value="number"===t.input?`${parseFloat(i)||0}`:`${i}`,wv(s),s.focus(),e.hideLoading()}).catch(t=>{s.value="",wv(s),s.focus(),e.hideLoading()}))};const Ub=e=>{const t=[];return e instanceof Map?e.forEach((e,s)=>{let i=e;"object"==typeof i&&(i=Ub(i)),t.push([s,i])}):Object.keys(e).forEach(s=>{let i=e[s];"object"==typeof i&&(i=Ub(i)),t.push([s,i])}),t},Kb=(e,t)=>!!t&&t.toString()===e.toString(),Yb=(e,t)=>{const s=Ov.innerParams.get(e);if(!s.input)return void $w(t);const i=e.getInput(),o=((e,t)=>{const s=e.getInput();if(!s)return null;switch(t.input){case"checkbox":return Vb(s);case"radio":return qb(s);case"file":return Gb(s);default:return t.inputAutoTrim?s.value.trim():s.value}})(e,s);s.inputValidator?Xb(e,o,t):i&&!i.checkValidity()?(e.enableButtons(),e.showValidationMessage(s.validationMessage||i.validationMessage)):"deny"===t?Zb(e,o):ty(e,o)},Xb=(e,t,s)=>{const i=Ov.innerParams.get(e);e.disableInput();Promise.resolve().then(()=>Nw(i.inputValidator(t,i.validationMessage))).then(i=>{e.enableButtons(),e.enableInput(),i?e.showValidationMessage(i):"deny"===s?Zb(e,t):ty(e,t)})},Zb=(e,t)=>{const s=Ov.innerParams.get(e||void 0);if(s.showLoaderOnDeny&&zb(Zw()),s.preDeny){e.isAwaitingPromise=!0;Promise.resolve().then(()=>Nw(s.preDeny(t,s.validationMessage))).then(s=>{!1===s?(e.hideLoading(),Ob(e)):e.close({isDenied:!0,value:void 0===s?t:s})}).catch(t=>ey(e||void 0,t))}else e.close({isDenied:!0,value:t})},Jb=(e,t)=>{e.close({isConfirmed:!0,value:t})},ey=(e,t)=>{e.rejectPromise(t)},ty=(e,t)=>{const s=Ov.innerParams.get(e||void 0);if(s.showLoaderOnConfirm&&zb(),s.preConfirm){e.resetValidationMessage(),e.isAwaitingPromise=!0;Promise.resolve().then(()=>Nw(s.preConfirm(t,s.validationMessage))).then(s=>{xv(Kw())||!1===s?(e.hideLoading(),Ob(e)):Jb(e,void 0===s?t:s)}).catch(t=>ey(e||void 0,t))}else Jb(e,t)};function sy(){const e=Ov.innerParams.get(this);if(!e)return;const t=Ov.domCache.get(this);vv(t.loader),av()?e.icon&&wv(qw()):iy(t),gv([t.popup,t.actions],Lw.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const iy=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?wv(t[0],"inline-block"):xv(Yw())||xv(Zw())||xv(Xw())||vv(e.actions)};function oy(){const e=Ov.innerParams.get(this),t=Ov.domCache.get(this);return t?dv(t.popup,e.input):null}function ny(e,t,s){const i=Ov.domCache.get(e);t.forEach(e=>{i[e].disabled=s})}function ay(e,t){const s=Vw();if(s&&e)if("radio"===e.type){const e=s.querySelectorAll(`[name="${Lw.radio}"]`);for(let s=0;s<e.length;s++)e[s].disabled=t}else e.disabled=t}function ry(){ny(this,["confirmButton","denyButton","cancelButton"],!1)}function ly(){ny(this,["confirmButton","denyButton","cancelButton"],!0)}function cy(){ay(this.getInput(),!1)}function dy(){ay(this.getInput(),!0)}function uy(e){const t=Ov.domCache.get(this),s=Ov.innerParams.get(this);rv(t.validationMessage,e),t.validationMessage.className=Lw["validation-message"],s.customClass&&s.customClass.validationMessage&&pv(t.validationMessage,s.customClass.validationMessage),wv(t.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",Lw["validation-message"]),uv(i),pv(i,Lw.inputerror))}function hy(){const e=Ov.domCache.get(this);e.validationMessage&&vv(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),gv(t,Lw.inputerror))}const py={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},gy=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],my={allowEnterKey:void 0},fy=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],wy=e=>Object.prototype.hasOwnProperty.call(py,e),vy=e=>-1!==gy.indexOf(e),by=e=>my[e],yy=e=>{wy(e)},ky=e=>{fy.includes(e)},xy=e=>{const t=by(e);t&&Bw(e,t)},Ty=e=>{!1===e.backdrop&&e.allowOutsideClick,e.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&e.theme;for(const t in e)yy(t),e.toast&&ky(t),xy(t)};function Cy(e){const t=Rw(),s=Vw(),i=Ov.innerParams.get(this);if(!s||lv(s,i.hideClass.popup))return;const o=_y(e),n=Object.assign({},i,o);Ty(n),t.dataset.swal2Theme=n.theme,ub(this,n),Ov.innerParams.set(this,n),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const _y=e=>{const t={};return Object.keys(e).forEach(s=>{vy(s)&&(t[s]=e[s])}),t};function Sy(){const e=Ov.domCache.get(this),t=Ov.innerParams.get(this);t?(e.popup&&Aw.swalCloseEventFinishedCallback&&(Aw.swalCloseEventFinishedCallback(),delete Aw.swalCloseEventFinishedCallback),"function"==typeof t.didDestroy&&t.didDestroy(),Aw.eventEmitter.emit("didDestroy"),My(this)):Ay(this)}const My=e=>{Ay(e),delete e.params,delete Aw.keydownHandler,delete Aw.keydownTarget,delete Aw.currentInstance},Ay=e=>{e.isAwaitingPromise?(Iy(Ov,e),e.isAwaitingPromise=!0):(Iy(Tb,e),Iy(Ov,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Iy=(e,t)=>{for(const s in e)e[s].delete(t)};var Ey=Object.freeze({__proto__:null,_destroy:Sy,close:$b,closeModal:$b,closePopup:$b,closeToast:$b,disableButtons:ly,disableInput:dy,disableLoading:sy,enableButtons:ry,enableInput:cy,getInput:oy,handleAwaitingPromise:Ob,hideLoading:sy,rejectPromise:Bb,resetValidationMessage:hy,showValidationMessage:uy,update:Cy});const Ly=(e,t,s)=>{t.popup.onclick=()=>{e&&(Dy(e)||e.timer||e.input)||s(pb.close)}},Dy=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let $y=!1;const Py=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&($y=!0)}}},By=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&($y=!0)}}},Oy=(e,t,s)=>{t.container.onclick=i=>{$y?$y=!1:i.target===t.container&&Ow(e.allowOutsideClick)&&s(pb.backdrop)}},Hy=e=>e instanceof Element||(e=>"object"==typeof e&&e.jquery)(e);const Ny=()=>{if(Aw.timeout)return(()=>{const e=sv();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const s=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${s}%`})(),Aw.timeout.stop()},Fy=()=>{if(Aw.timeout){const e=Aw.timeout.start();return _v(e),e}};let Ry=!1;const zy={};const jy=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in zy){const s=t.getAttribute(e);if(s)return void zy[e].fire({template:s})}};Aw.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(e){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const s=this._getHandlersByEventName(e);s.includes(t)||s.push(t)}once(e,t){const s=(...i)=>{this.removeListener(e,s),t.apply(this,i)};this.on(e,s)}emit(e,...t){this._getHandlersByEventName(e).forEach(e=>{try{e.apply(this,t)}catch(s){}})}removeListener(e,t){const s=this._getHandlersByEventName(e),i=s.indexOf(t);i>-1&&s.splice(i,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}};var Vy=Object.freeze({__proto__:null,argsToParams:e=>{const t={};return"object"!=typeof e[0]||Hy(e[0])?["title","html","icon"].forEach((s,i)=>{const o=e[i];("string"==typeof o||Hy(o))&&(t[s]=o)}):Object.assign(t,e[0]),t},bindClickHandler:function(e="data-swal-template"){zy[e]=this,Ry||(document.body.addEventListener("click",jy),Ry=!0)},clickCancel:()=>{var e;return null===(e=Xw())||void 0===e?void 0:e.click()},clickConfirm:hb,clickDeny:()=>{var e;return null===(e=Zw())||void 0===e?void 0:e.click()},enableLoading:zb,fire:function(...e){return new this(...e)},getActions:ev,getCancelButton:Xw,getCloseButton:iv,getConfirmButton:Yw,getContainer:Rw,getDenyButton:Zw,getFocusableElements:ov,getFooter:tv,getHtmlContainer:Ww,getIcon:qw,getIconContent:()=>jw(Lw["icon-content"]),getImage:Qw,getInputLabel:()=>jw(Lw["input-label"]),getLoader:Jw,getPopup:Vw,getProgressSteps:Uw,getTimerLeft:()=>Aw.timeout&&Aw.timeout.getTimerLeft(),getTimerProgressBar:sv,getTitle:Gw,getValidationMessage:Kw,increaseTimer:e=>{if(Aw.timeout){const t=Aw.timeout.increase(e);return _v(t,!0),t}},isDeprecatedParameter:by,isLoading:()=>{const e=Vw();return!!e&&e.hasAttribute("data-loading")},isTimerRunning:()=>!(!Aw.timeout||!Aw.timeout.isRunning()),isUpdatableParameter:vy,isValidParameter:wy,isVisible:()=>xv(Vw()),mixin:function(e){return class extends(this){_main(t,s){return super._main(t,Object.assign({},e,s))}}},off:(e,t)=>{e?t?Aw.eventEmitter.removeListener(e,t):Aw.eventEmitter.removeAllListeners(e):Aw.eventEmitter.reset()},on:(e,t)=>{Aw.eventEmitter.on(e,t)},once:(e,t)=>{Aw.eventEmitter.once(e,t)},resumeTimer:Fy,showLoading:zb,stopTimer:Ny,toggleTimer:()=>{const e=Aw.timeout;return e&&(e.running?Ny():Fy())}});class qy{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Gy=["swal-title","swal-html","swal-footer"],Wy=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(e=>{ek(e,["name","value"]);const s=e.getAttribute("name"),i=e.getAttribute("value");s&&i&&(t[s]="boolean"==typeof py[s]?"false"!==i:"object"==typeof py[s]?JSON.parse(i):i)}),t},Qy=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(e=>{const s=e.getAttribute("name"),i=e.getAttribute("value");s&&i&&(t[s]=new Function(`return ${i}`)())}),t},Uy=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(e=>{ek(e,["type","color","aria-label"]);const s=e.getAttribute("type");s&&["confirm","cancel","deny"].includes(s)&&(t[`${s}ButtonText`]=e.innerHTML,t[`show${$w(s)}Button`]=!0,e.hasAttribute("color")&&(t[`${s}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${s}ButtonAriaLabel`]=e.getAttribute("aria-label")))}),t},Ky=e=>{const t={},s=e.querySelector("swal-image");return s&&(ek(s,["src","width","height","alt"]),s.hasAttribute("src")&&(t.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(t.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(t.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(t.imageAlt=s.getAttribute("alt")||void 0)),t},Yy=e=>{const t={},s=e.querySelector("swal-icon");return s&&(ek(s,["type","color"]),s.hasAttribute("type")&&(t.icon=s.getAttribute("type")),s.hasAttribute("color")&&(t.iconColor=s.getAttribute("color")),t.iconHtml=s.innerHTML),t},Xy=e=>{const t={},s=e.querySelector("swal-input");s&&(ek(s,["type","label","placeholder","value"]),t.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(t.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(t.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(t.inputValue=s.getAttribute("value")));const i=Array.from(e.querySelectorAll("swal-input-option"));return i.length&&(t.inputOptions={},i.forEach(e=>{ek(e,["value"]);const s=e.getAttribute("value");if(!s)return;const i=e.innerHTML;t.inputOptions[s]=i})),t},Zy=(e,t)=>{const s={};for(const i in t){const o=t[i],n=e.querySelector(o);n&&(ek(n,[]),s[o.replace(/^swal-/,"")]=n.innerHTML.trim())}return s},Jy=e=>{const t=Gy.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(e=>{const s=e.tagName.toLowerCase();t.includes(s)})},ek=(e,t)=>{Array.from(e.attributes).forEach(s=>{-1===t.indexOf(s.name)&&(s.name,e.tagName.toLowerCase(),t.length&&t.join(", "))})},tk=e=>{const t=Rw(),s=Vw();"function"==typeof e.willOpen&&e.willOpen(s),Aw.eventEmitter.emit("willOpen",s);const i=window.getComputedStyle(document.body).overflowY;nk(t,s,e),setTimeout(()=>{ik(t,s)},10),nv()&&(ok(t,e.scrollbarPadding,i),(()=>{const e=Rw();Array.from(document.body.children).forEach(t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})})()),av()||Aw.previousActiveElement||(Aw.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout(()=>e.didOpen(s)),Aw.eventEmitter.emit("didOpen",s)},sk=e=>{const t=Vw();if(e.target!==t)return;const s=Rw();t.removeEventListener("animationend",sk),t.removeEventListener("transitionend",sk),s.style.overflowY="auto",gv(s,Lw["no-transition"])},ik=(e,t)=>{Cv(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",sk),t.addEventListener("transitionend",sk)):e.style.overflowY="auto"},ok=(e,t,s)=>{(()=>{if(_b&&!lv(document.body,Lw.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",pv(document.body,Lw.iosfix),Sb()}})(),t&&"hidden"!==s&&Lb(s),setTimeout(()=>{e.scrollTop=0})},nk=(e,t,s)=>{pv(e,s.showClass.backdrop),s.animation?(t.style.setProperty("opacity","0","important"),wv(t,"grid"),setTimeout(()=>{pv(t,s.showClass.popup),t.style.removeProperty("opacity")},10)):wv(t,"grid"),pv([document.documentElement,document.body],Lw.shown),s.heightAuto&&s.backdrop&&!s.toast&&pv([document.documentElement,document.body],Lw["height-auto"])};var ak=(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),rk=(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL");function lk(e){!function(e){e.inputValidator||("email"===e.input&&(e.inputValidator=ak),"url"===e.input&&(e.inputValidator=rk))}(e),e.showLoaderOnConfirm&&e.preConfirm,function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),Av(e)}let ck;var dk=new WeakMap;class uk{constructor(...e){if(Mw(this,dk,void 0),"undefined"==typeof window)return;ck=this;const t=Object.freeze(this.constructor.argsToParams(e));var s,i,o;this.params=t,this.isAwaitingPromise=!1,s=dk,i=this,o=this._main(ck.params),s.set(_w(s,i),o)}_main(e,t={}){if(Ty(Object.assign({},t,e)),Aw.currentInstance){const e=Tb.swalPromiseResolve.get(Aw.currentInstance),{isAwaitingPromise:t}=Aw.currentInstance;Aw.currentInstance._destroy(),t||e({isDismissed:!0}),nv()&&Cb()}Aw.currentInstance=ck;const s=pk(e,t);lk(s),Object.freeze(s),Aw.timeout&&(Aw.timeout.stop(),delete Aw.timeout),clearTimeout(Aw.restoreFocusTimeout);const i=gk(ck);return ub(ck,s),Ov.innerParams.set(ck,s),hk(ck,i,s)}then(e){return Sw(dk,this).then(e)}finally(e){return Sw(dk,this).finally(e)}}const hk=(e,t,s)=>new Promise((i,o)=>{const n=t=>{e.close({isDismissed:!0,dismiss:t,isConfirmed:!1,isDenied:!1})};Tb.swalPromiseResolve.set(e,i),Tb.swalPromiseReject.set(e,o),t.confirmButton.onclick=()=>{(e=>{const t=Ov.innerParams.get(e);e.disableButtons(),t.input?Yb(e,"confirm"):ty(e,!0)})(e)},t.denyButton.onclick=()=>{(e=>{const t=Ov.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Yb(e,"deny"):Zb(e,!1)})(e)},t.cancelButton.onclick=()=>{((e,t)=>{e.disableButtons(),t(pb.cancel)})(e,n)},t.closeButton.onclick=()=>{n(pb.close)},((e,t,s)=>{e.toast?Ly(e,t,s):(Py(t),By(t),Oy(e,t,s))})(s,t,n),((e,t,s)=>{gb(e),t.toast||(e.keydownHandler=e=>vb(t,e,s),e.keydownTarget=t.keydownListenerCapture?window:Vw(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(Aw,s,n),((e,t)=>{"select"===t.input||"radio"===t.input?Wb(e,t):["text","email","number","tel","textarea"].some(e=>e===t.input)&&(Hw(t.inputValue)||Fw(t.inputValue))&&(zb(Yw()),Qb(e,t))})(e,s),tk(s),mk(Aw,s,n),fk(t,s),setTimeout(()=>{t.container.scrollTop=0})}),pk=(e,t)=>{const s=(e=>{const t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const s=t.content;return Jy(s),Object.assign(Wy(s),Qy(s),Uy(s),Ky(s),Yy(s),Xy(s),Zy(s,Gy))})(e),i=Object.assign({},py,t,s,e);return i.showClass=Object.assign({},py.showClass,i.showClass),i.hideClass=Object.assign({},py.hideClass,i.hideClass),!1===i.animation&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},gk=e=>{const t={popup:Vw(),container:Rw(),actions:ev(),confirmButton:Yw(),denyButton:Zw(),cancelButton:Xw(),loader:Jw(),closeButton:iv(),validationMessage:Kw(),progressSteps:Uw()};return Ov.domCache.set(e,t),t},mk=(e,t,s)=>{const i=sv();vv(i),t.timer&&(e.timeout=new qy(()=>{s("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(wv(i),cv(i,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&_v(t.timer)})))},fk=(e,t)=>{if(!t.toast)return Ow(t.allowEnterKey)?void(wk(e)||vk(e,t)||mb(-1,1)):(Bw("allowEnterKey"),void bk())},wk=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const s of t)if(s instanceof HTMLElement&&xv(s))return s.focus(),!0;return!1},vk=(e,t)=>t.focusDeny&&xv(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&xv(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!xv(e.confirmButton))&&(e.confirmButton.focus(),!0),bk=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};uk.prototype.disableButtons=ly,uk.prototype.enableButtons=ry,uk.prototype.getInput=oy,uk.prototype.disableInput=dy,uk.prototype.enableInput=cy,uk.prototype.hideLoading=sy,uk.prototype.disableLoading=sy,uk.prototype.showValidationMessage=uy,uk.prototype.resetValidationMessage=hy,uk.prototype.close=$b,uk.prototype.closePopup=$b,uk.prototype.closeModal=$b,uk.prototype.closeToast=$b,uk.prototype.rejectPromise=Bb,uk.prototype.update=Cy,uk.prototype._destroy=Sy,Object.assign(uk,Vy),Object.keys(Ey).forEach(e=>{uk[e]=function(...t){return ck&&ck[e]?ck[e](...t):null}}),uk.DismissReason=pb,uk.version="11.26.10";const yk=uk;yk.default=yk,"undefined"!=typeof document&&function(e,t){var s=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=t);else try{s.innerHTML=t}catch(i){s.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const kk=j(Ce);kk.config.globalProperties.$axios=V.create({baseURL:"https://ict.pcru.ac.th/~s651102064101/backend"}),kk.config.globalProperties.$swal=yk,kk.config.devtools=!1,kk.use(yw),kk.use(Ne),kk.mount("#app"),Cw.init({duration:600,once:!0,easing:"ease-out-cubic",offset:50,disable:()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches});export{gm as A,th as M,Pg as S,Rh as T,Q as _,ee as a,le as b,jp as c,He as d,$t as e,mm as f,re as i,W as u};
