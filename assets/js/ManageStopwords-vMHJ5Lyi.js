import{I as a,r as e,l as t,g as s,H as l,c as o,o as i,a as d,p as r,d as c,m as n,u,h as v,z as p,n as w,w as h,t as f,q as g,s as b,G as m,F as k,b as y,i as x,T as L,x as S}from"./vue-vendor-CaqZERVf.js";import{_ as C,u as M,e as T,b as A,i as P,S as B,A as j,a as I,M as N}from"./index-CjxO0-0y.js";import"./axios-vendor-Dos3PyFQ.js";const q={class:"dashboard-container"},K={class:"main-content"},_={class:"container-fluid"},E={key:0,class:"text-center py-5"},D={key:1},O={class:"header-section my-4"},$={class:"header-top d-flex align-items-center gap-3 mb-3"},V=["aria-label"],z={class:"header-actions d-flex gap-2 ms-auto"},Q=["disabled"],U={class:"row g-4 mb-4"},W={class:"col-md-3"},Z={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},F={class:"stat-number"},R={class:"col-md-3"},G={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},H={class:"stat-number"},J={class:"col-md-3"},X={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},Y={class:"stat-number"},aa={class:"col-md-3"},ea={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},ta={class:"stat-number"},sa={class:"apple-card rounded-4 shadow-apple overflow-hidden mb-4"},la={class:"p-4 border-bottom"},oa={class:"d-flex align-items-center justify-content-between gap-2"},ia={class:"d-flex align-items-center gap-2"},da={class:"badge bg-secondary ms-2"},ra={class:"search-container-table ms-3",style:{"min-width":"260px","max-width":"420px",width:"40%"}},ca={class:"table-responsive"},na={class:"table table-hover mb-0 apple-table"},ua={class:"py-3","data-label":"ลำดับ"},va={class:"py-3 fw-bold","data-label":"คำ"},pa={class:"py-3","data-label":"สถานะ"},wa={class:"d-flex flex-column gap-1"},ha={key:0,class:"badge bg-success"},fa={key:1,class:"badge bg-danger"},ga={key:2,class:"badge bg-warning text-dark"},ba={class:"py-3","data-label":"การดำเนินการ"},ma={class:"d-flex gap-2"},ka=["onClick"],ya=["onClick"],xa={key:0},La={class:"d-flex justify-content-between align-items-center p-3 border-top"},Sa={class:"small text-muted"},Ca={"aria-label":"Page navigation"},Ma={class:"pagination mb-0 align-items-center"},Ta=["onClick"],Aa={class:"modal-dialog modal-dialog-centered"},Pa={class:"modal-content apple-modal rounded-4 p-3 shadow-lg"},Ba={class:"modal-header border-0"},ja={class:"modal-title w-100 text-center",id:"crudModalLabel"},Ia={class:"fs-5 fw-bold"},Na={class:"text-muted fs-6"},qa={class:"modal-body"},Ka={class:"mb-3"},_a=["disabled"],Ea={key:0,class:"alert alert-danger small py-2"},Da={class:"modal-footer border-0 justify-content-center gap-3"},Oa=["disabled"],$a=["disabled"],Va={key:0,class:"spinner-border spinner-border-sm me-2"},za={key:1,class:"bi bi-check-lg me-1"},Qa={class:"apple-modal-card seed-modal-content"},Ua={key:0,class:"seed-loading"},Wa={key:1,class:"seed-preview"},Za={key:0,class:"seed-section"},Fa={class:"seed-section-title text-success"},Ra={class:"seed-words-list"},Ga={key:1,class:"seed-section"},Ha={class:"seed-section-title text-muted"},Ja={class:"seed-words-list"},Xa={key:2,class:"seed-empty"},Ya={class:"modal-actions"},ae=["disabled"],ee=C({__name:"ManageStopwords",setup(C){const{appContext:ee}=a(),te=ee.config.globalProperties.$axios;ee.config.globalProperties.$swal;const{success:se,error:le}=M(),{confirmAction:oe,ConfirmModalComponent:ie}=T(),de=e("Officer"),re=e({}),ce=e(window.innerWidth<=768);let ne=null;const ue=()=>{const a=document.querySelector(".sidebar");!P.value?(ne=I.value,I.value=!1,a&&a.classList.remove("collapsed"),document.body.classList.add("sidebar-open"),document.body.classList.add("sidebar-mobile-expanded"),P.value=!0):(I.value=!!ne,a&&ne&&a.classList.add("collapsed"),document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),P.value=!1,ne=null)};let ve=null;const pe=e(!0),we=e([]),he=e([]),fe=e({total:0,protected:0,negativeProtected:0,active:0}),ge=e(""),be=e({sortBy:"id",sortOrder:"desc",status:""}),me=[{value:"id",label:"ID"},{value:"word",label:"คำ"}],ke=[{value:"protected",label:"ป้องกันโดย Keywords",icon:"bi bi-shield-check",color:"status-green"},{value:"negative",label:"ป้องกันโดย Negative",icon:"bi bi-dash-circle",color:"status-red"},{value:"active",label:"กำลังกรอง",icon:"bi bi-funnel",color:"status-orange"}],ye=()=>{Ce.value=1},xe=e(!1),Le=e(!1),Se=e({loading:!1,toAdd:[],alreadyExists:[],totalStandard:0}),Ce=e(1),Me=e(5),Te=e(null),Ae=e(""),Pe=e("text-success"),Be=e(null);let je=null;const Ie=e(!1),Ne=e(null),qe=e(!1),Ke=e(""),_e=e({StopwordText:""}),Ee=t(()=>{let a=[...we.value];const e=(ge.value||"").toLowerCase();e&&(a=a.filter(a=>a.StopwordText&&a.StopwordText.toLowerCase().includes(e))),"protected"===be.value.status?a=a.filter(a=>a.isProtected):"negative"===be.value.status?a=a.filter(a=>a.isNegativeKeyword):"active"===be.value.status&&(a=a.filter(a=>!a.isProtected&&!a.isNegativeKeyword));const t=be.value.sortBy,s=be.value.sortOrder;return a.sort((a,e)=>{let l,o;return"id"===t?(l=Number(a.StopwordID)||0,o=Number(e.StopwordID)||0):"word"===t?(l=(a.StopwordText||"").toLowerCase(),o=(e.StopwordText||"").toLowerCase()):(l=a.StopwordID,o=e.StopwordID),l<o?"asc"===s?-1:1:l>o?"asc"===s?1:-1:0}),a}),De=t(()=>Math.ceil(Ee.value.length/Me.value)||1),Oe=t(()=>0===Ee.value.length?0:(Ce.value-1)*Me.value+1),$e=t(()=>Math.min(Ce.value*Me.value,Ee.value.length)),Ve=t(()=>{const a=(Ce.value-1)*Me.value;return Ee.value.slice(a,a+Me.value)}),ze=t(()=>{const a=[],e=De.value,t=Ce.value;let s=Math.max(1,t-2),l=Math.min(e,t+2);l-s<4&&(1===s?l=Math.min(e,5):s=Math.max(1,e-4));for(let o=s;o<=l;o++)a.push(o);return a});function Qe(){Ce.value=1}function Ue(){Ce.value>1&&Ce.value--}function We(){Ce.value<De.value&&Ce.value++}function Ze(){Ce.value=De.value}async function Fe(){pe.value=!0,Te.value="refresh";try{const[e,t]=await Promise.all([te.get("/stopwords/public"),te.get("/keywords/public")]);let s=[];try{const a=await te.get("/negativekeywords");s=a.data?.data||a.data||[]}catch(a){}const l=e.data?.data||e.data||[],o=t.data?.data||t.data||[],i=new Set((Array.isArray(o)?o:[]).map(a=>(a.KeywordText||"").toLowerCase())),d=(Array.isArray(s)?s:[]).filter(a=>1===a.IsActive).map(a=>(a.Word||"").toLowerCase()).filter(a=>a.length>0),r=a=>{const e=(a||"").toLowerCase();return d.some(a=>e.includes(a))};we.value=(Array.isArray(l)?l:[]).map(a=>({...a,isProtected:i.has((a.StopwordText||"").toLowerCase()),isNegativeKeyword:r(a.StopwordText)})),he.value=Array.isArray(o)?o:[],fe.value={total:we.value.length,protected:we.value.filter(a=>a.isProtected).length,negativeProtected:we.value.filter(a=>a.isNegativeKeyword&&!a.isProtected).length,active:we.value.filter(a=>!a.isProtected&&!a.isNegativeKeyword).length},at("โหลดข้อมูลสำเร็จ","success")}catch(e){at("โหลดข้อมูลไม่สำเร็จ: "+(e.response?.data?.message||e.message),"error")}finally{pe.value=!1,Te.value=null}}function Re(){Ie.value=!1,Ne.value=null,_e.value={StopwordText:""},Ke.value="",Ge()}function Ge(){!je&&Be.value&&(je=new N(Be.value)),je?.show()}function He(){je?.hide()}async function Je(){if(_e.value.StopwordText?.trim()){qe.value=!0,Ke.value="";try{Ie.value?(await te.delete(`/stopwords/${Ne.value}`),await te.post("/stopwords",{text:_e.value.StopwordText.trim().toLowerCase()}),se("แก้ไข Stopword สำเร็จ")):(await te.post("/stopwords",{text:_e.value.StopwordText.trim().toLowerCase()}),se("เพิ่ม Stopword สำเร็จ")),He(),await Fe()}catch(a){const e=a.response?.data?.message||a.message;Ke.value=e,le("ไม่สำเร็จ: "+e)}finally{qe.value=!1}}else Ke.value="กรุณาระบุคำ"}async function Xe(){xe.value=!0,Se.value.loading=!0,Se.value.toAdd=[],Se.value.alreadyExists=[];try{const a=await te.get("/stopwords/seed/preview");a.data&&a.data.ok&&(Se.value.toAdd=a.data.data.toAdd||[],Se.value.alreadyExists=a.data.data.alreadyExists||[],Se.value.totalStandard=a.data.data.totalStandard||0)}catch(a){le("ไม่สามารถโหลดรายการคำได้")}finally{Se.value.loading=!1}}async function Ye(){Le.value=!0;try{const a=await te.post("/stopwords/seed");if(a.data&&a.data.ok){const e=a.data.addedCount||0;e>0?se(`เติมข้อมูลสำเร็จ! เพิ่มคำใหม่ ${e} คำ`):at("ข้อมูลเป็นปัจจุบันอยู่แล้ว ไม่มีคำใหม่ที่ต้องเพิ่ม","warning"),xe.value=!1,await Fe()}else le(a.data?.message||"ไม่สามารถเติมคำได้")}catch(a){le(a.response?.data?.message||a.message||"เกิดข้อผิดพลาดในการเติมข้อมูล")}finally{Le.value=!1}}function at(a,e){Ae.value=a,Pe.value="error"===e?"text-danger":"text-success",setTimeout(()=>{Ae.value=""},3e3)}return s(async()=>{const a=localStorage.getItem("userInfo");if(a)try{re.value=JSON.parse(a),de.value=re.value.usertype||"Officer"}catch(t){}ve=A(),await Fe();const e=()=>{ce.value=window.innerWidth<=768};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),l(()=>{ve&&ve(),je&&(je.dispose(),je=null),P.value=!1,document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded")}),(a,e)=>(i(),o("div",q,[d(B,{userType:de.value,userInfoObject:re.value},null,8,["userType","userInfoObject"]),u(P)?(i(),o("div",{key:0,class:"mobile-sidebar-backdrop",onClick:ue,"aria-hidden":"true"})):r("",!0),c("main",K,[c("div",_,[pe.value?(i(),o("div",E,[...e[6]||(e[6]=[c("div",{class:"spinner-border text-primary",role:"status"},[c("span",{class:"visually-hidden"},"Loading...")],-1),c("p",{class:"mt-2"},"กำลังโหลดข้อมูล...",-1)])])):(i(),o("div",D,[c("div",O,[c("div",$,[c("button",{class:"mobile-sidebar-toggle mobile-inline-toggle",onClick:p(ue,["stop"]),"aria-label":u(P)?"Close sidebar":"Open sidebar"},[c("i",{class:w(u(P)?"bi bi-x":"bi bi-list")},null,2)],8,V),e[9]||(e[9]=v('<svg class="brain-icon" width="40" height="40" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-8a246907><circle cx="32" cy="32" r="30" fill="#007aff" opacity="0.08" data-v-8a246907></circle><path class="brain-outline brain-left" d="M 14 16 L 50 16 L 38 32 L 38 48 L 26 52 L 26 32 Z" stroke="#007aff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none" data-v-8a246907></path><path class="brain-wrinkle wrinkle-1" d="M 20 22 L 44 22" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" fill="none" data-v-8a246907></path><path class="brain-wrinkle wrinkle-2" d="M 24 28 L 40 28" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" fill="none" data-v-8a246907></path><g class="neuron-group" data-v-8a246907><circle class="neuron-glow" cx="32" cy="22" r="6" fill="#007aff" opacity="0.2" data-v-8a246907></circle><circle class="neuron neuron-1" cx="32" cy="22" r="3" fill="#007aff" data-v-8a246907></circle></g><g class="neuron-group" data-v-8a246907><circle class="neuron-glow" cx="32" cy="40" r="6" fill="#ff9500" opacity="0.2" data-v-8a246907></circle><circle class="neuron neuron-2" cx="32" cy="40" r="3" fill="#ff9500" data-v-8a246907></circle></g></svg><h2 class="page-title m-0" data-v-8a246907>Manage Stopwords</h2>',2)),c("div",z,[c("button",{class:"btn-seed",onClick:Xe,disabled:Le.value,title:"เติมคำมาตรฐานอัตโนมัติ"},[...e[7]||(e[7]=[c("i",{class:"bi bi-magic"},null,-1),c("span",{class:"d-none d-sm-inline"},"เติมอัตโนมัติ",-1)])],8,Q),c("button",{class:"btn-add-apple",onClick:Re,title:"เพิ่ม Stopword ใหม่"},[...e[8]||(e[8]=[c("i",{class:"bi bi-plus-lg"},null,-1),c("span",{class:"d-none d-sm-inline"},"Add Stopword",-1)])])])])]),e[29]||(e[29]=v('<div class="info-card apple-card mb-4 p-4 rounded-4 shadow-apple" data-v-8a246907><svg class="book-icon float-start me-3" width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-8a246907><rect class="book-cover" x="12" y="12" width="48" height="48" rx="3" fill="#007aff" opacity="0.15" data-v-8a246907></rect><rect class="book-spine" x="12" y="12" width="6" height="48" rx="1" fill="#007aff" opacity="0.3" data-v-8a246907></rect><path class="book-page page-1" d="M22 20 L54 20" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" data-v-8a246907></path><path class="book-page page-2" d="M22 28 L54 28" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" data-v-8a246907></path><path class="book-page page-3" d="M22 36 L50 36" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" data-v-8a246907></path><path class="book-page page-4" d="M22 44 L48 44" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" data-v-8a246907></path><path class="book-page page-5" d="M22 52 L46 52" stroke="#007aff" stroke-width="2.5" stroke-linecap="round" data-v-8a246907></path><rect x="12" y="12" width="48" height="48" rx="3" stroke="#007aff" stroke-width="2" fill="none" data-v-8a246907></rect><rect class="bookmark" x="52" y="12" width="4" height="20" fill="#ff9500" data-v-8a246907></rect></svg><h5 class="fw-bold mb-3" data-v-8a246907>Stopwords คืออะไร?</h5><p class="mb-2 text-muted" data-v-8a246907><strong data-v-8a246907>Stopwords</strong> คือคำที่ระบบจะไม่นำมาใช้ในการจับคู่คำถาม เช่น &quot;ผม&quot;, &quot;อยาก&quot;, &quot;ที่&quot;, &quot;จะ&quot;, &quot;ขอ&quot; เพื่อให้การค้นหาแม่นยำขึ้น </p><ul class="mb-3 text-muted small" data-v-8a246907><li class="d-flex align-items-center gap-2 mb-2" data-v-8a246907><span data-v-8a246907>คำที่อยู่ในรายการนี้จะถูกตัดออกก่อนประมวลผลคำถาม</span></li><li class="d-flex align-items-center gap-2 mb-2" data-v-8a246907><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-8a246907><circle cx="10" cy="10" r="8" stroke="#34c759" stroke-width="2" data-v-8a246907></circle><path class="checkmark-path" d="M6 10 L9 13 L14 7" stroke="#34c759" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-8a246907></path></svg><span data-v-8a246907>คำที่อยู่ในตาราง <strong data-v-8a246907>Keywords</strong> จะถูกป้องกันอัตโนมัติ (ไม่ถูกกรอง)</span></li><li class="d-flex align-items-center gap-2" data-v-8a246907><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-8a246907><path class="broom-handle" d="M8 2 L6 10" stroke="#ff9500" stroke-width="2" stroke-linecap="round" data-v-8a246907></path><path class="broom-bristles" d="M4 10 Q6 12, 8 10 Q10 12, 12 10" stroke="#ff9500" stroke-width="2" fill="none" data-v-8a246907></path><circle class="sparkle-dot sparkle-1" cx="14" cy="6" r="1" fill="#ffd60a" data-v-8a246907></circle><circle class="sparkle-dot sparkle-2" cx="16" cy="8" r="1" fill="#ffd60a" data-v-8a246907></circle></svg><span data-v-8a246907>เพิ่ม/ลบ stopword ได้ตามต้องการ</span></li></ul><p class="mb-0 small text-success fw-bold d-flex align-items-center gap-2" data-v-8a246907><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-8a246907><circle cx="10" cy="10" r="8" stroke="#34c759" stroke-width="2" data-v-8a246907></circle><path class="lightbulb-filament" d="M10 6 L10 11" stroke="#ffd60a" stroke-width="2" stroke-linecap="round" data-v-8a246907></path><path d="M8 14 L12 14" stroke="#34c759" stroke-width="2" stroke-linecap="round" data-v-8a246907></path><circle class="bulb-glow" cx="10" cy="8" r="4" fill="#ffd60a" opacity="0.3" data-v-8a246907></circle></svg><span data-v-8a246907>ระบบโหลด stopwords จาก pythainlp แล้ว สามารถเพิ่ม/ลบได้ที่นี่</span></p></div>',1)),c("div",U,[c("div",W,[c("div",Z,[e[10]||(e[10]=v('<svg class="stat-svg" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-8a246907><circle class="stat-circle-bg" cx="32" cy="32" r="24" fill="#007aff" opacity="0.2" data-v-8a246907></circle><path class="stat-brain-wave" d="M16 32 Q20 28, 24 32 T32 32 T40 32 T48 32" stroke="#007aff" stroke-width="3" fill="none" data-v-8a246907></path><circle class="stat-dot stat-dot-1" cx="24" cy="32" r="2" fill="#007aff" data-v-8a246907></circle><circle class="stat-dot stat-dot-2" cx="32" cy="32" r="2" fill="#007aff" data-v-8a246907></circle><circle class="stat-dot stat-dot-3" cx="40" cy="32" r="2" fill="#007aff" data-v-8a246907></circle></svg>',1)),c("div",F,[d(g,{name:"number-change",mode:"out-in"},{default:h(()=>[(i(),o("span",{key:fe.value.total},f(fe.value.total||0),1))]),_:1})]),e[11]||(e[11]=c("div",{class:"stat-label"},"Stopwords ทั้งหมด",-1))])]),c("div",R,[c("div",G,[e[12]||(e[12]=c("svg",{class:"stat-svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{class:"stat-circle-bg",cx:"32",cy:"32",r:"24",fill:"#34c759",opacity:"0.2"}),c("path",{class:"stat-checkmark",d:"M20 32 L28 40 L44 24",stroke:"#34c759","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),c("circle",{class:"stat-circle",cx:"32",cy:"32",r:"20",stroke:"#34c759","stroke-width":"3",fill:"none"})],-1)),c("div",H,[d(g,{name:"number-change",mode:"out-in"},{default:h(()=>[(i(),o("span",{key:fe.value.protected},f(fe.value.protected||0),1))]),_:1})]),e[13]||(e[13]=c("div",{class:"stat-label"},"ป้องกันโดย Keywords",-1))])]),c("div",J,[c("div",X,[e[14]||(e[14]=c("svg",{class:"stat-svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{class:"stat-circle-bg",cx:"32",cy:"32",r:"24",fill:"#af52de",opacity:"0.2"}),c("circle",{class:"stat-circle",cx:"32",cy:"32",r:"18",stroke:"#af52de","stroke-width":"3",fill:"none"}),c("path",{d:"M24 32 L40 32",stroke:"#af52de","stroke-width":"4","stroke-linecap":"round"})],-1)),c("div",Y,[d(g,{name:"number-change",mode:"out-in"},{default:h(()=>[(i(),o("span",{key:fe.value.negativeProtected},f(fe.value.negativeProtected||0),1))]),_:1})]),e[15]||(e[15]=c("div",{class:"stat-label"},"ป้องกันโดย คำปฏิเสธ",-1))])]),c("div",aa,[c("div",ea,[e[16]||(e[16]=c("svg",{class:"stat-svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{class:"stat-circle-bg",cx:"32",cy:"32",r:"24",fill:"#ff9500",opacity:"0.2"}),c("path",{class:"stat-clock-hand",d:"M22 20 L42 20 L36 32 L36 44 L28 46 L28 32 Z",stroke:"#ff9500","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"})],-1)),c("div",ta,[d(g,{name:"number-change",mode:"out-in"},{default:h(()=>[(i(),o("span",{key:fe.value.active},f(fe.value.active||0),1))]),_:1})]),e[17]||(e[17]=c("div",{class:"stat-label"},"กำลังใช้งาน (Active)",-1))])])]),d(j,{modelValue:be.value,"onUpdate:modelValue":e[0]||(e[0]=a=>be.value=a),"sort-options":me,statuses:ke,"status-label":"สถานะ","show-date-range":!1,"show-date-presets":!1,"show-number-range":!1,class:"mb-4",onChange:ye},null,8,["modelValue"]),c("div",sa,[c("div",la,[c("div",oa,[c("div",ia,[e[18]||(e[18]=c("svg",{class:"icon-svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[c("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"#007aff","stroke-width":"2"}),c("path",{d:"M8 8 L16 8 M8 12 L16 12 M8 16 L12 16",stroke:"#007aff","stroke-width":"2","stroke-linecap":"round"})],-1)),e[19]||(e[19]=c("h5",{class:"fw-bold m-0"},"Stopwords",-1)),c("span",da,f(Ee.value.length)+" items",1)]),c("div",ra,[e[21]||(e[21]=c("svg",{class:"search-icon-svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[c("circle",{cx:"11",cy:"11",r:"7",stroke:"#007aff","stroke-width":"2"}),c("path",{d:"M16 16 L21 21",stroke:"#007aff","stroke-width":"2","stroke-linecap":"round"})],-1)),b(c("input",{type:"text",class:"search-input",placeholder:"Search stopword...","onUpdate:modelValue":e[1]||(e[1]=a=>ge.value=a)},null,512),[[m,ge.value]]),ge.value?(i(),o("button",{key:0,class:"search-clear",onClick:e[2]||(e[2]=a=>ge.value="")},[...e[20]||(e[20]=[c("i",{class:"bi bi-x-circle-fill"},null,-1)])])):r("",!0)])])]),c("div",ca,[c("table",na,[e[28]||(e[28]=c("thead",null,[c("tr",null,[c("th",null,"ลำดับ"),c("th",null,"คำ (Stopword)"),c("th",null,"สถานะ"),c("th",null,"การดำเนินการ")])],-1)),c("tbody",null,[d(L,{name:"row-fade"},{default:h(()=>[(i(!0),o(k,null,y(Ve.value,a=>(i(),o("tr",{key:a.StopwordID,class:"apple-row"},[c("td",ua,f(a.RowNum),1),c("td",va,f(a.StopwordText),1),c("td",pa,[c("div",wa,[a.isProtected?(i(),o("span",ha,[...e[22]||(e[22]=[c("i",{class:"bi bi-shield-check me-1"},null,-1),x(" ป้องกันโดย Keywords ",-1)])])):r("",!0),a.isNegativeKeyword?(i(),o("span",fa,[...e[23]||(e[23]=[c("i",{class:"bi bi-dash-circle me-1"},null,-1),x(" ป้องกันโดย Negative Keywords ",-1)])])):r("",!0),a.isProtected||a.isNegativeKeyword?r("",!0):(i(),o("span",ga,[...e[24]||(e[24]=[c("i",{class:"bi bi-funnel me-1"},null,-1),x(" กำลังกรอง ",-1)])]))])]),c("td",ba,[c("div",ma,[c("button",{class:"btn-action btn-edit",onClick:e=>function(a){Ie.value=!0,Ne.value=a.StopwordID,_e.value={StopwordText:a.StopwordText},Ke.value="",Ge()}(a),title:"แก้ไข"},[...e[25]||(e[25]=[c("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[c("path",{d:"M11 2 L14 5 L5 14 L2 14 L2 11 Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,ka),c("button",{class:"btn-action btn-reject",onClick:e=>async function(a){try{await oe({title:"ยืนยันการลบ",message:`คุณต้องการลบ stopword "<strong>${a.StopwordText}</strong>" หรือไม่?`,variant:"danger",confirmText:"ลบ",loadingText:"กำลังลบ...",onConfirm:async()=>{await te.delete(`/stopwords/${a.StopwordID}`),se("ลบ Stopword สำเร็จ"),await Fe()}})}catch(e){le("ลบไม่สำเร็จ: "+(e.response?.data?.message||e.message))}}(a),title:"ลบ"},[...e[26]||(e[26]=[c("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[c("path",{d:"M4 4 L12 12 M12 4 L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])],8,ya)])])]))),128))]),_:1}),0===Ee.value.length?(i(),o("tr",xa,[...e[27]||(e[27]=[c("td",{colspan:"4",class:"text-center text-muted py-5"},[c("div",{class:"empty-state"},[c("svg",{class:"empty-svg",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{class:"empty-circle",cx:"60",cy:"60",r:"50",stroke:"#007aff","stroke-width":"4",fill:"none"}),c("path",{class:"empty-checkmark",d:"M40 60 L55 75 L80 45",stroke:"#007aff","stroke-width":"6","stroke-linecap":"round","stroke-linejoin":"round"}),c("circle",{class:"empty-sparkle sparkle-1",cx:"30",cy:"30",r:"3",fill:"#ffd60a"}),c("circle",{class:"empty-sparkle sparkle-2",cx:"90",cy:"30",r:"3",fill:"#ff9500"}),c("circle",{class:"empty-sparkle sparkle-3",cx:"90",cy:"90",r:"3",fill:"#007aff"})]),c("p",{class:"mb-0 mt-3 fw-bold"},"ไม่พบ stopword ที่ตรงกับการค้นหา"),c("small",null,"ลองค้นหาด้วยคำอื่น หรือเพิ่ม stopword ใหม่")])],-1)])])):r("",!0)])])]),c("div",La,[c("div",Sa," แสดง "+f(Oe.value)+" ถึง "+f($e.value)+" จาก "+f(Ee.value.length)+" รายการ ",1),c("nav",Ca,[c("ul",Ma,[c("li",{class:w(["page-item",{disabled:1===Ce.value}])},[c("a",{class:"page-link",href:"#",onClick:p(Qe,["prevent"]),"aria-label":"First"},"«")],2),c("li",{class:w(["page-item",{disabled:1===Ce.value}])},[c("a",{class:"page-link",href:"#",onClick:p(Ue,["prevent"]),"aria-label":"Previous"},"‹")],2),(i(!0),o(k,null,y(ze.value,a=>(i(),o("li",{key:a,class:w(["page-item",{active:Ce.value===a}])},[c("a",{class:"page-link page-num rounded-3",href:"#",onClick:p(e=>function(a){Ce.value=a}(a),["prevent"])},f(a),9,Ta)],2))),128)),c("li",{class:w(["page-item",{disabled:Ce.value===De.value||0===De.value}])},[c("a",{class:"page-link",href:"#",onClick:p(We,["prevent"]),"aria-label":"Next"},"›")],2),c("li",{class:w(["page-item",{disabled:Ce.value===De.value||0===De.value}])},[c("a",{class:"page-link",href:"#",onClick:p(Ze,["prevent"]),"aria-label":"Last"},"»")],2)])])])])]))])]),c("div",{class:"modal fade",ref_key:"crudModalRef",ref:Be,tabindex:"-1","aria-hidden":"true"},[c("div",Aa,[c("div",Pa,[c("div",Ba,[c("div",ja,[c("div",Ia,f(Ie.value?"แก้ไข Stopword":"เพิ่ม Stopword ใหม่"),1),c("div",Na,f(Ie.value?"แก้ไขคำกรองที่มีอยู่":"เพิ่มคำที่ต้องการกรองออก"),1)]),c("button",{type:"button",class:"btn-close btn-close-custom","aria-label":"Close",onClick:He})]),c("div",qa,[c("form",{onSubmit:p(Je,["prevent"])},[c("div",Ka,[e[30]||(e[30]=c("label",{class:"form-label fw-bold"},[x("Stopword "),c("span",{class:"text-danger"},"*")],-1)),b(c("input",{type:"text",class:"form-control form-control-lg","onUpdate:modelValue":e[3]||(e[3]=a=>_e.value.StopwordText=a),required:"",placeholder:"เช่น ผม, อยาก, ที่, จะ",disabled:Ie.value},null,8,_a),[[m,_e.value.StopwordText]]),e[31]||(e[31]=c("small",{class:"text-muted"},"คำนี้จะถูกตัดออกก่อนประมวลผลคำถาม",-1))]),Ke.value?(i(),o("div",Ea,f(Ke.value),1)):r("",!0)],32)]),c("div",Da,[c("button",{type:"button",class:"btn btn-secondary rounded-3 px-4",onClick:He,disabled:qe.value}," ยกเลิก ",8,Oa),c("button",{type:"button",class:"btn btn-primary rounded-3 px-4",onClick:Je,disabled:!_e.value.StopwordText||qe.value},[qe.value?(i(),o("span",Va)):r("",!0),qe.value?r("",!0):(i(),o("i",za)),x(" "+f(Ie.value?"บันทึกการแก้ไข":"เพิ่ม Stopword"),1)],8,$a)])])])],512),(i(),n(S,{to:"body"},[xe.value?(i(),o("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=p(a=>xe.value=!1,["self"]))},[c("div",Qa,[e[36]||(e[36]=c("div",{class:"modal-icon primary"},[c("i",{class:"bi bi-magic"})],-1)),e[37]||(e[37]=c("h3",{class:"modal-title"},"เติมคำอัตโนมัติ",-1)),Se.value.loading?(i(),o("div",Ua,[...e[32]||(e[32]=[c("div",{class:"loading-spinner"},null,-1),c("p",{class:"mt-2 text-muted"},"กำลังโหลดรายการคำ...",-1)])])):(i(),o("div",Wa,[Se.value.toAdd.length>0?(i(),o("div",Za,[c("h4",Fa,[e[33]||(e[33]=c("i",{class:"bi bi-plus-circle-fill me-2"},null,-1)),x(" คำที่จะเพิ่มใหม่ ("+f(Se.value.toAdd.length)+" คำ) ",1)]),c("div",Ra,[(i(!0),o(k,null,y(Se.value.toAdd,a=>(i(),o("span",{key:a,class:"seed-word-tag new"},f(a),1))),128))])])):r("",!0),Se.value.alreadyExists.length>0?(i(),o("div",Ga,[c("h4",Ha,[e[34]||(e[34]=c("i",{class:"bi bi-check-circle me-2"},null,-1)),x(" มีในระบบแล้ว ("+f(Se.value.alreadyExists.length)+" คำ) ",1)]),c("div",Ja,[(i(!0),o(k,null,y(Se.value.alreadyExists,a=>(i(),o("span",{key:a,class:"seed-word-tag exists"},f(a),1))),128))])])):r("",!0),0===Se.value.toAdd.length?(i(),o("div",Xa,[...e[35]||(e[35]=[c("i",{class:"bi bi-check-circle-fill text-success",style:{"font-size":"2rem"}},null,-1),c("p",{class:"mt-2 mb-0"},"ข้อมูลครบถ้วนแล้ว ไม่มีคำใหม่ที่ต้องเพิ่ม",-1)])])):r("",!0)])),c("div",Ya,[c("button",{class:"btn-secondary",onClick:e[4]||(e[4]=a=>xe.value=!1)},"ยกเลิก"),c("button",{class:"btn-primary-apple",onClick:Ye,disabled:Le.value||0===Se.value.toAdd.length},f(Le.value?"กำลังเติม...":`เพิ่ม ${Se.value.toAdd.length} คำ`),9,ae)])])])):r("",!0)])),d(u(ie))]))}},[["__scopeId","data-v-8a246907"]]);export{ee as default};
