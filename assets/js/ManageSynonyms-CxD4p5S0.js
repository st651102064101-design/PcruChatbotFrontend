import{I as e,r as a,l as s,g as t,H as l,c as o,o as n,a as i,p as d,d as c,u as r,z as v,h as u,w as y,t as p,q as m,s as f,G as h,F as g,b,n as k,i as w,T as x,K as L,S as I,L as C}from"./vue-vendor-CaqZERVf.js";import{_ as S,u as M,e as A,b as K,i as W,S as D,A as B,a as j,M as T}from"./index-YNQFrYK5.js";import"./axios-vendor-Dos3PyFQ.js";const _={class:"dashboard-container"},O={class:"main-content"},V={class:"container-fluid"},q=["aria-label"],F={key:1,class:"text-center py-5"},U={key:2},$={class:"row g-4 mb-4"},P={class:"col-md-3"},R={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},N={class:"stat-number"},z={class:"col-md-3"},E={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},G={class:"stat-number"},H={class:"col-md-3"},J={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},Q={class:"stat-number"},Z={class:"col-md-3"},X={class:"stat-card apple-card p-4 rounded-4 shadow-apple text-center"},Y={class:"stat-number"},ee={class:"apple-card rounded-4 shadow-apple overflow-hidden mb-4"},ae={class:"p-4 border-bottom"},se={class:"d-flex align-items-center justify-content-between gap-2 flex-wrap"},te={class:"d-flex align-items-center gap-2"},le={class:"badge bg-warning text-dark ms-2"},oe={class:"search-container-table"},ne={class:"table-responsive"},ie={class:"table table-hover mb-0 apple-table"},de={class:"py-3","data-label":"ID"},ce={class:"py-3","data-label":"คำที่ผู้ใช้พิมพ์ → Keyword เป้าหมาย"},re={class:"d-flex align-items-center gap-1"},ve={class:"input-word"},ue={class:"target-word"},ye={class:"py-3","data-label":"คะแนน"},pe={class:"py-3","data-label":"บทบาท"},me={class:"synonyms-role-tag"},fe={class:"py-3","data-label":"สถานะ"},he={class:"py-3","data-label":"การดำเนินการ"},ge={class:"d-flex gap-2"},be=["onClick","title"],ke={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},we={key:0,d:"M5 8 L7 10 L11 6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},xe={key:1,d:"M6 6 L10 10 M10 6 L6 10",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"},Le=["onClick"],Ie=["onClick"],Ce={key:0},Se={class:"d-flex justify-content-between align-items-center p-3 border-top flex-wrap gap-2"},Me={class:"small text-muted"},Ae={"aria-label":"Page navigation"},Ke={class:"pagination mb-0 align-items-center"},We=["onClick"],De={class:"modal-dialog modal-dialog-centered modal-lg"},Be={class:"modal-content apple-modal rounded-4 p-3 shadow-lg"},je={class:"modal-header border-0"},Te={class:"modal-title w-100 text-center"},_e={class:"fs-5 fw-bold"},Oe={class:"text-muted fs-6"},Ve={class:"modal-body"},qe={class:"row g-3"},Fe={class:"col-md-6"},Ue={class:"col-md-6"},$e=["value"],Pe={class:"col-12"},Re={class:"form-label fw-bold"},Ne={class:"text-warning"},ze={style:{display:"flex","align-items":"center",gap:"1rem"}},Ee={class:"d-none"},Ge={class:"col-md-6"},He={class:"col-md-6"},Je={class:"form-check form-switch mt-2"},Qe={class:"form-check-label ms-2",for:"activeSwitch"},Ze={key:0,class:"alert alert-danger small py-2 mt-3"},Xe={class:"modal-footer border-0 justify-content-center gap-3"},Ye=["disabled"],ea=["disabled"],aa={key:0,class:"spinner-border spinner-border-sm me-2"},sa={key:1,class:"bi bi-check-lg me-1"},ta=S({__name:"ManageSynonyms",setup(S){const{appContext:ta}=e(),la=ta.config.globalProperties.$axios;ta.config.globalProperties.$swal;const{success:oa,error:na}=M(),{confirmAction:ia,ConfirmModalComponent:da}=A(),ca=a("Officer"),ra=a({}),va=a(window.innerWidth<=768);let ua=null;const ya=()=>{const e=document.querySelector(".sidebar");!W.value?(ua=j.value,j.value=!1,e&&e.classList.remove("collapsed"),document.body.classList.add("sidebar-open"),document.body.classList.add("sidebar-mobile-expanded"),W.value=!0):(j.value=!!ua,e&&ua&&e.classList.add("collapsed"),document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-mobile-expanded"),W.value=!1,ua=null)};let pa=null;const ma=a(!0),fa=a([]),ha=a([]),ga=a({total:0,active:0,inactive:0,avgScore:"0.00",keywordsWithSynonyms:0}),ba=a(""),ka=a({sortBy:"id",sortOrder:"asc",status:""}),wa=[{value:"id",label:"ID"},{value:"inputWord",label:"คำที่พิมพ์"},{value:"score",label:"คะแนน"}],xa=[{value:"active",label:"ใช้งาน",icon:"bi bi-check-circle-fill",color:"status-green"},{value:"inactive",label:"ปิดใช้งาน",icon:"bi bi-x-circle",color:"status-gray"}],La=()=>{Ia.value=1},Ia=a(1),Ca=a(5),Sa=a(null);let Ma=null;const Aa=a(!1),Ka=a(null),Wa=a(!1),Da=a(""),Ba=a({inputWord:"",targetKeywordId:"",similarityScore:.8,roleDescription:"คำพ้อง",isActive:!0}),ja=s(()=>{let e=[...fa.value];if(ba.value){const a=ba.value.toLowerCase();e=e.filter(e=>e.InputWord&&e.InputWord.toLowerCase().includes(a)||e.TargetKeyword&&e.TargetKeyword.toLowerCase().includes(a)||e.RoleDescription&&e.RoleDescription.toLowerCase().includes(a))}return ka.value.status&&("active"===ka.value.status?e=e.filter(e=>1===e.IsActive||!0===e.IsActive):"inactive"===ka.value.status&&(e=e.filter(e=>0===e.IsActive||!1===e.IsActive))),ka.value.sortBy&&e.sort((e,a)=>{let s,t;switch(ka.value.sortBy){case"id":s=e.SynonymID||0,t=a.SynonymID||0;break;case"inputWord":s=(e.InputWord||"").toLowerCase(),t=(a.InputWord||"").toLowerCase();break;case"score":s=e.Score||0,t=a.Score||0;break;default:return 0}return s<t?"asc"===ka.value.sortOrder?-1:1:s>t?"asc"===ka.value.sortOrder?1:-1:0}),e}),Ta=s(()=>Math.ceil(ja.value.length/Ca.value)||1),_a=s(()=>0===ja.value.length?0:(Ia.value-1)*Ca.value+1),Oa=s(()=>Math.min(Ia.value*Ca.value,ja.value.length)),Va=s(()=>{const e=(Ia.value-1)*Ca.value;return ja.value.slice(e,e+Ca.value)}),qa=s(()=>{const e=[],a=Ta.value,s=Ia.value;let t=Math.max(1,s-2),l=Math.min(a,s+2);l-t<4&&(1===t?l=Math.min(a,5):t=Math.max(1,a-4));for(let o=t;o<=l;o++)e.push(o);return e}),Fa=s(()=>Ba.value.inputWord?.trim()&&Ba.value.targetKeywordId);function Ua(){Ia.value=1}function $a(){Ia.value>1&&Ia.value--}function Pa(){Ia.value<Ta.value&&Ia.value++}function Ra(){Ia.value=Ta.value}async function Na(){ma.value=!0;try{const[e,a]=await Promise.all([la.get("/synonyms"),la.get("/synonyms/stats")]),s=e.data?.data||e.data||[];fa.value=Array.isArray(s)?s:[];const t=a.data?.data||a.data||{};ga.value={total:t.total||0,active:t.active||0,inactive:t.inactive||0,avgScore:t.avgScore||"0.00",keywordsWithSynonyms:t.keywordsWithSynonyms||0},Ia.value=1}catch(e){na("โหลดข้อมูลไม่สำเร็จ: "+(e.response?.data?.message||e.message))}finally{ma.value=!1}}function za(e){const a=parseFloat(e);return a>=.8?"score-high":a>=.5?"score-medium":"score-low"}function Ea(){Aa.value=!1,Ka.value=null,Ba.value={inputWord:"",targetKeywordId:"",similarityScore:.8,roleDescription:"คำพ้อง",isActive:!0},Da.value="",Ga()}function Ga(){!Ma&&Sa.value&&(Ma=new T(Sa.value)),Ma?.show()}function Ha(){Ma?.hide()}async function Ja(){if(!Ba.value.inputWord?.trim())return void(Da.value="กรุณาระบุคำที่ผู้ใช้พิมพ์");if(!Ba.value.targetKeywordId)return void(Da.value="กรุณาเลือก Keyword เป้าหมาย");Wa.value=!0,Da.value="";const e={inputWord:Ba.value.inputWord.trim(),targetKeywordId:Ba.value.targetKeywordId,similarityScore:Ba.value.similarityScore,roleDescription:Ba.value.roleDescription||"คำพ้อง",isActive:Ba.value.isActive};try{Aa.value?(await la.put(`/synonyms/${Ka.value}`,e),oa("แก้ไขคำพ้องสำเร็จ")):(await la.post("/synonyms",e),oa("เพิ่มคำพ้องสำเร็จ")),Ha(),await Na()}catch(a){const e=a.response?.data?.message||a.message;Da.value=e,na("ไม่สำเร็จ: "+e)}finally{Wa.value=!1}}return t(async()=>{const e=()=>{const e=window.innerWidth<=768;e!==va.value&&(va.value=e,!e&&W.value&&(W.value=!1,document.body.classList.remove("sidebar-open","sidebar-mobile-expanded"),j.value=ua??j.value,ua=null))};window.addEventListener("resize",e);const a=localStorage.getItem("userInfo");if(a)try{ra.value=JSON.parse(a),ca.value=ra.value.usertype||"Officer"}catch(s){}pa=K(),await async function(){try{const e=await la.get("/keywords/public"),a=e.data?.data||e.data||[];ha.value=Array.isArray(a)?a:[]}catch(e){ha.value=[]}}(),await Na(),l.cleanup=()=>window.removeEventListener("resize",e)}),l(()=>{pa&&pa(),W.value=!1,document.body.classList.remove("sidebar-open","sidebar-mobile-expanded"),Ma&&(Ma.dispose(),Ma=null),l.cleanup&&l.cleanup()}),(e,a)=>(n(),o("div",_,[i(D,{userType:ca.value,userInfoObject:ra.value},null,8,["userType","userInfoObject"]),r(W)?(n(),o("div",{key:0,class:"mobile-sidebar-backdrop",onClick:ya,"aria-hidden":"true"})):d("",!0),c("main",O,[c("div",V,[va.value?(n(),o("button",{key:0,class:"mobile-sidebar-toggle mobile-inline-toggle",onClick:v(ya,["stop"]),"aria-label":r(W)?"Close sidebar":"Open sidebar"},[...a[8]||(a[8]=[c("i",{class:"bi bi-list"},null,-1)])],8,q)):d("",!0),ma.value?(n(),o("div",F,[...a[9]||(a[9]=[c("div",{class:"spinner-border text-warning",role:"status"},[c("span",{class:"visually-hidden"},"Loading...")],-1),c("p",{class:"mt-2"},"กำลังโหลดข้อมูล...",-1)])])):(n(),o("div",U,[c("div",{class:"d-block d-md-flex align-items-center justify-content-between mb-4"},[a[11]||(a[11]=u('<div class="d-flex align-items-center gap-3" data-v-d411a23d><svg class="synonyms-link-icon" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d411a23d><circle cx="32" cy="32" r="30" fill="#ff9500" opacity="0.08" data-v-d411a23d></circle><path class="synonyms-link-chain" d="M20 28 C20 24, 24 20, 28 20 L32 20 C36 20, 40 24, 40 28 C40 32, 36 36, 32 36 L28 36" stroke="#ff9500" stroke-width="4" stroke-linecap="round" fill="none" data-v-d411a23d></path><path class="synonyms-link-chain" d="M44 36 C44 40, 40 44, 36 44 L32 44 C28 44, 24 40, 24 36 C24 32, 28 28, 32 28 L36 28" stroke="#ff9500" stroke-width="4" stroke-linecap="round" fill="none" data-v-d411a23d></path><g class="synonyms-link-dots" data-v-d411a23d><circle class="synonyms-link-dot synonyms-link-dot-1" cx="26" cy="32" r="2" fill="#ff9500" data-v-d411a23d></circle><circle class="synonyms-link-dot synonyms-link-dot-2" cx="32" cy="32" r="2" fill="#ff6b00" data-v-d411a23d></circle><circle class="synonyms-link-dot synonyms-link-dot-3" cx="38" cy="32" r="2" fill="#ff9500" data-v-d411a23d></circle></g><circle class="synonyms-link-pulse" cx="32" cy="32" r="6" fill="#ff9500" opacity="0.2" data-v-d411a23d></circle></svg><h2 class="page-title m-0" data-v-d411a23d>Manage Synonyms</h2></div>',1)),c("div",{class:"mt-3 mt-md-0"},[c("button",{class:"btn-add-apple",onClick:Ea,title:"เพิ่มคำพ้องใหม่"},[...a[10]||(a[10]=[c("i",{class:"bi bi-plus-lg"},null,-1),c("span",null,"Add Synonym",-1)])])])]),a[31]||(a[31]=u('<div class="info-card apple-card mb-4 p-4 rounded-4 shadow-apple" data-v-d411a23d><svg class="synonyms-book-icon float-start me-3" width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d411a23d><rect class="synonyms-book-cover" x="12" y="12" width="48" height="48" rx="3" fill="#ff9500" opacity="0.15" data-v-d411a23d></rect><rect class="synonyms-book-spine" x="12" y="12" width="6" height="48" rx="1" fill="#ff9500" opacity="0.3" data-v-d411a23d></rect><path class="synonyms-book-page synonyms-book-page-1" d="M22 20 L54 20" stroke="#ff9500" stroke-width="2.5" stroke-linecap="round" data-v-d411a23d></path><path class="synonyms-book-page synonyms-book-page-2" d="M22 28 L54 28" stroke="#ff9500" stroke-width="2.5" stroke-linecap="round" data-v-d411a23d></path><path class="synonyms-book-page synonyms-book-page-3" d="M22 36 L50 36" stroke="#ff9500" stroke-width="2.5" stroke-linecap="round" data-v-d411a23d></path><path class="synonyms-book-page synonyms-book-page-4" d="M22 44 L48 44" stroke="#ff9500" stroke-width="2.5" stroke-linecap="round" data-v-d411a23d></path><circle cx="44" cy="52" r="6" fill="#ff6b00" opacity="0.3" data-v-d411a23d></circle><path d="M41 52 L47 52" stroke="#ff6b00" stroke-width="2" stroke-linecap="round" data-v-d411a23d></path><rect x="12" y="12" width="48" height="48" rx="3" stroke="#ff9500" stroke-width="2" fill="none" data-v-d411a23d></rect></svg><h5 class="fw-bold mb-3" data-v-d411a23d>คำพ้อง/คำสนับสนุน (Synonyms) คืออะไร?</h5><p class="mb-2 text-muted" data-v-d411a23d><strong data-v-d411a23d>Synonyms</strong> คือระบบจับคู่คำที่ผู้ใช้พิมพ์ กับ Keyword หลักในระบบ พร้อมคะแนนความคล้ายคลึง </p><ul class="mb-3 text-muted small" data-v-d411a23d><li class="d-flex align-items-center gap-2 mb-2" data-v-d411a23d><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-d411a23d><circle cx="10" cy="10" r="8" stroke="#ff9500" stroke-width="2" data-v-d411a23d></circle><path d="M7 10 L9 12 L13 8" stroke="#ff9500" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d411a23d></path></svg><span data-v-d411a23d>เช่น &quot;หอใน&quot; → &quot;หอพัก&quot; (คะแนน 0.95 = ความหมายใกล้เคียงมาก)</span></li><li class="d-flex align-items-center gap-2 mb-2" data-v-d411a23d><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-d411a23d><circle cx="10" cy="10" r="8" stroke="#34c759" stroke-width="2" data-v-d411a23d></circle><path d="M7 10 L9 12 L13 8" stroke="#34c759" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d411a23d></path></svg><span data-v-d411a23d>ช่วยให้ Chatbot เข้าใจคำที่ผู้ใช้พิมพ์หลากหลายรูปแบบ</span></li><li class="d-flex align-items-center gap-2" data-v-d411a23d><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-d411a23d><circle cx="10" cy="10" r="8" stroke="#007aff" stroke-width="2" data-v-d411a23d></circle><path d="M10 6 L10 11 M10 14 L10 14.5" stroke="#007aff" stroke-width="2" stroke-linecap="round" data-v-d411a23d></path></svg><span data-v-d411a23d>ปรับจูนคะแนนความคล้ายคลึงได้ตามต้องการ (0.00 - 1.00)</span></li></ul><p class="mb-0 small text-warning fw-bold d-flex align-items-center gap-2" data-v-d411a23d><svg class="icon-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" data-v-d411a23d><circle cx="10" cy="10" r="8" stroke="#ff9500" stroke-width="2" data-v-d411a23d></circle><path d="M10 6 L10 11" stroke="#ff9500" stroke-width="2" stroke-linecap="round" data-v-d411a23d></path><circle cx="10" cy="14" r="1" fill="#ff9500" data-v-d411a23d></circle></svg><span data-v-d411a23d>ยิ่งคะแนนสูง ยิ่งมีโอกาสจับคู่มากขึ้น!</span></p></div>',1)),c("div",$,[c("div",P,[c("div",R,[a[12]||(a[12]=u('<svg class="synonyms-stat-svg" width="64" height="64" viewBox="0 0 64 64" fill="none" data-v-d411a23d><circle class="synonyms-stat-circle-bg" cx="32" cy="32" r="24" fill="#ff9500" opacity="0.2" data-v-d411a23d></circle><path class="synonyms-stat-wave" d="M16 32 Q24 26, 32 32 T48 32" stroke="#ff9500" stroke-width="3" fill="none" data-v-d411a23d></path><circle class="synonyms-link-dot synonyms-link-dot-1" cx="24" cy="32" r="3" fill="#ff9500" data-v-d411a23d></circle><circle class="synonyms-link-dot synonyms-link-dot-2" cx="32" cy="32" r="3" fill="#ff6b00" data-v-d411a23d></circle><circle class="synonyms-link-dot synonyms-link-dot-3" cx="40" cy="32" r="3" fill="#ff9500" data-v-d411a23d></circle></svg>',1)),c("div",N,[i(m,{name:"number-change",mode:"out-in"},{default:y(()=>[(n(),o("span",{key:ga.value.total},p(ga.value.total||0),1))]),_:1})]),a[13]||(a[13]=c("div",{class:"stat-label"},"คำพ้องทั้งหมด",-1))])]),c("div",z,[c("div",E,[a[14]||(a[14]=c("svg",{class:"synonyms-stat-svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none"},[c("circle",{class:"synonyms-stat-circle-bg",cx:"32",cy:"32",r:"24",fill:"#34c759",opacity:"0.2"}),c("path",{class:"synonyms-stat-checkmark",d:"M20 32 L28 40 L44 24",stroke:"#34c759","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),c("circle",{class:"synonyms-stat-circle",cx:"32",cy:"32",r:"20",stroke:"#34c759","stroke-width":"3",fill:"none"})],-1)),c("div",G,[i(m,{name:"number-change",mode:"out-in"},{default:y(()=>[(n(),o("span",{key:ga.value.active},p(ga.value.active||0),1))]),_:1})]),a[15]||(a[15]=c("div",{class:"stat-label"},"กำลังใช้งาน",-1))])]),c("div",H,[c("div",J,[a[16]||(a[16]=u('<svg class="synonyms-stat-svg" width="64" height="64" viewBox="0 0 64 64" fill="none" data-v-d411a23d><circle class="synonyms-stat-circle-bg" cx="32" cy="32" r="24" fill="#007aff" opacity="0.2" data-v-d411a23d></circle><path class="synonyms-score-meter" d="M20 44 A16 16 0 1 1 44 44" stroke="#007aff" stroke-width="4" stroke-linecap="round" fill="none" data-v-d411a23d></path><line x1="32" y1="32" x2="32" y2="22" stroke="#007aff" stroke-width="3" stroke-linecap="round" data-v-d411a23d></line><circle cx="32" cy="32" r="4" fill="#007aff" data-v-d411a23d></circle></svg>',1)),c("div",Q,[i(m,{name:"number-change",mode:"out-in"},{default:y(()=>[(n(),o("span",{key:ga.value.avgScore},p(ga.value.avgScore||"0.00"),1))]),_:1})]),a[17]||(a[17]=c("div",{class:"stat-label"},"คะแนนเฉลี่ย",-1))])]),c("div",Z,[c("div",X,[a[18]||(a[18]=c("svg",{class:"synonyms-stat-svg",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none"},[c("circle",{class:"synonyms-stat-circle-bg",cx:"32",cy:"32",r:"24",fill:"#5856d6",opacity:"0.2"}),c("circle",{cx:"26",cy:"28",r:"8",stroke:"#5856d6","stroke-width":"3",fill:"none"}),c("path",{d:"M32 34 L44 46 M40 42 L44 46 L40 50",stroke:"#5856d6","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c("div",Y,[i(m,{name:"number-change",mode:"out-in"},{default:y(()=>[(n(),o("span",{key:ga.value.keywordsWithSynonyms},p(ga.value.keywordsWithSynonyms||0),1))]),_:1})]),a[19]||(a[19]=c("div",{class:"stat-label"},"Keywords ที่มีคำพ้อง",-1))])])]),i(B,{modelValue:ka.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ka.value=e),"sort-options":wa,statuses:xa,"status-label":"สถานะ","show-date-range":!1,"show-date-presets":!1,"show-number-range":!1,onChange:La},null,8,["modelValue"]),c("div",ee,[c("div",ae,[c("div",se,[c("div",te,[a[20]||(a[20]=c("svg",{class:"icon-svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[c("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"#ff9500","stroke-width":"2"}),c("path",{d:"M8 8 L16 8 M8 12 L16 12 M8 16 L12 16",stroke:"#ff9500","stroke-width":"2","stroke-linecap":"round"})],-1)),a[21]||(a[21]=c("h5",{class:"fw-bold m-0"},"Synonyms",-1)),c("span",le,p(ja.value.length)+" items",1)]),c("div",oe,[a[23]||(a[23]=c("svg",{class:"search-icon-svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[c("circle",{cx:"11",cy:"11",r:"7",stroke:"#ff9500","stroke-width":"2"}),c("path",{d:"M16 16 L21 21",stroke:"#ff9500","stroke-width":"2","stroke-linecap":"round"})],-1)),f(c("input",{type:"text",class:"search-input",placeholder:"Search synonym...","onUpdate:modelValue":a[1]||(a[1]=e=>ba.value=e)},null,512),[[h,ba.value]]),ba.value?(n(),o("button",{key:0,class:"search-clear",onClick:a[2]||(a[2]=e=>ba.value="")},[...a[22]||(a[22]=[c("i",{class:"bi bi-x-circle-fill"},null,-1)])])):d("",!0)])])]),c("div",ne,[c("table",ie,[a[30]||(a[30]=c("thead",null,[c("tr",null,[c("th",null,"ID"),c("th",null,"คำที่ผู้ใช้พิมพ์ → Keyword เป้าหมาย"),c("th",null,"คะแนน"),c("th",null,"บทบาท"),c("th",null,"สถานะ"),c("th",null,"การดำเนินการ")])],-1)),c("tbody",null,[i(x,{name:"row-fade"},{default:y(()=>[(n(!0),o(g,null,b(Va.value,e=>(n(),o("tr",{key:e.SynonymID,class:"apple-row"},[c("td",de,p(e.SynonymID),1),c("td",ce,[c("div",re,[c("span",ve,p(e.InputWord),1),a[24]||(a[24]=c("svg",{class:"arrow-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[c("path",{d:"M4 10 L14 10 M10 6 L14 10 L10 14",stroke:"#ff9500","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),c("span",ue,p(e.TargetKeyword||"N/A"),1)])]),c("td",ye,[c("span",{class:k(["synonyms-score-badge",za(e.SimilarityScore)])},[a[25]||(a[25]=c("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},[c("circle",{cx:"7",cy:"7",r:"5",stroke:"currentColor","stroke-width":"2"})],-1)),w(" "+p(parseFloat(e.SimilarityScore).toFixed(2)),1)],2)]),c("td",pe,[c("span",me,p(e.RoleDescription||"คำพ้อง"),1)]),c("td",fe,[c("span",{class:k(["synonyms-status-badge",e.IsActive?"active":"inactive"])},[c("i",{class:k(e.IsActive?"bi bi-check-circle-fill":"bi bi-x-circle")},null,2),w(" "+p(e.IsActive?"Active":"Inactive"),1)],2)]),c("td",he,[c("div",ge,[c("button",{class:k(["btn-action",{inactive:!e.IsActive}]),onClick:a=>async function(e){try{await la.patch(`/synonyms/${e.SynonymID}/toggle`),oa(e.IsActive?"ปิดใช้งานแล้ว":"เปิดใช้งานแล้ว"),e.IsActive=!e.IsActive,await Na()}catch(a){na("ไม่สำเร็จ: "+(a.response?.data?.message||a.message))}}(e),title:e.IsActive?"ปิดใช้งาน":"เปิดใช้งาน"},[(n(),o("svg",ke,[a[26]||(a[26]=c("circle",{cx:"8",cy:"8",r:"6",stroke:"currentColor","stroke-width":"1.5"},null,-1)),e.IsActive?(n(),o("path",we)):(n(),o("path",xe))]))],10,be),c("button",{class:"btn-action btn-edit",onClick:a=>function(e){Aa.value=!0,Ka.value=e.SynonymID,Ba.value={inputWord:e.InputWord||"",targetKeywordId:e.TargetKeywordID||null,similarityScore:parseFloat(e.SimilarityScore)||.8,roleDescription:e.RoleDescription||"คำพ้อง",isActive:!!e.IsActive},Da.value="",C(()=>{Ga()})}(e),title:"แก้ไข"},[...a[27]||(a[27]=[c("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[c("path",{d:"M11 2 L14 5 L5 14 L2 14 L2 11 Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,Le),c("button",{class:"btn-action btn-reject",onClick:a=>async function(e){try{await ia({title:"ยืนยันการลบ",message:`คุณต้องการลบคำพ้อง "<strong>${e.InputWord}</strong> → <strong>${e.TargetKeyword||"N/A"}</strong>" หรือไม่?`,variant:"danger",confirmText:"ลบ",loadingText:"กำลังลบ...",onConfirm:async()=>{await la.delete(`/synonyms/${e.SynonymID}`),oa("ลบคำพ้องสำเร็จ"),await Na()}})}catch(a){na("ลบไม่สำเร็จ: "+(a.response?.data?.message||a.message))}}(e),title:"ลบ"},[...a[28]||(a[28]=[c("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[c("path",{d:"M4 4 L12 12 M12 4 L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])],8,Ie)])])]))),128))]),_:1}),0===ja.value.length?(n(),o("tr",Ce,[...a[29]||(a[29]=[c("td",{colspan:"6",class:"text-center text-muted py-5"},[c("div",{class:"empty-state"},[c("svg",{class:"synonyms-empty-svg",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{class:"synonyms-empty-circle",cx:"60",cy:"60",r:"50",stroke:"#ff9500","stroke-width":"4",fill:"none"}),c("path",{class:"synonyms-empty-link",d:"M40 55 C40 48, 46 42, 53 42 L58 42 C65 42, 71 48, 71 55",stroke:"#ff9500","stroke-width":"4","stroke-linecap":"round",fill:"none"}),c("path",{class:"synonyms-empty-link",d:"M80 65 C80 72, 74 78, 67 78 L62 78 C55 78, 49 72, 49 65",stroke:"#ff9500","stroke-width":"4","stroke-linecap":"round",fill:"none"}),c("circle",{class:"synonyms-empty-sparkle synonyms-empty-sparkle-1",cx:"30",cy:"30",r:"3",fill:"#ffd60a"}),c("circle",{class:"synonyms-empty-sparkle synonyms-empty-sparkle-2",cx:"90",cy:"30",r:"3",fill:"#ff9500"}),c("circle",{class:"synonyms-empty-sparkle synonyms-empty-sparkle-3",cx:"90",cy:"90",r:"3",fill:"#ff6b00"})]),c("p",{class:"mb-0 mt-3 fw-bold"},"ไม่พบคำพ้องที่ตรงกับการค้นหา"),c("small",null,"ลองค้นหาด้วยคำอื่น หรือเพิ่มคำพ้องใหม่")])],-1)])])):d("",!0)])])]),c("div",Se,[c("div",Me," แสดง "+p(_a.value)+" ถึง "+p(Oa.value)+" จาก "+p(ja.value.length)+" รายการ ",1),c("nav",Ae,[c("ul",Ke,[c("li",{class:k(["page-item",{disabled:1===Ia.value}])},[c("a",{class:"page-link",href:"#",onClick:v(Ua,["prevent"]),"aria-label":"First"},"«")],2),c("li",{class:k(["page-item",{disabled:1===Ia.value}])},[c("a",{class:"page-link",href:"#",onClick:v($a,["prevent"]),"aria-label":"Previous"},"‹")],2),(n(!0),o(g,null,b(qa.value,e=>(n(),o("li",{key:e,class:k(["page-item",{active:Ia.value===e}])},[c("a",{class:"page-link page-num rounded-3",href:"#",onClick:v(a=>function(e){Ia.value=e}(e),["prevent"])},p(e),9,We)],2))),128)),c("li",{class:k(["page-item",{disabled:Ia.value===Ta.value||0===Ta.value}])},[c("a",{class:"page-link",href:"#",onClick:v(Pa,["prevent"]),"aria-label":"Next"},"›")],2),c("li",{class:k(["page-item",{disabled:Ia.value===Ta.value||0===Ta.value}])},[c("a",{class:"page-link",href:"#",onClick:v(Ra,["prevent"]),"aria-label":"Last"},"»")],2)])])])])]))])]),c("div",{class:"modal fade",ref_key:"crudModalRef",ref:Sa,tabindex:"-1","aria-hidden":"true"},[c("div",De,[c("div",Be,[c("div",je,[c("div",Te,[c("div",_e,p(Aa.value?"แก้ไขคำพ้อง":"เพิ่มคำพ้องใหม่"),1),c("div",Oe,p(Aa.value?"แก้ไขการจับคู่คำพ้องที่มีอยู่":"เพิ่มการจับคู่คำพ้องกับ Keyword หลัก"),1)]),c("button",{type:"button",class:"btn-close btn-close-custom","aria-label":"Close",onClick:Ha})]),c("div",Ve,[c("form",{onSubmit:v(Ja,["prevent"])},[c("div",qe,[c("div",Fe,[a[32]||(a[32]=c("label",{class:"form-label fw-bold"},[w("คำที่ผู้ใช้พิมพ์ "),c("span",{class:"text-danger"},"*")],-1)),f(c("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>Ba.value.inputWord=e),required:"",placeholder:"เช่น หอใน, เทอม, ค่าเทอม"},null,512),[[h,Ba.value.inputWord]]),a[33]||(a[33]=c("small",{class:"text-muted"},"คำที่ผู้ใช้มักพิมพ์เข้ามา",-1))]),c("div",Ue,[a[35]||(a[35]=c("label",{class:"form-label fw-bold"},[w("Keyword เป้าหมาย "),c("span",{class:"text-danger"},"*")],-1)),f(c("select",{class:"form-select","onUpdate:modelValue":a[4]||(a[4]=e=>Ba.value.targetKeywordId=e),required:""},[a[34]||(a[34]=c("option",{value:null},"-- เลือก Keyword --",-1)),(n(!0),o(g,null,b(ha.value,e=>(n(),o("option",{key:e.KeywordID,value:e.KeywordID},p(e.KeywordText),9,$e))),128))],512),[[L,Ba.value.targetKeywordId,void 0,{number:!0}]]),a[36]||(a[36]=c("small",{class:"text-muted"},"Keyword หลักที่ต้องการจับคู่",-1))]),c("div",Pe,[c("label",Re,[a[37]||(a[37]=w("คะแนนความคล้ายคลึง: ",-1)),c("span",Ne,p(Ba.value.similarityScore.toFixed(2)),1)]),c("div",ze,[c("span",Ee,p(Ba.value.similarityScore.toFixed(2)),1),f(c("input",{type:"range",class:"form-range flex-grow-1","onUpdate:modelValue":a[5]||(a[5]=e=>Ba.value.similarityScore=e),min:"0",max:"1",step:"0.05"},null,512),[[h,Ba.value.similarityScore,void 0,{number:!0}]])]),a[38]||(a[38]=c("div",{class:"d-flex justify-content-between small text-muted mt-1"},[c("span",null,"0.00 (ต่ำ)"),c("span",null,"0.50 (กลาง)"),c("span",null,"1.00 (สูง)")],-1))]),c("div",Ge,[a[39]||(a[39]=c("label",{class:"form-label fw-bold"},"บทบาท/คำอธิบาย",-1)),f(c("input",{type:"text",class:"form-control synonyms-form-control","onUpdate:modelValue":a[6]||(a[6]=e=>Ba.value.roleDescription=e),placeholder:"เช่น คำพ้อง, คำสนับสนุน, คำย่อ"},null,512),[[h,Ba.value.roleDescription]])]),c("div",He,[a[40]||(a[40]=c("label",{class:"form-label fw-bold"},"สถานะ",-1)),c("div",Je,[f(c("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"activeSwitch","onUpdate:modelValue":a[7]||(a[7]=e=>Ba.value.isActive=e),style:{width:"3rem",height:"1.5rem"}},null,512),[[I,Ba.value.isActive]]),c("label",Qe,p(Ba.value.isActive?"เปิดใช้งาน":"ปิดใช้งาน"),1)])])]),Da.value?(n(),o("div",Ze,p(Da.value),1)):d("",!0)],32)]),c("div",Xe,[c("button",{type:"button",class:"btn btn-secondary rounded-3 px-4",onClick:Ha,disabled:Wa.value}," ยกเลิก ",8,Ye),c("button",{type:"button",class:"btn btn-primary rounded-3 px-4",onClick:Ja,disabled:!Fa.value||Wa.value},[Wa.value?(n(),o("span",aa)):d("",!0),Wa.value?d("",!0):(n(),o("i",sa)),w(" "+p(Aa.value?"บันทึกการแก้ไข":"เพิ่มคำพ้อง"),1)],8,ea)])])])],512),i(r(da))]))}},[["__scopeId","data-v-d411a23d"]]);export{ta as default};
