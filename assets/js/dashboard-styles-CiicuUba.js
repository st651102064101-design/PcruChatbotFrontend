const t={FEEDBACKS:"/ws/feedbacks",CHAT_LOGS:"/ws/chat-logs",CATEGORIES:"/ws/categories",KEYWORDS:"/ws/keywords",QUESTIONS_ANSWERS:"/ws/questions-answers",USERS:"/ws/users",ORGANIZATIONS:"/ws/organizations"},e=3e3,n=5,s=3e4;function o(t,o={}){const{onMessage:r,onOpen:c,onClose:a,onError:l,axios:i=null,autoReconnect:u=!0}=o;let S=null,w=0,p=null,d=null,f=!1,O=function(t,e=null){const n=function(t=null){return(t?.defaults?.baseURL||"https://ict.pcru.ac.th/~s651102064101/backend").replace(/\/$/,"").replace(/^http/,"ws")}(e);return`${n}${t.startsWith("/")?t:`/${t}`}`}(t,i);return"undefined"!=typeof window&&(O.startsWith("wss://")&&"https:"!==window.location.protocol&&(O=O.replace(/^wss:\/\//i,"ws://")),O.startsWith("ws://")&&"https:"===window.location.protocol&&(O=O.replace(/^ws:\/\//i,"wss://"))),function t(){try{S=new WebSocket(O),S.onopen=t=>{w=0,s>0&&(d=setInterval(()=>{S&&S.readyState===WebSocket.OPEN&&S.send(JSON.stringify({type:"ping"}))},s)),c&&c(t)},S.onmessage=t=>{try{const e=JSON.parse(t.data);if("pong"===e.type)return;r&&r(e,t)}catch(e){}},S.onerror=t=>{l&&l(t)},S.onclose=s=>{if(d&&(clearInterval(d),d=null),a&&a(s),!f&&u){(-1===n||w<n)&&(w++,p=setTimeout(t,e))}}}catch(o){l&&l(o)}}(),{disconnect:function(){f=!0,p&&(clearTimeout(p),p=null),d&&(clearInterval(d),d=null),S&&(S.close(),S=null)},send:function(t){return!(!S||S.readyState!==WebSocket.OPEN)&&(S.send("string"==typeof t?t:JSON.stringify(t)),!0)},getState:function(){return S?S.readyState:WebSocket.CLOSED},isConnected:function(){return S&&S.readyState===WebSocket.OPEN},get ws(){return S}}}export{t as W,o as c};
